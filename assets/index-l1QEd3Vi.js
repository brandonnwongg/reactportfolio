function YL(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function A0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var tA={exports:{}},gg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EC;function qL(){if(EC)return gg;EC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var l in r)l!=="key"&&(s[l]=r[l])}else s=r;return r=s.ref,{$$typeof:n,type:i,key:a,ref:r!==void 0?r:null,props:s}}return gg.Fragment=e,gg.jsx=t,gg.jsxs=t,gg}var MC;function KL(){return MC||(MC=1,tA.exports=qL()),tA.exports}var re=KL(),nA={exports:{}},ln={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC;function JL(){if(TC)return ln;TC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(W){return W===null||typeof W!="object"?null:(W=g&&W[g]||W["@@iterator"],typeof W=="function"?W:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,M={};function A(W,ae,Se){this.props=W,this.context=ae,this.refs=M,this.updater=Se||x}A.prototype.isReactComponent={},A.prototype.setState=function(W,ae){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ae,"setState")},A.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function S(){}S.prototype=A.prototype;function C(W,ae,Se){this.props=W,this.context=ae,this.refs=M,this.updater=Se||x}var R=C.prototype=new S;R.constructor=C,b(R,A.prototype),R.isPureReactComponent=!0;var B=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function I(W,ae,Se,Ae,ie,_e){return Se=_e.ref,{$$typeof:n,type:W,key:ae,ref:Se!==void 0?Se:null,props:_e}}function z(W,ae){return I(W.type,ae,void 0,void 0,void 0,W.props)}function L(W){return typeof W=="object"&&W!==null&&W.$$typeof===n}function O(W){var ae={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(Se){return ae[Se]})}var G=/\/+/g;function $(W,ae){return typeof W=="object"&&W!==null&&W.key!=null?O(""+W.key):ae.toString(36)}function Q(){}function ce(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(Q,Q):(W.status="pending",W.then(function(ae){W.status==="pending"&&(W.status="fulfilled",W.value=ae)},function(ae){W.status==="pending"&&(W.status="rejected",W.reason=ae)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function fe(W,ae,Se,Ae,ie){var _e=typeof W;(_e==="undefined"||_e==="boolean")&&(W=null);var Ue=!1;if(W===null)Ue=!0;else switch(_e){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(W.$$typeof){case n:case e:Ue=!0;break;case m:return Ue=W._init,fe(Ue(W._payload),ae,Se,Ae,ie)}}if(Ue)return ie=ie(W),Ue=Ae===""?"."+$(W,0):Ae,B(ie)?(Se="",Ue!=null&&(Se=Ue.replace(G,"$&/")+"/"),fe(ie,ae,Se,"",function(gt){return gt})):ie!=null&&(L(ie)&&(ie=z(ie,Se+(ie.key==null||W&&W.key===ie.key?"":(""+ie.key).replace(G,"$&/")+"/")+Ue)),ae.push(ie)),1;Ue=0;var ke=Ae===""?".":Ae+":";if(B(W))for(var Ye=0;Ye<W.length;Ye++)Ae=W[Ye],_e=ke+$(Ae,Ye),Ue+=fe(Ae,ae,Se,_e,ie);else if(Ye=v(W),typeof Ye=="function")for(W=Ye.call(W),Ye=0;!(Ae=W.next()).done;)Ae=Ae.value,_e=ke+$(Ae,Ye++),Ue+=fe(Ae,ae,Se,_e,ie);else if(_e==="object"){if(typeof W.then=="function")return fe(ce(W),ae,Se,Ae,ie);throw ae=String(W),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function k(W,ae,Se){if(W==null)return W;var Ae=[],ie=0;return fe(W,Ae,"","",function(_e){return ae.call(Se,_e,ie++)}),Ae}function K(W){if(W._status===-1){var ae=W._result;ae=ae(),ae.then(function(Se){(W._status===0||W._status===-1)&&(W._status=1,W._result=Se)},function(Se){(W._status===0||W._status===-1)&&(W._status=2,W._result=Se)}),W._status===-1&&(W._status=0,W._result=ae)}if(W._status===1)return W._result.default;throw W._result}var ee=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)};function me(){}return ln.Children={map:k,forEach:function(W,ae,Se){k(W,function(){ae.apply(this,arguments)},Se)},count:function(W){var ae=0;return k(W,function(){ae++}),ae},toArray:function(W){return k(W,function(ae){return ae})||[]},only:function(W){if(!L(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},ln.Component=A,ln.Fragment=t,ln.Profiler=r,ln.PureComponent=C,ln.StrictMode=i,ln.Suspense=u,ln.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,ln.__COMPILER_RUNTIME={__proto__:null,c:function(W){return N.H.useMemoCache(W)}},ln.cache=function(W){return function(){return W.apply(null,arguments)}},ln.cloneElement=function(W,ae,Se){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var Ae=b({},W.props),ie=W.key,_e=void 0;if(ae!=null)for(Ue in ae.ref!==void 0&&(_e=void 0),ae.key!==void 0&&(ie=""+ae.key),ae)!U.call(ae,Ue)||Ue==="key"||Ue==="__self"||Ue==="__source"||Ue==="ref"&&ae.ref===void 0||(Ae[Ue]=ae[Ue]);var Ue=arguments.length-2;if(Ue===1)Ae.children=Se;else if(1<Ue){for(var ke=Array(Ue),Ye=0;Ye<Ue;Ye++)ke[Ye]=arguments[Ye+2];Ae.children=ke}return I(W.type,ie,void 0,void 0,_e,Ae)},ln.createContext=function(W){return W={$$typeof:a,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:s,_context:W},W},ln.createElement=function(W,ae,Se){var Ae,ie={},_e=null;if(ae!=null)for(Ae in ae.key!==void 0&&(_e=""+ae.key),ae)U.call(ae,Ae)&&Ae!=="key"&&Ae!=="__self"&&Ae!=="__source"&&(ie[Ae]=ae[Ae]);var Ue=arguments.length-2;if(Ue===1)ie.children=Se;else if(1<Ue){for(var ke=Array(Ue),Ye=0;Ye<Ue;Ye++)ke[Ye]=arguments[Ye+2];ie.children=ke}if(W&&W.defaultProps)for(Ae in Ue=W.defaultProps,Ue)ie[Ae]===void 0&&(ie[Ae]=Ue[Ae]);return I(W,_e,void 0,void 0,null,ie)},ln.createRef=function(){return{current:null}},ln.forwardRef=function(W){return{$$typeof:l,render:W}},ln.isValidElement=L,ln.lazy=function(W){return{$$typeof:m,_payload:{_status:-1,_result:W},_init:K}},ln.memo=function(W,ae){return{$$typeof:h,type:W,compare:ae===void 0?null:ae}},ln.startTransition=function(W){var ae=N.T,Se={};N.T=Se;try{var Ae=W(),ie=N.S;ie!==null&&ie(Se,Ae),typeof Ae=="object"&&Ae!==null&&typeof Ae.then=="function"&&Ae.then(me,ee)}catch(_e){ee(_e)}finally{N.T=ae}},ln.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},ln.use=function(W){return N.H.use(W)},ln.useActionState=function(W,ae,Se){return N.H.useActionState(W,ae,Se)},ln.useCallback=function(W,ae){return N.H.useCallback(W,ae)},ln.useContext=function(W){return N.H.useContext(W)},ln.useDebugValue=function(){},ln.useDeferredValue=function(W,ae){return N.H.useDeferredValue(W,ae)},ln.useEffect=function(W,ae,Se){var Ae=N.H;if(typeof Se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ae.useEffect(W,ae)},ln.useId=function(){return N.H.useId()},ln.useImperativeHandle=function(W,ae,Se){return N.H.useImperativeHandle(W,ae,Se)},ln.useInsertionEffect=function(W,ae){return N.H.useInsertionEffect(W,ae)},ln.useLayoutEffect=function(W,ae){return N.H.useLayoutEffect(W,ae)},ln.useMemo=function(W,ae){return N.H.useMemo(W,ae)},ln.useOptimistic=function(W,ae){return N.H.useOptimistic(W,ae)},ln.useReducer=function(W,ae,Se){return N.H.useReducer(W,ae,Se)},ln.useRef=function(W){return N.H.useRef(W)},ln.useState=function(W){return N.H.useState(W)},ln.useSyncExternalStore=function(W,ae,Se){return N.H.useSyncExternalStore(W,ae,Se)},ln.useTransition=function(){return N.H.useTransition()},ln.version="19.1.0",ln}var CC;function Up(){return CC||(CC=1,nA.exports=JL()),nA.exports}var F=Up();const oe=A0(F),$L=YL({__proto__:null,default:oe},[F]);var iA={exports:{}},vg={},rA={exports:{}},sA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wC;function ZL(){return wC||(wC=1,function(n){function e(k,K){var ee=k.length;k.push(K);e:for(;0<ee;){var me=ee-1>>>1,W=k[me];if(0<r(W,K))k[me]=K,k[ee]=W,ee=me;else break e}}function t(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var K=k[0],ee=k.pop();if(ee!==K){k[0]=ee;e:for(var me=0,W=k.length,ae=W>>>1;me<ae;){var Se=2*(me+1)-1,Ae=k[Se],ie=Se+1,_e=k[ie];if(0>r(Ae,ee))ie<W&&0>r(_e,Ae)?(k[me]=_e,k[ie]=ee,me=ie):(k[me]=Ae,k[Se]=ee,me=Se);else if(ie<W&&0>r(_e,ee))k[me]=_e,k[ie]=ee,me=ie;else break e}}return K}function r(k,K){var ee=k.sortIndex-K.sortIndex;return ee!==0?ee:k.id-K.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var u=[],h=[],m=1,g=null,v=3,x=!1,b=!1,M=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function B(k){for(var K=t(h);K!==null;){if(K.callback===null)i(h);else if(K.startTime<=k)i(h),K.sortIndex=K.expirationTime,e(u,K);else break;K=t(h)}}function N(k){if(M=!1,B(k),!b)if(t(u)!==null)b=!0,U||(U=!0,$());else{var K=t(h);K!==null&&fe(N,K.startTime-k)}}var U=!1,I=-1,z=5,L=-1;function O(){return A?!0:!(n.unstable_now()-L<z)}function G(){if(A=!1,U){var k=n.unstable_now();L=k;var K=!0;try{e:{b=!1,M&&(M=!1,C(I),I=-1),x=!0;var ee=v;try{t:{for(B(k),g=t(u);g!==null&&!(g.expirationTime>k&&O());){var me=g.callback;if(typeof me=="function"){g.callback=null,v=g.priorityLevel;var W=me(g.expirationTime<=k);if(k=n.unstable_now(),typeof W=="function"){g.callback=W,B(k),K=!0;break t}g===t(u)&&i(u),B(k)}else i(u);g=t(u)}if(g!==null)K=!0;else{var ae=t(h);ae!==null&&fe(N,ae.startTime-k),K=!1}}break e}finally{g=null,v=ee,x=!1}K=void 0}}finally{K?$():U=!1}}}var $;if(typeof R=="function")$=function(){R(G)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ce=Q.port2;Q.port1.onmessage=G,$=function(){ce.postMessage(null)}}else $=function(){S(G,0)};function fe(k,K){I=S(function(){k(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(k){switch(v){case 1:case 2:case 3:var K=3;break;default:K=v}var ee=v;v=K;try{return k()}finally{v=ee}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(k,K){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var ee=v;v=k;try{return K()}finally{v=ee}},n.unstable_scheduleCallback=function(k,K,ee){var me=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?me+ee:me):ee=me,k){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ee+W,k={id:m++,callback:K,priorityLevel:k,startTime:ee,expirationTime:W,sortIndex:-1},ee>me?(k.sortIndex=ee,e(h,k),t(u)===null&&k===t(h)&&(M?(C(I),I=-1):M=!0,fe(N,ee-me))):(k.sortIndex=W,e(u,k),b||x||(b=!0,U||(U=!0,$()))),k},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(k){var K=v;return function(){var ee=v;v=K;try{return k.apply(this,arguments)}finally{v=ee}}}}(sA)),sA}var RC;function QL(){return RC||(RC=1,rA.exports=ZL()),rA.exports}var aA={exports:{}},cs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DC;function eN(){if(DC)return cs;DC=1;var n=Up();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(u,h,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:u,containerInfo:h,implementation:m}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return cs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cs.createPortal=function(u,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(u,h,null,m)},cs.flushSync=function(u){var h=a.T,m=i.p;try{if(a.T=null,i.p=2,u)return u()}finally{a.T=h,i.p=m,i.d.f()}},cs.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(u,h))},cs.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},cs.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var m=h.as,g=l(m,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?i.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:x}):m==="script"&&i.d.X(u,{crossOrigin:g,integrity:v,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},cs.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=l(h.as,h.crossOrigin);i.d.M(u,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(u)},cs.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,g=l(m,h.crossOrigin);i.d.L(u,m,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},cs.preloadModule=function(u,h){if(typeof u=="string")if(h){var m=l(h.as,h.crossOrigin);i.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(u)},cs.requestFormReset=function(u){i.d.r(u)},cs.unstable_batchedUpdates=function(u,h){return u(h)},cs.useFormState=function(u,h,m){return a.H.useFormState(u,h,m)},cs.useFormStatus=function(){return a.H.useHostTransitionStatus()},cs.version="19.1.0",cs}var BC;function j5(){if(BC)return aA.exports;BC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),aA.exports=eN(),aA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OC;function tN(){if(OC)return vg;OC=1;var n=QL(),e=Up(),t=j5();function i(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var c=o,p=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(p=c.return),o=c.return;while(o)}return c.tag===3?p:null}function a(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(s(o)!==o)throw Error(i(188))}function u(o){var c=o.alternate;if(!c){if(c=s(o),c===null)throw Error(i(188));return c!==o?null:o}for(var p=o,y=c;;){var E=p.return;if(E===null)break;var w=E.alternate;if(w===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===w.child){for(w=E.child;w;){if(w===p)return l(E),o;if(w===y)return l(E),c;w=w.sibling}throw Error(i(188))}if(p.return!==y.return)p=E,y=w;else{for(var H=!1,j=E.child;j;){if(j===p){H=!0,p=E,y=w;break}if(j===y){H=!0,y=E,p=w;break}j=j.sibling}if(!H){for(j=w.child;j;){if(j===p){H=!0,p=w,y=E;break}if(j===y){H=!0,y=w,p=E;break}j=j.sibling}if(!H)throw Error(i(189))}}if(p.alternate!==y)throw Error(i(190))}if(p.tag!==3)throw Error(i(188));return p.stateNode.current===p?o:c}function h(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=h(o),c!==null)return c;o=o.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),R=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function $(o){return o===null||typeof o!="object"?null:(o=G&&o[G]||o["@@iterator"],typeof o=="function"?o:null)}var Q=Symbol.for("react.client.reference");function ce(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===Q?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case b:return"Fragment";case A:return"Profiler";case M:return"StrictMode";case N:return"Suspense";case U:return"SuspenseList";case L:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case R:return(o.displayName||"Context")+".Provider";case C:return(o._context.displayName||"Context")+".Consumer";case B:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case I:return c=o.displayName||null,c!==null?c:ce(o.type)||"Memo";case z:c=o._payload,o=o._init;try{return ce(o(c))}catch{}}return null}var fe=Array.isArray,k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},me=[],W=-1;function ae(o){return{current:o}}function Se(o){0>W||(o.current=me[W],me[W]=null,W--)}function Ae(o,c){W++,me[W]=o.current,o.current=c}var ie=ae(null),_e=ae(null),Ue=ae(null),ke=ae(null);function Ye(o,c){switch(Ae(Ue,c),Ae(_e,o),Ae(ie,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?Z3(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=Z3(c),o=Q3(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Se(ie),Ae(ie,o)}function gt(){Se(ie),Se(_e),Se(Ue)}function _t(o){o.memoizedState!==null&&Ae(ke,o);var c=ie.current,p=Q3(c,o.type);c!==p&&(Ae(_e,o),Ae(ie,p))}function an(o){_e.current===o&&(Se(ie),Se(_e)),ke.current===o&&(Se(ke),fg._currentValue=ee)}var Pt=Object.prototype.hasOwnProperty,bt=n.unstable_scheduleCallback,Z=n.unstable_cancelCallback,Qe=n.unstable_shouldYield,Xe=n.unstable_requestPaint,je=n.unstable_now,He=n.unstable_getCurrentPriorityLevel,lt=n.unstable_ImmediatePriority,Ge=n.unstable_UserBlockingPriority,J=n.unstable_NormalPriority,V=n.unstable_LowPriority,te=n.unstable_IdlePriority,ge=n.log,Ne=n.unstable_setDisableYieldValue,Te=null,tt=null;function $e(o){if(typeof ge=="function"&&Ne(o),tt&&typeof tt.setStrictMode=="function")try{tt.setStrictMode(Te,o)}catch{}}var ct=Math.clz32?Math.clz32:ut,Mt=Math.log,qe=Math.LN2;function ut(o){return o>>>=0,o===0?32:31-(Mt(o)/qe|0)|0}var vt=256,St=4194304;function it(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function ue(o,c,p){var y=o.pendingLanes;if(y===0)return 0;var E=0,w=o.suspendedLanes,H=o.pingedLanes;o=o.warmLanes;var j=y&134217727;return j!==0?(y=j&~w,y!==0?E=it(y):(H&=j,H!==0?E=it(H):p||(p=j&~o,p!==0&&(E=it(p))))):(j=y&~w,j!==0?E=it(j):H!==0?E=it(H):p||(p=y&~o,p!==0&&(E=it(p)))),E===0?0:c!==0&&c!==E&&(c&w)===0&&(w=E&-E,p=c&-c,w>=p||w===32&&(p&4194048)!==0)?c:E}function Le(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function rt(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function le(){var o=vt;return vt<<=1,(vt&4194048)===0&&(vt=256),o}function Je(){var o=St;return St<<=1,(St&62914560)===0&&(St=4194304),o}function Oe(o){for(var c=[],p=0;31>p;p++)c.push(o);return c}function Ie(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function ht(o,c,p,y,E,w){var H=o.pendingLanes;o.pendingLanes=p,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=p,o.entangledLanes&=p,o.errorRecoveryDisabledLanes&=p,o.shellSuspendCounter=0;var j=o.entanglements,ne=o.expirationTimes,Ee=o.hiddenUpdates;for(p=H&~p;0<p;){var ze=31-ct(p),We=1<<ze;j[ze]=0,ne[ze]=-1;var Ce=Ee[ze];if(Ce!==null)for(Ee[ze]=null,ze=0;ze<Ce.length;ze++){var De=Ce[ze];De!==null&&(De.lane&=-536870913)}p&=~We}y!==0&&at(o,y,0),w!==0&&E===0&&o.tag!==0&&(o.suspendedLanes|=w&~(H&~c))}function at(o,c,p){o.pendingLanes|=c,o.suspendedLanes&=~c;var y=31-ct(c);o.entangledLanes|=c,o.entanglements[y]=o.entanglements[y]|1073741824|p&4194090}function wt(o,c){var p=o.entangledLanes|=c;for(o=o.entanglements;p;){var y=31-ct(p),E=1<<y;E&c|o[y]&c&&(o[y]|=c),p&=~E}}function on(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function On(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function en(){var o=K.p;return o!==0?o:(o=window.event,o===void 0?32:yC(o.type))}function Ii(o,c){var p=K.p;try{return K.p=o,c()}finally{K.p=p}}var ai=Math.random().toString(36).slice(2),Fi="__reactFiber$"+ai,Yi="__reactProps$"+ai,Rr="__reactContainer$"+ai,es="__reactEvents$"+ai,Uf="__reactListeners$"+ai,pa="__reactHandles$"+ai,zr="__reactResources$"+ai,ma="__reactMarker$"+ai;function Hn(o){delete o[Fi],delete o[Yi],delete o[es],delete o[Uf],delete o[pa]}function ga(o){var c=o[Fi];if(c)return c;for(var p=o.parentNode;p;){if(c=p[Rr]||p[Fi]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(o=iC(o);o!==null;){if(p=o[Fi])return p;o=iC(o)}return c}o=p,p=o.parentNode}return null}function va(o){if(o=o[Fi]||o[Rr]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function dl(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(i(33))}function Ao(o){var c=o[zr];return c||(c=o[zr]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function zi(o){o[ma]=!0}var ru=new Set,su={};function ya(o,c){X(o,c),X(o+"Capture",c)}function X(o,c){for(su[o]=c,o=0;o<c.length;o++)ru.add(c[o])}var pe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),we={},Re={};function ye(o){return Pt.call(Re,o)?!0:Pt.call(we,o)?!1:pe.test(o)?Re[o]=!0:(we[o]=!0,!1)}function Ke(o,c,p){if(ye(c))if(p===null)o.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var y=c.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+p)}}function st(o,c,p){if(p===null)o.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+p)}}function ot(o,c,p,y){if(y===null)o.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(p);return}o.setAttributeNS(c,p,""+y)}}var yt,Ft;function Dt(o){if(yt===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);yt=c&&c[1]||"",Ft=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+yt+o+Ft}var Tt=!1;function un(o,c){if(!o||Tt)return"";Tt=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var We=function(){throw Error()};if(Object.defineProperty(We.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(We,[])}catch(De){var Ce=De}Reflect.construct(o,[],We)}else{try{We.call()}catch(De){Ce=De}o.call(We.prototype)}}else{try{throw Error()}catch(De){Ce=De}(We=o())&&typeof We.catch=="function"&&We.catch(function(){})}}catch(De){if(De&&Ce&&typeof De.stack=="string")return[De.stack,Ce.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=y.DetermineComponentFrameRoot(),H=w[0],j=w[1];if(H&&j){var ne=H.split(`
`),Ee=j.split(`
`);for(E=y=0;y<ne.length&&!ne[y].includes("DetermineComponentFrameRoot");)y++;for(;E<Ee.length&&!Ee[E].includes("DetermineComponentFrameRoot");)E++;if(y===ne.length||E===Ee.length)for(y=ne.length-1,E=Ee.length-1;1<=y&&0<=E&&ne[y]!==Ee[E];)E--;for(;1<=y&&0<=E;y--,E--)if(ne[y]!==Ee[E]){if(y!==1||E!==1)do if(y--,E--,0>E||ne[y]!==Ee[E]){var ze=`
`+ne[y].replace(" at new "," at ");return o.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",o.displayName)),ze}while(1<=y&&0<=E);break}}}finally{Tt=!1,Error.prepareStackTrace=p}return(p=o?o.displayName||o.name:"")?Dt(p):""}function Tn(o){switch(o.tag){case 26:case 27:case 5:return Dt(o.type);case 16:return Dt("Lazy");case 13:return Dt("Suspense");case 19:return Dt("SuspenseList");case 0:case 15:return un(o.type,!1);case 11:return un(o.type.render,!1);case 1:return un(o.type,!0);case 31:return Dt("Activity");default:return""}}function oi(o){try{var c="";do c+=Tn(o),o=o.return;while(o);return c}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function dn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function gn(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Bt(o){var c=gn(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),y=""+o[c];if(!o.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var E=p.get,w=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return E.call(this)},set:function(H){y=""+H,w.call(this,H)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(H){y=""+H},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function fi(o){o._valueTracker||(o._valueTracker=Bt(o))}function An(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var p=c.getValue(),y="";return o&&(y=gn(o)?o.checked?"true":"false":o.value),o=y,o!==p?(c.setValue(o),!0):!1}function dr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Ia=/[\n"\\]/g;function jn(o){return o.replace(Ia,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Fa(o,c,p,y,E,w,H,j){o.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?o.type=H:o.removeAttribute("type"),c!=null?H==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+dn(c)):o.value!==""+dn(c)&&(o.value=""+dn(c)):H!=="submit"&&H!=="reset"||o.removeAttribute("value"),c!=null?pr(o,H,dn(c)):p!=null?pr(o,H,dn(p)):y!=null&&o.removeAttribute("value"),E==null&&w!=null&&(o.defaultChecked=!!w),E!=null&&(o.checked=E&&typeof E!="function"&&typeof E!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?o.name=""+dn(j):o.removeAttribute("name")}function Gn(o,c,p,y,E,w,H,j){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(o.type=w),c!=null||p!=null){if(!(w!=="submit"&&w!=="reset"||c!=null))return;p=p!=null?""+dn(p):"",c=c!=null?""+dn(c):p,j||c===o.value||(o.value=c),o.defaultValue=c}y=y??E,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=j?o.checked:!!y,o.defaultChecked=!!y,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(o.name=H)}function pr(o,c,p){c==="number"&&dr(o.ownerDocument)===o||o.defaultValue===""+p||(o.defaultValue=""+p)}function Hi(o,c,p,y){if(o=o.options,c){c={};for(var E=0;E<p.length;E++)c["$"+p[E]]=!0;for(p=0;p<o.length;p++)E=c.hasOwnProperty("$"+o[p].value),o[p].selected!==E&&(o[p].selected=E),E&&y&&(o[p].defaultSelected=!0)}else{for(p=""+dn(p),c=null,E=0;E<o.length;E++){if(o[E].value===p){o[E].selected=!0,y&&(o[E].defaultSelected=!0);return}c!==null||o[E].disabled||(c=o[E])}c!==null&&(c.selected=!0)}}function nr(o,c,p){if(c!=null&&(c=""+dn(c),c!==o.value&&(o.value=c),p==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=p!=null?""+dn(p):""}function ir(o,c,p,y){if(c==null){if(y!=null){if(p!=null)throw Error(i(92));if(fe(y)){if(1<y.length)throw Error(i(93));y=y[0]}p=y}p==null&&(p=""),c=p}p=dn(c),o.defaultValue=p,y=o.textContent,y===p&&y!==""&&y!==null&&(o.value=y)}function Hr(o,c){if(c){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=c;return}}o.textContent=c}var za=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lf(o,c,p){var y=c.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":y?o.setProperty(c,p):typeof p!="number"||p===0||za.has(c)?c==="float"?o.cssFloat=p:o[c]=(""+p).trim():o[c]=p+"px"}function Nf(o,c,p){if(c!=null&&typeof c!="object")throw Error(i(62));if(o=o.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||c!=null&&c.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var E in c)y=c[E],c.hasOwnProperty(E)&&p[E]!==y&&Lf(o,E,y)}else for(var w in c)c.hasOwnProperty(w)&&Lf(o,w,c[w])}function B0(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var im=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),py=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function If(o){return py.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var O0=null;function P0(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var pl=null,lc=null;function rm(o){var c=va(o);if(c&&(o=c.stateNode)){var p=o[Yi]||null;e:switch(o=c.stateNode,c.type){case"input":if(Fa(o,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),c=p.name,p.type==="radio"&&c!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+jn(""+c)+'"][type="radio"]'),c=0;c<p.length;c++){var y=p[c];if(y!==o&&y.form===o.form){var E=y[Yi]||null;if(!E)throw Error(i(90));Fa(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(c=0;c<p.length;c++)y=p[c],y.form===o.form&&An(y)}break e;case"textarea":nr(o,p.value,p.defaultValue);break e;case"select":c=p.value,c!=null&&Hi(o,!!p.multiple,c,!1)}}}var Ff=!1;function sm(o,c,p){if(Ff)return o(c,p);Ff=!0;try{var y=o(c);return y}finally{if(Ff=!1,(pl!==null||lc!==null)&&(to(),pl&&(c=pl,o=lc,lc=pl=null,rm(c),o)))for(c=0;c<o.length;c++)rm(o[c])}}function au(o,c){var p=o.stateNode;if(p===null)return null;var y=p[Yi]||null;if(y===null)return null;p=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(i(231,c,typeof p));return p}var Ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zf=!1;if(Ha)try{var ou={};Object.defineProperty(ou,"passive",{get:function(){zf=!0}}),window.addEventListener("test",ou,ou),window.removeEventListener("test",ou,ou)}catch{zf=!1}var Eo=null,am=null,U0=null;function om(){if(U0)return U0;var o,c=am,p=c.length,y,E="value"in Eo?Eo.value:Eo.textContent,w=E.length;for(o=0;o<p&&c[o]===E[o];o++);var H=p-o;for(y=1;y<=H&&c[p-y]===E[w-y];y++);return U0=E.slice(o,1<y?1-y:void 0)}function ml(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function lu(){return!0}function Hf(){return!1}function Gr(o){function c(p,y,E,w,H){this._reactName=p,this._targetInst=E,this.type=y,this.nativeEvent=w,this.target=H,this.currentTarget=null;for(var j in o)o.hasOwnProperty(j)&&(p=o[j],this[j]=p?p(w):w[j]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?lu:Hf,this.isPropagationStopped=Hf,this}return m(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=lu)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=lu)},persist:function(){},isPersistent:lu}),c}var gl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cu=Gr(gl),uu=m({},gl,{view:0,detail:0}),my=Gr(uu),Mo,fu,hu,du=m({},uu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vf,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==hu&&(hu&&o.type==="mousemove"?(Mo=o.screenX-hu.screenX,fu=o.screenY-hu.screenY):fu=Mo=0,hu=o),Mo)},movementY:function(o){return"movementY"in o?o.movementY:fu}}),lm=Gr(du),gy=m({},du,{dataTransfer:0}),xS=Gr(gy),mr=m({},uu,{relatedTarget:0}),L0=Gr(mr),vy=m({},gl,{animationName:0,elapsedTime:0,pseudoElement:0}),yy=Gr(vy),xy=m({},gl,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),_y=Gr(xy),Gf=m({},gl,{data:0}),N0=Gr(Gf),by={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ay={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cm(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=Ay[o])?!!c[o]:!1}function Vf(){return cm}var Ey=m({},uu,{key:function(o){if(o.key){var c=by[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=ml(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Sy[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vf,charCode:function(o){return o.type==="keypress"?ml(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ml(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),um=Gr(Ey),fm=m({},du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I0=Gr(fm),My=m({},uu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vf}),hm=Gr(My),Ty=m({},gl,{propertyName:0,elapsedTime:0,pseudoElement:0}),To=Gr(Ty),dm=m({},du,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),_S=Gr(dm),Cy=m({},gl,{newState:0,oldState:0}),vl=Gr(Cy),Co=[9,13,27,32],kf=Ha&&"CompositionEvent"in window,cc=null;Ha&&"documentMode"in document&&(cc=document.documentMode);var jf=Ha&&"TextEvent"in window&&!cc,Xf=Ha&&(!kf||cc&&8<cc&&11>=cc),yl=" ",gr=!1;function Wf(o,c){switch(o){case"keyup":return Co.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pm(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var xl=!1;function Yf(o,c){switch(o){case"compositionend":return pm(c);case"keypress":return c.which!==32?null:(gr=!0,yl);case"textInput":return o=c.data,o===yl&&gr?null:o;default:return null}}function mm(o,c){if(xl)return o==="compositionend"||!kf&&Wf(o,c)?(o=om(),U0=am=Eo=null,xl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Xf&&c.locale!=="ko"?null:c.data;default:return null}}var F0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gm(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!F0[o.type]:c==="textarea"}function ts(o,c,p,y){pl?lc?lc.push(y):lc=[y]:pl=y,c=T1(c,"onChange"),0<c.length&&(p=new cu("onChange","change",null,p,y),o.push({event:p,listeners:c}))}var pu=null,uc=null;function wy(o){Y3(o,0)}function qf(o){var c=dl(o);if(An(c))return o}function z0(o,c){if(o==="change")return c}var H0=!1;if(Ha){var G0;if(Ha){var mu="oninput"in document;if(!mu){var gu=document.createElement("div");gu.setAttribute("oninput","return;"),mu=typeof gu.oninput=="function"}G0=mu}else G0=!1;H0=G0&&(!document.documentMode||9<document.documentMode)}function li(){pu&&(pu.detachEvent("onpropertychange",Ry),uc=pu=null)}function Ry(o){if(o.propertyName==="value"&&qf(uc)){var c=[];ts(c,uc,o,P0(o)),sm(wy,c)}}function bS(o,c,p){o==="focusin"?(li(),pu=c,uc=p,pu.attachEvent("onpropertychange",Ry)):o==="focusout"&&li()}function Dy(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return qf(uc)}function Kf(o,c){if(o==="click")return qf(c)}function _l(o,c){if(o==="input"||o==="change")return qf(c)}function By(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var ns=typeof Object.is=="function"?Object.is:By;function xa(o,c){if(ns(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var p=Object.keys(o),y=Object.keys(c);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!Pt.call(c,E)||!ns(o[E],c[E]))return!1}return!0}function is(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function vm(o,c){var p=is(o);o=0;for(var y;p;){if(p.nodeType===3){if(y=o+p.textContent.length,o<=c&&y>=c)return{node:p,offset:c-o};o=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=is(p)}}function ym(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?ym(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function xm(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=dr(o.document);c instanceof o.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)o=c.contentWindow;else break;c=dr(o.document)}return c}function Jf(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var _m=Ha&&"documentMode"in document&&11>=document.documentMode,wo=null,V0=null,$f=null,k0=!1;function bm(o,c,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;k0||wo==null||wo!==dr(y)||(y=wo,"selectionStart"in y&&Jf(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),$f&&xa($f,y)||($f=y,y=T1(V0,"onSelect"),0<y.length&&(c=new cu("onSelect","select",null,c,p),o.push({event:c,listeners:y}),c.target=wo)))}function vr(o,c){var p={};return p[o.toLowerCase()]=c.toLowerCase(),p["Webkit"+o]="webkit"+c,p["Moz"+o]="moz"+c,p}var bl={animationend:vr("Animation","AnimationEnd"),animationiteration:vr("Animation","AnimationIteration"),animationstart:vr("Animation","AnimationStart"),transitionrun:vr("Transition","TransitionRun"),transitionstart:vr("Transition","TransitionStart"),transitioncancel:vr("Transition","TransitionCancel"),transitionend:vr("Transition","TransitionEnd")},j0={},Oy={};Ha&&(Oy=document.createElement("div").style,"AnimationEvent"in window||(delete bl.animationend.animation,delete bl.animationiteration.animation,delete bl.animationstart.animation),"TransitionEvent"in window||delete bl.transitionend.transition);function Ro(o){if(j0[o])return j0[o];if(!bl[o])return o;var c=bl[o],p;for(p in c)if(c.hasOwnProperty(p)&&p in Oy)return j0[o]=c[p];return o}var Vr=Ro("animationend"),Sm=Ro("animationiteration"),rs=Ro("animationstart"),Py=Ro("transitionrun"),Do=Ro("transitionstart"),vu=Ro("transitioncancel"),Bo=Ro("transitionend"),X0=new Map,Zf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zf.push("scrollEnd");function rr(o,c){X0.set(o,c),ya(c,[o])}var Am=new WeakMap;function yr(o,c){if(typeof o=="object"&&o!==null){var p=Am.get(o);return p!==void 0?p:(c={value:o,source:c,stack:oi(c)},Am.set(o,c),c)}return{value:o,source:c,stack:oi(c)}}var Dr=[],Ys=0,W0=0;function Qf(){for(var o=Ys,c=W0=Ys=0;c<o;){var p=Dr[c];Dr[c++]=null;var y=Dr[c];Dr[c++]=null;var E=Dr[c];Dr[c++]=null;var w=Dr[c];if(Dr[c++]=null,y!==null&&E!==null){var H=y.pending;H===null?E.next=E:(E.next=H.next,H.next=E),y.pending=E}w!==0&&Em(p,E,w)}}function Sl(o,c,p,y){Dr[Ys++]=o,Dr[Ys++]=c,Dr[Ys++]=p,Dr[Ys++]=y,W0|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function Y0(o,c,p,y){return Sl(o,c,p,y),yu(o)}function Oo(o,c){return Sl(o,null,null,c),yu(o)}function Em(o,c,p){o.lanes|=p;var y=o.alternate;y!==null&&(y.lanes|=p);for(var E=!1,w=o.return;w!==null;)w.childLanes|=p,y=w.alternate,y!==null&&(y.childLanes|=p),w.tag===22&&(o=w.stateNode,o===null||o._visibility&1||(E=!0)),o=w,w=w.return;return o.tag===3?(w=o.stateNode,E&&c!==null&&(E=31-ct(p),o=w.hiddenUpdates,y=o[E],y===null?o[E]=[c]:y.push(c),c.lane=p|536870912),w):null}function yu(o){if(50<eo)throw eo=0,wc=null,Error(i(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var Al={};function Mm(o,c,p,y){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(o,c,p,y){return new Mm(o,c,p,y)}function eh(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Mi(o,c){var p=o.alternate;return p===null?(p=ss(o.tag,c,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=c,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&65011712,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,c=o.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p.refCleanup=o.refCleanup,p}function Tm(o,c){o.flags&=65011714;var p=o.alternate;return p===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type,c=p.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function sr(o,c,p,y,E,w){var H=0;if(y=o,typeof o=="function")eh(o)&&(H=1);else if(typeof o=="string")H=UL(o,p,ie.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case L:return o=ss(31,p,c,E),o.elementType=L,o.lanes=w,o;case b:return El(p.children,E,w,c);case M:H=8,E|=24;break;case A:return o=ss(12,p,c,E|2),o.elementType=A,o.lanes=w,o;case N:return o=ss(13,p,c,E),o.elementType=N,o.lanes=w,o;case U:return o=ss(19,p,c,E),o.elementType=U,o.lanes=w,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case S:case R:H=10;break e;case C:H=9;break e;case B:H=11;break e;case I:H=14;break e;case z:H=16,y=null;break e}H=29,p=Error(i(130,o===null?"null":typeof o,"")),y=null}return c=ss(H,p,c,E),c.elementType=o,c.type=y,c.lanes=w,c}function El(o,c,p,y){return o=ss(7,o,y,c),o.lanes=p,o}function th(o,c,p){return o=ss(6,o,null,c),o.lanes=p,o}function q0(o,c,p){return c=ss(4,o.children!==null?o.children:[],o.key,c),c.lanes=p,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var xu=[],as=0,nh=null,_u=0,xr=[],_s=0,Ml=null,Ga=1,Va="";function Po(o,c){xu[as++]=_u,xu[as++]=nh,nh=o,_u=c}function K0(o,c,p){xr[_s++]=Ga,xr[_s++]=Va,xr[_s++]=Ml,Ml=o;var y=Ga;o=Va;var E=32-ct(y)-1;y&=~(1<<E),p+=1;var w=32-ct(c)+E;if(30<w){var H=E-E%5;w=(y&(1<<H)-1).toString(32),y>>=H,E-=H,Ga=1<<32-ct(c)+E|p<<E|y,Va=w+o}else Ga=1<<w|p<<E|y,Va=o}function Cm(o){o.return!==null&&(Po(o,1),K0(o,1,0))}function wm(o){for(;o===nh;)nh=xu[--as],xu[as]=null,_u=xu[--as],xu[as]=null;for(;o===Ml;)Ml=xr[--_s],xr[_s]=null,Va=xr[--_s],xr[_s]=null,Ga=xr[--_s],xr[_s]=null}var kr=null,hi=null,Dn=!1,qs=null,bs=!1,J0=Error(i(519));function Tl(o){var c=Error(i(418,""));throw fc(yr(c,o)),J0}function Uy(o){var c=o.stateNode,p=o.type,y=o.memoizedProps;switch(c[Fi]=o,c[Yi]=y,p){case"dialog":_n("cancel",c),_n("close",c);break;case"iframe":case"object":case"embed":_n("load",c);break;case"video":case"audio":for(p=0;p<sg.length;p++)_n(sg[p],c);break;case"source":_n("error",c);break;case"img":case"image":case"link":_n("error",c),_n("load",c);break;case"details":_n("toggle",c);break;case"input":_n("invalid",c),Gn(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),fi(c);break;case"select":_n("invalid",c);break;case"textarea":_n("invalid",c),ir(c,y.value,y.defaultValue,y.children),fi(c)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||c.textContent===""+p||y.suppressHydrationWarning===!0||$3(c.textContent,p)?(y.popover!=null&&(_n("beforetoggle",c),_n("toggle",c)),y.onScroll!=null&&_n("scroll",c),y.onScrollEnd!=null&&_n("scrollend",c),y.onClick!=null&&(c.onclick=C1),c=!0):c=!1,c||Tl(o)}function Rm(o){for(kr=o.return;kr;)switch(kr.tag){case 5:case 13:bs=!1;return;case 27:case 3:bs=!0;return;default:kr=kr.return}}function _a(o){if(o!==kr)return!1;if(!Dn)return Rm(o),Dn=!0,!1;var c=o.tag,p;if((p=c!==3&&c!==27)&&((p=c===5)&&(p=o.type,p=!(p!=="form"&&p!=="button")||GS(o.type,o.memoizedProps)),p=!p),p&&hi&&Tl(o),Rm(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(p=o.data,p==="/$"){if(c===0){hi=Yo(o.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++;o=o.nextSibling}hi=null}}else c===27?(c=hi,Xu(o.type)?(o=XS,XS=null,hi=o):hi=c):hi=kr?Yo(o.stateNode.nextSibling):null;return!0}function bu(){hi=kr=null,Dn=!1}function Pn(){var o=qs;return o!==null&&(Lt===null?Lt=o:Lt.push.apply(Lt,o),qs=null),o}function fc(o){qs===null?qs=[o]:qs.push(o)}var Dm=ae(null),Cl=null,Uo=null;function wl(o,c,p){Ae(Dm,c._currentValue),c._currentValue=p}function Lo(o){o._currentValue=Dm.current,Se(Dm)}function Bm(o,c,p){for(;o!==null;){var y=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),o===p)break;o=o.return}}function ih(o,c,p,y){var E=o.child;for(E!==null&&(E.return=o);E!==null;){var w=E.dependencies;if(w!==null){var H=E.child;w=w.firstContext;e:for(;w!==null;){var j=w;w=E;for(var ne=0;ne<c.length;ne++)if(j.context===c[ne]){w.lanes|=p,j=w.alternate,j!==null&&(j.lanes|=p),Bm(w.return,p,o),y||(H=null);break e}w=j.next}}else if(E.tag===18){if(H=E.return,H===null)throw Error(i(341));H.lanes|=p,w=H.alternate,w!==null&&(w.lanes|=p),Bm(H,p,o),H=null}else H=E.child;if(H!==null)H.return=E;else for(H=E;H!==null;){if(H===o){H=null;break}if(E=H.sibling,E!==null){E.return=H.return,H=E;break}H=H.return}E=H}}function Ks(o,c,p,y){o=null;for(var E=c,w=!1;E!==null;){if(!w){if((E.flags&524288)!==0)w=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var H=E.alternate;if(H===null)throw Error(i(387));if(H=H.memoizedProps,H!==null){var j=E.type;ns(E.pendingProps.value,H.value)||(o!==null?o.push(j):o=[j])}}else if(E===ke.current){if(H=E.alternate,H===null)throw Error(i(387));H.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(o!==null?o.push(fg):o=[fg])}E=E.return}o!==null&&ih(c,o,p,y),c.flags|=262144}function rh(o){for(o=o.firstContext;o!==null;){if(!ns(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ka(o){Cl=o,Uo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function vi(o){return $0(Cl,o)}function sh(o,c){return Cl===null&&ka(o),$0(o,c)}function $0(o,c){var p=c._currentValue;if(c={context:c,memoizedValue:p,next:null},Uo===null){if(o===null)throw Error(i(308));Uo=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else Uo=Uo.next=c;return p}var Om=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(p,y){o.push(y)}};this.abort=function(){c.aborted=!0,o.forEach(function(p){return p()})}},SS=n.unstable_scheduleCallback,Ly=n.unstable_NormalPriority,Gi={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Z0(){return{controller:new Om,data:new Map,refCount:0}}function Su(o){o.refCount--,o.refCount===0&&SS(Ly,function(){o.controller.abort()})}var Au=null,ah=0,Jt=0,Eu=null;function Ss(o,c){if(Au===null){var p=Au=[];ah=0,Jt=OS(),Eu={status:"pending",value:void 0,then:function(y){p.push(y)}}}return ah++,c.then(Q0,Q0),c}function Q0(){if(--ah===0&&Au!==null){Eu!==null&&(Eu.status="fulfilled");var o=Au;Au=null,Jt=0,Eu=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function AS(o,c){var p=[],y={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return o.then(function(){y.status="fulfilled",y.value=c;for(var E=0;E<p.length;E++)(0,p[E])(c)},function(E){for(y.status="rejected",y.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),y}var oh=k.S;k.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&Ss(o,c),oh!==null&&oh(o,c)};var Js=ae(null);function Rl(){var o=Js.current;return o!==null?o:Yt.pooledCache}function lh(o,c){c===null?Ae(Js,Js.current):Ae(Js,c.pool)}function ed(){var o=Rl();return o===null?null:{parent:Gi._currentValue,pool:o}}var ch=Error(i(460)),Pm=Error(i(474)),ba=Error(i(542)),uh={then:function(){}};function td(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Mu(){}function nd(o,c,p){switch(p=o[p],p===void 0?o.push(c):p!==c&&(c.then(Mu,Mu),c=p),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,Ny(o),o;default:if(typeof c.status=="string")c.then(Mu,Mu);else{if(o=Yt,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=c,o.status="pending",o.then(function(y){if(c.status==="pending"){var E=c;E.status="fulfilled",E.value=y}},function(y){if(c.status==="pending"){var E=c;E.status="rejected",E.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,Ny(o),o}throw $s=c,ch}}var $s=null;function Um(){if($s===null)throw Error(i(459));var o=$s;return $s=null,o}function Ny(o){if(o===ch||o===ba)throw Error(i(483))}var No=!1;function Lm(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vt(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ja(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Io(o,c,p){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(Un&2)!==0){var E=y.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),y.pending=c,c=yu(o),Em(o,null,p),c}return Sl(o,y,c,p),yu(o)}function hc(o,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194048)!==0)){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,wt(o,p)}}function Tu(o,c){var p=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,w=null;if(p=p.firstBaseUpdate,p!==null){do{var H={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};w===null?E=w=H:w=w.next=H,p=p.next}while(p!==null);w===null?E=w=c:w=w.next=c}else E=w=c;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:w,shared:y.shared,callbacks:y.callbacks},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=c:o.next=c,p.lastBaseUpdate=c}var Nm=!1;function fh(){if(Nm){var o=Eu;if(o!==null)throw o}}function Cu(o,c,p,y){Nm=!1;var E=o.updateQueue;No=!1;var w=E.firstBaseUpdate,H=E.lastBaseUpdate,j=E.shared.pending;if(j!==null){E.shared.pending=null;var ne=j,Ee=ne.next;ne.next=null,H===null?w=Ee:H.next=Ee,H=ne;var ze=o.alternate;ze!==null&&(ze=ze.updateQueue,j=ze.lastBaseUpdate,j!==H&&(j===null?ze.firstBaseUpdate=Ee:j.next=Ee,ze.lastBaseUpdate=ne))}if(w!==null){var We=E.baseState;H=0,ze=Ee=ne=null,j=w;do{var Ce=j.lane&-536870913,De=Ce!==j.lane;if(De?(Ot&Ce)===Ce:(y&Ce)===Ce){Ce!==0&&Ce===Jt&&(Nm=!0),ze!==null&&(ze=ze.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var jt=o,zt=j;Ce=c;var ti=p;switch(zt.tag){case 1:if(jt=zt.payload,typeof jt=="function"){We=jt.call(ti,We,Ce);break e}We=jt;break e;case 3:jt.flags=jt.flags&-65537|128;case 0:if(jt=zt.payload,Ce=typeof jt=="function"?jt.call(ti,We,Ce):jt,Ce==null)break e;We=m({},We,Ce);break e;case 2:No=!0}}Ce=j.callback,Ce!==null&&(o.flags|=64,De&&(o.flags|=8192),De=E.callbacks,De===null?E.callbacks=[Ce]:De.push(Ce))}else De={lane:Ce,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ze===null?(Ee=ze=De,ne=We):ze=ze.next=De,H|=Ce;if(j=j.next,j===null){if(j=E.shared.pending,j===null)break;De=j,j=De.next,De.next=null,E.lastBaseUpdate=De,E.shared.pending=null}}while(!0);ze===null&&(ne=We),E.baseState=ne,E.firstBaseUpdate=Ee,E.lastBaseUpdate=ze,w===null&&(E.shared.lanes=0),Ra|=H,o.lanes=H,o.memoizedState=We}}function wu(o,c){if(typeof o!="function")throw Error(i(191,o));o.call(c)}function Iy(o,c){var p=o.callbacks;if(p!==null)for(o.callbacks=null,o=0;o<p.length;o++)wu(p[o],c)}var Ru=ae(null),id=ae(0);function Fy(o,c){o=ia,Ae(id,o),Ae(Ru,c),ia=o|c.baseLanes}function Im(){Ae(id,ia),Ae(Ru,Ru.current)}function hh(){ia=id.current,Se(Ru),Se(id)}var Fo=0,$t=null,zn=null,Vi=null,rd=!1,Dl=!1,jr=!1,qi=0,Zs=0,_r=null,zy=0;function Ti(){throw Error(i(321))}function Br(o,c){if(c===null)return!1;for(var p=0;p<c.length&&p<o.length;p++)if(!ns(o[p],c[p]))return!1;return!0}function zo(o,c,p,y,E,w){return Fo=w,$t=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,k.H=o===null||o.memoizedState===null?dd:Qm,jr=!1,w=p(y,E),jr=!1,Dl&&(w=Gy(c,p,y,E)),Hy(o),w}function Hy(o){k.H=mh;var c=zn!==null&&zn.next!==null;if(Fo=0,Vi=zn=$t=null,rd=!1,Zs=0,_r=null,c)throw Error(i(300));o===null||ar||(o=o.dependencies,o!==null&&rh(o)&&(ar=!0))}function Gy(o,c,p,y){$t=o;var E=0;do{if(Dl&&(_r=null),Zs=0,Dl=!1,25<=E)throw Error(i(301));if(E+=1,Vi=zn=null,o.updateQueue!=null){var w=o.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}k.H=d1,w=c(p,y)}while(Dl);return w}function ES(){var o=k.H,c=o.useState()[0];return c=typeof c.then=="function"?Sa(c):c,o=o.useState()[0],(zn!==null?zn.memoizedState:null)!==o&&($t.flags|=1024),c}function Fm(){var o=qi!==0;return qi=0,o}function sd(o,c,p){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~p}function zm(o){if(rd){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}rd=!1}Fo=0,Vi=zn=$t=null,Dl=!1,Zs=qi=0,_r=null}function Xr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vi===null?$t.memoizedState=Vi=o:Vi=Vi.next=o,Vi}function ki(){if(zn===null){var o=$t.alternate;o=o!==null?o.memoizedState:null}else o=zn.next;var c=Vi===null?$t.memoizedState:Vi.next;if(c!==null)Vi=c,zn=o;else{if(o===null)throw $t.alternate===null?Error(i(467)):Error(i(310));zn=o,o={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},Vi===null?$t.memoizedState=Vi=o:Vi=Vi.next=o}return Vi}function Bl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sa(o){var c=Zs;return Zs+=1,_r===null&&(_r=[]),o=nd(_r,o,c),c=$t,(Vi===null?c.memoizedState:Vi.next)===null&&(c=c.alternate,k.H=c===null||c.memoizedState===null?dd:Qm),o}function ad(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Sa(o);if(o.$$typeof===R)return vi(o)}throw Error(i(438,String(o)))}function Hm(o){var c=null,p=$t.updateQueue;if(p!==null&&(c=p.memoCache),c==null){var y=$t.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(E){return E.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),p===null&&(p=Bl(),$t.updateQueue=p),p.memoCache=c,p=c.data[c.index],p===void 0)for(p=c.data[c.index]=Array(o),y=0;y<o;y++)p[y]=O;return c.index++,p}function Ho(o,c){return typeof c=="function"?c(o):c}function Ol(o){var c=ki();return Gm(c,zn,o)}function Gm(o,c,p){var y=o.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=p;var E=o.baseQueue,w=y.pending;if(w!==null){if(E!==null){var H=E.next;E.next=w.next,w.next=H}c.baseQueue=E=w,y.pending=null}if(w=o.baseState,E===null)o.memoizedState=w;else{c=E.next;var j=H=null,ne=null,Ee=c,ze=!1;do{var We=Ee.lane&-536870913;if(We!==Ee.lane?(Ot&We)===We:(Fo&We)===We){var Ce=Ee.revertLane;if(Ce===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),We===Jt&&(ze=!0);else if((Fo&Ce)===Ce){Ee=Ee.next,Ce===Jt&&(ze=!0);continue}else We={lane:0,revertLane:Ee.revertLane,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},ne===null?(j=ne=We,H=w):ne=ne.next=We,$t.lanes|=Ce,Ra|=Ce;We=Ee.action,jr&&p(w,We),w=Ee.hasEagerState?Ee.eagerState:p(w,We)}else Ce={lane:We,revertLane:Ee.revertLane,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},ne===null?(j=ne=Ce,H=w):ne=ne.next=Ce,$t.lanes|=We,Ra|=We;Ee=Ee.next}while(Ee!==null&&Ee!==c);if(ne===null?H=w:ne.next=j,!ns(w,o.memoizedState)&&(ar=!0,ze&&(p=Eu,p!==null)))throw p;o.memoizedState=w,o.baseState=H,o.baseQueue=ne,y.lastRenderedState=w}return E===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function Vm(o){var c=ki(),p=c.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=o;var y=p.dispatch,E=p.pending,w=c.memoizedState;if(E!==null){p.pending=null;var H=E=E.next;do w=o(w,H.action),H=H.next;while(H!==E);ns(w,c.memoizedState)||(ar=!0),c.memoizedState=w,c.baseQueue===null&&(c.baseState=w),p.lastRenderedState=w}return[w,y]}function Vy(o,c,p){var y=$t,E=ki(),w=Dn;if(w){if(p===void 0)throw Error(i(407));p=p()}else p=c();var H=!ns((zn||E).memoizedState,p);H&&(E.memoizedState=p,ar=!0),E=E.queue;var j=jy.bind(null,y,E,o);if(Ou(2048,8,j,[o]),E.getSnapshot!==c||H||Vi!==null&&Vi.memoizedState.tag&1){if(y.flags|=2048,Bu(9,dh(),ky.bind(null,y,E,p,c),null),Yt===null)throw Error(i(349));w||(Fo&124)!==0||Du(y,c,p)}return p}function Du(o,c,p){o.flags|=16384,o={getSnapshot:c,value:p},c=$t.updateQueue,c===null?(c=Bl(),$t.updateQueue=c,c.stores=[o]):(p=c.stores,p===null?c.stores=[o]:p.push(o))}function ky(o,c,p,y){c.value=p,c.getSnapshot=y,Xy(c)&&Wy(o)}function jy(o,c,p){return p(function(){Xy(c)&&Wy(o)})}function Xy(o){var c=o.getSnapshot;o=o.value;try{var p=c();return!ns(o,p)}catch{return!0}}function Wy(o){var c=Oo(o,2);c!==null&&qr(c,o,2)}function km(o){var c=Xr();if(typeof o=="function"){var p=o;if(o=p(),jr){$e(!0);try{p()}finally{$e(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:o},c}function Yy(o,c,p,y){return o.baseState=p,Gm(o,zn,typeof y=="function"?y:Ho)}function MS(o,c,p,y,E){if(hd(o))throw Error(i(485));if(o=c.action,o!==null){var w={payload:E,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){w.listeners.push(H)}};k.T!==null?p(!0):w.isTransition=!1,y(w),p=c.pending,p===null?(w.next=c.pending=w,qy(c,w)):(w.next=p.next,c.pending=p.next=w)}}function qy(o,c){var p=c.action,y=c.payload,E=o.state;if(c.isTransition){var w=k.T,H={};k.T=H;try{var j=p(E,y),ne=k.S;ne!==null&&ne(H,j),Ky(o,c,j)}catch(Ee){jm(o,c,Ee)}finally{k.T=w}}else try{w=p(E,y),Ky(o,c,w)}catch(Ee){jm(o,c,Ee)}}function Ky(o,c,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){Jy(o,c,y)},function(y){return jm(o,c,y)}):Jy(o,c,p)}function Jy(o,c,p){c.status="fulfilled",c.value=p,$y(c),o.state=p,c=o.pending,c!==null&&(p=c.next,p===c?o.pending=null:(p=p.next,c.next=p,qy(o,p)))}function jm(o,c,p){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=p,$y(c),c=c.next;while(c!==y)}o.action=null}function $y(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function Xm(o,c){return c}function Zy(o,c){if(Dn){var p=Yt.formState;if(p!==null){e:{var y=$t;if(Dn){if(hi){t:{for(var E=hi,w=bs;E.nodeType!==8;){if(!w){E=null;break t}if(E=Yo(E.nextSibling),E===null){E=null;break t}}w=E.data,E=w==="F!"||w==="F"?E:null}if(E){hi=Yo(E.nextSibling),y=E.data==="F!";break e}}Tl(y)}y=!1}y&&(c=p[0])}}return p=Xr(),p.memoizedState=p.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xm,lastRenderedState:c},p.queue=y,p=f1.bind(null,$t,y),y.dispatch=p,y=km(!1),w=fd.bind(null,$t,!1,y.queue),y=Xr(),E={state:c,dispatch:null,action:o,pending:null},y.queue=E,p=MS.bind(null,$t,E,w,p),E.dispatch=p,y.memoizedState=o,[c,p,!1]}function Qy(o){var c=ki();return e1(c,zn,o)}function e1(o,c,p){if(c=Gm(o,c,Xm)[0],o=Ol(Ho)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var y=Sa(c)}catch(H){throw H===ch?ba:H}else y=c;c=ki();var E=c.queue,w=E.dispatch;return p!==c.memoizedState&&($t.flags|=2048,Bu(9,dh(),TS.bind(null,E,p),null)),[y,w,o]}function TS(o,c){o.action=c}function t1(o){var c=ki(),p=zn;if(p!==null)return e1(c,p,o);ki(),c=c.memoizedState,p=ki();var y=p.queue.dispatch;return p.memoizedState=o,[c,y,!1]}function Bu(o,c,p,y){return o={tag:o,create:p,deps:y,inst:c,next:null},c=$t.updateQueue,c===null&&(c=Bl(),$t.updateQueue=c),p=c.lastEffect,p===null?c.lastEffect=o.next=o:(y=p.next,p.next=o,o.next=y,c.lastEffect=o),o}function dh(){return{destroy:void 0,resource:void 0}}function Wm(){return ki().memoizedState}function od(o,c,p,y){var E=Xr();y=y===void 0?null:y,$t.flags|=o,E.memoizedState=Bu(1|c,dh(),p,y)}function Ou(o,c,p,y){var E=ki();y=y===void 0?null:y;var w=E.memoizedState.inst;zn!==null&&y!==null&&Br(y,zn.memoizedState.deps)?E.memoizedState=Bu(c,w,p,y):($t.flags|=o,E.memoizedState=Bu(1|c,w,p,y))}function Ym(o,c){od(8390656,8,o,c)}function qm(o,c){Ou(2048,8,o,c)}function ld(o,c){return Ou(4,2,o,c)}function cd(o,c){return Ou(4,4,o,c)}function n1(o,c){if(typeof c=="function"){o=o();var p=c(o);return function(){typeof p=="function"?p():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function i1(o,c,p){p=p!=null?p.concat([o]):null,Ou(4,4,n1.bind(null,c,o),p)}function Km(){}function r1(o,c){var p=ki();c=c===void 0?null:c;var y=p.memoizedState;return c!==null&&Br(c,y[1])?y[0]:(p.memoizedState=[o,c],o)}function Jm(o,c){var p=ki();c=c===void 0?null:c;var y=p.memoizedState;if(c!==null&&Br(c,y[1]))return y[0];if(y=o(),jr){$e(!0);try{o()}finally{$e(!1)}}return p.memoizedState=[y,c],y}function ud(o,c,p){return p===void 0||(Fo&1073741824)!==0?o.memoizedState=c:(o.memoizedState=p,o=Ed(),$t.lanes|=o,Ra|=o,p)}function s1(o,c,p,y){return ns(p,c)?p:Ru.current!==null?(o=ud(o,p,y),ns(o,c)||(ar=!0),o):(Fo&42)===0?(ar=!0,o.memoizedState=p):(o=Ed(),$t.lanes|=o,Ra|=o,c)}function a1(o,c,p,y,E){var w=K.p;K.p=w!==0&&8>w?w:8;var H=k.T,j={};k.T=j,fd(o,!1,c,p);try{var ne=E(),Ee=k.S;if(Ee!==null&&Ee(j,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var ze=AS(ne,y);ph(o,c,ze,_i(o))}else ph(o,c,y,_i(o))}catch(We){ph(o,c,{then:function(){},status:"rejected",reason:We},_i())}finally{K.p=w,k.T=H}}function CS(){}function $m(o,c,p,y){if(o.tag!==5)throw Error(i(476));var E=o1(o).queue;a1(o,E,c,ee,p===null?CS:function(){return l1(o),p(y)})}function o1(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:ee},next:null};var p={};return c.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:p},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function l1(o){var c=o1(o).next.queue;ph(o,c,{},_i())}function Zm(){return vi(fg)}function c1(){return ki().memoizedState}function u1(){return ki().memoizedState}function wS(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var p=_i();o=ja(p);var y=Io(c,o,p);y!==null&&(qr(y,c,p),hc(y,c,p)),c={cache:Z0()},o.payload=c;return}c=c.return}}function RS(o,c,p){var y=_i();p={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},hd(o)?h1(c,p):(p=Y0(o,c,p,y),p!==null&&(qr(p,o,y),As(p,c,y)))}function f1(o,c,p){var y=_i();ph(o,c,p,y)}function ph(o,c,p,y){var E={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(hd(o))h1(c,E);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=c.lastRenderedReducer,w!==null))try{var H=c.lastRenderedState,j=w(H,p);if(E.hasEagerState=!0,E.eagerState=j,ns(j,H))return Sl(o,c,E,0),Yt===null&&Qf(),!1}catch{}finally{}if(p=Y0(o,c,E,y),p!==null)return qr(p,o,y),As(p,c,y),!0}return!1}function fd(o,c,p,y){if(y={lane:2,revertLane:OS(),action:y,hasEagerState:!1,eagerState:null,next:null},hd(o)){if(c)throw Error(i(479))}else c=Y0(o,p,y,2),c!==null&&qr(c,o,2)}function hd(o){var c=o.alternate;return o===$t||c!==null&&c===$t}function h1(o,c){Dl=rd=!0;var p=o.pending;p===null?c.next=c:(c.next=p.next,p.next=c),o.pending=c}function As(o,c,p){if((p&4194048)!==0){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,wt(o,p)}}var mh={readContext:vi,use:ad,useCallback:Ti,useContext:Ti,useEffect:Ti,useImperativeHandle:Ti,useLayoutEffect:Ti,useInsertionEffect:Ti,useMemo:Ti,useReducer:Ti,useRef:Ti,useState:Ti,useDebugValue:Ti,useDeferredValue:Ti,useTransition:Ti,useSyncExternalStore:Ti,useId:Ti,useHostTransitionStatus:Ti,useFormState:Ti,useActionState:Ti,useOptimistic:Ti,useMemoCache:Ti,useCacheRefresh:Ti},dd={readContext:vi,use:ad,useCallback:function(o,c){return Xr().memoizedState=[o,c===void 0?null:c],o},useContext:vi,useEffect:Ym,useImperativeHandle:function(o,c,p){p=p!=null?p.concat([o]):null,od(4194308,4,n1.bind(null,c,o),p)},useLayoutEffect:function(o,c){return od(4194308,4,o,c)},useInsertionEffect:function(o,c){od(4,2,o,c)},useMemo:function(o,c){var p=Xr();c=c===void 0?null:c;var y=o();if(jr){$e(!0);try{o()}finally{$e(!1)}}return p.memoizedState=[y,c],y},useReducer:function(o,c,p){var y=Xr();if(p!==void 0){var E=p(c);if(jr){$e(!0);try{p(c)}finally{$e(!1)}}}else E=c;return y.memoizedState=y.baseState=E,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:E},y.queue=o,o=o.dispatch=RS.bind(null,$t,o),[y.memoizedState,o]},useRef:function(o){var c=Xr();return o={current:o},c.memoizedState=o},useState:function(o){o=km(o);var c=o.queue,p=f1.bind(null,$t,c);return c.dispatch=p,[o.memoizedState,p]},useDebugValue:Km,useDeferredValue:function(o,c){var p=Xr();return ud(p,o,c)},useTransition:function(){var o=km(!1);return o=a1.bind(null,$t,o.queue,!0,!1),Xr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,p){var y=$t,E=Xr();if(Dn){if(p===void 0)throw Error(i(407));p=p()}else{if(p=c(),Yt===null)throw Error(i(349));(Ot&124)!==0||Du(y,c,p)}E.memoizedState=p;var w={value:p,getSnapshot:c};return E.queue=w,Ym(jy.bind(null,y,w,o),[o]),y.flags|=2048,Bu(9,dh(),ky.bind(null,y,w,p,c),null),p},useId:function(){var o=Xr(),c=Yt.identifierPrefix;if(Dn){var p=Va,y=Ga;p=(y&~(1<<32-ct(y)-1)).toString(32)+p,c="«"+c+"R"+p,p=qi++,0<p&&(c+="H"+p.toString(32)),c+="»"}else p=zy++,c="«"+c+"r"+p.toString(32)+"»";return o.memoizedState=c},useHostTransitionStatus:Zm,useFormState:Zy,useActionState:Zy,useOptimistic:function(o){var c=Xr();c.memoizedState=c.baseState=o;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=p,c=fd.bind(null,$t,!0,p),p.dispatch=c,[o,c]},useMemoCache:Hm,useCacheRefresh:function(){return Xr().memoizedState=wS.bind(null,$t)}},Qm={readContext:vi,use:ad,useCallback:r1,useContext:vi,useEffect:qm,useImperativeHandle:i1,useInsertionEffect:ld,useLayoutEffect:cd,useMemo:Jm,useReducer:Ol,useRef:Wm,useState:function(){return Ol(Ho)},useDebugValue:Km,useDeferredValue:function(o,c){var p=ki();return s1(p,zn.memoizedState,o,c)},useTransition:function(){var o=Ol(Ho)[0],c=ki().memoizedState;return[typeof o=="boolean"?o:Sa(o),c]},useSyncExternalStore:Vy,useId:c1,useHostTransitionStatus:Zm,useFormState:Qy,useActionState:Qy,useOptimistic:function(o,c){var p=ki();return Yy(p,zn,o,c)},useMemoCache:Hm,useCacheRefresh:u1},d1={readContext:vi,use:ad,useCallback:r1,useContext:vi,useEffect:qm,useImperativeHandle:i1,useInsertionEffect:ld,useLayoutEffect:cd,useMemo:Jm,useReducer:Vm,useRef:Wm,useState:function(){return Vm(Ho)},useDebugValue:Km,useDeferredValue:function(o,c){var p=ki();return zn===null?ud(p,o,c):s1(p,zn.memoizedState,o,c)},useTransition:function(){var o=Vm(Ho)[0],c=ki().memoizedState;return[typeof o=="boolean"?o:Sa(o),c]},useSyncExternalStore:Vy,useId:c1,useHostTransitionStatus:Zm,useFormState:t1,useActionState:t1,useOptimistic:function(o,c){var p=ki();return zn!==null?Yy(p,zn,o,c):(p.baseState=o,[o,p.queue.dispatch])},useMemoCache:Hm,useCacheRefresh:u1},dc=null,gh=0;function vh(o){var c=gh;return gh+=1,dc===null&&(dc=[]),nd(dc,o,c)}function Pu(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function pd(o,c){throw c.$$typeof===g?Error(i(525)):(o=Object.prototype.toString.call(c),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function p1(o){var c=o._init;return c(o._payload)}function m1(o){function c(ve,de){if(o){var be=ve.deletions;be===null?(ve.deletions=[de],ve.flags|=16):be.push(de)}}function p(ve,de){if(!o)return null;for(;de!==null;)c(ve,de),de=de.sibling;return null}function y(ve){for(var de=new Map;ve!==null;)ve.key!==null?de.set(ve.key,ve):de.set(ve.index,ve),ve=ve.sibling;return de}function E(ve,de){return ve=Mi(ve,de),ve.index=0,ve.sibling=null,ve}function w(ve,de,be){return ve.index=be,o?(be=ve.alternate,be!==null?(be=be.index,be<de?(ve.flags|=67108866,de):be):(ve.flags|=67108866,de)):(ve.flags|=1048576,de)}function H(ve){return o&&ve.alternate===null&&(ve.flags|=67108866),ve}function j(ve,de,be,Ve){return de===null||de.tag!==6?(de=th(be,ve.mode,Ve),de.return=ve,de):(de=E(de,be),de.return=ve,de)}function ne(ve,de,be,Ve){var Et=be.type;return Et===b?ze(ve,de,be.props.children,Ve,be.key):de!==null&&(de.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===z&&p1(Et)===de.type)?(de=E(de,be.props),Pu(de,be),de.return=ve,de):(de=sr(be.type,be.key,be.props,null,ve.mode,Ve),Pu(de,be),de.return=ve,de)}function Ee(ve,de,be,Ve){return de===null||de.tag!==4||de.stateNode.containerInfo!==be.containerInfo||de.stateNode.implementation!==be.implementation?(de=q0(be,ve.mode,Ve),de.return=ve,de):(de=E(de,be.children||[]),de.return=ve,de)}function ze(ve,de,be,Ve,Et){return de===null||de.tag!==7?(de=El(be,ve.mode,Ve,Et),de.return=ve,de):(de=E(de,be),de.return=ve,de)}function We(ve,de,be){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return de=th(""+de,ve.mode,be),de.return=ve,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case v:return be=sr(de.type,de.key,de.props,null,ve.mode,be),Pu(be,de),be.return=ve,be;case x:return de=q0(de,ve.mode,be),de.return=ve,de;case z:var Ve=de._init;return de=Ve(de._payload),We(ve,de,be)}if(fe(de)||$(de))return de=El(de,ve.mode,be,null),de.return=ve,de;if(typeof de.then=="function")return We(ve,vh(de),be);if(de.$$typeof===R)return We(ve,sh(ve,de),be);pd(ve,de)}return null}function Ce(ve,de,be,Ve){var Et=de!==null?de.key:null;if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return Et!==null?null:j(ve,de,""+be,Ve);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case v:return be.key===Et?ne(ve,de,be,Ve):null;case x:return be.key===Et?Ee(ve,de,be,Ve):null;case z:return Et=be._init,be=Et(be._payload),Ce(ve,de,be,Ve)}if(fe(be)||$(be))return Et!==null?null:ze(ve,de,be,Ve,null);if(typeof be.then=="function")return Ce(ve,de,vh(be),Ve);if(be.$$typeof===R)return Ce(ve,de,sh(ve,be),Ve);pd(ve,be)}return null}function De(ve,de,be,Ve,Et){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return ve=ve.get(be)||null,j(de,ve,""+Ve,Et);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case v:return ve=ve.get(Ve.key===null?be:Ve.key)||null,ne(de,ve,Ve,Et);case x:return ve=ve.get(Ve.key===null?be:Ve.key)||null,Ee(de,ve,Ve,Et);case z:var yn=Ve._init;return Ve=yn(Ve._payload),De(ve,de,be,Ve,Et)}if(fe(Ve)||$(Ve))return ve=ve.get(be)||null,ze(de,ve,Ve,Et,null);if(typeof Ve.then=="function")return De(ve,de,be,vh(Ve),Et);if(Ve.$$typeof===R)return De(ve,de,be,sh(de,Ve),Et);pd(de,Ve)}return null}function jt(ve,de,be,Ve){for(var Et=null,yn=null,Rt=de,Ht=de=0,Ur=null;Rt!==null&&Ht<be.length;Ht++){Rt.index>Ht?(Ur=Rt,Rt=null):Ur=Rt.sibling;var Nn=Ce(ve,Rt,be[Ht],Ve);if(Nn===null){Rt===null&&(Rt=Ur);break}o&&Rt&&Nn.alternate===null&&c(ve,Rt),de=w(Nn,de,Ht),yn===null?Et=Nn:yn.sibling=Nn,yn=Nn,Rt=Ur}if(Ht===be.length)return p(ve,Rt),Dn&&Po(ve,Ht),Et;if(Rt===null){for(;Ht<be.length;Ht++)Rt=We(ve,be[Ht],Ve),Rt!==null&&(de=w(Rt,de,Ht),yn===null?Et=Rt:yn.sibling=Rt,yn=Rt);return Dn&&Po(ve,Ht),Et}for(Rt=y(Rt);Ht<be.length;Ht++)Ur=De(Rt,ve,Ht,be[Ht],Ve),Ur!==null&&(o&&Ur.alternate!==null&&Rt.delete(Ur.key===null?Ht:Ur.key),de=w(Ur,de,Ht),yn===null?Et=Ur:yn.sibling=Ur,yn=Ur);return o&&Rt.forEach(function(Ju){return c(ve,Ju)}),Dn&&Po(ve,Ht),Et}function zt(ve,de,be,Ve){if(be==null)throw Error(i(151));for(var Et=null,yn=null,Rt=de,Ht=de=0,Ur=null,Nn=be.next();Rt!==null&&!Nn.done;Ht++,Nn=be.next()){Rt.index>Ht?(Ur=Rt,Rt=null):Ur=Rt.sibling;var Ju=Ce(ve,Rt,Nn.value,Ve);if(Ju===null){Rt===null&&(Rt=Ur);break}o&&Rt&&Ju.alternate===null&&c(ve,Rt),de=w(Ju,de,Ht),yn===null?Et=Ju:yn.sibling=Ju,yn=Ju,Rt=Ur}if(Nn.done)return p(ve,Rt),Dn&&Po(ve,Ht),Et;if(Rt===null){for(;!Nn.done;Ht++,Nn=be.next())Nn=We(ve,Nn.value,Ve),Nn!==null&&(de=w(Nn,de,Ht),yn===null?Et=Nn:yn.sibling=Nn,yn=Nn);return Dn&&Po(ve,Ht),Et}for(Rt=y(Rt);!Nn.done;Ht++,Nn=be.next())Nn=De(Rt,ve,Ht,Nn.value,Ve),Nn!==null&&(o&&Nn.alternate!==null&&Rt.delete(Nn.key===null?Ht:Nn.key),de=w(Nn,de,Ht),yn===null?Et=Nn:yn.sibling=Nn,yn=Nn);return o&&Rt.forEach(function(WL){return c(ve,WL)}),Dn&&Po(ve,Ht),Et}function ti(ve,de,be,Ve){if(typeof be=="object"&&be!==null&&be.type===b&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case v:e:{for(var Et=be.key;de!==null;){if(de.key===Et){if(Et=be.type,Et===b){if(de.tag===7){p(ve,de.sibling),Ve=E(de,be.props.children),Ve.return=ve,ve=Ve;break e}}else if(de.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===z&&p1(Et)===de.type){p(ve,de.sibling),Ve=E(de,be.props),Pu(Ve,be),Ve.return=ve,ve=Ve;break e}p(ve,de);break}else c(ve,de);de=de.sibling}be.type===b?(Ve=El(be.props.children,ve.mode,Ve,be.key),Ve.return=ve,ve=Ve):(Ve=sr(be.type,be.key,be.props,null,ve.mode,Ve),Pu(Ve,be),Ve.return=ve,ve=Ve)}return H(ve);case x:e:{for(Et=be.key;de!==null;){if(de.key===Et)if(de.tag===4&&de.stateNode.containerInfo===be.containerInfo&&de.stateNode.implementation===be.implementation){p(ve,de.sibling),Ve=E(de,be.children||[]),Ve.return=ve,ve=Ve;break e}else{p(ve,de);break}else c(ve,de);de=de.sibling}Ve=q0(be,ve.mode,Ve),Ve.return=ve,ve=Ve}return H(ve);case z:return Et=be._init,be=Et(be._payload),ti(ve,de,be,Ve)}if(fe(be))return jt(ve,de,be,Ve);if($(be)){if(Et=$(be),typeof Et!="function")throw Error(i(150));return be=Et.call(be),zt(ve,de,be,Ve)}if(typeof be.then=="function")return ti(ve,de,vh(be),Ve);if(be.$$typeof===R)return ti(ve,de,sh(ve,be),Ve);pd(ve,be)}return typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint"?(be=""+be,de!==null&&de.tag===6?(p(ve,de.sibling),Ve=E(de,be),Ve.return=ve,ve=Ve):(p(ve,de),Ve=th(be,ve.mode,Ve),Ve.return=ve,ve=Ve),H(ve)):p(ve,de)}return function(ve,de,be,Ve){try{gh=0;var Et=ti(ve,de,be,Ve);return dc=null,Et}catch(Rt){if(Rt===ch||Rt===ba)throw Rt;var yn=ss(29,Rt,null,ve.mode);return yn.lanes=Ve,yn.return=ve,yn}finally{}}}var pc=m1(!0),g1=m1(!1),Xn=ae(null),Aa=null;function Pl(o){var c=o.alternate;Ae(Ci,Ci.current&1),Ae(Xn,o),Aa===null&&(c===null||Ru.current!==null||c.memoizedState!==null)&&(Aa=o)}function v1(o){if(o.tag===22){if(Ae(Ci,Ci.current),Ae(Xn,o),Aa===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(Aa=o)}}else Ul()}function Ul(){Ae(Ci,Ci.current),Ae(Xn,Xn.current)}function Xa(o){Se(Xn),Aa===o&&(Aa=null),Se(Ci)}var Ci=ae(0);function Go(o){for(var c=o;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||jS(p)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Ll(o,c,p,y){c=o.memoizedState,p=p(y,c),p=p==null?c:m({},c,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var Wr={enqueueSetState:function(o,c,p){o=o._reactInternals;var y=_i(),E=ja(y);E.payload=c,p!=null&&(E.callback=p),c=Io(o,E,y),c!==null&&(qr(c,o,y),hc(c,o,y))},enqueueReplaceState:function(o,c,p){o=o._reactInternals;var y=_i(),E=ja(y);E.tag=1,E.payload=c,p!=null&&(E.callback=p),c=Io(o,E,y),c!==null&&(qr(c,o,y),hc(c,o,y))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var p=_i(),y=ja(p);y.tag=2,c!=null&&(y.callback=c),c=Io(o,y,p),c!==null&&(qr(c,o,p),hc(c,o,p))}};function y1(o,c,p,y,E,w,H){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,w,H):c.prototype&&c.prototype.isPureReactComponent?!xa(p,y)||!xa(E,w):!0}function x1(o,c,p,y){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,y),c.state!==o&&Wr.enqueueReplaceState(c,c.state,null)}function Wa(o,c){var p=c;if("ref"in c){p={};for(var y in c)y!=="ref"&&(p[y]=c[y])}if(o=o.defaultProps){p===c&&(p=m({},p));for(var E in o)p[E]===void 0&&(p[E]=o[E])}return p}var mc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function yh(o){mc(o)}function md(o){console.error(o)}function _1(o){mc(o)}function gd(o,c){try{var p=o.onUncaughtError;p(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function Qs(o,c,p){try{var y=o.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function vd(o,c,p){return p=ja(p),p.tag=3,p.payload={element:null},p.callback=function(){gd(o,c)},p}function b1(o){return o=ja(o),o.tag=3,o}function yd(o,c,p,y){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var w=y.value;o.payload=function(){return E(w)},o.callback=function(){Qs(c,p,y)}}var H=p.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(o.callback=function(){Qs(c,p,y),typeof E!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var j=y.stack;this.componentDidCatch(y.value,{componentStack:j!==null?j:""})})}function DS(o,c,p,y,E){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=p.alternate,c!==null&&Ks(c,p,E,!0),p=Xn.current,p!==null){switch(p.tag){case 13:return Aa===null?f():p.alternate===null&&ii===0&&(ii=3),p.flags&=-257,p.flags|=65536,p.lanes=E,y===uh?p.flags|=16384:(c=p.updateQueue,c===null?p.updateQueue=new Set([y]):c.add(y),Be(o,y,E)),!1;case 22:return p.flags|=65536,y===uh?p.flags|=16384:(c=p.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=c):(p=c.retryQueue,p===null?c.retryQueue=new Set([y]):p.add(y)),Be(o,y,E)),!1}throw Error(i(435,p.tag))}return Be(o,y,E),f(),!1}if(Dn)return c=Xn.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=E,y!==J0&&(o=Error(i(422),{cause:y}),fc(yr(o,p)))):(y!==J0&&(c=Error(i(423),{cause:y}),fc(yr(c,p))),o=o.current.alternate,o.flags|=65536,E&=-E,o.lanes|=E,y=yr(y,p),E=vd(o.stateNode,y,E),Tu(o,E),ii!==4&&(ii=2)),!1;var w=Error(i(520),{cause:y});if(w=yr(w,p),Ln===null?Ln=[w]:Ln.push(w),ii!==4&&(ii=2),c===null)return!0;y=yr(y,p),p=c;do{switch(p.tag){case 3:return p.flags|=65536,o=E&-E,p.lanes|=o,o=vd(p.stateNode,y,o),Tu(p,o),!1;case 1:if(c=p.type,w=p.stateNode,(p.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Bs===null||!Bs.has(w))))return p.flags|=65536,E&=-E,p.lanes|=E,E=b1(E),yd(E,o,p,y),Tu(p,E),!1}p=p.return}while(p!==null);return!1}var S1=Error(i(461)),ar=!1;function wi(o,c,p,y){c.child=o===null?g1(c,null,p,y):pc(c,o.child,p,y)}function os(o,c,p,y,E){p=p.render;var w=c.ref;if("ref"in y){var H={};for(var j in y)j!=="ref"&&(H[j]=y[j])}else H=y;return ka(c),y=zo(o,c,p,H,w,E),j=Fm(),o!==null&&!ar?(sd(o,c,E),or(o,c,E)):(Dn&&j&&Cm(c),c.flags|=1,wi(o,c,y,E),c.child)}function ls(o,c,p,y,E){if(o===null){var w=p.type;return typeof w=="function"&&!eh(w)&&w.defaultProps===void 0&&p.compare===null?(c.tag=15,c.type=w,eg(o,c,w,y,E)):(o=sr(p.type,null,y,c,c.mode,E),o.ref=c.ref,o.return=c,c.child=o)}if(w=o.child,!xh(o,E)){var H=w.memoizedProps;if(p=p.compare,p=p!==null?p:xa,p(H,y)&&o.ref===c.ref)return or(o,c,E)}return c.flags|=1,o=Mi(w,y),o.ref=c.ref,o.return=c,c.child=o}function eg(o,c,p,y,E){if(o!==null){var w=o.memoizedProps;if(xa(w,y)&&o.ref===c.ref)if(ar=!1,c.pendingProps=y=w,xh(o,E))(o.flags&131072)!==0&&(ar=!0);else return c.lanes=o.lanes,or(o,c,E)}return Uu(o,c,p,y,E)}function gc(o,c,p){var y=c.pendingProps,E=y.children,w=o!==null?o.memoizedState:null;if(y.mode==="hidden"){if((c.flags&128)!==0){if(y=w!==null?w.baseLanes|p:p,o!==null){for(E=c.child=o.child,w=0;E!==null;)w=w|E.lanes|E.childLanes,E=E.sibling;c.childLanes=w&~y}else c.childLanes=0,c.child=null;return vc(o,c,y,p)}if((p&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&lh(c,w!==null?w.cachePool:null),w!==null?Fy(c,w):Im(),v1(c);else return c.lanes=c.childLanes=536870912,vc(o,c,w!==null?w.baseLanes|p:p,p)}else w!==null?(lh(c,w.cachePool),Fy(c,w),Ul(),c.memoizedState=null):(o!==null&&lh(c,null),Im(),Ul());return wi(o,c,E,p),c.child}function vc(o,c,p,y){var E=Rl();return E=E===null?null:{parent:Gi._currentValue,pool:E},c.memoizedState={baseLanes:p,cachePool:E},o!==null&&lh(c,null),Im(),v1(c),o!==null&&Ks(o,c,y,!0),null}function yc(o,c){var p=c.ref;if(p===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(i(284));(o===null||o.ref!==p)&&(c.flags|=4194816)}}function Uu(o,c,p,y,E){return ka(c),p=zo(o,c,p,y,void 0,E),y=Fm(),o!==null&&!ar?(sd(o,c,E),or(o,c,E)):(Dn&&y&&Cm(c),c.flags|=1,wi(o,c,p,E),c.child)}function Es(o,c,p,y,E,w){return ka(c),c.updateQueue=null,p=Gy(c,y,p,E),Hy(o),y=Fm(),o!==null&&!ar?(sd(o,c,w),or(o,c,w)):(Dn&&y&&Cm(c),c.flags|=1,wi(o,c,p,w),c.child)}function Ms(o,c,p,y,E){if(ka(c),c.stateNode===null){var w=Al,H=p.contextType;typeof H=="object"&&H!==null&&(w=vi(H)),w=new p(y,w),c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Wr,c.stateNode=w,w._reactInternals=c,w=c.stateNode,w.props=y,w.state=c.memoizedState,w.refs={},Lm(c),H=p.contextType,w.context=typeof H=="object"&&H!==null?vi(H):Al,w.state=c.memoizedState,H=p.getDerivedStateFromProps,typeof H=="function"&&(Ll(c,p,H,y),w.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(H=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),H!==w.state&&Wr.enqueueReplaceState(w,w.state,null),Cu(c,y,w,E),fh(),w.state=c.memoizedState),typeof w.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(o===null){w=c.stateNode;var j=c.memoizedProps,ne=Wa(p,j);w.props=ne;var Ee=w.context,ze=p.contextType;H=Al,typeof ze=="object"&&ze!==null&&(H=vi(ze));var We=p.getDerivedStateFromProps;ze=typeof We=="function"||typeof w.getSnapshotBeforeUpdate=="function",j=c.pendingProps!==j,ze||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(j||Ee!==H)&&x1(c,w,y,H),No=!1;var Ce=c.memoizedState;w.state=Ce,Cu(c,y,w,E),fh(),Ee=c.memoizedState,j||Ce!==Ee||No?(typeof We=="function"&&(Ll(c,p,We,y),Ee=c.memoizedState),(ne=No||y1(c,p,ne,y,Ce,Ee,H))?(ze||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(c.flags|=4194308)):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=Ee),w.props=y,w.state=Ee,w.context=H,y=ne):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{w=c.stateNode,Vt(o,c),H=c.memoizedProps,ze=Wa(p,H),w.props=ze,We=c.pendingProps,Ce=w.context,Ee=p.contextType,ne=Al,typeof Ee=="object"&&Ee!==null&&(ne=vi(Ee)),j=p.getDerivedStateFromProps,(Ee=typeof j=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(H!==We||Ce!==ne)&&x1(c,w,y,ne),No=!1,Ce=c.memoizedState,w.state=Ce,Cu(c,y,w,E),fh();var De=c.memoizedState;H!==We||Ce!==De||No||o!==null&&o.dependencies!==null&&rh(o.dependencies)?(typeof j=="function"&&(Ll(c,p,j,y),De=c.memoizedState),(ze=No||y1(c,p,ze,y,Ce,De,ne)||o!==null&&o.dependencies!==null&&rh(o.dependencies))?(Ee||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(y,De,ne),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(y,De,ne)),typeof w.componentDidUpdate=="function"&&(c.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof w.componentDidUpdate!="function"||H===o.memoizedProps&&Ce===o.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&Ce===o.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=De),w.props=y,w.state=De,w.context=ne,y=ze):(typeof w.componentDidUpdate!="function"||H===o.memoizedProps&&Ce===o.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&Ce===o.memoizedState||(c.flags|=1024),y=!1)}return w=y,yc(o,c),y=(c.flags&128)!==0,w||y?(w=c.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:w.render(),c.flags|=1,o!==null&&y?(c.child=pc(c,o.child,null,E),c.child=pc(c,null,p,E)):wi(o,c,p,E),c.memoizedState=w.state,o=c.child):o=or(o,c,E),o}function Nl(o,c,p,y){return bu(),c.flags|=256,wi(o,c,p,y),c.child}var Ea={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ma(o){return{baseLanes:o,cachePool:ed()}}function Ki(o,c,p){return o=o!==null?o.childLanes&~p:0,c&&(o|=ra),o}function Lu(o,c,p){var y=c.pendingProps,E=!1,w=(c.flags&128)!==0,H;if((H=w)||(H=o!==null&&o.memoizedState===null?!1:(Ci.current&2)!==0),H&&(E=!0,c.flags&=-129),H=(c.flags&32)!==0,c.flags&=-33,o===null){if(Dn){if(E?Pl(c):Ul(),Dn){var j=hi,ne;if(ne=j){e:{for(ne=j,j=bs;ne.nodeType!==8;){if(!j){j=null;break e}if(ne=Yo(ne.nextSibling),ne===null){j=null;break e}}j=ne}j!==null?(c.memoizedState={dehydrated:j,treeContext:Ml!==null?{id:Ga,overflow:Va}:null,retryLane:536870912,hydrationErrors:null},ne=ss(18,null,null,0),ne.stateNode=j,ne.return=c,c.child=ne,kr=c,hi=null,ne=!0):ne=!1}ne||Tl(c)}if(j=c.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return jS(j)?c.lanes=32:c.lanes=536870912,null;Xa(c)}return j=y.children,y=y.fallback,E?(Ul(),E=c.mode,j=xc({mode:"hidden",children:j},E),y=El(y,E,p,null),j.return=c,y.return=c,j.sibling=y,c.child=j,E=c.child,E.memoizedState=Ma(p),E.childLanes=Ki(o,H,p),c.memoizedState=Ea,y):(Pl(c),Ya(c,j))}if(ne=o.memoizedState,ne!==null&&(j=ne.dehydrated,j!==null)){if(w)c.flags&256?(Pl(c),c.flags&=-257,c=br(o,c,p)):c.memoizedState!==null?(Ul(),c.child=o.child,c.flags|=128,c=null):(Ul(),E=y.fallback,j=c.mode,y=xc({mode:"visible",children:y.children},j),E=El(E,j,p,null),E.flags|=2,y.return=c,E.return=c,y.sibling=E,c.child=y,pc(c,o.child,null,p),y=c.child,y.memoizedState=Ma(p),y.childLanes=Ki(o,H,p),c.memoizedState=Ea,c=E);else if(Pl(c),jS(j)){if(H=j.nextSibling&&j.nextSibling.dataset,H)var Ee=H.dgst;H=Ee,y=Error(i(419)),y.stack="",y.digest=H,fc({value:y,source:null,stack:null}),c=br(o,c,p)}else if(ar||Ks(o,c,p,!1),H=(p&o.childLanes)!==0,ar||H){if(H=Yt,H!==null&&(y=p&-p,y=(y&42)!==0?1:on(y),y=(y&(H.suspendedLanes|p))!==0?0:y,y!==0&&y!==ne.retryLane))throw ne.retryLane=y,Oo(o,y),qr(H,o,y),S1;j.data==="$?"||f(),c=br(o,c,p)}else j.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=ne.treeContext,hi=Yo(j.nextSibling),kr=c,Dn=!0,qs=null,bs=!1,o!==null&&(xr[_s++]=Ga,xr[_s++]=Va,xr[_s++]=Ml,Ga=o.id,Va=o.overflow,Ml=c),c=Ya(c,y.children),c.flags|=4096);return c}return E?(Ul(),E=y.fallback,j=c.mode,ne=o.child,Ee=ne.sibling,y=Mi(ne,{mode:"hidden",children:y.children}),y.subtreeFlags=ne.subtreeFlags&65011712,Ee!==null?E=Mi(Ee,E):(E=El(E,j,p,null),E.flags|=2),E.return=c,y.return=c,y.sibling=E,c.child=y,y=E,E=c.child,j=o.child.memoizedState,j===null?j=Ma(p):(ne=j.cachePool,ne!==null?(Ee=Gi._currentValue,ne=ne.parent!==Ee?{parent:Ee,pool:Ee}:ne):ne=ed(),j={baseLanes:j.baseLanes|p,cachePool:ne}),E.memoizedState=j,E.childLanes=Ki(o,H,p),c.memoizedState=Ea,y):(Pl(c),p=o.child,o=p.sibling,p=Mi(p,{mode:"visible",children:y.children}),p.return=c,p.sibling=null,o!==null&&(H=c.deletions,H===null?(c.deletions=[o],c.flags|=16):H.push(o)),c.child=p,c.memoizedState=null,p)}function Ya(o,c){return c=xc({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function xc(o,c){return o=ss(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function br(o,c,p){return pc(c,o.child,null,p),o=Ya(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function Sr(o,c,p){o.lanes|=c;var y=o.alternate;y!==null&&(y.lanes|=c),Bm(o.return,c,p)}function En(o,c,p,y,E){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E}:(w.isBackwards=c,w.rendering=null,w.renderingStartTime=0,w.last=y,w.tail=p,w.tailMode=E)}function ea(o,c,p){var y=c.pendingProps,E=y.revealOrder,w=y.tail;if(wi(o,c,y.children,p),y=Ci.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Sr(o,p,c);else if(o.tag===19)Sr(o,p,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}switch(Ae(Ci,y),E){case"forwards":for(p=c.child,E=null;p!==null;)o=p.alternate,o!==null&&Go(o)===null&&(E=p),p=p.sibling;p=E,p===null?(E=c.child,c.child=null):(E=p.sibling,p.sibling=null),En(c,!1,E,p,w);break;case"backwards":for(p=null,E=c.child,c.child=null;E!==null;){if(o=E.alternate,o!==null&&Go(o)===null){c.child=E;break}o=E.sibling,E.sibling=p,p=E,E=o}En(c,!0,p,null,w);break;case"together":En(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function or(o,c,p){if(o!==null&&(c.dependencies=o.dependencies),Ra|=c.lanes,(p&c.childLanes)===0)if(o!==null){if(Ks(o,c,p,!1),(p&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(i(153));if(c.child!==null){for(o=c.child,p=Mi(o,o.pendingProps),c.child=p,p.return=c;o.sibling!==null;)o=o.sibling,p=p.sibling=Mi(o,o.pendingProps),p.return=c;p.sibling=null}return c.child}function xh(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&rh(o)))}function ta(o,c,p){switch(c.tag){case 3:Ye(c,c.stateNode.containerInfo),wl(c,Gi,o.memoizedState.cache),bu();break;case 27:case 5:_t(c);break;case 4:Ye(c,c.stateNode.containerInfo);break;case 10:wl(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(Pl(c),c.flags|=128,null):(p&c.child.childLanes)!==0?Lu(o,c,p):(Pl(c),o=or(o,c,p),o!==null?o.sibling:null);Pl(c);break;case 19:var E=(o.flags&128)!==0;if(y=(p&c.childLanes)!==0,y||(Ks(o,c,p,!1),y=(p&c.childLanes)!==0),E){if(y)return ea(o,c,p);c.flags|=128}if(E=c.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Ae(Ci,Ci.current),y)break;return null;case 22:case 23:return c.lanes=0,gc(o,c,p);case 24:wl(c,Gi,o.memoizedState.cache)}return or(o,c,p)}function _c(o,c,p){if(o!==null)if(o.memoizedProps!==c.pendingProps)ar=!0;else{if(!xh(o,p)&&(c.flags&128)===0)return ar=!1,ta(o,c,p);ar=(o.flags&131072)!==0}else ar=!1,Dn&&(c.flags&1048576)!==0&&K0(c,_u,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var y=c.elementType,E=y._init;if(y=E(y._payload),c.type=y,typeof y=="function")eh(y)?(o=Wa(y,o),c.tag=1,c=Ms(null,c,y,o,p)):(c.tag=0,c=Uu(null,c,y,o,p));else{if(y!=null){if(E=y.$$typeof,E===B){c.tag=11,c=os(null,c,y,o,p);break e}else if(E===I){c.tag=14,c=ls(null,c,y,o,p);break e}}throw c=ce(y)||y,Error(i(306,c,""))}}return c;case 0:return Uu(o,c,c.type,c.pendingProps,p);case 1:return y=c.type,E=Wa(y,c.pendingProps),Ms(o,c,y,E,p);case 3:e:{if(Ye(c,c.stateNode.containerInfo),o===null)throw Error(i(387));y=c.pendingProps;var w=c.memoizedState;E=w.element,Vt(o,c),Cu(c,y,null,p);var H=c.memoizedState;if(y=H.cache,wl(c,Gi,y),y!==w.cache&&ih(c,[Gi],p,!0),fh(),y=H.element,w.isDehydrated)if(w={element:y,isDehydrated:!1,cache:H.cache},c.updateQueue.baseState=w,c.memoizedState=w,c.flags&256){c=Nl(o,c,y,p);break e}else if(y!==E){E=yr(Error(i(424)),c),fc(E),c=Nl(o,c,y,p);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(hi=Yo(o.firstChild),kr=c,Dn=!0,qs=null,bs=!0,p=g1(c,null,y,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(bu(),y===E){c=or(o,c,p);break e}wi(o,c,y,p)}c=c.child}return c;case 26:return yc(o,c),o===null?(p=oC(c.type,null,c.pendingProps,null))?c.memoizedState=p:Dn||(p=c.type,o=c.pendingProps,y=w1(Ue.current).createElement(p),y[Fi]=c,y[Yi]=o,Kr(y,p,o),zi(y),c.stateNode=y):c.memoizedState=oC(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return _t(c),o===null&&Dn&&(y=c.stateNode=rC(c.type,c.pendingProps,Ue.current),kr=c,bs=!0,E=hi,Xu(c.type)?(XS=E,hi=Yo(y.firstChild)):hi=E),wi(o,c,c.pendingProps.children,p),yc(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&Dn&&((E=y=hi)&&(y=bL(y,c.type,c.pendingProps,bs),y!==null?(c.stateNode=y,kr=c,hi=Yo(y.firstChild),bs=!1,E=!0):E=!1),E||Tl(c)),_t(c),E=c.type,w=c.pendingProps,H=o!==null?o.memoizedProps:null,y=w.children,GS(E,w)?y=null:H!==null&&GS(E,H)&&(c.flags|=32),c.memoizedState!==null&&(E=zo(o,c,ES,null,null,p),fg._currentValue=E),yc(o,c),wi(o,c,y,p),c.child;case 6:return o===null&&Dn&&((o=p=hi)&&(p=SL(p,c.pendingProps,bs),p!==null?(c.stateNode=p,kr=c,hi=null,o=!0):o=!1),o||Tl(c)),null;case 13:return Lu(o,c,p);case 4:return Ye(c,c.stateNode.containerInfo),y=c.pendingProps,o===null?c.child=pc(c,null,y,p):wi(o,c,y,p),c.child;case 11:return os(o,c,c.type,c.pendingProps,p);case 7:return wi(o,c,c.pendingProps,p),c.child;case 8:return wi(o,c,c.pendingProps.children,p),c.child;case 12:return wi(o,c,c.pendingProps.children,p),c.child;case 10:return y=c.pendingProps,wl(c,c.type,y.value),wi(o,c,y.children,p),c.child;case 9:return E=c.type._context,y=c.pendingProps.children,ka(c),E=vi(E),y=y(E),c.flags|=1,wi(o,c,y,p),c.child;case 14:return ls(o,c,c.type,c.pendingProps,p);case 15:return eg(o,c,c.type,c.pendingProps,p);case 19:return ea(o,c,p);case 31:return y=c.pendingProps,p=c.mode,y={mode:y.mode,children:y.children},o===null?(p=xc(y,p),p.ref=c.ref,c.child=p,p.return=c,c=p):(p=Mi(o.child,y),p.ref=c.ref,c.child=p,p.return=c,c=p),c;case 22:return gc(o,c,p);case 24:return ka(c),y=vi(Gi),o===null?(E=Rl(),E===null&&(E=Yt,w=Z0(),E.pooledCache=w,w.refCount++,w!==null&&(E.pooledCacheLanes|=p),E=w),c.memoizedState={parent:y,cache:E},Lm(c),wl(c,Gi,E)):((o.lanes&p)!==0&&(Vt(o,c),Cu(c,null,null,p),fh()),E=o.memoizedState,w=c.memoizedState,E.parent!==y?(E={parent:y,cache:y},c.memoizedState=E,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=E),wl(c,Gi,y)):(y=w.cache,wl(c,Gi,y),y!==E.cache&&ih(c,[Gi],p,!0))),wi(o,c,c.pendingProps.children,p),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function Ta(o){o.flags|=4}function _h(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!hC(c)){if(c=Xn.current,c!==null&&((Ot&4194048)===Ot?Aa!==null:(Ot&62914560)!==Ot&&(Ot&536870912)===0||c!==Aa))throw $s=uh,Pm;o.flags|=8192}}function Vo(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?Je():536870912,o.lanes|=c,wn|=c)}function bc(o,c){if(!Dn)switch(o.tailMode){case"hidden":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function $n(o){var c=o.alternate!==null&&o.alternate.child===o.child,p=0,y=0;if(c)for(var E=o.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&65011712,y|=E.flags&65011712,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=y,o.childLanes=p,c}function tg(o,c,p){var y=c.pendingProps;switch(wm(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(c),null;case 1:return $n(c),null;case 3:return p=c.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),Lo(Gi),gt(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(_a(c)?Ta(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Pn())),$n(c),null;case 26:return p=c.memoizedState,o===null?(Ta(c),p!==null?($n(c),_h(c,p)):($n(c),c.flags&=-16777217)):p?p!==o.memoizedState?(Ta(c),$n(c),_h(c,p)):($n(c),c.flags&=-16777217):(o.memoizedProps!==y&&Ta(c),$n(c),c.flags&=-16777217),null;case 27:an(c),p=Ue.current;var E=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==y&&Ta(c);else{if(!y){if(c.stateNode===null)throw Error(i(166));return $n(c),null}o=ie.current,_a(c)?Uy(c):(o=rC(E,y,p),c.stateNode=o,Ta(c))}return $n(c),null;case 5:if(an(c),p=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==y&&Ta(c);else{if(!y){if(c.stateNode===null)throw Error(i(166));return $n(c),null}if(o=ie.current,_a(c))Uy(c);else{switch(E=w1(Ue.current),o){case 1:o=E.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:o=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":o=E.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":o=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":o=E.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof y.is=="string"?E.createElement("select",{is:y.is}):E.createElement("select"),y.multiple?o.multiple=!0:y.size&&(o.size=y.size);break;default:o=typeof y.is=="string"?E.createElement(p,{is:y.is}):E.createElement(p)}}o[Fi]=c,o[Yi]=y;e:for(E=c.child;E!==null;){if(E.tag===5||E.tag===6)o.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===c)break e;for(;E.sibling===null;){if(E.return===null||E.return===c)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}c.stateNode=o;e:switch(Kr(o,p,y),p){case"button":case"input":case"select":case"textarea":o=!!y.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ta(c)}}return $n(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==y&&Ta(c);else{if(typeof y!="string"&&c.stateNode===null)throw Error(i(166));if(o=Ue.current,_a(c)){if(o=c.stateNode,p=c.memoizedProps,y=null,E=kr,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}o[Fi]=c,o=!!(o.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||$3(o.nodeValue,p)),o||Tl(c)}else o=w1(o).createTextNode(y),o[Fi]=c,c.stateNode=o}return $n(c),null;case 13:if(y=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(E=_a(c),y!==null&&y.dehydrated!==null){if(o===null){if(!E)throw Error(i(318));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(i(317));E[Fi]=c}else bu(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;$n(c),E=!1}else E=Pn(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=E),E=!0;if(!E)return c.flags&256?(Xa(c),c):(Xa(c),null)}if(Xa(c),(c.flags&128)!==0)return c.lanes=p,c;if(p=y!==null,o=o!==null&&o.memoizedState!==null,p){y=c.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool);var w=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(w=y.memoizedState.cachePool.pool),w!==E&&(y.flags|=2048)}return p!==o&&p&&(c.child.flags|=8192),Vo(c,c.updateQueue),$n(c),null;case 4:return gt(),o===null&&NS(c.stateNode.containerInfo),$n(c),null;case 10:return Lo(c.type),$n(c),null;case 19:if(Se(Ci),E=c.memoizedState,E===null)return $n(c),null;if(y=(c.flags&128)!==0,w=E.rendering,w===null)if(y)bc(E,!1);else{if(ii!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(w=Go(o),w!==null){for(c.flags|=128,bc(E,!1),o=w.updateQueue,c.updateQueue=o,Vo(c,o),c.subtreeFlags=0,o=p,p=c.child;p!==null;)Tm(p,o),p=p.sibling;return Ae(Ci,Ci.current&1|2),c.child}o=o.sibling}E.tail!==null&&je()>Or&&(c.flags|=128,y=!0,bc(E,!1),c.lanes=4194304)}else{if(!y)if(o=Go(w),o!==null){if(c.flags|=128,y=!0,o=o.updateQueue,c.updateQueue=o,Vo(c,o),bc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!w.alternate&&!Dn)return $n(c),null}else 2*je()-E.renderingStartTime>Or&&p!==536870912&&(c.flags|=128,y=!0,bc(E,!1),c.lanes=4194304);E.isBackwards?(w.sibling=c.child,c.child=w):(o=E.last,o!==null?o.sibling=w:c.child=w,E.last=w)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=je(),c.sibling=null,o=Ci.current,Ae(Ci,y?o&1|2:o&1),c):($n(c),null);case 22:case 23:return Xa(c),hh(),y=c.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?(p&536870912)!==0&&(c.flags&128)===0&&($n(c),c.subtreeFlags&6&&(c.flags|=8192)):$n(c),p=c.updateQueue,p!==null&&Vo(c,p.retryQueue),p=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048),o!==null&&Se(Js),null;case 24:return p=null,o!==null&&(p=o.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),Lo(Gi),$n(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function Nu(o,c){switch(wm(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Lo(Gi),gt(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return an(c),null;case 13:if(Xa(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(i(340));bu()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Se(Ci),null;case 4:return gt(),null;case 10:return Lo(c.type),null;case 22:case 23:return Xa(c),hh(),o!==null&&Se(Js),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return Lo(Gi),null;case 25:return null;default:return null}}function Iu(o,c){switch(wm(c),c.tag){case 3:Lo(Gi),gt();break;case 26:case 27:case 5:an(c);break;case 4:gt();break;case 13:Xa(c);break;case 19:Se(Ci);break;case 10:Lo(c.type);break;case 22:case 23:Xa(c),hh(),o!==null&&Se(Js);break;case 24:Lo(Gi)}}function Sc(o,c){try{var p=c.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var E=y.next;p=E;do{if((p.tag&o)===o){y=void 0;var w=p.create,H=p.inst;y=w(),H.destroy=y}p=p.next}while(p!==E)}}catch(j){he(c,c.return,j)}}function Ts(o,c,p){try{var y=c.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var w=E.next;y=w;do{if((y.tag&o)===o){var H=y.inst,j=H.destroy;if(j!==void 0){H.destroy=void 0,E=c;var ne=p,Ee=j;try{Ee()}catch(ze){he(E,ne,ze)}}}y=y.next}while(y!==w)}}catch(ze){he(c,c.return,ze)}}function Ac(o){var c=o.updateQueue;if(c!==null){var p=o.stateNode;try{Iy(c,p)}catch(y){he(o,o.return,y)}}}function ko(o,c,p){p.props=Wa(o.type,o.memoizedProps),p.state=o.memoizedState;try{p.componentWillUnmount()}catch(y){he(o,c,y)}}function Ec(o,c){try{var p=o.ref;if(p!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof p=="function"?o.refCleanup=p(y):p.current=y}}catch(E){he(o,c,E)}}function qa(o,c){var p=o.ref,y=o.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(E){he(o,c,E)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){he(o,c,E)}else p.current=null}function Fu(o){var c=o.type,p=o.memoizedProps,y=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(E){he(o,o.return,E)}}function bh(o,c,p){try{var y=o.stateNode;gL(y,o.type,p,c),y[Yi]=c}catch(E){he(o,o.return,E)}}function Sh(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Xu(o.type)||o.tag===4}function Il(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Sh(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Xu(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Fl(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(o,c):(c=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,c.appendChild(o),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=C1));else if(y!==4&&(y===27&&Xu(o.type)&&(p=o.stateNode,c=null),o=o.child,o!==null))for(Fl(o,c,p),o=o.sibling;o!==null;)Fl(o,c,p),o=o.sibling}function zl(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?p.insertBefore(o,c):p.appendChild(o);else if(y!==4&&(y===27&&Xu(o.type)&&(p=o.stateNode),o=o.child,o!==null))for(zl(o,c,p),o=o.sibling;o!==null;)zl(o,c,p),o=o.sibling}function Hl(o){var c=o.stateNode,p=o.memoizedProps;try{for(var y=o.type,E=c.attributes;E.length;)c.removeAttributeNode(E[0]);Kr(c,y,p),c[Fi]=o,c[Yi]=p}catch(w){he(o,o.return,w)}}var Ka=!1,Zn=!1,zu=!1,Cs=typeof WeakSet=="function"?WeakSet:Set,Wn=null;function Ji(o,c){if(o=o.containerInfo,zS=U1,o=xm(o),Jf(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var E=y.anchorOffset,w=y.focusNode;y=y.focusOffset;try{p.nodeType,w.nodeType}catch{p=null;break e}var H=0,j=-1,ne=-1,Ee=0,ze=0,We=o,Ce=null;t:for(;;){for(var De;We!==p||E!==0&&We.nodeType!==3||(j=H+E),We!==w||y!==0&&We.nodeType!==3||(ne=H+y),We.nodeType===3&&(H+=We.nodeValue.length),(De=We.firstChild)!==null;)Ce=We,We=De;for(;;){if(We===o)break t;if(Ce===p&&++Ee===E&&(j=H),Ce===w&&++ze===y&&(ne=H),(De=We.nextSibling)!==null)break;We=Ce,Ce=We.parentNode}We=De}p=j===-1||ne===-1?null:{start:j,end:ne}}else p=null}p=p||{start:0,end:0}}else p=null;for(HS={focusedElem:o,selectionRange:p},U1=!1,Wn=c;Wn!==null;)if(c=Wn,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,Wn=o;else for(;Wn!==null;){switch(c=Wn,w=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&w!==null){o=void 0,p=c,E=w.memoizedProps,w=w.memoizedState,y=p.stateNode;try{var jt=Wa(p.type,E,p.elementType===p.type);o=y.getSnapshotBeforeUpdate(jt,w),y.__reactInternalSnapshotBeforeUpdate=o}catch(zt){he(p,p.return,zt)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,p=o.nodeType,p===9)kS(o);else if(p===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":kS(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=c.sibling,o!==null){o.return=c.return,Wn=o;break}Wn=c.return}}function jo(o,c,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Yr(o,p),y&4&&Sc(5,p);break;case 1:if(Yr(o,p),y&4)if(o=p.stateNode,c===null)try{o.componentDidMount()}catch(H){he(p,p.return,H)}else{var E=Wa(p.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(E,c,o.__reactInternalSnapshotBeforeUpdate)}catch(H){he(p,p.return,H)}}y&64&&Ac(p),y&512&&Ec(p,p.return);break;case 3:if(Yr(o,p),y&64&&(o=p.updateQueue,o!==null)){if(c=null,p.child!==null)switch(p.child.tag){case 27:case 5:c=p.child.stateNode;break;case 1:c=p.child.stateNode}try{Iy(o,c)}catch(H){he(p,p.return,H)}}break;case 27:c===null&&y&4&&Hl(p);case 26:case 5:Yr(o,p),c===null&&y&4&&Fu(p),y&512&&Ec(p,p.return);break;case 12:Yr(o,p);break;case 13:Yr(o,p),y&4&&Gl(o,p),y&64&&(o=p.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(p=ri.bind(null,p),AL(o,p))));break;case 22:if(y=p.memoizedState!==null||Ka,!y){c=c!==null&&c.memoizedState!==null||Zn,E=Ka;var w=Zn;Ka=y,(Zn=c)&&!w?Ja(o,p,(p.subtreeFlags&8772)!==0):Yr(o,p),Ka=E,Zn=w}break;case 30:break;default:Yr(o,p)}}function rn(o){var c=o.alternate;c!==null&&(o.alternate=null,rn(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&Hn(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Ut=null,Cn=!1;function na(o,c,p){for(p=p.child;p!==null;)Mc(o,c,p),p=p.sibling}function Mc(o,c,p){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(Te,p)}catch{}switch(p.tag){case 26:Zn||qa(p,c),na(o,c,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Zn||qa(p,c);var y=Ut,E=Cn;Xu(p.type)&&(Ut=p.stateNode,Cn=!1),na(o,c,p),og(p.stateNode),Ut=y,Cn=E;break;case 5:Zn||qa(p,c);case 6:if(y=Ut,E=Cn,Ut=null,na(o,c,p),Ut=y,Cn=E,Ut!==null)if(Cn)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(p.stateNode)}catch(w){he(p,c,w)}else try{Ut.removeChild(p.stateNode)}catch(w){he(p,c,w)}break;case 18:Ut!==null&&(Cn?(o=Ut,nC(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,p.stateNode),mg(o)):nC(Ut,p.stateNode));break;case 4:y=Ut,E=Cn,Ut=p.stateNode.containerInfo,Cn=!0,na(o,c,p),Ut=y,Cn=E;break;case 0:case 11:case 14:case 15:Zn||Ts(2,p,c),Zn||Ts(4,p,c),na(o,c,p);break;case 1:Zn||(qa(p,c),y=p.stateNode,typeof y.componentWillUnmount=="function"&&ko(p,c,y)),na(o,c,p);break;case 21:na(o,c,p);break;case 22:Zn=(y=Zn)||p.memoizedState!==null,na(o,c,p),Zn=y;break;default:na(o,c,p)}}function Gl(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{mg(o)}catch(p){he(c,c.return,p)}}function xd(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new Cs),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new Cs),c;default:throw Error(i(435,o.tag))}}function Tc(o,c){var p=xd(o);c.forEach(function(y){var E=kt.bind(null,o,y);p.has(y)||(p.add(y),y.then(E,E))})}function lr(o,c){var p=c.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y],w=o,H=c,j=H;e:for(;j!==null;){switch(j.tag){case 27:if(Xu(j.type)){Ut=j.stateNode,Cn=!1;break e}break;case 5:Ut=j.stateNode,Cn=!1;break e;case 3:case 4:Ut=j.stateNode.containerInfo,Cn=!0;break e}j=j.return}if(Ut===null)throw Error(i(160));Mc(w,H,E),Ut=null,Cn=!1,w=E.alternate,w!==null&&(w.return=null),E.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)_d(c,o),c=c.sibling}var Ca=null;function _d(o,c){var p=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:lr(c,o),yi(o),y&4&&(Ts(3,o,o.return),Sc(3,o),Ts(5,o,o.return));break;case 1:lr(c,o),yi(o),y&512&&(Zn||p===null||qa(p,p.return)),y&64&&Ka&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(p=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var E=Ca;if(lr(c,o),yi(o),y&512&&(Zn||p===null||qa(p,p.return)),y&4){var w=p!==null?p.memoizedState:null;if(y=o.memoizedState,p===null)if(y===null)if(o.stateNode===null){e:{y=o.type,p=o.memoizedProps,E=E.ownerDocument||E;t:switch(y){case"title":w=E.getElementsByTagName("title")[0],(!w||w[ma]||w[Fi]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=E.createElement(y),E.head.insertBefore(w,E.querySelector("head > title"))),Kr(w,y,p),w[Fi]=o,zi(w),y=w;break e;case"link":var H=uC("link","href",E).get(y+(p.href||""));if(H){for(var j=0;j<H.length;j++)if(w=H[j],w.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&w.getAttribute("rel")===(p.rel==null?null:p.rel)&&w.getAttribute("title")===(p.title==null?null:p.title)&&w.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){H.splice(j,1);break t}}w=E.createElement(y),Kr(w,y,p),E.head.appendChild(w);break;case"meta":if(H=uC("meta","content",E).get(y+(p.content||""))){for(j=0;j<H.length;j++)if(w=H[j],w.getAttribute("content")===(p.content==null?null:""+p.content)&&w.getAttribute("name")===(p.name==null?null:p.name)&&w.getAttribute("property")===(p.property==null?null:p.property)&&w.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&w.getAttribute("charset")===(p.charSet==null?null:p.charSet)){H.splice(j,1);break t}}w=E.createElement(y),Kr(w,y,p),E.head.appendChild(w);break;default:throw Error(i(468,y))}w[Fi]=o,zi(w),y=w}o.stateNode=y}else fC(E,o.type,o.stateNode);else o.stateNode=cC(E,y,o.memoizedProps);else w!==y?(w===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):w.count--,y===null?fC(E,o.type,o.stateNode):cC(E,y,o.memoizedProps)):y===null&&o.stateNode!==null&&bh(o,o.memoizedProps,p.memoizedProps)}break;case 27:lr(c,o),yi(o),y&512&&(Zn||p===null||qa(p,p.return)),p!==null&&y&4&&bh(o,o.memoizedProps,p.memoizedProps);break;case 5:if(lr(c,o),yi(o),y&512&&(Zn||p===null||qa(p,p.return)),o.flags&32){E=o.stateNode;try{Hr(E,"")}catch(De){he(o,o.return,De)}}y&4&&o.stateNode!=null&&(E=o.memoizedProps,bh(o,E,p!==null?p.memoizedProps:E)),y&1024&&(zu=!0);break;case 6:if(lr(c,o),yi(o),y&4){if(o.stateNode===null)throw Error(i(162));y=o.memoizedProps,p=o.stateNode;try{p.nodeValue=y}catch(De){he(o,o.return,De)}}break;case 3:if(B1=null,E=Ca,Ca=R1(c.containerInfo),lr(c,o),Ca=E,yi(o),y&4&&p!==null&&p.memoizedState.isDehydrated)try{mg(c.containerInfo)}catch(De){he(o,o.return,De)}zu&&(zu=!1,Vl(o));break;case 4:y=Ca,Ca=R1(o.stateNode.containerInfo),lr(c,o),yi(o),Ca=y;break;case 12:lr(c,o),yi(o);break;case 13:lr(c,o),yi(o),o.child.flags&8192&&o.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Vn=je()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,Tc(o,y)));break;case 22:E=o.memoizedState!==null;var ne=p!==null&&p.memoizedState!==null,Ee=Ka,ze=Zn;if(Ka=Ee||E,Zn=ze||ne,lr(c,o),Zn=ze,Ka=Ee,yi(o),y&8192)e:for(c=o.stateNode,c._visibility=E?c._visibility&-2:c._visibility|1,E&&(p===null||ne||Ka||Zn||ws(o)),p=null,c=o;;){if(c.tag===5||c.tag===26){if(p===null){ne=p=c;try{if(w=ne.stateNode,E)H=w.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{j=ne.stateNode;var We=ne.memoizedProps.style,Ce=We!=null&&We.hasOwnProperty("display")?We.display:null;j.style.display=Ce==null||typeof Ce=="boolean"?"":(""+Ce).trim()}}catch(De){he(ne,ne.return,De)}}}else if(c.tag===6){if(p===null){ne=c;try{ne.stateNode.nodeValue=E?"":ne.memoizedProps}catch(De){he(ne,ne.return,De)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}y&4&&(y=o.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,Tc(o,p))));break;case 19:lr(c,o),yi(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,Tc(o,y)));break;case 30:break;case 21:break;default:lr(c,o),yi(o)}}function yi(o){var c=o.flags;if(c&2){try{for(var p,y=o.return;y!==null;){if(Sh(y)){p=y;break}y=y.return}if(p==null)throw Error(i(160));switch(p.tag){case 27:var E=p.stateNode,w=Il(o);zl(o,w,E);break;case 5:var H=p.stateNode;p.flags&32&&(Hr(H,""),p.flags&=-33);var j=Il(o);zl(o,j,H);break;case 3:case 4:var ne=p.stateNode.containerInfo,Ee=Il(o);Fl(o,Ee,ne);break;default:throw Error(i(161))}}catch(ze){he(o,o.return,ze)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function Vl(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;Vl(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function Yr(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)jo(o,c.alternate,c),c=c.sibling}function ws(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:Ts(4,c,c.return),ws(c);break;case 1:qa(c,c.return);var p=c.stateNode;typeof p.componentWillUnmount=="function"&&ko(c,c.return,p),ws(c);break;case 27:og(c.stateNode);case 26:case 5:qa(c,c.return),ws(c);break;case 22:c.memoizedState===null&&ws(c);break;case 30:ws(c);break;default:ws(c)}o=o.sibling}}function Ja(o,c,p){for(p=p&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,E=o,w=c,H=w.flags;switch(w.tag){case 0:case 11:case 15:Ja(E,w,p),Sc(4,w);break;case 1:if(Ja(E,w,p),y=w,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Ee){he(y,y.return,Ee)}if(y=w,E=y.updateQueue,E!==null){var j=y.stateNode;try{var ne=E.shared.hiddenCallbacks;if(ne!==null)for(E.shared.hiddenCallbacks=null,E=0;E<ne.length;E++)wu(ne[E],j)}catch(Ee){he(y,y.return,Ee)}}p&&H&64&&Ac(w),Ec(w,w.return);break;case 27:Hl(w);case 26:case 5:Ja(E,w,p),p&&y===null&&H&4&&Fu(w),Ec(w,w.return);break;case 12:Ja(E,w,p);break;case 13:Ja(E,w,p),p&&H&4&&Gl(E,w);break;case 22:w.memoizedState===null&&Ja(E,w,p),Ec(w,w.return);break;case 30:break;default:Ja(E,w,p)}c=c.sibling}}function bd(o,c){var p=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==p&&(o!=null&&o.refCount++,p!=null&&Su(p))}function Sd(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Su(o))}function Yn(o,c,p,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Ad(o,c,p,y),c=c.sibling}function Ad(o,c,p,y){var E=c.flags;switch(c.tag){case 0:case 11:case 15:Yn(o,c,p,y),E&2048&&Sc(9,c);break;case 1:Yn(o,c,p,y);break;case 3:Yn(o,c,p,y),E&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Su(o)));break;case 12:if(E&2048){Yn(o,c,p,y),o=c.stateNode;try{var w=c.memoizedProps,H=w.id,j=w.onPostCommit;typeof j=="function"&&j(H,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ne){he(c,c.return,ne)}}else Yn(o,c,p,y);break;case 13:Yn(o,c,p,y);break;case 23:break;case 22:w=c.stateNode,H=c.alternate,c.memoizedState!==null?w._visibility&2?Yn(o,c,p,y):wa(o,c):w._visibility&2?Yn(o,c,p,y):(w._visibility|=2,Xo(o,c,p,y,(c.subtreeFlags&10256)!==0)),E&2048&&bd(H,c);break;case 24:Yn(o,c,p,y),E&2048&&Sd(c.alternate,c);break;default:Yn(o,c,p,y)}}function Xo(o,c,p,y,E){for(E=E&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var w=o,H=c,j=p,ne=y,Ee=H.flags;switch(H.tag){case 0:case 11:case 15:Xo(w,H,j,ne,E),Sc(8,H);break;case 23:break;case 22:var ze=H.stateNode;H.memoizedState!==null?ze._visibility&2?Xo(w,H,j,ne,E):wa(w,H):(ze._visibility|=2,Xo(w,H,j,ne,E)),E&&Ee&2048&&bd(H.alternate,H);break;case 24:Xo(w,H,j,ne,E),E&&Ee&2048&&Sd(H.alternate,H);break;default:Xo(w,H,j,ne,E)}c=c.sibling}}function wa(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var p=o,y=c,E=y.flags;switch(y.tag){case 22:wa(p,y),E&2048&&bd(y.alternate,y);break;case 24:wa(p,y),E&2048&&Sd(y.alternate,y);break;default:wa(p,y)}c=c.sibling}}var Rs=8192;function Hu(o){if(o.subtreeFlags&Rs)for(o=o.child;o!==null;)A1(o),o=o.sibling}function A1(o){switch(o.tag){case 26:Hu(o),o.flags&Rs&&o.memoizedState!==null&&NL(Ca,o.memoizedState,o.memoizedProps);break;case 5:Hu(o);break;case 3:case 4:var c=Ca;Ca=R1(o.stateNode.containerInfo),Hu(o),Ca=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=Rs,Rs=16777216,Hu(o),Rs=c):Hu(o));break;default:Hu(o)}}function E1(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function Qn(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];Wn=y,Za(y,o)}E1(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ng(o),o=o.sibling}function ng(o){switch(o.tag){case 0:case 11:case 15:Qn(o),o.flags&2048&&Ts(9,o,o.return);break;case 3:Qn(o);break;case 12:Qn(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,$a(o)):Qn(o);break;default:Qn(o)}}function $a(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];Wn=y,Za(y,o)}E1(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:Ts(8,c,c.return),$a(c);break;case 22:p=c.stateNode,p._visibility&2&&(p._visibility&=-3,$a(c));break;default:$a(c)}o=o.sibling}}function Za(o,c){for(;Wn!==null;){var p=Wn;switch(p.tag){case 0:case 11:case 15:Ts(8,p,c);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Su(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,Wn=y;else e:for(p=o;Wn!==null;){y=Wn;var E=y.sibling,w=y.return;if(rn(y),y===p){Wn=null;break e}if(E!==null){E.return=w,Wn=E;break e}Wn=w}}}var xi={getCacheForType:function(o){var c=vi(Gi),p=c.data.get(o);return p===void 0&&(p=o(),c.data.set(o,p)),p}},ig=typeof WeakMap=="function"?WeakMap:Map,Un=0,Yt=null,fn=null,Ot=0,tn=0,di=null,Ds=!1,Gu=!1,Vu=!1,ia=0,ii=0,Ra=0,Qa=0,Cc=0,ra=0,wn=0,Ln=null,Lt=null,vn=!1,Vn=0,Or=1/0,sa=null,Bs=null,$i=0,Pr=null,qn=null,Os=0,Wo=0,Ah=null,Ps=null,eo=0,wc=null;function _i(){if((Un&2)!==0&&Ot!==0)return Ot&-Ot;if(k.T!==null){var o=Jt;return o!==0?o:OS()}return en()}function Ed(){ra===0&&(ra=(Ot&536870912)===0||Dn?le():536870912);var o=Xn.current;return o!==null&&(o.flags|=32),ra}function qr(o,c,p){(o===Yt&&(tn===2||tn===9)||o.cancelPendingCommit!==null)&&(jl(o,0),Da(o,Ot,ra,!1)),Ie(o,p),((Un&2)===0||o!==Yt)&&(o===Yt&&((Un&2)===0&&(Qa|=p),ii===4&&Da(o,Ot,ra,!1)),Yl(o))}function ku(o,c,p){if((Un&6)!==0)throw Error(i(327));var y=!p&&(c&124)===0&&(c&o.expiredLanes)===0||Le(o,c),E=y?T(o,c):d(o,c,!0),w=y;do{if(E===0){Gu&&!y&&Da(o,c,0,!1);break}else{if(p=o.current.alternate,w&&!kl(p)){E=d(o,c,!1),w=!1;continue}if(E===2){if(w=c,o.errorRecoveryDisabledLanes&w)var H=0;else H=o.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){c=H;e:{var j=o;E=Ln;var ne=j.current.memoizedState.isDehydrated;if(ne&&(jl(j,H).flags|=256),H=d(j,H,!1),H!==2){if(Vu&&!ne){j.errorRecoveryDisabledLanes|=w,Qa|=w,E=4;break e}w=Lt,Lt=E,w!==null&&(Lt===null?Lt=w:Lt.push.apply(Lt,w))}E=H}if(w=!1,E!==2)continue}}if(E===1){jl(o,0),Da(o,c,0,!0);break}e:{switch(y=o,w=E,w){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:Da(y,c,ra,!Ds);break e;case 2:Lt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(E=Vn+300-je(),10<E)){if(Da(y,c,ra,!Ds),ue(y,0,!0)!==0)break e;y.timeoutHandle=eC(Eh.bind(null,y,p,Lt,sa,vn,c,ra,Qa,wn,Ds,w,2,-0,0),E);break e}Eh(y,p,Lt,sa,vn,c,ra,Qa,wn,Ds,w,0,-0,0)}}break}while(!0);Yl(o)}function Eh(o,c,p,y,E,w,H,j,ne,Ee,ze,We,Ce,De){if(o.timeoutHandle=-1,We=c.subtreeFlags,(We&8192||(We&16785408)===16785408)&&(ug={stylesheets:null,count:0,unsuspend:LL},A1(c),We=IL(),We!==null)){o.cancelPendingCommit=We(nt.bind(null,o,c,w,p,y,E,H,j,ne,ze,1,Ce,De)),Da(o,w,H,!Ee);return}nt(o,c,w,p,y,E,H,j,ne)}function kl(o){for(var c=o;;){var p=c.tag;if((p===0||p===11||p===15)&&c.flags&16384&&(p=c.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var E=p[y],w=E.getSnapshot;E=E.value;try{if(!ns(w(),E))return!1}catch{return!1}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Da(o,c,p,y){c&=~Cc,c&=~Qa,o.suspendedLanes|=c,o.pingedLanes&=~c,y&&(o.warmLanes|=c),y=o.expirationTimes;for(var E=c;0<E;){var w=31-ct(E),H=1<<w;y[w]=-1,E&=~H}p!==0&&at(o,p,c)}function to(){return(Un&6)===0?(rg(0),!1):!0}function Rc(){if(fn!==null){if(tn===0)var o=fn.return;else o=fn,Uo=Cl=null,zm(o),dc=null,gh=0,o=fn;for(;o!==null;)Iu(o.alternate,o),o=o.return;fn=null}}function jl(o,c){var p=o.timeoutHandle;p!==-1&&(o.timeoutHandle=-1,yL(p)),p=o.cancelPendingCommit,p!==null&&(o.cancelPendingCommit=null,p()),Rc(),Yt=o,fn=p=Mi(o.current,null),Ot=c,tn=0,di=null,Ds=!1,Gu=Le(o,c),Vu=!1,wn=ra=Cc=Qa=Ra=ii=0,Lt=Ln=null,vn=!1,(c&8)!==0&&(c|=c&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=c;0<y;){var E=31-ct(y),w=1<<E;c|=o[E],y&=~w}return ia=c,Qf(),p}function Md(o,c){$t=null,k.H=mh,c===ch||c===ba?(c=Um(),tn=3):c===Pm?(c=Um(),tn=4):tn=c===S1?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,di=c,fn===null&&(ii=1,gd(o,yr(c,o.current)))}function ju(){var o=k.H;return k.H=mh,o===null?mh:o}function Td(){var o=k.A;return k.A=xi,o}function f(){ii=4,Ds||(Ot&4194048)!==Ot&&Xn.current!==null||(Gu=!0),(Ra&134217727)===0&&(Qa&134217727)===0||Yt===null||Da(Yt,Ot,ra,!1)}function d(o,c,p){var y=Un;Un|=2;var E=ju(),w=Td();(Yt!==o||Ot!==c)&&(sa=null,jl(o,c)),c=!1;var H=ii;e:do try{if(tn!==0&&fn!==null){var j=fn,ne=di;switch(tn){case 8:Rc(),H=6;break e;case 3:case 2:case 9:case 6:Xn.current===null&&(c=!0);var Ee=tn;if(tn=0,di=null,se(o,j,ne,Ee),p&&Gu){H=0;break e}break;default:Ee=tn,tn=0,di=null,se(o,j,ne,Ee)}}_(),H=ii;break}catch(ze){Md(o,ze)}while(!0);return c&&o.shellSuspendCounter++,Uo=Cl=null,Un=y,k.H=E,k.A=w,fn===null&&(Yt=null,Ot=0,Qf()),H}function _(){for(;fn!==null;)P(fn)}function T(o,c){var p=Un;Un|=2;var y=ju(),E=Td();Yt!==o||Ot!==c?(sa=null,Or=je()+500,jl(o,c)):Gu=Le(o,c);e:do try{if(tn!==0&&fn!==null){c=fn;var w=di;t:switch(tn){case 1:tn=0,di=null,se(o,c,w,1);break;case 2:case 9:if(td(w)){tn=0,di=null,Y(c);break}c=function(){tn!==2&&tn!==9||Yt!==o||(tn=7),Yl(o)},w.then(c,c);break e;case 3:tn=7;break e;case 4:tn=5;break e;case 7:td(w)?(tn=0,di=null,Y(c)):(tn=0,di=null,se(o,c,w,7));break;case 5:var H=null;switch(fn.tag){case 26:H=fn.memoizedState;case 5:case 27:var j=fn;if(!H||hC(H)){tn=0,di=null;var ne=j.sibling;if(ne!==null)fn=ne;else{var Ee=j.return;Ee!==null?(fn=Ee,xe(Ee)):fn=null}break t}}tn=0,di=null,se(o,c,w,5);break;case 6:tn=0,di=null,se(o,c,w,6);break;case 8:Rc(),ii=6;break e;default:throw Error(i(462))}}D();break}catch(ze){Md(o,ze)}while(!0);return Uo=Cl=null,k.H=y,k.A=E,Un=p,fn!==null?0:(Yt=null,Ot=0,Qf(),ii)}function D(){for(;fn!==null&&!Qe();)P(fn)}function P(o){var c=_c(o.alternate,o,ia);o.memoizedProps=o.pendingProps,c===null?xe(o):fn=c}function Y(o){var c=o,p=c.alternate;switch(c.tag){case 15:case 0:c=Es(p,c,c.pendingProps,c.type,void 0,Ot);break;case 11:c=Es(p,c,c.pendingProps,c.type.render,c.ref,Ot);break;case 5:zm(c);default:Iu(p,c),c=fn=Tm(c,ia),c=_c(p,c,ia)}o.memoizedProps=o.pendingProps,c===null?xe(o):fn=c}function se(o,c,p,y){Uo=Cl=null,zm(c),dc=null,gh=0;var E=c.return;try{if(DS(o,E,c,p,Ot)){ii=1,gd(o,yr(p,o.current)),fn=null;return}}catch(w){if(E!==null)throw fn=E,w;ii=1,gd(o,yr(p,o.current)),fn=null;return}c.flags&32768?(Dn||y===1?o=!0:Gu||(Ot&536870912)!==0?o=!1:(Ds=o=!0,(y===2||y===9||y===3||y===6)&&(y=Xn.current,y!==null&&y.tag===13&&(y.flags|=16384))),Fe(c,o)):xe(c)}function xe(o){var c=o;do{if((c.flags&32768)!==0){Fe(c,Ds);return}o=c.return;var p=tg(c.alternate,c,ia);if(p!==null){fn=p;return}if(c=c.sibling,c!==null){fn=c;return}fn=c=o}while(c!==null);ii===0&&(ii=5)}function Fe(o,c){do{var p=Nu(o.alternate,o);if(p!==null){p.flags&=32767,fn=p;return}if(p=o.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!c&&(o=o.sibling,o!==null)){fn=o;return}fn=o=p}while(o!==null);ii=6,fn=null}function nt(o,c,p,y,E,w,H,j,ne){o.cancelPendingCommit=null;do Xl();while($i!==0);if((Un&6)!==0)throw Error(i(327));if(c!==null){if(c===o.current)throw Error(i(177));if(w=c.lanes|c.childLanes,w|=W0,ht(o,p,w,H,j,ne),o===Yt&&(fn=Yt=null,Ot=0),qn=c,Pr=o,Os=p,Wo=w,Ah=E,Ps=y,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Bn(J,function(){return Wl(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||y){y=k.T,k.T=null,E=K.p,K.p=2,H=Un,Un|=4;try{Ji(o,c,p)}finally{Un=H,K.p=E,k.T=y}}$i=1,dt(),mt(),qt()}}function dt(){if($i===1){$i=0;var o=Pr,c=qn,p=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||p){p=k.T,k.T=null;var y=K.p;K.p=2;var E=Un;Un|=4;try{_d(c,o);var w=HS,H=xm(o.containerInfo),j=w.focusedElem,ne=w.selectionRange;if(H!==j&&j&&j.ownerDocument&&ym(j.ownerDocument.documentElement,j)){if(ne!==null&&Jf(j)){var Ee=ne.start,ze=ne.end;if(ze===void 0&&(ze=Ee),"selectionStart"in j)j.selectionStart=Ee,j.selectionEnd=Math.min(ze,j.value.length);else{var We=j.ownerDocument||document,Ce=We&&We.defaultView||window;if(Ce.getSelection){var De=Ce.getSelection(),jt=j.textContent.length,zt=Math.min(ne.start,jt),ti=ne.end===void 0?zt:Math.min(ne.end,jt);!De.extend&&zt>ti&&(H=ti,ti=zt,zt=H);var ve=vm(j,zt),de=vm(j,ti);if(ve&&de&&(De.rangeCount!==1||De.anchorNode!==ve.node||De.anchorOffset!==ve.offset||De.focusNode!==de.node||De.focusOffset!==de.offset)){var be=We.createRange();be.setStart(ve.node,ve.offset),De.removeAllRanges(),zt>ti?(De.addRange(be),De.extend(de.node,de.offset)):(be.setEnd(de.node,de.offset),De.addRange(be))}}}}for(We=[],De=j;De=De.parentNode;)De.nodeType===1&&We.push({element:De,left:De.scrollLeft,top:De.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<We.length;j++){var Ve=We[j];Ve.element.scrollLeft=Ve.left,Ve.element.scrollTop=Ve.top}}U1=!!zS,HS=zS=null}finally{Un=E,K.p=y,k.T=p}}o.current=c,$i=2}}function mt(){if($i===2){$i=0;var o=Pr,c=qn,p=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||p){p=k.T,k.T=null;var y=K.p;K.p=2;var E=Un;Un|=4;try{jo(o,c.alternate,c)}finally{Un=E,K.p=y,k.T=p}}$i=3}}function qt(){if($i===4||$i===3){$i=0,Xe();var o=Pr,c=qn,p=Os,y=Ps;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?$i=5:($i=0,qn=Pr=null,Us(o,o.pendingLanes));var E=o.pendingLanes;if(E===0&&(Bs=null),On(p),c=c.stateNode,tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(Te,c,void 0,(c.current.flags&128)===128)}catch{}if(y!==null){c=k.T,E=K.p,K.p=2,k.T=null;try{for(var w=o.onRecoverableError,H=0;H<y.length;H++){var j=y[H];w(j.value,{componentStack:j.stack})}}finally{k.T=c,K.p=E}}(Os&3)!==0&&Xl(),Yl(o),E=o.pendingLanes,(p&4194090)!==0&&(E&42)!==0?o===wc?eo++:(eo=0,wc=o):eo=0,rg(0)}}function Us(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Su(c)))}function Xl(o){return dt(),mt(),qt(),Wl()}function Wl(){if($i!==5)return!1;var o=Pr,c=Wo;Wo=0;var p=On(Os),y=k.T,E=K.p;try{K.p=32>p?32:p,k.T=null,p=Ah,Ah=null;var w=Pr,H=Os;if($i=0,qn=Pr=null,Os=0,(Un&6)!==0)throw Error(i(331));var j=Un;if(Un|=4,ng(w.current),Ad(w,w.current,H,p),Un=j,rg(0,!1),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(Te,w)}catch{}return!0}finally{K.p=E,k.T=y,Us(o,c)}}function Me(o,c,p){c=yr(p,c),c=vd(o.stateNode,c,2),o=Io(o,c,2),o!==null&&(Ie(o,2),Yl(o))}function he(o,c,p){if(o.tag===3)Me(o,o,p);else for(;c!==null;){if(c.tag===3){Me(c,o,p);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Bs===null||!Bs.has(y))){o=yr(p,o),p=b1(2),y=Io(c,p,2),y!==null&&(yd(p,y,c,o),Ie(y,2),Yl(y));break}}c=c.return}}function Be(o,c,p){var y=o.pingCache;if(y===null){y=o.pingCache=new ig;var E=new Set;y.set(c,E)}else E=y.get(c),E===void 0&&(E=new Set,y.set(c,E));E.has(p)||(Vu=!0,E.add(p),o=et.bind(null,o,c,p),c.then(o,o))}function et(o,c,p){var y=o.pingCache;y!==null&&y.delete(c),o.pingedLanes|=o.suspendedLanes&p,o.warmLanes&=~p,Yt===o&&(Ot&p)===p&&(ii===4||ii===3&&(Ot&62914560)===Ot&&300>je()-Vn?(Un&2)===0&&jl(o,0):Cc|=p,wn===Ot&&(wn=0)),Yl(o)}function Ct(o,c){c===0&&(c=Je()),o=Oo(o,c),o!==null&&(Ie(o,c),Yl(o))}function ri(o){var c=o.memoizedState,p=0;c!==null&&(p=c.retryLane),Ct(o,p)}function kt(o,c){var p=0;switch(o.tag){case 13:var y=o.stateNode,E=o.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(i(314))}y!==null&&y.delete(c),Ct(o,p)}function Bn(o,c){return bt(o,c)}var Ri=null,pn=null,no=!1,Cd=!1,BS=!1,Mh=0;function Yl(o){o!==pn&&o.next===null&&(pn===null?Ri=pn=o:pn=pn.next=o),Cd=!0,no||(no=!0,cL())}function rg(o,c){if(!BS&&Cd){BS=!0;do for(var p=!1,y=Ri;y!==null;){if(o!==0){var E=y.pendingLanes;if(E===0)var w=0;else{var H=y.suspendedLanes,j=y.pingedLanes;w=(1<<31-ct(42|o)+1)-1,w&=E&~(H&~j),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(p=!0,j3(y,w))}else w=Ot,w=ue(y,y===Yt?w:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(w&3)===0||Le(y,w)||(p=!0,j3(y,w));y=y.next}while(p);BS=!1}}function lL(){G3()}function G3(){Cd=no=!1;var o=0;Mh!==0&&(vL()&&(o=Mh),Mh=0);for(var c=je(),p=null,y=Ri;y!==null;){var E=y.next,w=V3(y,c);w===0?(y.next=null,p===null?Ri=E:p.next=E,E===null&&(pn=p)):(p=y,(o!==0||(w&3)!==0)&&(Cd=!0)),y=E}rg(o)}function V3(o,c){for(var p=o.suspendedLanes,y=o.pingedLanes,E=o.expirationTimes,w=o.pendingLanes&-62914561;0<w;){var H=31-ct(w),j=1<<H,ne=E[H];ne===-1?((j&p)===0||(j&y)!==0)&&(E[H]=rt(j,c)):ne<=c&&(o.expiredLanes|=j),w&=~j}if(c=Yt,p=Ot,p=ue(o,o===c?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,p===0||o===c&&(tn===2||tn===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&Z(y),o.callbackNode=null,o.callbackPriority=0;if((p&3)===0||Le(o,p)){if(c=p&-p,c===o.callbackPriority)return c;switch(y!==null&&Z(y),On(p)){case 2:case 8:p=Ge;break;case 32:p=J;break;case 268435456:p=te;break;default:p=J}return y=k3.bind(null,o),p=bt(p,y),o.callbackPriority=c,o.callbackNode=p,c}return y!==null&&y!==null&&Z(y),o.callbackPriority=2,o.callbackNode=null,2}function k3(o,c){if($i!==0&&$i!==5)return o.callbackNode=null,o.callbackPriority=0,null;var p=o.callbackNode;if(Xl()&&o.callbackNode!==p)return null;var y=Ot;return y=ue(o,o===Yt?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(ku(o,y,c),V3(o,je()),o.callbackNode!=null&&o.callbackNode===p?k3.bind(null,o):null)}function j3(o,c){if(Xl())return null;ku(o,c,!0)}function cL(){xL(function(){(Un&6)!==0?bt(lt,lL):G3()})}function OS(){return Mh===0&&(Mh=le()),Mh}function X3(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:If(""+o)}function W3(o,c){var p=c.ownerDocument.createElement("input");return p.name=c.name,p.value=c.value,o.id&&p.setAttribute("form",o.id),c.parentNode.insertBefore(p,c),o=new FormData(o),p.parentNode.removeChild(p),o}function uL(o,c,p,y,E){if(c==="submit"&&p&&p.stateNode===E){var w=X3((E[Yi]||null).action),H=y.submitter;H&&(c=(c=H[Yi]||null)?X3(c.formAction):H.getAttribute("formAction"),c!==null&&(w=c,H=null));var j=new cu("action","action",null,y,E);o.push({event:j,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Mh!==0){var ne=H?W3(E,H):new FormData(E);$m(p,{pending:!0,data:ne,method:E.method,action:w},null,ne)}}else typeof w=="function"&&(j.preventDefault(),ne=H?W3(E,H):new FormData(E),$m(p,{pending:!0,data:ne,method:E.method,action:w},w,ne))},currentTarget:E}]})}}for(var PS=0;PS<Zf.length;PS++){var US=Zf[PS],fL=US.toLowerCase(),hL=US[0].toUpperCase()+US.slice(1);rr(fL,"on"+hL)}rr(Vr,"onAnimationEnd"),rr(Sm,"onAnimationIteration"),rr(rs,"onAnimationStart"),rr("dblclick","onDoubleClick"),rr("focusin","onFocus"),rr("focusout","onBlur"),rr(Py,"onTransitionRun"),rr(Do,"onTransitionStart"),rr(vu,"onTransitionCancel"),rr(Bo,"onTransitionEnd"),X("onMouseEnter",["mouseout","mouseover"]),X("onMouseLeave",["mouseout","mouseover"]),X("onPointerEnter",["pointerout","pointerover"]),X("onPointerLeave",["pointerout","pointerover"]),ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ya("onBeforeInput",["compositionend","keypress","textInput","paste"]),ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sg));function Y3(o,c){c=(c&4)!==0;for(var p=0;p<o.length;p++){var y=o[p],E=y.event;y=y.listeners;e:{var w=void 0;if(c)for(var H=y.length-1;0<=H;H--){var j=y[H],ne=j.instance,Ee=j.currentTarget;if(j=j.listener,ne!==w&&E.isPropagationStopped())break e;w=j,E.currentTarget=Ee;try{w(E)}catch(ze){mc(ze)}E.currentTarget=null,w=ne}else for(H=0;H<y.length;H++){if(j=y[H],ne=j.instance,Ee=j.currentTarget,j=j.listener,ne!==w&&E.isPropagationStopped())break e;w=j,E.currentTarget=Ee;try{w(E)}catch(ze){mc(ze)}E.currentTarget=null,w=ne}}}}function _n(o,c){var p=c[es];p===void 0&&(p=c[es]=new Set);var y=o+"__bubble";p.has(y)||(q3(c,o,2,!1),p.add(y))}function LS(o,c,p){var y=0;c&&(y|=4),q3(p,o,y,c)}var M1="_reactListening"+Math.random().toString(36).slice(2);function NS(o){if(!o[M1]){o[M1]=!0,ru.forEach(function(p){p!=="selectionchange"&&(dL.has(p)||LS(p,!1,o),LS(p,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[M1]||(c[M1]=!0,LS("selectionchange",!1,c))}}function q3(o,c,p,y){switch(yC(c)){case 2:var E=HL;break;case 8:E=GL;break;default:E=JS}p=E.bind(null,c,p,o),E=void 0,!zf||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(E=!0),y?E!==void 0?o.addEventListener(c,p,{capture:!0,passive:E}):o.addEventListener(c,p,!0):E!==void 0?o.addEventListener(c,p,{passive:E}):o.addEventListener(c,p,!1)}function IS(o,c,p,y,E){var w=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var H=y.tag;if(H===3||H===4){var j=y.stateNode.containerInfo;if(j===E)break;if(H===4)for(H=y.return;H!==null;){var ne=H.tag;if((ne===3||ne===4)&&H.stateNode.containerInfo===E)return;H=H.return}for(;j!==null;){if(H=ga(j),H===null)return;if(ne=H.tag,ne===5||ne===6||ne===26||ne===27){y=w=H;continue e}j=j.parentNode}}y=y.return}sm(function(){var Ee=w,ze=P0(p),We=[];e:{var Ce=X0.get(o);if(Ce!==void 0){var De=cu,jt=o;switch(o){case"keypress":if(ml(p)===0)break e;case"keydown":case"keyup":De=um;break;case"focusin":jt="focus",De=L0;break;case"focusout":jt="blur",De=L0;break;case"beforeblur":case"afterblur":De=L0;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=lm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=xS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=hm;break;case Vr:case Sm:case rs:De=yy;break;case Bo:De=To;break;case"scroll":case"scrollend":De=my;break;case"wheel":De=_S;break;case"copy":case"cut":case"paste":De=_y;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=I0;break;case"toggle":case"beforetoggle":De=vl}var zt=(c&4)!==0,ti=!zt&&(o==="scroll"||o==="scrollend"),ve=zt?Ce!==null?Ce+"Capture":null:Ce;zt=[];for(var de=Ee,be;de!==null;){var Ve=de;if(be=Ve.stateNode,Ve=Ve.tag,Ve!==5&&Ve!==26&&Ve!==27||be===null||ve===null||(Ve=au(de,ve),Ve!=null&&zt.push(ag(de,Ve,be))),ti)break;de=de.return}0<zt.length&&(Ce=new De(Ce,jt,null,p,ze),We.push({event:Ce,listeners:zt}))}}if((c&7)===0){e:{if(Ce=o==="mouseover"||o==="pointerover",De=o==="mouseout"||o==="pointerout",Ce&&p!==O0&&(jt=p.relatedTarget||p.fromElement)&&(ga(jt)||jt[Rr]))break e;if((De||Ce)&&(Ce=ze.window===ze?ze:(Ce=ze.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,De?(jt=p.relatedTarget||p.toElement,De=Ee,jt=jt?ga(jt):null,jt!==null&&(ti=s(jt),zt=jt.tag,jt!==ti||zt!==5&&zt!==27&&zt!==6)&&(jt=null)):(De=null,jt=Ee),De!==jt)){if(zt=lm,Ve="onMouseLeave",ve="onMouseEnter",de="mouse",(o==="pointerout"||o==="pointerover")&&(zt=I0,Ve="onPointerLeave",ve="onPointerEnter",de="pointer"),ti=De==null?Ce:dl(De),be=jt==null?Ce:dl(jt),Ce=new zt(Ve,de+"leave",De,p,ze),Ce.target=ti,Ce.relatedTarget=be,Ve=null,ga(ze)===Ee&&(zt=new zt(ve,de+"enter",jt,p,ze),zt.target=be,zt.relatedTarget=ti,Ve=zt),ti=Ve,De&&jt)t:{for(zt=De,ve=jt,de=0,be=zt;be;be=wd(be))de++;for(be=0,Ve=ve;Ve;Ve=wd(Ve))be++;for(;0<de-be;)zt=wd(zt),de--;for(;0<be-de;)ve=wd(ve),be--;for(;de--;){if(zt===ve||ve!==null&&zt===ve.alternate)break t;zt=wd(zt),ve=wd(ve)}zt=null}else zt=null;De!==null&&K3(We,Ce,De,zt,!1),jt!==null&&ti!==null&&K3(We,ti,jt,zt,!0)}}e:{if(Ce=Ee?dl(Ee):window,De=Ce.nodeName&&Ce.nodeName.toLowerCase(),De==="select"||De==="input"&&Ce.type==="file")var Et=z0;else if(gm(Ce))if(H0)Et=_l;else{Et=Dy;var yn=bS}else De=Ce.nodeName,!De||De.toLowerCase()!=="input"||Ce.type!=="checkbox"&&Ce.type!=="radio"?Ee&&B0(Ee.elementType)&&(Et=z0):Et=Kf;if(Et&&(Et=Et(o,Ee))){ts(We,Et,p,ze);break e}yn&&yn(o,Ce,Ee),o==="focusout"&&Ee&&Ce.type==="number"&&Ee.memoizedProps.value!=null&&pr(Ce,"number",Ce.value)}switch(yn=Ee?dl(Ee):window,o){case"focusin":(gm(yn)||yn.contentEditable==="true")&&(wo=yn,V0=Ee,$f=null);break;case"focusout":$f=V0=wo=null;break;case"mousedown":k0=!0;break;case"contextmenu":case"mouseup":case"dragend":k0=!1,bm(We,p,ze);break;case"selectionchange":if(_m)break;case"keydown":case"keyup":bm(We,p,ze)}var Rt;if(kf)e:{switch(o){case"compositionstart":var Ht="onCompositionStart";break e;case"compositionend":Ht="onCompositionEnd";break e;case"compositionupdate":Ht="onCompositionUpdate";break e}Ht=void 0}else xl?Wf(o,p)&&(Ht="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Ht="onCompositionStart");Ht&&(Xf&&p.locale!=="ko"&&(xl||Ht!=="onCompositionStart"?Ht==="onCompositionEnd"&&xl&&(Rt=om()):(Eo=ze,am="value"in Eo?Eo.value:Eo.textContent,xl=!0)),yn=T1(Ee,Ht),0<yn.length&&(Ht=new N0(Ht,o,null,p,ze),We.push({event:Ht,listeners:yn}),Rt?Ht.data=Rt:(Rt=pm(p),Rt!==null&&(Ht.data=Rt)))),(Rt=jf?Yf(o,p):mm(o,p))&&(Ht=T1(Ee,"onBeforeInput"),0<Ht.length&&(yn=new N0("onBeforeInput","beforeinput",null,p,ze),We.push({event:yn,listeners:Ht}),yn.data=Rt)),uL(We,o,Ee,p,ze)}Y3(We,c)})}function ag(o,c,p){return{instance:o,listener:c,currentTarget:p}}function T1(o,c){for(var p=c+"Capture",y=[];o!==null;){var E=o,w=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||w===null||(E=au(o,p),E!=null&&y.unshift(ag(o,E,w)),E=au(o,c),E!=null&&y.push(ag(o,E,w))),o.tag===3)return y;o=o.return}return[]}function wd(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function K3(o,c,p,y,E){for(var w=c._reactName,H=[];p!==null&&p!==y;){var j=p,ne=j.alternate,Ee=j.stateNode;if(j=j.tag,ne!==null&&ne===y)break;j!==5&&j!==26&&j!==27||Ee===null||(ne=Ee,E?(Ee=au(p,w),Ee!=null&&H.unshift(ag(p,Ee,ne))):E||(Ee=au(p,w),Ee!=null&&H.push(ag(p,Ee,ne)))),p=p.return}H.length!==0&&o.push({event:c,listeners:H})}var pL=/\r\n?/g,mL=/\u0000|\uFFFD/g;function J3(o){return(typeof o=="string"?o:""+o).replace(pL,`
`).replace(mL,"")}function $3(o,c){return c=J3(c),J3(o)===c}function C1(){}function ei(o,c,p,y,E,w){switch(p){case"children":typeof y=="string"?c==="body"||c==="textarea"&&y===""||Hr(o,y):(typeof y=="number"||typeof y=="bigint")&&c!=="body"&&Hr(o,""+y);break;case"className":st(o,"class",y);break;case"tabIndex":st(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":st(o,p,y);break;case"style":Nf(o,y,w);break;case"data":if(c!=="object"){st(o,"data",y);break}case"src":case"href":if(y===""&&(c!=="a"||p!=="href")){o.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(p);break}y=If(""+y),o.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(p==="formAction"?(c!=="input"&&ei(o,c,"name",E.name,E,null),ei(o,c,"formEncType",E.formEncType,E,null),ei(o,c,"formMethod",E.formMethod,E,null),ei(o,c,"formTarget",E.formTarget,E,null)):(ei(o,c,"encType",E.encType,E,null),ei(o,c,"method",E.method,E,null),ei(o,c,"target",E.target,E,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(p);break}y=If(""+y),o.setAttribute(p,y);break;case"onClick":y!=null&&(o.onclick=C1);break;case"onScroll":y!=null&&_n("scroll",o);break;case"onScrollEnd":y!=null&&_n("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(i(60));o.innerHTML=p}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}p=If(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,""+y):o.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,""):o.removeAttribute(p);break;case"capture":case"download":y===!0?o.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,y):o.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(p,y):o.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(p):o.setAttribute(p,y);break;case"popover":_n("beforetoggle",o),_n("toggle",o),Ke(o,"popover",y);break;case"xlinkActuate":ot(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":ot(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":ot(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":ot(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":ot(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":ot(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":ot(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":ot(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":ot(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Ke(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=im.get(p)||p,Ke(o,p,y))}}function FS(o,c,p,y,E,w){switch(p){case"style":Nf(o,y,w);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(i(60));o.innerHTML=p}}break;case"children":typeof y=="string"?Hr(o,y):(typeof y=="number"||typeof y=="bigint")&&Hr(o,""+y);break;case"onScroll":y!=null&&_n("scroll",o);break;case"onScrollEnd":y!=null&&_n("scrollend",o);break;case"onClick":y!=null&&(o.onclick=C1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!su.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),c=p.slice(2,E?p.length-7:void 0),w=o[Yi]||null,w=w!=null?w[p]:null,typeof w=="function"&&o.removeEventListener(c,w,E),typeof y=="function")){typeof w!="function"&&w!==null&&(p in o?o[p]=null:o.hasAttribute(p)&&o.removeAttribute(p)),o.addEventListener(c,y,E);break e}p in o?o[p]=y:y===!0?o.setAttribute(p,""):Ke(o,p,y)}}}function Kr(o,c,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_n("error",o),_n("load",o);var y=!1,E=!1,w;for(w in p)if(p.hasOwnProperty(w)){var H=p[w];if(H!=null)switch(w){case"src":y=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:ei(o,c,w,H,p,null)}}E&&ei(o,c,"srcSet",p.srcSet,p,null),y&&ei(o,c,"src",p.src,p,null);return;case"input":_n("invalid",o);var j=w=H=E=null,ne=null,Ee=null;for(y in p)if(p.hasOwnProperty(y)){var ze=p[y];if(ze!=null)switch(y){case"name":E=ze;break;case"type":H=ze;break;case"checked":ne=ze;break;case"defaultChecked":Ee=ze;break;case"value":w=ze;break;case"defaultValue":j=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(i(137,c));break;default:ei(o,c,y,ze,p,null)}}Gn(o,w,j,ne,Ee,H,E,!1),fi(o);return;case"select":_n("invalid",o),y=H=w=null;for(E in p)if(p.hasOwnProperty(E)&&(j=p[E],j!=null))switch(E){case"value":w=j;break;case"defaultValue":H=j;break;case"multiple":y=j;default:ei(o,c,E,j,p,null)}c=w,p=H,o.multiple=!!y,c!=null?Hi(o,!!y,c,!1):p!=null&&Hi(o,!!y,p,!0);return;case"textarea":_n("invalid",o),w=E=y=null;for(H in p)if(p.hasOwnProperty(H)&&(j=p[H],j!=null))switch(H){case"value":y=j;break;case"defaultValue":E=j;break;case"children":w=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(91));break;default:ei(o,c,H,j,p,null)}ir(o,y,E,w),fi(o);return;case"option":for(ne in p)if(p.hasOwnProperty(ne)&&(y=p[ne],y!=null))switch(ne){case"selected":o.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:ei(o,c,ne,y,p,null)}return;case"dialog":_n("beforetoggle",o),_n("toggle",o),_n("cancel",o),_n("close",o);break;case"iframe":case"object":_n("load",o);break;case"video":case"audio":for(y=0;y<sg.length;y++)_n(sg[y],o);break;case"image":_n("error",o),_n("load",o);break;case"details":_n("toggle",o);break;case"embed":case"source":case"link":_n("error",o),_n("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ee in p)if(p.hasOwnProperty(Ee)&&(y=p[Ee],y!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:ei(o,c,Ee,y,p,null)}return;default:if(B0(c)){for(ze in p)p.hasOwnProperty(ze)&&(y=p[ze],y!==void 0&&FS(o,c,ze,y,p,void 0));return}}for(j in p)p.hasOwnProperty(j)&&(y=p[j],y!=null&&ei(o,c,j,y,p,null))}function gL(o,c,p,y){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,w=null,H=null,j=null,ne=null,Ee=null,ze=null;for(De in p){var We=p[De];if(p.hasOwnProperty(De)&&We!=null)switch(De){case"checked":break;case"value":break;case"defaultValue":ne=We;default:y.hasOwnProperty(De)||ei(o,c,De,null,y,We)}}for(var Ce in y){var De=y[Ce];if(We=p[Ce],y.hasOwnProperty(Ce)&&(De!=null||We!=null))switch(Ce){case"type":w=De;break;case"name":E=De;break;case"checked":Ee=De;break;case"defaultChecked":ze=De;break;case"value":H=De;break;case"defaultValue":j=De;break;case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(i(137,c));break;default:De!==We&&ei(o,c,Ce,De,y,We)}}Fa(o,H,j,ne,Ee,ze,w,E);return;case"select":De=H=j=Ce=null;for(w in p)if(ne=p[w],p.hasOwnProperty(w)&&ne!=null)switch(w){case"value":break;case"multiple":De=ne;default:y.hasOwnProperty(w)||ei(o,c,w,null,y,ne)}for(E in y)if(w=y[E],ne=p[E],y.hasOwnProperty(E)&&(w!=null||ne!=null))switch(E){case"value":Ce=w;break;case"defaultValue":j=w;break;case"multiple":H=w;default:w!==ne&&ei(o,c,E,w,y,ne)}c=j,p=H,y=De,Ce!=null?Hi(o,!!p,Ce,!1):!!y!=!!p&&(c!=null?Hi(o,!!p,c,!0):Hi(o,!!p,p?[]:"",!1));return;case"textarea":De=Ce=null;for(j in p)if(E=p[j],p.hasOwnProperty(j)&&E!=null&&!y.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:ei(o,c,j,null,y,E)}for(H in y)if(E=y[H],w=p[H],y.hasOwnProperty(H)&&(E!=null||w!=null))switch(H){case"value":Ce=E;break;case"defaultValue":De=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:E!==w&&ei(o,c,H,E,y,w)}nr(o,Ce,De);return;case"option":for(var jt in p)if(Ce=p[jt],p.hasOwnProperty(jt)&&Ce!=null&&!y.hasOwnProperty(jt))switch(jt){case"selected":o.selected=!1;break;default:ei(o,c,jt,null,y,Ce)}for(ne in y)if(Ce=y[ne],De=p[ne],y.hasOwnProperty(ne)&&Ce!==De&&(Ce!=null||De!=null))switch(ne){case"selected":o.selected=Ce&&typeof Ce!="function"&&typeof Ce!="symbol";break;default:ei(o,c,ne,Ce,y,De)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var zt in p)Ce=p[zt],p.hasOwnProperty(zt)&&Ce!=null&&!y.hasOwnProperty(zt)&&ei(o,c,zt,null,y,Ce);for(Ee in y)if(Ce=y[Ee],De=p[Ee],y.hasOwnProperty(Ee)&&Ce!==De&&(Ce!=null||De!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(i(137,c));break;default:ei(o,c,Ee,Ce,y,De)}return;default:if(B0(c)){for(var ti in p)Ce=p[ti],p.hasOwnProperty(ti)&&Ce!==void 0&&!y.hasOwnProperty(ti)&&FS(o,c,ti,void 0,y,Ce);for(ze in y)Ce=y[ze],De=p[ze],!y.hasOwnProperty(ze)||Ce===De||Ce===void 0&&De===void 0||FS(o,c,ze,Ce,y,De);return}}for(var ve in p)Ce=p[ve],p.hasOwnProperty(ve)&&Ce!=null&&!y.hasOwnProperty(ve)&&ei(o,c,ve,null,y,Ce);for(We in y)Ce=y[We],De=p[We],!y.hasOwnProperty(We)||Ce===De||Ce==null&&De==null||ei(o,c,We,Ce,y,De)}var zS=null,HS=null;function w1(o){return o.nodeType===9?o:o.ownerDocument}function Z3(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Q3(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function GS(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var VS=null;function vL(){var o=window.event;return o&&o.type==="popstate"?o===VS?!1:(VS=o,!0):(VS=null,!1)}var eC=typeof setTimeout=="function"?setTimeout:void 0,yL=typeof clearTimeout=="function"?clearTimeout:void 0,tC=typeof Promise=="function"?Promise:void 0,xL=typeof queueMicrotask=="function"?queueMicrotask:typeof tC<"u"?function(o){return tC.resolve(null).then(o).catch(_L)}:eC;function _L(o){setTimeout(function(){throw o})}function Xu(o){return o==="head"}function nC(o,c){var p=c,y=0,E=0;do{var w=p.nextSibling;if(o.removeChild(p),w&&w.nodeType===8)if(p=w.data,p==="/$"){if(0<y&&8>y){p=y;var H=o.ownerDocument;if(p&1&&og(H.documentElement),p&2&&og(H.body),p&4)for(p=H.head,og(p),H=p.firstChild;H;){var j=H.nextSibling,ne=H.nodeName;H[ma]||ne==="SCRIPT"||ne==="STYLE"||ne==="LINK"&&H.rel.toLowerCase()==="stylesheet"||p.removeChild(H),H=j}}if(E===0){o.removeChild(w),mg(c);return}E--}else p==="$"||p==="$?"||p==="$!"?E++:y=p.charCodeAt(0)-48;else y=0;p=w}while(p);mg(c)}function kS(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var p=c;switch(c=c.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":kS(p),Hn(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}o.removeChild(p)}}function bL(o,c,p,y){for(;o.nodeType===1;){var E=p;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[ma])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(w=o.getAttribute("rel"),w==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(w!==E.rel||o.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||o.getAttribute("title")!==(E.title==null?null:E.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(w=o.getAttribute("src"),(w!==(E.src==null?null:E.src)||o.getAttribute("type")!==(E.type==null?null:E.type)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&w&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var w=E.name==null?null:""+E.name;if(E.type==="hidden"&&o.getAttribute("name")===w)return o}else return o;if(o=Yo(o.nextSibling),o===null)break}return null}function SL(o,c,p){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!p||(o=Yo(o.nextSibling),o===null))return null;return o}function jS(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function AL(o,c){var p=o.ownerDocument;if(o.data!=="$?"||p.readyState==="complete")c();else{var y=function(){c(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function Yo(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var XS=null;function iC(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return o;c--}else p==="/$"&&c++}o=o.previousSibling}return null}function rC(o,c,p){switch(c=w1(p),o){case"html":if(o=c.documentElement,!o)throw Error(i(452));return o;case"head":if(o=c.head,!o)throw Error(i(453));return o;case"body":if(o=c.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function og(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);Hn(o)}var io=new Map,sC=new Set;function R1(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Dc=K.d;K.d={f:EL,r:ML,D:TL,C:CL,L:wL,m:RL,X:BL,S:DL,M:OL};function EL(){var o=Dc.f(),c=to();return o||c}function ML(o){var c=va(o);c!==null&&c.tag===5&&c.type==="form"?l1(c):Dc.r(o)}var Rd=typeof document>"u"?null:document;function aC(o,c,p){var y=Rd;if(y&&typeof c=="string"&&c){var E=jn(c);E='link[rel="'+o+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),sC.has(E)||(sC.add(E),o={rel:o,crossOrigin:p,href:c},y.querySelector(E)===null&&(c=y.createElement("link"),Kr(c,"link",o),zi(c),y.head.appendChild(c)))}}function TL(o){Dc.D(o),aC("dns-prefetch",o,null)}function CL(o,c){Dc.C(o,c),aC("preconnect",o,c)}function wL(o,c,p){Dc.L(o,c,p);var y=Rd;if(y&&o&&c){var E='link[rel="preload"][as="'+jn(c)+'"]';c==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+jn(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+jn(p.imageSizes)+'"]')):E+='[href="'+jn(o)+'"]';var w=E;switch(c){case"style":w=Dd(o);break;case"script":w=Bd(o)}io.has(w)||(o=m({rel:"preload",href:c==="image"&&p&&p.imageSrcSet?void 0:o,as:c},p),io.set(w,o),y.querySelector(E)!==null||c==="style"&&y.querySelector(lg(w))||c==="script"&&y.querySelector(cg(w))||(c=y.createElement("link"),Kr(c,"link",o),zi(c),y.head.appendChild(c)))}}function RL(o,c){Dc.m(o,c);var p=Rd;if(p&&o){var y=c&&typeof c.as=="string"?c.as:"script",E='link[rel="modulepreload"][as="'+jn(y)+'"][href="'+jn(o)+'"]',w=E;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Bd(o)}if(!io.has(w)&&(o=m({rel:"modulepreload",href:o},c),io.set(w,o),p.querySelector(E)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(cg(w)))return}y=p.createElement("link"),Kr(y,"link",o),zi(y),p.head.appendChild(y)}}}function DL(o,c,p){Dc.S(o,c,p);var y=Rd;if(y&&o){var E=Ao(y).hoistableStyles,w=Dd(o);c=c||"default";var H=E.get(w);if(!H){var j={loading:0,preload:null};if(H=y.querySelector(lg(w)))j.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":c},p),(p=io.get(w))&&WS(o,p);var ne=H=y.createElement("link");zi(ne),Kr(ne,"link",o),ne._p=new Promise(function(Ee,ze){ne.onload=Ee,ne.onerror=ze}),ne.addEventListener("load",function(){j.loading|=1}),ne.addEventListener("error",function(){j.loading|=2}),j.loading|=4,D1(H,c,y)}H={type:"stylesheet",instance:H,count:1,state:j},E.set(w,H)}}}function BL(o,c){Dc.X(o,c);var p=Rd;if(p&&o){var y=Ao(p).hoistableScripts,E=Bd(o),w=y.get(E);w||(w=p.querySelector(cg(E)),w||(o=m({src:o,async:!0},c),(c=io.get(E))&&YS(o,c),w=p.createElement("script"),zi(w),Kr(w,"link",o),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(E,w))}}function OL(o,c){Dc.M(o,c);var p=Rd;if(p&&o){var y=Ao(p).hoistableScripts,E=Bd(o),w=y.get(E);w||(w=p.querySelector(cg(E)),w||(o=m({src:o,async:!0,type:"module"},c),(c=io.get(E))&&YS(o,c),w=p.createElement("script"),zi(w),Kr(w,"link",o),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(E,w))}}function oC(o,c,p,y){var E=(E=Ue.current)?R1(E):null;if(!E)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(c=Dd(p.href),p=Ao(E).hoistableStyles,y=p.get(c),y||(y={type:"style",instance:null,count:0,state:null},p.set(c,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){o=Dd(p.href);var w=Ao(E).hoistableStyles,H=w.get(o);if(H||(E=E.ownerDocument||E,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(o,H),(w=E.querySelector(lg(o)))&&!w._p&&(H.instance=w,H.state.loading=5),io.has(o)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},io.set(o,p),w||PL(E,o,p,H.state))),c&&y===null)throw Error(i(528,""));return H}if(c&&y!==null)throw Error(i(529,""));return null;case"script":return c=p.async,p=p.src,typeof p=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Bd(p),p=Ao(E).hoistableScripts,y=p.get(c),y||(y={type:"script",instance:null,count:0,state:null},p.set(c,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function Dd(o){return'href="'+jn(o)+'"'}function lg(o){return'link[rel="stylesheet"]['+o+"]"}function lC(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function PL(o,c,p,y){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?y.loading=1:(c=o.createElement("link"),y.preload=c,c.addEventListener("load",function(){return y.loading|=1}),c.addEventListener("error",function(){return y.loading|=2}),Kr(c,"link",p),zi(c),o.head.appendChild(c))}function Bd(o){return'[src="'+jn(o)+'"]'}function cg(o){return"script[async]"+o}function cC(o,c,p){if(c.count++,c.instance===null)switch(c.type){case"style":var y=o.querySelector('style[data-href~="'+jn(p.href)+'"]');if(y)return c.instance=y,zi(y),y;var E=m({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),zi(y),Kr(y,"style",E),D1(y,p.precedence,o),c.instance=y;case"stylesheet":E=Dd(p.href);var w=o.querySelector(lg(E));if(w)return c.state.loading|=4,c.instance=w,zi(w),w;y=lC(p),(E=io.get(E))&&WS(y,E),w=(o.ownerDocument||o).createElement("link"),zi(w);var H=w;return H._p=new Promise(function(j,ne){H.onload=j,H.onerror=ne}),Kr(w,"link",y),c.state.loading|=4,D1(w,p.precedence,o),c.instance=w;case"script":return w=Bd(p.src),(E=o.querySelector(cg(w)))?(c.instance=E,zi(E),E):(y=p,(E=io.get(w))&&(y=m({},p),YS(y,E)),o=o.ownerDocument||o,E=o.createElement("script"),zi(E),Kr(E,"link",y),o.head.appendChild(E),c.instance=E);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(y=c.instance,c.state.loading|=4,D1(y,p.precedence,o));return c.instance}function D1(o,c,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=y.length?y[y.length-1]:null,w=E,H=0;H<y.length;H++){var j=y[H];if(j.dataset.precedence===c)w=j;else if(w!==E)break}w?w.parentNode.insertBefore(o,w.nextSibling):(c=p.nodeType===9?p.head:p,c.insertBefore(o,c.firstChild))}function WS(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function YS(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var B1=null;function uC(o,c,p){if(B1===null){var y=new Map,E=B1=new Map;E.set(p,y)}else E=B1,y=E.get(p),y||(y=new Map,E.set(p,y));if(y.has(o))return y;for(y.set(o,null),p=p.getElementsByTagName(o),E=0;E<p.length;E++){var w=p[E];if(!(w[ma]||w[Fi]||o==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var H=w.getAttribute(c)||"";H=o+H;var j=y.get(H);j?j.push(w):y.set(H,[w])}}return y}function fC(o,c,p){o=o.ownerDocument||o,o.head.insertBefore(p,c==="title"?o.querySelector("head > title"):null)}function UL(o,c,p){if(p===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function hC(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var ug=null;function LL(){}function NL(o,c,p){if(ug===null)throw Error(i(475));var y=ug;if(c.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var E=Dd(p.href),w=o.querySelector(lg(E));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(y.count++,y=O1.bind(y),o.then(y,y)),c.state.loading|=4,c.instance=w,zi(w);return}w=o.ownerDocument||o,p=lC(p),(E=io.get(E))&&WS(p,E),w=w.createElement("link"),zi(w);var H=w;H._p=new Promise(function(j,ne){H.onload=j,H.onerror=ne}),Kr(w,"link",p),c.instance=w}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(y.count++,c=O1.bind(y),o.addEventListener("load",c),o.addEventListener("error",c))}}function IL(){if(ug===null)throw Error(i(475));var o=ug;return o.stylesheets&&o.count===0&&qS(o,o.stylesheets),0<o.count?function(c){var p=setTimeout(function(){if(o.stylesheets&&qS(o,o.stylesheets),o.unsuspend){var y=o.unsuspend;o.unsuspend=null,y()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(p)}}:null}function O1(){if(this.count--,this.count===0){if(this.stylesheets)qS(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var P1=null;function qS(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,P1=new Map,c.forEach(FL,o),P1=null,O1.call(o))}function FL(o,c){if(!(c.state.loading&4)){var p=P1.get(o);if(p)var y=p.get(null);else{p=new Map,P1.set(o,p);for(var E=o.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<E.length;w++){var H=E[w];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(p.set(H.dataset.precedence,H),y=H)}y&&p.set(null,y)}E=c.instance,H=E.getAttribute("data-precedence"),w=p.get(H)||y,w===y&&p.set(null,E),p.set(H,E),this.count++,y=O1.bind(this),E.addEventListener("load",y),E.addEventListener("error",y),w?w.parentNode.insertBefore(E,w.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(E,o.firstChild)),c.state.loading|=4}}var fg={$$typeof:R,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function zL(o,c,p,y,E,w,H,j){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oe(0),this.hiddenUpdates=Oe(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=w,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function dC(o,c,p,y,E,w,H,j,ne,Ee,ze,We){return o=new zL(o,c,p,H,j,ne,Ee,We),c=1,w===!0&&(c|=24),w=ss(3,null,null,c),o.current=w,w.stateNode=o,c=Z0(),c.refCount++,o.pooledCache=c,c.refCount++,w.memoizedState={element:y,isDehydrated:p,cache:c},Lm(w),o}function pC(o){return o?(o=Al,o):Al}function mC(o,c,p,y,E,w){E=pC(E),y.context===null?y.context=E:y.pendingContext=E,y=ja(c),y.payload={element:p},w=w===void 0?null:w,w!==null&&(y.callback=w),p=Io(o,y,c),p!==null&&(qr(p,o,c),hc(p,o,c))}function gC(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<c?p:c}}function KS(o,c){gC(o,c),(o=o.alternate)&&gC(o,c)}function vC(o){if(o.tag===13){var c=Oo(o,67108864);c!==null&&qr(c,o,67108864),KS(o,67108864)}}var U1=!0;function HL(o,c,p,y){var E=k.T;k.T=null;var w=K.p;try{K.p=2,JS(o,c,p,y)}finally{K.p=w,k.T=E}}function GL(o,c,p,y){var E=k.T;k.T=null;var w=K.p;try{K.p=8,JS(o,c,p,y)}finally{K.p=w,k.T=E}}function JS(o,c,p,y){if(U1){var E=$S(y);if(E===null)IS(o,c,y,L1,p),xC(o,y);else if(kL(E,o,c,p,y))y.stopPropagation();else if(xC(o,y),c&4&&-1<VL.indexOf(o)){for(;E!==null;){var w=va(E);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var H=it(w.pendingLanes);if(H!==0){var j=w;for(j.pendingLanes|=2,j.entangledLanes|=2;H;){var ne=1<<31-ct(H);j.entanglements[1]|=ne,H&=~ne}Yl(w),(Un&6)===0&&(Or=je()+500,rg(0))}}break;case 13:j=Oo(w,2),j!==null&&qr(j,w,2),to(),KS(w,2)}if(w=$S(y),w===null&&IS(o,c,y,L1,p),w===E)break;E=w}E!==null&&y.stopPropagation()}else IS(o,c,y,null,p)}}function $S(o){return o=P0(o),ZS(o)}var L1=null;function ZS(o){if(L1=null,o=ga(o),o!==null){var c=s(o);if(c===null)o=null;else{var p=c.tag;if(p===13){if(o=a(c),o!==null)return o;o=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return L1=o,null}function yC(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(He()){case lt:return 2;case Ge:return 8;case J:case V:return 32;case te:return 268435456;default:return 32}default:return 32}}var QS=!1,Wu=null,Yu=null,qu=null,hg=new Map,dg=new Map,Ku=[],VL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xC(o,c){switch(o){case"focusin":case"focusout":Wu=null;break;case"dragenter":case"dragleave":Yu=null;break;case"mouseover":case"mouseout":qu=null;break;case"pointerover":case"pointerout":hg.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":dg.delete(c.pointerId)}}function pg(o,c,p,y,E,w){return o===null||o.nativeEvent!==w?(o={blockedOn:c,domEventName:p,eventSystemFlags:y,nativeEvent:w,targetContainers:[E]},c!==null&&(c=va(c),c!==null&&vC(c)),o):(o.eventSystemFlags|=y,c=o.targetContainers,E!==null&&c.indexOf(E)===-1&&c.push(E),o)}function kL(o,c,p,y,E){switch(c){case"focusin":return Wu=pg(Wu,o,c,p,y,E),!0;case"dragenter":return Yu=pg(Yu,o,c,p,y,E),!0;case"mouseover":return qu=pg(qu,o,c,p,y,E),!0;case"pointerover":var w=E.pointerId;return hg.set(w,pg(hg.get(w)||null,o,c,p,y,E)),!0;case"gotpointercapture":return w=E.pointerId,dg.set(w,pg(dg.get(w)||null,o,c,p,y,E)),!0}return!1}function _C(o){var c=ga(o.target);if(c!==null){var p=s(c);if(p!==null){if(c=p.tag,c===13){if(c=a(p),c!==null){o.blockedOn=c,Ii(o.priority,function(){if(p.tag===13){var y=_i();y=on(y);var E=Oo(p,y);E!==null&&qr(E,p,y),KS(p,y)}});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function N1(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var p=$S(o.nativeEvent);if(p===null){p=o.nativeEvent;var y=new p.constructor(p.type,p);O0=y,p.target.dispatchEvent(y),O0=null}else return c=va(p),c!==null&&vC(c),o.blockedOn=p,!1;c.shift()}return!0}function bC(o,c,p){N1(o)&&p.delete(c)}function jL(){QS=!1,Wu!==null&&N1(Wu)&&(Wu=null),Yu!==null&&N1(Yu)&&(Yu=null),qu!==null&&N1(qu)&&(qu=null),hg.forEach(bC),dg.forEach(bC)}function I1(o,c){o.blockedOn===c&&(o.blockedOn=null,QS||(QS=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,jL)))}var F1=null;function SC(o){F1!==o&&(F1=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){F1===o&&(F1=null);for(var c=0;c<o.length;c+=3){var p=o[c],y=o[c+1],E=o[c+2];if(typeof y!="function"){if(ZS(y||p)===null)continue;break}var w=va(p);w!==null&&(o.splice(c,3),c-=3,$m(w,{pending:!0,data:E,method:p.method,action:y},y,E))}}))}function mg(o){function c(ne){return I1(ne,o)}Wu!==null&&I1(Wu,o),Yu!==null&&I1(Yu,o),qu!==null&&I1(qu,o),hg.forEach(c),dg.forEach(c);for(var p=0;p<Ku.length;p++){var y=Ku[p];y.blockedOn===o&&(y.blockedOn=null)}for(;0<Ku.length&&(p=Ku[0],p.blockedOn===null);)_C(p),p.blockedOn===null&&Ku.shift();if(p=(o.ownerDocument||o).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var E=p[y],w=p[y+1],H=E[Yi]||null;if(typeof w=="function")H||SC(p);else if(H){var j=null;if(w&&w.hasAttribute("formAction")){if(E=w,H=w[Yi]||null)j=H.formAction;else if(ZS(E)!==null)continue}else j=H.action;typeof j=="function"?p[y+1]=j:(p.splice(y,3),y-=3),SC(p)}}}function eA(o){this._internalRoot=o}z1.prototype.render=eA.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(i(409));var p=c.current,y=_i();mC(p,y,o,c,null,null)},z1.prototype.unmount=eA.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;mC(o.current,2,null,o,null,null),to(),c[Rr]=null}};function z1(o){this._internalRoot=o}z1.prototype.unstable_scheduleHydration=function(o){if(o){var c=en();o={blockedOn:null,target:o,priority:c};for(var p=0;p<Ku.length&&c!==0&&c<Ku[p].priority;p++);Ku.splice(p,0,o),p===0&&_C(o)}};var AC=e.version;if(AC!=="19.1.0")throw Error(i(527,AC,"19.1.0"));K.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=u(c),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var XL={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var H1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!H1.isDisabled&&H1.supportsFiber)try{Te=H1.inject(XL),tt=H1}catch{}}return vg.createRoot=function(o,c){if(!r(o))throw Error(i(299));var p=!1,y="",E=yh,w=md,H=_1,j=null;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(E=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(H=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(j=c.unstable_transitionCallbacks)),c=dC(o,1,!1,null,null,p,y,E,w,H,j,null),o[Rr]=c.current,NS(o),new eA(c)},vg.hydrateRoot=function(o,c,p){if(!r(o))throw Error(i(299));var y=!1,E="",w=yh,H=md,j=_1,ne=null,Ee=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(w=p.onUncaughtError),p.onCaughtError!==void 0&&(H=p.onCaughtError),p.onRecoverableError!==void 0&&(j=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(ne=p.unstable_transitionCallbacks),p.formState!==void 0&&(Ee=p.formState)),c=dC(o,1,!0,c,p??null,y,E,w,H,j,ne,Ee),c.context=pC(null),p=c.current,y=_i(),y=on(y),E=ja(y),E.callback=null,Io(p,E,y),p=y,c.current.lanes=p,Ie(c,p),Yl(c),o[Rr]=c.current,NS(o),new z1(c)},vg.version="19.1.0",vg}var PC;function nN(){if(PC)return iA.exports;PC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),iA.exports=tN(),iA.exports}var X5=nN();function gi(){return gi=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},gi.apply(null,arguments)}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const wf="176",Vh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},kh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},W5=0,xE=1,Y5=2,iN=3,q5=0,Ab=1,Jg=2,el=3,ll=0,ur=1,ps=2,$r=0,i0=1,xv=2,_E=3,bE=4,K5=5,hf=100,J5=101,$5=102,Z5=103,Q5=104,e6=200,t6=201,n6=202,i6=203,o_=204,l_=205,r6=206,s6=207,a6=208,o6=209,l6=210,c6=211,u6=212,f6=213,h6=214,c_=0,u_=1,f_=2,h0=3,h_=4,d_=5,p_=6,m_=7,jv=0,d6=1,p6=2,al=0,m6=1,g6=2,v6=3,zM=4,y6=5,x6=6,_6=7,SE="attached",b6="detached",Eb=300,$c=301,yf=302,xp=303,_v=304,Lp=306,nc=1e3,Vs=1001,_p=1002,Wi=1003,Mb=1004,rN=1004,Kh=1005,sN=1005,Jn=1006,pp=1007,aN=1007,mo=1008,oN=1008,Mr=1009,HM=1010,GM=1011,d0=1012,Tb=1013,ic=1014,ks=1015,tu=1016,Cb=1017,wb=1018,p0=1020,VM=35902,kM=1021,jM=1022,gs=1023,m0=1026,g0=1027,Rb=1028,Xv=1029,XM=1030,Db=1031,lN=1032,Bb=1033,$g=33776,Zg=33777,Qg=33778,ev=33779,g_=35840,v_=35841,y_=35842,x_=35843,__=36196,b_=37492,S_=37496,A_=37808,E_=37809,M_=37810,T_=37811,C_=37812,w_=37813,R_=37814,D_=37815,B_=37816,O_=37817,P_=37818,U_=37819,L_=37820,N_=37821,tv=36492,I_=36494,F_=36495,WM=36283,z_=36284,H_=36285,G_=36286,YM=2200,S6=2201,A6=2202,bp=2300,Sp=2301,$x=2302,Jh=2400,$h=2401,bv=2402,Ob=2500,qM=2501,E6=0,KM=1,V_=2,Rf=3200,M6=3201,cN=3202,uN=3203,Df=0,T6=1,il="",Fn="srgb",rc="srgb-linear",Sv="linear",Kn="srgb",fN=0,jh=7680,hN=7681,dN=7682,pN=7683,mN=34055,gN=34056,vN=5386,yN=512,xN=513,_N=514,bN=515,SN=516,AN=517,EN=518,AE=519,C6=512,w6=513,R6=514,JM=515,D6=516,B6=517,O6=518,P6=519,Av=35044,MN=35048,TN=35040,CN=35045,wN=35049,RN=35041,DN=35046,BN=35050,ON=35042,PN="100",EE="300 es",go=2e3,Ev=2001,UN={COMPUTE:"compute",RENDER:"render"},LN={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},NN={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};let La=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}};const us=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let UC=1234567;const r0=Math.PI/180,Ap=180/Math.PI;function Ua(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(us[n&255]+us[n>>8&255]+us[n>>16&255]+us[n>>24&255]+"-"+us[e&255]+us[e>>8&255]+"-"+us[e>>16&15|64]+us[e>>24&255]+"-"+us[t&63|128]+us[t>>8&255]+"-"+us[t>>16&255]+us[t>>24&255]+us[i&255]+us[i>>8&255]+us[i>>16&255]+us[i>>24&255]).toLowerCase()}function Qt(n,e,t){return Math.max(e,Math.min(t,n))}function $M(n,e){return(n%e+e)%e}function IN(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function FN(n,e,t){return n!==e?(t-n)/(e-n):0}function nv(n,e,t){return(1-t)*n+t*e}function zN(n,e,t,i){return nv(n,e,1-Math.exp(-t*i))}function HN(n,e=1){return e-Math.abs($M(n,e*2)-e)}function GN(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function VN(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function kN(n,e){return n+Math.floor(Math.random()*(e-n+1))}function jN(n,e){return n+Math.random()*(e-n)}function XN(n){return n*(.5-Math.random())}function WN(n){n!==void 0&&(UC=n);let e=UC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function YN(n){return n*r0}function qN(n){return n*Ap}function KN(n){return(n&n-1)===0&&n!==0}function JN(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function $N(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function ZN(n,e,t,i,r){const s=Math.cos,a=Math.sin,l=s(t/2),u=a(t/2),h=s((e+i)/2),m=a((e+i)/2),g=s((e-i)/2),v=a((e-i)/2),x=s((i-e)/2),b=a((i-e)/2);switch(r){case"XYX":n.set(l*m,u*g,u*v,l*h);break;case"YZY":n.set(u*v,l*m,u*g,l*h);break;case"ZXZ":n.set(u*g,u*v,l*m,l*h);break;case"XZX":n.set(l*m,u*b,u*x,l*h);break;case"YXY":n.set(u*x,l*m,u*b,l*h);break;case"ZYZ":n.set(u*b,u*x,l*m,l*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Gs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function sn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const ms={DEG2RAD:r0,RAD2DEG:Ap,generateUUID:Ua,clamp:Qt,euclideanModulo:$M,mapLinear:IN,inverseLerp:FN,lerp:nv,damp:zN,pingpong:HN,smoothstep:GN,smootherstep:VN,randInt:kN,randFloat:jN,randFloatSpread:XN,seededRandom:WN,degToRad:YN,radToDeg:qN,isPowerOfTwo:KN,ceilPowerOfTwo:JN,floorPowerOfTwo:$N,setQuaternionFromProperEuler:ZN,normalize:sn,denormalize:Gs};class Pe{constructor(e=0,t=0){Pe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Qt(this.x,e.x,t.x),this.y=Qt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Qt(this.x,e,t),this.y=Qt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Qt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Qt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Zt{constructor(e,t,i,r,s,a,l,u,h){Zt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,l,u,h)}set(e,t,i,r,s,a,l,u,h){const m=this.elements;return m[0]=e,m[1]=r,m[2]=l,m[3]=t,m[4]=s,m[5]=u,m[6]=i,m[7]=a,m[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],l=i[3],u=i[6],h=i[1],m=i[4],g=i[7],v=i[2],x=i[5],b=i[8],M=r[0],A=r[3],S=r[6],C=r[1],R=r[4],B=r[7],N=r[2],U=r[5],I=r[8];return s[0]=a*M+l*C+u*N,s[3]=a*A+l*R+u*U,s[6]=a*S+l*B+u*I,s[1]=h*M+m*C+g*N,s[4]=h*A+m*R+g*U,s[7]=h*S+m*B+g*I,s[2]=v*M+x*C+b*N,s[5]=v*A+x*R+b*U,s[8]=v*S+x*B+b*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=e[6],h=e[7],m=e[8];return t*a*m-t*l*h-i*s*m+i*l*u+r*s*h-r*a*u}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=e[6],h=e[7],m=e[8],g=m*a-l*h,v=l*u-m*s,x=h*s-a*u,b=t*g+i*v+r*x;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/b;return e[0]=g*M,e[1]=(r*h-m*i)*M,e[2]=(l*i-r*a)*M,e[3]=v*M,e[4]=(m*t-r*u)*M,e[5]=(r*s-l*t)*M,e[6]=x*M,e[7]=(i*u-h*t)*M,e[8]=(a*t-i*s)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,l){const u=Math.cos(s),h=Math.sin(s);return this.set(i*u,i*h,-i*(u*a+h*l)+a+e,-r*h,r*u,-r*(-h*a+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(oA.makeScale(e,t)),this}rotate(e){return this.premultiply(oA.makeRotation(-e)),this}translate(e,t){return this.premultiply(oA.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const oA=new Zt;function U6(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const QN={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ap(n,e){return new QN[n](e)}function Mv(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function L6(){const n=Mv("canvas");return n.style.display="block",n}const LC={};function Zx(n){n in LC||(LC[n]=!0,console.warn(n))}function eI(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function tI(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function nI(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const NC=new Zt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),IC=new Zt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function iI(){const n={enabled:!0,workingColorSpace:rc,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Kn&&(r.r=Xc(r.r),r.g=Xc(r.g),r.b=Xc(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Kn&&(r.r=mp(r.r),r.g=mp(r.g),r.b=mp(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===il?Sv:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[rc]:{primaries:e,whitePoint:i,transfer:Sv,toXYZ:NC,fromXYZ:IC,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Fn},outputColorSpaceConfig:{drawingBufferColorSpace:Fn}},[Fn]:{primaries:e,whitePoint:i,transfer:Kn,toXYZ:NC,fromXYZ:IC,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Fn}}}),n}const Rn=iI();function Xc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function mp(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Od;class N6{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Od===void 0&&(Od=Mv("canvas")),Od.width=e.width,Od.height=e.height;const r=Od.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Od}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Mv("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Xc(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Xc(t[i]/255)*255):t[i]=Xc(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let rI=0;class pf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:rI++}),this.uuid=Ua(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,l=r.length;a<l;a++)r[a].isDataTexture?s.push(lA(r[a].image)):s.push(lA(r[a]))}else s=lA(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function lA(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?N6.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let sI=0;class kn extends La{constructor(e=kn.DEFAULT_IMAGE,t=kn.DEFAULT_MAPPING,i=Vs,r=Vs,s=Jn,a=mo,l=gs,u=Mr,h=kn.DEFAULT_ANISOTROPY,m=il){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:sI++}),this.uuid=Ua(),this.name="",this.source=new pf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=u,this.offset=new Pe(0,0),this.repeat=new Pe(1,1),this.center=new Pe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Zt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isTextureArray=e.isTextureArray,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Eb)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case nc:e.x=e.x-Math.floor(e.x);break;case Vs:e.x=e.x<0?0:1;break;case _p:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case nc:e.y=e.y-Math.floor(e.y);break;case Vs:e.y=e.y<0?0:1;break;case _p:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}kn.DEFAULT_IMAGE=null;kn.DEFAULT_MAPPING=Eb;kn.DEFAULT_ANISOTROPY=1;class Kt{constructor(e=0,t=0,i=0,r=1){Kt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const u=e.elements,h=u[0],m=u[4],g=u[8],v=u[1],x=u[5],b=u[9],M=u[2],A=u[6],S=u[10];if(Math.abs(m-v)<.01&&Math.abs(g-M)<.01&&Math.abs(b-A)<.01){if(Math.abs(m+v)<.1&&Math.abs(g+M)<.1&&Math.abs(b+A)<.1&&Math.abs(h+x+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const R=(h+1)/2,B=(x+1)/2,N=(S+1)/2,U=(m+v)/4,I=(g+M)/4,z=(b+A)/4;return R>B&&R>N?R<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(R),r=U/i,s=I/i):B>N?B<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(B),i=U/r,s=z/r):N<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(N),i=I/s,r=z/s),this.set(i,r,s,t),this}let C=Math.sqrt((A-b)*(A-b)+(g-M)*(g-M)+(v-m)*(v-m));return Math.abs(C)<.001&&(C=1),this.x=(A-b)/C,this.y=(g-M)/C,this.z=(v-m)/C,this.w=Math.acos((h+x+S-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Qt(this.x,e.x,t.x),this.y=Qt(this.y,e.y,t.y),this.z=Qt(this.z,e.z,t.z),this.w=Qt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Qt(this.x,e,t),this.y=Qt(this.y,e,t),this.z=Qt(this.z,e,t),this.w=Qt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Qt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Pb extends La{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth?i.depth:1,this.scissor=new Kt(0,0,e,t),this.scissorTest=!1,this.viewport=new Kt(0,0,e,t);const r={width:e,height:t,depth:this.depth};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Jn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},i);const s=new kn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let l=0;l<a;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new pf(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ni extends Pb{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Wv extends kn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Wi,this.minFilter=Wi,this.wrapR=Vs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class aI extends Ni{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Wv(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Ub extends kn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Wi,this.minFilter=Wi,this.wrapR=Vs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class oI extends Ni{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Ub(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class si{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,l){let u=i[r+0],h=i[r+1],m=i[r+2],g=i[r+3];const v=s[a+0],x=s[a+1],b=s[a+2],M=s[a+3];if(l===0){e[t+0]=u,e[t+1]=h,e[t+2]=m,e[t+3]=g;return}if(l===1){e[t+0]=v,e[t+1]=x,e[t+2]=b,e[t+3]=M;return}if(g!==M||u!==v||h!==x||m!==b){let A=1-l;const S=u*v+h*x+m*b+g*M,C=S>=0?1:-1,R=1-S*S;if(R>Number.EPSILON){const N=Math.sqrt(R),U=Math.atan2(N,S*C);A=Math.sin(A*U)/N,l=Math.sin(l*U)/N}const B=l*C;if(u=u*A+v*B,h=h*A+x*B,m=m*A+b*B,g=g*A+M*B,A===1-l){const N=1/Math.sqrt(u*u+h*h+m*m+g*g);u*=N,h*=N,m*=N,g*=N}}e[t]=u,e[t+1]=h,e[t+2]=m,e[t+3]=g}static multiplyQuaternionsFlat(e,t,i,r,s,a){const l=i[r],u=i[r+1],h=i[r+2],m=i[r+3],g=s[a],v=s[a+1],x=s[a+2],b=s[a+3];return e[t]=l*b+m*g+u*x-h*v,e[t+1]=u*b+m*v+h*g-l*x,e[t+2]=h*b+m*x+l*v-u*g,e[t+3]=m*b-l*g-u*v-h*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,a=e._order,l=Math.cos,u=Math.sin,h=l(i/2),m=l(r/2),g=l(s/2),v=u(i/2),x=u(r/2),b=u(s/2);switch(a){case"XYZ":this._x=v*m*g+h*x*b,this._y=h*x*g-v*m*b,this._z=h*m*b+v*x*g,this._w=h*m*g-v*x*b;break;case"YXZ":this._x=v*m*g+h*x*b,this._y=h*x*g-v*m*b,this._z=h*m*b-v*x*g,this._w=h*m*g+v*x*b;break;case"ZXY":this._x=v*m*g-h*x*b,this._y=h*x*g+v*m*b,this._z=h*m*b+v*x*g,this._w=h*m*g-v*x*b;break;case"ZYX":this._x=v*m*g-h*x*b,this._y=h*x*g+v*m*b,this._z=h*m*b-v*x*g,this._w=h*m*g+v*x*b;break;case"YZX":this._x=v*m*g+h*x*b,this._y=h*x*g+v*m*b,this._z=h*m*b-v*x*g,this._w=h*m*g-v*x*b;break;case"XZY":this._x=v*m*g-h*x*b,this._y=h*x*g-v*m*b,this._z=h*m*b+v*x*g,this._w=h*m*g+v*x*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],l=t[5],u=t[9],h=t[2],m=t[6],g=t[10],v=i+l+g;if(v>0){const x=.5/Math.sqrt(v+1);this._w=.25/x,this._x=(m-u)*x,this._y=(s-h)*x,this._z=(a-r)*x}else if(i>l&&i>g){const x=2*Math.sqrt(1+i-l-g);this._w=(m-u)/x,this._x=.25*x,this._y=(r+a)/x,this._z=(s+h)/x}else if(l>g){const x=2*Math.sqrt(1+l-i-g);this._w=(s-h)/x,this._x=(r+a)/x,this._y=.25*x,this._z=(u+m)/x}else{const x=2*Math.sqrt(1+g-i-l);this._w=(a-r)/x,this._x=(s+h)/x,this._y=(u+m)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Qt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,l=t._x,u=t._y,h=t._z,m=t._w;return this._x=i*m+a*l+r*h-s*u,this._y=r*m+a*u+s*l-i*h,this._z=s*m+a*h+i*u-r*l,this._w=a*m-i*l-r*u-s*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let l=a*e._w+i*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const u=1-l*l;if(u<=Number.EPSILON){const x=1-t;return this._w=x*a+t*this._w,this._x=x*i+t*this._x,this._y=x*r+t*this._y,this._z=x*s+t*this._z,this.normalize(),this}const h=Math.sqrt(u),m=Math.atan2(h,l),g=Math.sin((1-t)*m)/h,v=Math.sin(t*m)/h;return this._w=a*g+this._w*v,this._x=i*g+this._x*v,this._y=r*g+this._y*v,this._z=s*g+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class q{constructor(e=0,t=0,i=0){q.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(FC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(FC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,l=e.z,u=e.w,h=2*(a*r-l*i),m=2*(l*t-s*r),g=2*(s*i-a*t);return this.x=t+u*h+a*g-l*m,this.y=i+u*m+l*h-s*g,this.z=r+u*g+s*m-a*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Qt(this.x,e.x,t.x),this.y=Qt(this.y,e.y,t.y),this.z=Qt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Qt(this.x,e,t),this.y=Qt(this.y,e,t),this.z=Qt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Qt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,l=t.y,u=t.z;return this.x=r*u-s*l,this.y=s*a-i*u,this.z=i*l-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return cA.copy(this).projectOnVector(e),this.sub(cA)}reflect(e){return this.sub(cA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Qt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const cA=new q,FC=new si;class Zr{constructor(e=new q(1/0,1/0,1/0),t=new q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(qo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(qo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=qo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,l=s.count;a<l;a++)e.isMesh===!0?e.getVertexPosition(a,qo):qo.fromBufferAttribute(s,a),qo.applyMatrix4(e.matrixWorld),this.expandByPoint(qo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),G1.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),G1.copy(i.boundingBox)),G1.applyMatrix4(e.matrixWorld),this.union(G1)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,qo),qo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(yg),V1.subVectors(this.max,yg),Pd.subVectors(e.a,yg),Ud.subVectors(e.b,yg),Ld.subVectors(e.c,yg),$u.subVectors(Ud,Pd),Zu.subVectors(Ld,Ud),Th.subVectors(Pd,Ld);let t=[0,-$u.z,$u.y,0,-Zu.z,Zu.y,0,-Th.z,Th.y,$u.z,0,-$u.x,Zu.z,0,-Zu.x,Th.z,0,-Th.x,-$u.y,$u.x,0,-Zu.y,Zu.x,0,-Th.y,Th.x,0];return!uA(t,Pd,Ud,Ld,V1)||(t=[1,0,0,0,1,0,0,0,1],!uA(t,Pd,Ud,Ld,V1))?!1:(k1.crossVectors($u,Zu),t=[k1.x,k1.y,k1.z],uA(t,Pd,Ud,Ld,V1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,qo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(qo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Bc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Bc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Bc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Bc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Bc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Bc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Bc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Bc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Bc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Bc=[new q,new q,new q,new q,new q,new q,new q,new q],qo=new q,G1=new Zr,Pd=new q,Ud=new q,Ld=new q,$u=new q,Zu=new q,Th=new q,yg=new q,V1=new q,k1=new q,Ch=new q;function uA(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){Ch.fromArray(n,s);const l=r.x*Math.abs(Ch.x)+r.y*Math.abs(Ch.y)+r.z*Math.abs(Ch.z),u=e.dot(Ch),h=t.dot(Ch),m=i.dot(Ch);if(Math.max(-Math.max(u,h,m),Math.min(u,h,m))>l)return!1}return!0}const lI=new Zr,xg=new q,fA=new q;class Ir{constructor(e=new q,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):lI.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;xg.subVectors(e,this.center);const t=xg.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(xg,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(fA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(xg.copy(e.center).add(fA)),this.expandByPoint(xg.copy(e.center).sub(fA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Oc=new q,hA=new q,j1=new q,Qu=new q,dA=new q,X1=new q,pA=new q;class E0{constructor(e=new q,t=new q(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Oc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Oc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Oc.copy(this.origin).addScaledVector(this.direction,t),Oc.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){hA.copy(e).add(t).multiplyScalar(.5),j1.copy(t).sub(e).normalize(),Qu.copy(this.origin).sub(hA);const s=e.distanceTo(t)*.5,a=-this.direction.dot(j1),l=Qu.dot(this.direction),u=-Qu.dot(j1),h=Qu.lengthSq(),m=Math.abs(1-a*a);let g,v,x,b;if(m>0)if(g=a*u-l,v=a*l-u,b=s*m,g>=0)if(v>=-b)if(v<=b){const M=1/m;g*=M,v*=M,x=g*(g+a*v+2*l)+v*(a*g+v+2*u)+h}else v=s,g=Math.max(0,-(a*v+l)),x=-g*g+v*(v+2*u)+h;else v=-s,g=Math.max(0,-(a*v+l)),x=-g*g+v*(v+2*u)+h;else v<=-b?(g=Math.max(0,-(-a*s+l)),v=g>0?-s:Math.min(Math.max(-s,-u),s),x=-g*g+v*(v+2*u)+h):v<=b?(g=0,v=Math.min(Math.max(-s,-u),s),x=v*(v+2*u)+h):(g=Math.max(0,-(a*s+l)),v=g>0?s:Math.min(Math.max(-s,-u),s),x=-g*g+v*(v+2*u)+h);else v=a>0?-s:s,g=Math.max(0,-(a*v+l)),x=-g*g+v*(v+2*u)+h;return i&&i.copy(this.origin).addScaledVector(this.direction,g),r&&r.copy(hA).addScaledVector(j1,v),x}intersectSphere(e,t){Oc.subVectors(e.center,this.origin);const i=Oc.dot(this.direction),r=Oc.dot(Oc)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),l=i-a,u=i+a;return u<0?null:l<0?this.at(u,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,l,u;const h=1/this.direction.x,m=1/this.direction.y,g=1/this.direction.z,v=this.origin;return h>=0?(i=(e.min.x-v.x)*h,r=(e.max.x-v.x)*h):(i=(e.max.x-v.x)*h,r=(e.min.x-v.x)*h),m>=0?(s=(e.min.y-v.y)*m,a=(e.max.y-v.y)*m):(s=(e.max.y-v.y)*m,a=(e.min.y-v.y)*m),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),g>=0?(l=(e.min.z-v.z)*g,u=(e.max.z-v.z)*g):(l=(e.max.z-v.z)*g,u=(e.min.z-v.z)*g),i>u||l>r)||((l>i||i!==i)&&(i=l),(u<r||r!==r)&&(r=u),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Oc)!==null}intersectTriangle(e,t,i,r,s){dA.subVectors(t,e),X1.subVectors(i,e),pA.crossVectors(dA,X1);let a=this.direction.dot(pA),l;if(a>0){if(r)return null;l=1}else if(a<0)l=-1,a=-a;else return null;Qu.subVectors(this.origin,e);const u=l*this.direction.dot(X1.crossVectors(Qu,X1));if(u<0)return null;const h=l*this.direction.dot(dA.cross(Qu));if(h<0||u+h>a)return null;const m=-l*Qu.dot(pA);return m<0?null:this.at(m/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ft{constructor(e,t,i,r,s,a,l,u,h,m,g,v,x,b,M,A){ft.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,l,u,h,m,g,v,x,b,M,A)}set(e,t,i,r,s,a,l,u,h,m,g,v,x,b,M,A){const S=this.elements;return S[0]=e,S[4]=t,S[8]=i,S[12]=r,S[1]=s,S[5]=a,S[9]=l,S[13]=u,S[2]=h,S[6]=m,S[10]=g,S[14]=v,S[3]=x,S[7]=b,S[11]=M,S[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ft().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Nd.setFromMatrixColumn(e,0).length(),s=1/Nd.setFromMatrixColumn(e,1).length(),a=1/Nd.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),l=Math.sin(i),u=Math.cos(r),h=Math.sin(r),m=Math.cos(s),g=Math.sin(s);if(e.order==="XYZ"){const v=a*m,x=a*g,b=l*m,M=l*g;t[0]=u*m,t[4]=-u*g,t[8]=h,t[1]=x+b*h,t[5]=v-M*h,t[9]=-l*u,t[2]=M-v*h,t[6]=b+x*h,t[10]=a*u}else if(e.order==="YXZ"){const v=u*m,x=u*g,b=h*m,M=h*g;t[0]=v+M*l,t[4]=b*l-x,t[8]=a*h,t[1]=a*g,t[5]=a*m,t[9]=-l,t[2]=x*l-b,t[6]=M+v*l,t[10]=a*u}else if(e.order==="ZXY"){const v=u*m,x=u*g,b=h*m,M=h*g;t[0]=v-M*l,t[4]=-a*g,t[8]=b+x*l,t[1]=x+b*l,t[5]=a*m,t[9]=M-v*l,t[2]=-a*h,t[6]=l,t[10]=a*u}else if(e.order==="ZYX"){const v=a*m,x=a*g,b=l*m,M=l*g;t[0]=u*m,t[4]=b*h-x,t[8]=v*h+M,t[1]=u*g,t[5]=M*h+v,t[9]=x*h-b,t[2]=-h,t[6]=l*u,t[10]=a*u}else if(e.order==="YZX"){const v=a*u,x=a*h,b=l*u,M=l*h;t[0]=u*m,t[4]=M-v*g,t[8]=b*g+x,t[1]=g,t[5]=a*m,t[9]=-l*m,t[2]=-h*m,t[6]=x*g+b,t[10]=v-M*g}else if(e.order==="XZY"){const v=a*u,x=a*h,b=l*u,M=l*h;t[0]=u*m,t[4]=-g,t[8]=h*m,t[1]=v*g+M,t[5]=a*m,t[9]=x*g-b,t[2]=b*g-x,t[6]=l*m,t[10]=M*g+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(cI,e,uI)}lookAt(e,t,i){const r=this.elements;return Ba.subVectors(e,t),Ba.lengthSq()===0&&(Ba.z=1),Ba.normalize(),ef.crossVectors(i,Ba),ef.lengthSq()===0&&(Math.abs(i.z)===1?Ba.x+=1e-4:Ba.z+=1e-4,Ba.normalize(),ef.crossVectors(i,Ba)),ef.normalize(),W1.crossVectors(Ba,ef),r[0]=ef.x,r[4]=W1.x,r[8]=Ba.x,r[1]=ef.y,r[5]=W1.y,r[9]=Ba.y,r[2]=ef.z,r[6]=W1.z,r[10]=Ba.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],l=i[4],u=i[8],h=i[12],m=i[1],g=i[5],v=i[9],x=i[13],b=i[2],M=i[6],A=i[10],S=i[14],C=i[3],R=i[7],B=i[11],N=i[15],U=r[0],I=r[4],z=r[8],L=r[12],O=r[1],G=r[5],$=r[9],Q=r[13],ce=r[2],fe=r[6],k=r[10],K=r[14],ee=r[3],me=r[7],W=r[11],ae=r[15];return s[0]=a*U+l*O+u*ce+h*ee,s[4]=a*I+l*G+u*fe+h*me,s[8]=a*z+l*$+u*k+h*W,s[12]=a*L+l*Q+u*K+h*ae,s[1]=m*U+g*O+v*ce+x*ee,s[5]=m*I+g*G+v*fe+x*me,s[9]=m*z+g*$+v*k+x*W,s[13]=m*L+g*Q+v*K+x*ae,s[2]=b*U+M*O+A*ce+S*ee,s[6]=b*I+M*G+A*fe+S*me,s[10]=b*z+M*$+A*k+S*W,s[14]=b*L+M*Q+A*K+S*ae,s[3]=C*U+R*O+B*ce+N*ee,s[7]=C*I+R*G+B*fe+N*me,s[11]=C*z+R*$+B*k+N*W,s[15]=C*L+R*Q+B*K+N*ae,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],l=e[5],u=e[9],h=e[13],m=e[2],g=e[6],v=e[10],x=e[14],b=e[3],M=e[7],A=e[11],S=e[15];return b*(+s*u*g-r*h*g-s*l*v+i*h*v+r*l*x-i*u*x)+M*(+t*u*x-t*h*v+s*a*v-r*a*x+r*h*m-s*u*m)+A*(+t*h*g-t*l*x-s*a*g+i*a*x+s*l*m-i*h*m)+S*(-r*l*m-t*u*g+t*l*v+r*a*g-i*a*v+i*u*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=e[6],h=e[7],m=e[8],g=e[9],v=e[10],x=e[11],b=e[12],M=e[13],A=e[14],S=e[15],C=g*A*h-M*v*h+M*u*x-l*A*x-g*u*S+l*v*S,R=b*v*h-m*A*h-b*u*x+a*A*x+m*u*S-a*v*S,B=m*M*h-b*g*h+b*l*x-a*M*x-m*l*S+a*g*S,N=b*g*u-m*M*u-b*l*v+a*M*v+m*l*A-a*g*A,U=t*C+i*R+r*B+s*N;if(U===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/U;return e[0]=C*I,e[1]=(M*v*s-g*A*s-M*r*x+i*A*x+g*r*S-i*v*S)*I,e[2]=(l*A*s-M*u*s+M*r*h-i*A*h-l*r*S+i*u*S)*I,e[3]=(g*u*s-l*v*s-g*r*h+i*v*h+l*r*x-i*u*x)*I,e[4]=R*I,e[5]=(m*A*s-b*v*s+b*r*x-t*A*x-m*r*S+t*v*S)*I,e[6]=(b*u*s-a*A*s-b*r*h+t*A*h+a*r*S-t*u*S)*I,e[7]=(a*v*s-m*u*s+m*r*h-t*v*h-a*r*x+t*u*x)*I,e[8]=B*I,e[9]=(b*g*s-m*M*s-b*i*x+t*M*x+m*i*S-t*g*S)*I,e[10]=(a*M*s-b*l*s+b*i*h-t*M*h-a*i*S+t*l*S)*I,e[11]=(m*l*s-a*g*s-m*i*h+t*g*h+a*i*x-t*l*x)*I,e[12]=N*I,e[13]=(m*M*r-b*g*r+b*i*v-t*M*v-m*i*A+t*g*A)*I,e[14]=(b*l*r-a*M*r-b*i*u+t*M*u+a*i*A-t*l*A)*I,e[15]=(a*g*r-m*l*r+m*i*u-t*g*u-a*i*v+t*l*v)*I,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,l=e.y,u=e.z,h=s*a,m=s*l;return this.set(h*a+i,h*l-r*u,h*u+r*l,0,h*l+r*u,m*l+i,m*u-r*a,0,h*u-r*l,m*u+r*a,s*u*u+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,l=t._z,u=t._w,h=s+s,m=a+a,g=l+l,v=s*h,x=s*m,b=s*g,M=a*m,A=a*g,S=l*g,C=u*h,R=u*m,B=u*g,N=i.x,U=i.y,I=i.z;return r[0]=(1-(M+S))*N,r[1]=(x+B)*N,r[2]=(b-R)*N,r[3]=0,r[4]=(x-B)*U,r[5]=(1-(v+S))*U,r[6]=(A+C)*U,r[7]=0,r[8]=(b+R)*I,r[9]=(A-C)*I,r[10]=(1-(v+M))*I,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Nd.set(r[0],r[1],r[2]).length();const a=Nd.set(r[4],r[5],r[6]).length(),l=Nd.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Ko.copy(this);const h=1/s,m=1/a,g=1/l;return Ko.elements[0]*=h,Ko.elements[1]*=h,Ko.elements[2]*=h,Ko.elements[4]*=m,Ko.elements[5]*=m,Ko.elements[6]*=m,Ko.elements[8]*=g,Ko.elements[9]*=g,Ko.elements[10]*=g,t.setFromRotationMatrix(Ko),i.x=s,i.y=a,i.z=l,this}makePerspective(e,t,i,r,s,a,l=go){const u=this.elements,h=2*s/(t-e),m=2*s/(i-r),g=(t+e)/(t-e),v=(i+r)/(i-r);let x,b;if(l===go)x=-(a+s)/(a-s),b=-2*a*s/(a-s);else if(l===Ev)x=-a/(a-s),b=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return u[0]=h,u[4]=0,u[8]=g,u[12]=0,u[1]=0,u[5]=m,u[9]=v,u[13]=0,u[2]=0,u[6]=0,u[10]=x,u[14]=b,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,i,r,s,a,l=go){const u=this.elements,h=1/(t-e),m=1/(i-r),g=1/(a-s),v=(t+e)*h,x=(i+r)*m;let b,M;if(l===go)b=(a+s)*g,M=-2*g;else if(l===Ev)b=s*g,M=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-v,u[1]=0,u[5]=2*m,u[9]=0,u[13]=-x,u[2]=0,u[6]=0,u[10]=M,u[14]=-b,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Nd=new q,Ko=new ft,cI=new q(0,0,0),uI=new q(1,1,1),ef=new q,W1=new q,Ba=new q,zC=new ft,HC=new si;class fr{constructor(e=0,t=0,i=0,r=fr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],l=r[8],u=r[1],h=r[5],m=r[9],g=r[2],v=r[6],x=r[10];switch(t){case"XYZ":this._y=Math.asin(Qt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-m,x),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(v,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Qt(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(l,x),this._z=Math.atan2(u,h)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin(Qt(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,x),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-Qt(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,x),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-a,h));break;case"YZX":this._z=Math.asin(Qt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,h),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(l,x));break;case"XZY":this._z=Math.asin(-Qt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(v,h),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-m,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return zC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(zC,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return HC.setFromEuler(this),this.setFromQuaternion(HC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}fr.DEFAULT_ORDER="XYZ";class Ep{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let fI=0;const GC=new q,Id=new si,Pc=new ft,Y1=new q,_g=new q,hI=new q,dI=new si,VC=new q(1,0,0),kC=new q(0,1,0),jC=new q(0,0,1),XC={type:"added"},pI={type:"removed"},Fd={type:"childadded",child:null},mA={type:"childremoved",child:null};class hn extends La{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:fI++}),this.uuid=Ua(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=hn.DEFAULT_UP.clone();const e=new q,t=new fr,i=new si,r=new q(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ft},normalMatrix:{value:new Zt}}),this.matrix=new ft,this.matrixWorld=new ft,this.matrixAutoUpdate=hn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ep,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Id.setFromAxisAngle(e,t),this.quaternion.multiply(Id),this}rotateOnWorldAxis(e,t){return Id.setFromAxisAngle(e,t),this.quaternion.premultiply(Id),this}rotateX(e){return this.rotateOnAxis(VC,e)}rotateY(e){return this.rotateOnAxis(kC,e)}rotateZ(e){return this.rotateOnAxis(jC,e)}translateOnAxis(e,t){return GC.copy(e).applyQuaternion(this.quaternion),this.position.add(GC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(VC,e)}translateY(e){return this.translateOnAxis(kC,e)}translateZ(e){return this.translateOnAxis(jC,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Pc.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Y1.copy(e):Y1.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),_g.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Pc.lookAt(_g,Y1,this.up):Pc.lookAt(Y1,_g,this.up),this.quaternion.setFromRotationMatrix(Pc),r&&(Pc.extractRotation(r.matrixWorld),Id.setFromRotationMatrix(Pc),this.quaternion.premultiply(Id.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(XC),Fd.child=e,this.dispatchEvent(Fd),Fd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(pI),mA.child=e,this.dispatchEvent(mA),mA.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Pc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Pc.multiply(e.parent.matrixWorld)),e.applyMatrix4(Pc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(XC),Fd.child=e,this.dispatchEvent(Fd),Fd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_g,e,hI),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_g,dI,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?{min:l.boundingBox.min.toArray(),max:l.boundingBox.max.toArray()}:void 0,boundingSphere:l.boundingSphere?{radius:l.boundingSphere.radius,center:l.boundingSphere.center.toArray()}:void 0})),r.instanceInfo=this._instanceInfo.map(l=>({...l})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let h=0,m=u.length;h<m;h++){const g=u[h];s(e.shapes,g)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,h=this.material.length;u<h;u++)l.push(s(e.materials,this.material[u]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];r.animations.push(s(e.animations,u))}}if(t){const l=a(e.geometries),u=a(e.materials),h=a(e.textures),m=a(e.images),g=a(e.shapes),v=a(e.skeletons),x=a(e.animations),b=a(e.nodes);l.length>0&&(i.geometries=l),u.length>0&&(i.materials=u),h.length>0&&(i.textures=h),m.length>0&&(i.images=m),g.length>0&&(i.shapes=g),v.length>0&&(i.skeletons=v),x.length>0&&(i.animations=x),b.length>0&&(i.nodes=b)}return i.object=r,i;function a(l){const u=[];for(const h in l){const m=l[h];delete m.metadata,u.push(m)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}hn.DEFAULT_UP=new q(0,1,0);hn.DEFAULT_MATRIX_AUTO_UPDATE=!0;hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Jo=new q,Uc=new q,gA=new q,Lc=new q,zd=new q,Hd=new q,WC=new q,vA=new q,yA=new q,xA=new q,_A=new Kt,bA=new Kt,SA=new Kt;class ua{constructor(e=new q,t=new q,i=new q){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Jo.subVectors(e,t),r.cross(Jo);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Jo.subVectors(r,t),Uc.subVectors(i,t),gA.subVectors(e,t);const a=Jo.dot(Jo),l=Jo.dot(Uc),u=Jo.dot(gA),h=Uc.dot(Uc),m=Uc.dot(gA),g=a*h-l*l;if(g===0)return s.set(0,0,0),null;const v=1/g,x=(h*u-l*m)*v,b=(a*m-l*u)*v;return s.set(1-x-b,b,x)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Lc)===null?!1:Lc.x>=0&&Lc.y>=0&&Lc.x+Lc.y<=1}static getInterpolation(e,t,i,r,s,a,l,u){return this.getBarycoord(e,t,i,r,Lc)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(s,Lc.x),u.addScaledVector(a,Lc.y),u.addScaledVector(l,Lc.z),u)}static getInterpolatedAttribute(e,t,i,r,s,a){return _A.setScalar(0),bA.setScalar(0),SA.setScalar(0),_A.fromBufferAttribute(e,t),bA.fromBufferAttribute(e,i),SA.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(_A,s.x),a.addScaledVector(bA,s.y),a.addScaledVector(SA,s.z),a}static isFrontFacing(e,t,i,r){return Jo.subVectors(i,t),Uc.subVectors(e,t),Jo.cross(Uc).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Jo.subVectors(this.c,this.b),Uc.subVectors(this.a,this.b),Jo.cross(Uc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ua.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ua.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return ua.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return ua.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ua.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,l;zd.subVectors(r,i),Hd.subVectors(s,i),vA.subVectors(e,i);const u=zd.dot(vA),h=Hd.dot(vA);if(u<=0&&h<=0)return t.copy(i);yA.subVectors(e,r);const m=zd.dot(yA),g=Hd.dot(yA);if(m>=0&&g<=m)return t.copy(r);const v=u*g-m*h;if(v<=0&&u>=0&&m<=0)return a=u/(u-m),t.copy(i).addScaledVector(zd,a);xA.subVectors(e,s);const x=zd.dot(xA),b=Hd.dot(xA);if(b>=0&&x<=b)return t.copy(s);const M=x*h-u*b;if(M<=0&&h>=0&&b<=0)return l=h/(h-b),t.copy(i).addScaledVector(Hd,l);const A=m*b-x*g;if(A<=0&&g-m>=0&&x-b>=0)return WC.subVectors(s,r),l=(g-m)/(g-m+(x-b)),t.copy(r).addScaledVector(WC,l);const S=1/(A+M+v);return a=M*S,l=v*S,t.copy(i).addScaledVector(zd,a).addScaledVector(Hd,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const I6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},tf={h:0,s:0,l:0},q1={h:0,s:0,l:0};function AA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let Ze=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Fn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Rn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Rn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Rn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Rn.workingColorSpace){if(e=$M(e,1),t=Qt(t,0,1),i=Qt(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=AA(a,s,e+1/3),this.g=AA(a,s,e),this.b=AA(a,s,e-1/3)}return Rn.toWorkingColorSpace(this,r),this}setStyle(e,t=Fn){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],l=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Fn){const i=I6[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Xc(e.r),this.g=Xc(e.g),this.b=Xc(e.b),this}copyLinearToSRGB(e){return this.r=mp(e.r),this.g=mp(e.g),this.b=mp(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Fn){return Rn.fromWorkingColorSpace(fs.copy(this),e),Math.round(Qt(fs.r*255,0,255))*65536+Math.round(Qt(fs.g*255,0,255))*256+Math.round(Qt(fs.b*255,0,255))}getHexString(e=Fn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Rn.workingColorSpace){Rn.fromWorkingColorSpace(fs.copy(this),t);const i=fs.r,r=fs.g,s=fs.b,a=Math.max(i,r,s),l=Math.min(i,r,s);let u,h;const m=(l+a)/2;if(l===a)u=0,h=0;else{const g=a-l;switch(h=m<=.5?g/(a+l):g/(2-a-l),a){case i:u=(r-s)/g+(r<s?6:0);break;case r:u=(s-i)/g+2;break;case s:u=(i-r)/g+4;break}u/=6}return e.h=u,e.s=h,e.l=m,e}getRGB(e,t=Rn.workingColorSpace){return Rn.fromWorkingColorSpace(fs.copy(this),t),e.r=fs.r,e.g=fs.g,e.b=fs.b,e}getStyle(e=Fn){Rn.fromWorkingColorSpace(fs.copy(this),e);const t=fs.r,i=fs.g,r=fs.b;return e!==Fn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(tf),this.setHSL(tf.h+e,tf.s+t,tf.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(tf),e.getHSL(q1);const i=nv(tf.h,q1.h,t),r=nv(tf.s,q1.s,t),s=nv(tf.l,q1.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const fs=new Ze;Ze.NAMES=I6;let mI=0;class er extends La{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:mI++}),this.uuid=Ua(),this.name="",this.type="Material",this.blending=i0,this.side=ll,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=o_,this.blendDst=l_,this.blendEquation=hf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ze(0,0,0),this.blendAlpha=0,this.depthFunc=h0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=jh,this.stencilZFail=jh,this.stencilZPass=jh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==i0&&(i.blending=this.blending),this.side!==ll&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==o_&&(i.blendSrc=this.blendSrc),this.blendDst!==l_&&(i.blendDst=this.blendDst),this.blendEquation!==hf&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==h0&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AE&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==jh&&(i.stencilFail=this.stencilFail),this.stencilZFail!==jh&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==jh&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const l in s){const u=s[l];delete u.metadata,a.push(u)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Pa extends er{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new fr,this.combine=jv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Vc=gI();function gI(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let u=0;u<256;++u){const h=u-127;h<-27?(i[u]=0,i[u|256]=32768,r[u]=24,r[u|256]=24):h<-14?(i[u]=1024>>-h-14,i[u|256]=1024>>-h-14|32768,r[u]=-h-1,r[u|256]=-h-1):h<=15?(i[u]=h+15<<10,i[u|256]=h+15<<10|32768,r[u]=13,r[u|256]=13):h<128?(i[u]=31744,i[u|256]=64512,r[u]=24,r[u|256]=24):(i[u]=31744,i[u|256]=64512,r[u]=13,r[u|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u<1024;++u){let h=u<<13,m=0;for(;(h&8388608)===0;)h<<=1,m-=8388608;h&=-8388609,m+=947912704,s[u]=h|m}for(let u=1024;u<2048;++u)s[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)a[u]=u<<23;a[31]=1199570944,a[32]=2147483648;for(let u=33;u<63;++u)a[u]=2147483648+(u-32<<23);a[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(l[u]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:l}}function oa(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Qt(n,-65504,65504),Vc.floatView[0]=n;const e=Vc.uint32View[0],t=e>>23&511;return Vc.baseTable[t]+((e&8388607)>>Vc.shiftTable[t])}function kg(n){const e=n>>10;return Vc.uint32View[0]=Vc.mantissaTable[Vc.offsetTable[e]+(n&1023)]+Vc.exponentTable[e],Vc.floatView[0]}class vI{static toHalfFloat(e){return oa(e)}static fromHalfFloat(e){return kg(e)}}const cr=new q,K1=new Pe;let yI=0;class mn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:yI++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Av,this.updateRanges=[],this.gpuType=ks,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)K1.fromBufferAttribute(this,t),K1.applyMatrix3(e),this.setXY(t,K1.x,K1.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)cr.fromBufferAttribute(this,t),cr.applyMatrix3(e),this.setXYZ(t,cr.x,cr.y,cr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)cr.fromBufferAttribute(this,t),cr.applyMatrix4(e),this.setXYZ(t,cr.x,cr.y,cr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)cr.fromBufferAttribute(this,t),cr.applyNormalMatrix(e),this.setXYZ(t,cr.x,cr.y,cr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)cr.fromBufferAttribute(this,t),cr.transformDirection(e),this.setXYZ(t,cr.x,cr.y,cr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Gs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=sn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Gs(t,this.array)),t}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Gs(t,this.array)),t}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Gs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Gs(t,this.array)),t}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),r=sn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),r=sn(r,this.array),s=sn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Av&&(e.usage=this.usage),e}}class xI extends mn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class _I extends mn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class bI extends mn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class SI extends mn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class Lb extends mn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class AI extends mn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class ZM extends mn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class EI extends mn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=kg(this.array[e*this.itemSize]);return this.normalized&&(t=Gs(t,this.array)),t}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize]=oa(t),this}getY(e){let t=kg(this.array[e*this.itemSize+1]);return this.normalized&&(t=Gs(t,this.array)),t}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+1]=oa(t),this}getZ(e){let t=kg(this.array[e*this.itemSize+2]);return this.normalized&&(t=Gs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+2]=oa(t),this}getW(e){let t=kg(this.array[e*this.itemSize+3]);return this.normalized&&(t=Gs(t,this.array)),t}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+3]=oa(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array)),this.array[e+0]=oa(t),this.array[e+1]=oa(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),r=sn(r,this.array)),this.array[e+0]=oa(t),this.array[e+1]=oa(i),this.array[e+2]=oa(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),r=sn(r,this.array),s=sn(s,this.array)),this.array[e+0]=oa(t),this.array[e+1]=oa(i),this.array[e+2]=oa(r),this.array[e+3]=oa(s),this}}class xt extends mn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let MI=0;const ro=new ft,EA=new hn,Gd=new q,Oa=new Zr,bg=new Zr,Lr=new q;class Gt extends La{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:MI++}),this.uuid=Ua(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(U6(e)?ZM:Lb)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Zt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ro.makeRotationFromQuaternion(e),this.applyMatrix4(ro),this}rotateX(e){return ro.makeRotationX(e),this.applyMatrix4(ro),this}rotateY(e){return ro.makeRotationY(e),this.applyMatrix4(ro),this}rotateZ(e){return ro.makeRotationZ(e),this.applyMatrix4(ro),this}translate(e,t,i){return ro.makeTranslation(e,t,i),this.applyMatrix4(ro),this}scale(e,t,i){return ro.makeScale(e,t,i),this.applyMatrix4(ro),this}lookAt(e){return EA.lookAt(e),EA.updateMatrix(),this.applyMatrix4(EA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Gd).negate(),this.translate(Gd.x,Gd.y,Gd.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new xt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Zr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new q(-1/0,-1/0,-1/0),new q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Oa.setFromBufferAttribute(s),this.morphTargetsRelative?(Lr.addVectors(this.boundingBox.min,Oa.min),this.boundingBox.expandByPoint(Lr),Lr.addVectors(this.boundingBox.max,Oa.max),this.boundingBox.expandByPoint(Lr)):(this.boundingBox.expandByPoint(Oa.min),this.boundingBox.expandByPoint(Oa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ir);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new q,1/0);return}if(e){const i=this.boundingSphere.center;if(Oa.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const l=t[s];bg.setFromBufferAttribute(l),this.morphTargetsRelative?(Lr.addVectors(Oa.min,bg.min),Oa.expandByPoint(Lr),Lr.addVectors(Oa.max,bg.max),Oa.expandByPoint(Lr)):(Oa.expandByPoint(bg.min),Oa.expandByPoint(bg.max))}Oa.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)Lr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Lr));if(t)for(let s=0,a=t.length;s<a;s++){const l=t[s],u=this.morphTargetsRelative;for(let h=0,m=l.count;h<m;h++)Lr.fromBufferAttribute(l,h),u&&(Gd.fromBufferAttribute(e,h),Lr.add(Gd)),r=Math.max(r,i.distanceToSquared(Lr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new mn(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),l=[],u=[];for(let z=0;z<i.count;z++)l[z]=new q,u[z]=new q;const h=new q,m=new q,g=new q,v=new Pe,x=new Pe,b=new Pe,M=new q,A=new q;function S(z,L,O){h.fromBufferAttribute(i,z),m.fromBufferAttribute(i,L),g.fromBufferAttribute(i,O),v.fromBufferAttribute(s,z),x.fromBufferAttribute(s,L),b.fromBufferAttribute(s,O),m.sub(h),g.sub(h),x.sub(v),b.sub(v);const G=1/(x.x*b.y-b.x*x.y);isFinite(G)&&(M.copy(m).multiplyScalar(b.y).addScaledVector(g,-x.y).multiplyScalar(G),A.copy(g).multiplyScalar(x.x).addScaledVector(m,-b.x).multiplyScalar(G),l[z].add(M),l[L].add(M),l[O].add(M),u[z].add(A),u[L].add(A),u[O].add(A))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let z=0,L=C.length;z<L;++z){const O=C[z],G=O.start,$=O.count;for(let Q=G,ce=G+$;Q<ce;Q+=3)S(e.getX(Q+0),e.getX(Q+1),e.getX(Q+2))}const R=new q,B=new q,N=new q,U=new q;function I(z){N.fromBufferAttribute(r,z),U.copy(N);const L=l[z];R.copy(L),R.sub(N.multiplyScalar(N.dot(L))).normalize(),B.crossVectors(U,L);const G=B.dot(u[z])<0?-1:1;a.setXYZW(z,R.x,R.y,R.z,G)}for(let z=0,L=C.length;z<L;++z){const O=C[z],G=O.start,$=O.count;for(let Q=G,ce=G+$;Q<ce;Q+=3)I(e.getX(Q+0)),I(e.getX(Q+1)),I(e.getX(Q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new mn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let v=0,x=i.count;v<x;v++)i.setXYZ(v,0,0,0);const r=new q,s=new q,a=new q,l=new q,u=new q,h=new q,m=new q,g=new q;if(e)for(let v=0,x=e.count;v<x;v+=3){const b=e.getX(v+0),M=e.getX(v+1),A=e.getX(v+2);r.fromBufferAttribute(t,b),s.fromBufferAttribute(t,M),a.fromBufferAttribute(t,A),m.subVectors(a,s),g.subVectors(r,s),m.cross(g),l.fromBufferAttribute(i,b),u.fromBufferAttribute(i,M),h.fromBufferAttribute(i,A),l.add(m),u.add(m),h.add(m),i.setXYZ(b,l.x,l.y,l.z),i.setXYZ(M,u.x,u.y,u.z),i.setXYZ(A,h.x,h.y,h.z)}else for(let v=0,x=t.count;v<x;v+=3)r.fromBufferAttribute(t,v+0),s.fromBufferAttribute(t,v+1),a.fromBufferAttribute(t,v+2),m.subVectors(a,s),g.subVectors(r,s),m.cross(g),i.setXYZ(v+0,m.x,m.y,m.z),i.setXYZ(v+1,m.x,m.y,m.z),i.setXYZ(v+2,m.x,m.y,m.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Lr.fromBufferAttribute(e,t),Lr.normalize(),e.setXYZ(t,Lr.x,Lr.y,Lr.z)}toNonIndexed(){function e(l,u){const h=l.array,m=l.itemSize,g=l.normalized,v=new h.constructor(u.length*m);let x=0,b=0;for(let M=0,A=u.length;M<A;M++){l.isInterleavedBufferAttribute?x=u[M]*l.data.stride+l.offset:x=u[M]*m;for(let S=0;S<m;S++)v[b++]=h[x++]}return new mn(v,m,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Gt,i=this.index.array,r=this.attributes;for(const l in r){const u=r[l],h=e(u,i);t.setAttribute(l,h)}const s=this.morphAttributes;for(const l in s){const u=[],h=s[l];for(let m=0,g=h.length;m<g;m++){const v=h[m],x=e(v,i);u.push(x)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,u=a.length;l<u;l++){const h=a[l];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const h in u)u[h]!==void 0&&(e[h]=u[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const u in i){const h=i[u];e.data.attributes[u]=h.toJSON(e.data)}const r={};let s=!1;for(const u in this.morphAttributes){const h=this.morphAttributes[u],m=[];for(let g=0,v=h.length;g<v;g++){const x=h[g];m.push(x.toJSON(e.data))}m.length>0&&(r[u]=m,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const h in r){const m=r[h];this.setAttribute(h,m.clone(t))}const s=e.morphAttributes;for(const h in s){const m=[],g=s[h];for(let v=0,x=g.length;v<x;v++)m.push(g[v].clone(t));this.morphAttributes[h]=m}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let h=0,m=a.length;h<m;h++){const g=a[h];this.addGroup(g.start,g.count,g.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const YC=new ft,wh=new E0,J1=new Ir,qC=new q,$1=new q,Z1=new q,Q1=new q,MA=new q,ex=new q,KC=new q,tx=new q;class Ai extends hn{constructor(e=new Gt,t=new Pa){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&&l){ex.set(0,0,0);for(let u=0,h=s.length;u<h;u++){const m=l[u],g=s[u];m!==0&&(MA.fromBufferAttribute(g,e),a?ex.addScaledVector(MA,m):ex.addScaledVector(MA.sub(t),m))}t.add(ex)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),J1.copy(i.boundingSphere),J1.applyMatrix4(s),wh.copy(e.ray).recast(e.near),!(J1.containsPoint(wh.origin)===!1&&(wh.intersectSphere(J1,qC)===null||wh.origin.distanceToSquared(qC)>(e.far-e.near)**2))&&(YC.copy(s).invert(),wh.copy(e.ray).applyMatrix4(YC),!(i.boundingBox!==null&&wh.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,wh)))}_computeIntersections(e,t,i){let r;const s=this.geometry,a=this.material,l=s.index,u=s.attributes.position,h=s.attributes.uv,m=s.attributes.uv1,g=s.attributes.normal,v=s.groups,x=s.drawRange;if(l!==null)if(Array.isArray(a))for(let b=0,M=v.length;b<M;b++){const A=v[b],S=a[A.materialIndex],C=Math.max(A.start,x.start),R=Math.min(l.count,Math.min(A.start+A.count,x.start+x.count));for(let B=C,N=R;B<N;B+=3){const U=l.getX(B),I=l.getX(B+1),z=l.getX(B+2);r=nx(this,S,e,i,h,m,g,U,I,z),r&&(r.faceIndex=Math.floor(B/3),r.face.materialIndex=A.materialIndex,t.push(r))}}else{const b=Math.max(0,x.start),M=Math.min(l.count,x.start+x.count);for(let A=b,S=M;A<S;A+=3){const C=l.getX(A),R=l.getX(A+1),B=l.getX(A+2);r=nx(this,a,e,i,h,m,g,C,R,B),r&&(r.faceIndex=Math.floor(A/3),t.push(r))}}else if(u!==void 0)if(Array.isArray(a))for(let b=0,M=v.length;b<M;b++){const A=v[b],S=a[A.materialIndex],C=Math.max(A.start,x.start),R=Math.min(u.count,Math.min(A.start+A.count,x.start+x.count));for(let B=C,N=R;B<N;B+=3){const U=B,I=B+1,z=B+2;r=nx(this,S,e,i,h,m,g,U,I,z),r&&(r.faceIndex=Math.floor(B/3),r.face.materialIndex=A.materialIndex,t.push(r))}}else{const b=Math.max(0,x.start),M=Math.min(u.count,x.start+x.count);for(let A=b,S=M;A<S;A+=3){const C=A,R=A+1,B=A+2;r=nx(this,a,e,i,h,m,g,C,R,B),r&&(r.faceIndex=Math.floor(A/3),t.push(r))}}}}function TI(n,e,t,i,r,s,a,l){let u;if(e.side===ur?u=i.intersectTriangle(a,s,r,!0,l):u=i.intersectTriangle(r,s,a,e.side===ll,l),u===null)return null;tx.copy(l),tx.applyMatrix4(n.matrixWorld);const h=t.ray.origin.distanceTo(tx);return h<t.near||h>t.far?null:{distance:h,point:tx.clone(),object:n}}function nx(n,e,t,i,r,s,a,l,u,h){n.getVertexPosition(l,$1),n.getVertexPosition(u,Z1),n.getVertexPosition(h,Q1);const m=TI(n,e,t,i,$1,Z1,Q1,KC);if(m){const g=new q;ua.getBarycoord(KC,$1,Z1,Q1,g),r&&(m.uv=ua.getInterpolatedAttribute(r,l,u,h,g,new Pe)),s&&(m.uv1=ua.getInterpolatedAttribute(s,l,u,h,g,new Pe)),a&&(m.normal=ua.getInterpolatedAttribute(a,l,u,h,g,new q),m.normal.dot(i.direction)>0&&m.normal.multiplyScalar(-1));const v={a:l,b:u,c:h,normal:new q,materialIndex:0};ua.getNormal($1,Z1,Q1,v.normal),m.face=v,m.barycoord=g}return m}class M0 extends Gt{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const l=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const u=[],h=[],m=[],g=[];let v=0,x=0;b("z","y","x",-1,-1,i,t,e,a,s,0),b("z","y","x",1,-1,i,t,-e,a,s,1),b("x","z","y",1,1,e,i,t,r,a,2),b("x","z","y",1,-1,e,i,-t,r,a,3),b("x","y","z",1,-1,e,t,i,r,s,4),b("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(u),this.setAttribute("position",new xt(h,3)),this.setAttribute("normal",new xt(m,3)),this.setAttribute("uv",new xt(g,2));function b(M,A,S,C,R,B,N,U,I,z,L){const O=B/I,G=N/z,$=B/2,Q=N/2,ce=U/2,fe=I+1,k=z+1;let K=0,ee=0;const me=new q;for(let W=0;W<k;W++){const ae=W*G-Q;for(let Se=0;Se<fe;Se++){const Ae=Se*O-$;me[M]=Ae*C,me[A]=ae*R,me[S]=ce,h.push(me.x,me.y,me.z),me[M]=0,me[A]=0,me[S]=U>0?1:-1,m.push(me.x,me.y,me.z),g.push(Se/I),g.push(1-W/z),K+=1}}for(let W=0;W<z;W++)for(let ae=0;ae<I;ae++){const Se=v+ae+fe*W,Ae=v+ae+fe*(W+1),ie=v+(ae+1)+fe*(W+1),_e=v+(ae+1)+fe*W;u.push(Se,Ae,_e),u.push(Ae,ie,_e),ee+=6}l.addGroup(x,ee,L),x+=ee,v+=K}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new M0(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Mp(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Is(n){const e={};for(let t=0;t<n.length;t++){const i=Mp(n[t]);for(const r in i)e[r]=i[r]}return e}function CI(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function F6(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Rn.workingColorSpace}const QM={clone:Mp,merge:Is};var wI=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,RI=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class tr extends er{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=wI,this.fragmentShader=RI,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Mp(e.uniforms),this.uniformsGroups=CI(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Np extends hn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ft,this.projectionMatrix=new ft,this.projectionMatrixInverse=new ft,this.coordinateSystem=go}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const nf=new q,JC=new Pe,$C=new Pe;class pi extends Np{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ap*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(r0*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ap*2*Math.atan(Math.tan(r0*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){nf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(nf.x,nf.y).multiplyScalar(-e/nf.z),nf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(nf.x,nf.y).multiplyScalar(-e/nf.z)}getViewSize(e,t){return this.getViewBounds(e,JC,$C),t.subVectors($C,JC)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(r0*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const u=a.fullWidth,h=a.fullHeight;s+=a.offsetX*r/u,t-=a.offsetY*i/h,r*=a.width/u,i*=a.height/h}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Vd=-90,kd=1;class z6 extends hn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new pi(Vd,kd,e,t);r.layers=this.layers,this.add(r);const s=new pi(Vd,kd,e,t);s.layers=this.layers,this.add(s);const a=new pi(Vd,kd,e,t);a.layers=this.layers,this.add(a);const l=new pi(Vd,kd,e,t);l.layers=this.layers,this.add(l);const u=new pi(Vd,kd,e,t);u.layers=this.layers,this.add(u);const h=new pi(Vd,kd,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,a,l,u]=t;for(const h of t)this.remove(h);if(e===go)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===Ev)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,l,u,h,m]=this.children,g=e.getRenderTarget(),v=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const M=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,a),e.setRenderTarget(i,2,r),e.render(t,l),e.setRenderTarget(i,3,r),e.render(t,u),e.setRenderTarget(i,4,r),e.render(t,h),i.texture.generateMipmaps=M,e.setRenderTarget(i,5,r),e.render(t,m),e.setRenderTarget(g,v,x),e.xr.enabled=b,i.texture.needsPMREMUpdate=!0}}class Yv extends kn{constructor(e=[],t=$c,i,r,s,a,l,u,h,m){super(e,t,i,r,s,a,l,u,h,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class H6 extends Ni{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Yv(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Jn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new M0(5,5,5),s=new tr({name:"CubemapFromEquirect",uniforms:Mp(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ur,blending:$r});s.uniforms.tEquirect.value=t;const a=new Ai(r,s),l=t.minFilter;return t.minFilter===mo&&(t.minFilter=Jn),new z6(1,10,this).update(e,a),t.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}class rl extends hn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const DI={type:"move"};class Qx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new rl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new rl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new rl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const l=this._targetRay,u=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){a=!0;for(const M of e.hand.values()){const A=t.getJointPose(M,i),S=this._getHandJoint(h,M);A!==null&&(S.matrix.fromArray(A.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=A.radius),S.visible=A!==null}const m=h.joints["index-finger-tip"],g=h.joints["thumb-tip"],v=m.position.distanceTo(g.position),x=.02,b=.005;h.inputState.pinching&&v>x+b?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&v<=x-b&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(DI)))}return l!==null&&(l.visible=r!==null),u!==null&&(u.visible=s!==null),h!==null&&(h.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new rl;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Nb{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ze(e),this.density=t}clone(){return new Nb(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Ib{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ze(e),this.near=t,this.far=i}clone(){return new Ib(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Tp extends hn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new fr,this.environmentIntensity=1,this.environmentRotation=new fr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class qv{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Av,this.updateRanges=[],this.version=0,this.uuid=Ua()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ua()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ua()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ls=new q;class xf{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ls.fromBufferAttribute(this,t),Ls.applyMatrix4(e),this.setXYZ(t,Ls.x,Ls.y,Ls.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ls.fromBufferAttribute(this,t),Ls.applyNormalMatrix(e),this.setXYZ(t,Ls.x,Ls.y,Ls.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ls.fromBufferAttribute(this,t),Ls.transformDirection(e),this.setXYZ(t,Ls.x,Ls.y,Ls.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Gs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=sn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Gs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Gs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Gs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Gs(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),r=sn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),r=sn(r,this.array),s=sn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new mn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new xf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class eT extends er{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ze(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let jd;const Sg=new q,Xd=new q,Wd=new q,Yd=new Pe,Ag=new Pe,G6=new ft,ix=new q,Eg=new q,rx=new q,ZC=new Pe,TA=new Pe,QC=new Pe;class V6 extends hn{constructor(e=new eT){if(super(),this.isSprite=!0,this.type="Sprite",jd===void 0){jd=new Gt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new qv(t,5);jd.setIndex([0,1,2,0,2,3]),jd.setAttribute("position",new xf(i,3,0,!1)),jd.setAttribute("uv",new xf(i,2,3,!1))}this.geometry=jd,this.material=e,this.center=new Pe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Xd.setFromMatrixScale(this.matrixWorld),G6.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Wd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Xd.multiplyScalar(-Wd.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;sx(ix.set(-.5,-.5,0),Wd,a,Xd,r,s),sx(Eg.set(.5,-.5,0),Wd,a,Xd,r,s),sx(rx.set(.5,.5,0),Wd,a,Xd,r,s),ZC.set(0,0),TA.set(1,0),QC.set(1,1);let l=e.ray.intersectTriangle(ix,Eg,rx,!1,Sg);if(l===null&&(sx(Eg.set(-.5,.5,0),Wd,a,Xd,r,s),TA.set(0,1),l=e.ray.intersectTriangle(ix,rx,Eg,!1,Sg),l===null))return;const u=e.ray.origin.distanceTo(Sg);u<e.near||u>e.far||t.push({distance:u,point:Sg.clone(),uv:ua.getInterpolation(Sg,ix,Eg,rx,ZC,TA,QC,new Pe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function sx(n,e,t,i,r,s){Yd.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Ag.x=s*Yd.x-r*Yd.y,Ag.y=r*Yd.x+s*Yd.y):Ag.copy(Yd),n.copy(e),n.x+=Ag.x,n.y+=Ag.y,n.applyMatrix4(G6)}const ax=new q,ew=new q;class k6 extends hn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){ax.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(ax);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){ax.setFromMatrixPosition(e.matrixWorld),ew.setFromMatrixPosition(this.matrixWorld);const i=ax.distanceTo(ew)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),i>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const tw=new q,nw=new Kt,iw=new Kt,BI=new q,rw=new ft,ox=new q,CA=new Ir,sw=new ft,wA=new E0;class Fb extends Ai{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=SE,this.bindMatrix=new ft,this.bindMatrixInverse=new ft,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Zr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,ox),this.boundingBox.expandByPoint(ox)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ir),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,ox),this.boundingSphere.expandByPoint(ox)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),CA.copy(this.boundingSphere),CA.applyMatrix4(r),e.ray.intersectsSphere(CA)!==!1&&(sw.copy(r).invert(),wA.copy(e.ray).applyMatrix4(sw),!(this.boundingBox!==null&&wA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,wA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Kt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===SE?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===b6?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;nw.fromBufferAttribute(r.attributes.skinIndex,e),iw.fromBufferAttribute(r.attributes.skinWeight,e),tw.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=iw.getComponent(s);if(a!==0){const l=nw.getComponent(s);rw.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(BI.copy(tw).applyMatrix4(rw),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Cp extends hn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class $l extends kn{constructor(e=null,t=1,i=1,r,s,a,l,u,h=Wi,m=Wi,g,v){super(null,a,l,u,h,m,r,s,g,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const aw=new ft,OI=new ft;class Ip{constructor(e=[],t=[]){this.uuid=Ua(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ft)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ft;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const l=e[s]?e[s].matrixWorld:OI;aw.multiplyMatrices(l,t[s]),aw.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Ip(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new $l(t,e,e,gs,ks);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new Cp),this.bones.push(a),this.boneInverses.push(new ft().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class v0 extends mn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const qd=new ft,ow=new ft,lx=[],lw=new Zr,PI=new ft,Mg=new Ai,Tg=new Ir;class tT extends Ai{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new v0(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,PI)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Zr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,qd),lw.copy(e.boundingBox).applyMatrix4(qd),this.boundingBox.union(lw)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ir),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,qd),Tg.copy(e.boundingSphere).applyMatrix4(qd),this.boundingSphere.union(Tg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,a=e*s+1;for(let l=0;l<i.length;l++)i[l]=r[a+l]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Mg.geometry=this.geometry,Mg.material=this.material,Mg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Tg.copy(this.boundingSphere),Tg.applyMatrix4(i),e.ray.intersectsSphere(Tg)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,qd),ow.multiplyMatrices(i,qd),Mg.matrixWorld=ow,Mg.raycast(e,lx);for(let a=0,l=lx.length;a<l;a++){const u=lx[a];u.instanceId=s,u.object=this,t.push(u)}lx.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new v0(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new $l(new Float32Array(r*this.count),r,this.count,Rb,ks));const s=this.morphTexture.source.data.data;let a=0;for(let h=0;h<i.length;h++)a+=i[h];const l=this.geometry.morphTargetsRelative?1:1-a,u=r*e;s[u]=l,s.set(i,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const RA=new q,UI=new q,LI=new Zt;class tl{constructor(e=new q(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=RA.subVectors(i,t).cross(UI.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(RA),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||LI.getNormalMatrix(e),r=this.coplanarPoint(RA).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Rh=new Ir,cx=new q;class Fp{constructor(e=new tl,t=new tl,i=new tl,r=new tl,s=new tl,a=new tl){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(s),l[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=go){const i=this.planes,r=e.elements,s=r[0],a=r[1],l=r[2],u=r[3],h=r[4],m=r[5],g=r[6],v=r[7],x=r[8],b=r[9],M=r[10],A=r[11],S=r[12],C=r[13],R=r[14],B=r[15];if(i[0].setComponents(u-s,v-h,A-x,B-S).normalize(),i[1].setComponents(u+s,v+h,A+x,B+S).normalize(),i[2].setComponents(u+a,v+m,A+b,B+C).normalize(),i[3].setComponents(u-a,v-m,A-b,B-C).normalize(),i[4].setComponents(u-l,v-g,A-M,B-R).normalize(),t===go)i[5].setComponents(u+l,v+g,A+M,B+R).normalize();else if(t===Ev)i[5].setComponents(l,g,M,R).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Rh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Rh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Rh)}intersectsSprite(e){return Rh.center.set(0,0,0),Rh.radius=.7071067811865476,Rh.applyMatrix4(e.matrixWorld),this.intersectsSphere(Rh)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(cx.x=r.normal.x>0?e.max.x:e.min.x,cx.y=r.normal.y>0?e.max.y:e.min.y,cx.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(cx)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const ql=new ft,Kl=new Fp;class zb{constructor(){this.coordinateSystem=go}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(ql.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Kl.setFromProjectionMatrix(ql,this.coordinateSystem),Kl.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(ql.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Kl.setFromProjectionMatrix(ql,this.coordinateSystem),Kl.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(ql.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Kl.setFromProjectionMatrix(ql,this.coordinateSystem),Kl.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(ql.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Kl.setFromProjectionMatrix(ql,this.coordinateSystem),Kl.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(ql.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Kl.setFromProjectionMatrix(ql,this.coordinateSystem),Kl.containsPoint(e))return!0}return!1}clone(){return new zb}}function DA(n,e){return n-e}function NI(n,e){return n.z-e.z}function II(n,e){return e.z-n.z}class FI{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,a=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const l=s[this.index];a.push(l),this.index++,l.start=e,l.count=t,l.z=i,l.index=r}reset(){this.list.length=0,this.index=0}}const aa=new ft,zI=new Ze(1,1,1),cw=new Fp,HI=new zb,ux=new Zr,Dh=new Ir,Cg=new q,uw=new q,GI=new q,BA=new FI,hs=new Ai,fx=[];function VI(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let a=0;a<i;a++)e.setComponent(s+t,a,n.getComponent(s,a))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Bh(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class j6 extends Ai{constructor(e,t,i=t*2,r){super(new Gt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new $l(t,e,e,gs,ks);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new $l(t,e,e,Xv,ic);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new $l(t,e,e,gs,ks);i.colorSpace=Rn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const a=e.getAttribute(s),{array:l,itemSize:u,normalized:h}=a,m=new l.constructor(i*u),g=new mn(m,u,h);t.setAttribute(s,g)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new mn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Zr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,aa),this.getBoundingBoxAt(s,ux).applyMatrix4(aa),e.union(ux)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ir);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,aa),this.getBoundingSphereAt(s,Dh).applyMatrix4(aa),e.union(Dh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(DA),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;aa.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(zI.toArray(a.image.data,r*4),a.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?a.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(DA),u=this._availableGeometryIds.shift(),s[u]=r):(u=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(u,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,u}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),a=t.getIndex(),l=this._geometryInfo[e];if(r&&a.count>l.reservedIndexCount||t.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const u=l.vertexStart,h=l.reservedVertexCount;l.vertexCount=t.getAttribute("position").count;for(const m in i.attributes){const g=t.getAttribute(m),v=i.getAttribute(m);VI(g,v,u);const x=g.itemSize;for(let b=g.count,M=h;b<M;b++){const A=u+b;for(let S=0;S<x;S++)v.setComponent(A,S,0)}v.needsUpdate=!0,v.addUpdateRange(u*x,h*x)}if(r){const m=l.indexStart,g=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let v=0;v<a.count;v++)s.setX(m+v,u+a.getX(v));for(let v=a.count,x=g;v<x;v++)s.setX(m+v,u);s.needsUpdate=!0,s.addUpdateRange(m,l.reservedIndexCount)}return l.start=r?l.indexStart:l.vertexStart,l.count=r?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&&(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&&(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((a,l)=>l).sort((a,l)=>i[a].vertexStart-i[l].vertexStart),s=this.geometry;for(let a=0,l=i.length;a<l;a++){const u=r[a],h=i[u];if(h.active!==!1){if(s.index!==null){if(h.indexStart!==t){const{indexStart:m,vertexStart:g,reservedIndexCount:v}=h,x=s.index,b=x.array,M=e-g;for(let A=m;A<m+v;A++)b[A]=b[A]+M;x.array.copyWithin(t,m,m+v),x.addUpdateRange(t,v),h.indexStart=t}t+=h.reservedIndexCount}if(h.vertexStart!==e){const{vertexStart:m,reservedVertexCount:g}=h,v=s.attributes;for(const x in v){const b=v[x],{array:M,itemSize:A}=b;M.copyWithin(e*A,m*A,(m+g)*A),b.addUpdateRange(e*A,g*A)}h.vertexStart=e}e+=h.reservedVertexCount,h.start=s.index?h.indexStart:h.vertexStart,this._nextIndexStart=s.index?h.indexStart+h.reservedIndexCount:0,this._nextVertexStart=h.vertexStart+h.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Zr,a=i.index,l=i.attributes.position;for(let u=r.start,h=r.start+r.count;u<h;u++){let m=u;a&&(m=a.getX(m)),s.expandByPoint(Cg.fromBufferAttribute(l,m))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new Ir;this.getBoundingBoxAt(e,ux),ux.getCenter(s.center);const a=i.index,l=i.attributes.position;let u=0;for(let h=r.start,m=r.start+r.count;h<m;h++){let g=h;a&&(g=a.getX(g)),Cg.fromBufferAttribute(l,g),u=Math.max(u,s.center.distanceToSquared(Cg))}s.radius=Math.sqrt(u),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(DA);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);Bh(this._multiDrawCounts,r),Bh(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const a=this._indirectTexture,l=this._matricesTexture,u=this._colorsTexture;a.dispose(),this._initIndirectTexture(),Bh(a.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),Bh(l.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),Bh(u.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...i.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(u=>u.indexStart+u.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Gt,this._initializeGeometry(s));const a=this.geometry;s.index&&Bh(s.index.array,a.index.array);for(const l in s.attributes)Bh(s.attributes[l].array,a.attributes[l].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,a=this.geometry;hs.material=this.material,hs.geometry.index=a.index,hs.geometry.attributes=a.attributes,hs.geometry.boundingBox===null&&(hs.geometry.boundingBox=new Zr),hs.geometry.boundingSphere===null&&(hs.geometry.boundingSphere=new Ir);for(let l=0,u=i.length;l<u;l++){if(!i[l].visible||!i[l].active)continue;const h=i[l].geometryIndex,m=r[h];hs.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(l,hs.matrixWorld).premultiply(s),this.getBoundingBoxAt(h,hs.geometry.boundingBox),this.getBoundingSphereAt(h,hs.geometry.boundingSphere),hs.raycast(e,fx);for(let g=0,v=fx.length;g<v;g++){const x=fx[g];x.object=this,x.batchId=l,t.push(x)}fx.length=0}hs.material=null,hs.geometry.index=null,hs.geometry.attributes={},hs.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),l=a===null?1:a.array.BYTES_PER_ELEMENT,u=this._instanceInfo,h=this._multiDrawStarts,m=this._multiDrawCounts,g=this._geometryInfo,v=this.perObjectFrustumCulled,x=this._indirectTexture,b=x.image.data,M=i.isArrayCamera?HI:cw;v&&!i.isArrayCamera&&(aa.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),cw.setFromProjectionMatrix(aa,e.coordinateSystem));let A=0;if(this.sortObjects){aa.copy(this.matrixWorld).invert(),Cg.setFromMatrixPosition(i.matrixWorld).applyMatrix4(aa),uw.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(aa);for(let R=0,B=u.length;R<B;R++)if(u[R].visible&&u[R].active){const N=u[R].geometryIndex;this.getMatrixAt(R,aa),this.getBoundingSphereAt(N,Dh).applyMatrix4(aa);let U=!1;if(v&&(U=!M.intersectsSphere(Dh,i)),!U){const I=g[N],z=GI.subVectors(Dh.center,Cg).dot(uw);BA.push(I.start,I.count,z,R)}}const S=BA.list,C=this.customSort;C===null?S.sort(s.transparent?II:NI):C.call(this,S,i);for(let R=0,B=S.length;R<B;R++){const N=S[R];h[A]=N.start*l,m[A]=N.count,b[A]=N.index,A++}BA.reset()}else for(let S=0,C=u.length;S<C;S++)if(u[S].visible&&u[S].active){const R=u[S].geometryIndex;let B=!1;if(v&&(this.getMatrixAt(S,aa),this.getBoundingSphereAt(R,Dh).applyMatrix4(aa),B=!M.intersectsSphere(Dh,i)),!B){const N=g[R];h[A]=N.start*l,m[A]=N.count,b[A]=S,A++}}x.needsUpdate=!0,this._multiDrawCount=A,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,a){this.onBeforeRender(e,null,r,s,a)}}class Qr extends er{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ze(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const k_=new q,j_=new q,fw=new ft,wg=new E0,hx=new Ir,OA=new q,hw=new q;class sc extends hn{constructor(e=new Gt,t=new Qr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)k_.fromBufferAttribute(t,r-1),j_.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=k_.distanceTo(j_);e.setAttribute("lineDistance",new xt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),hx.copy(i.boundingSphere),hx.applyMatrix4(r),hx.radius+=s,e.ray.intersectsSphere(hx)===!1)return;fw.copy(r).invert(),wg.copy(e.ray).applyMatrix4(fw);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=this.isLineSegments?2:1,m=i.index,v=i.attributes.position;if(m!==null){const x=Math.max(0,a.start),b=Math.min(m.count,a.start+a.count);for(let M=x,A=b-1;M<A;M+=h){const S=m.getX(M),C=m.getX(M+1),R=dx(this,e,wg,u,S,C,M);R&&t.push(R)}if(this.isLineLoop){const M=m.getX(b-1),A=m.getX(x),S=dx(this,e,wg,u,M,A,b-1);S&&t.push(S)}}else{const x=Math.max(0,a.start),b=Math.min(v.count,a.start+a.count);for(let M=x,A=b-1;M<A;M+=h){const S=dx(this,e,wg,u,M,M+1,M);S&&t.push(S)}if(this.isLineLoop){const M=dx(this,e,wg,u,b-1,x,b-1);M&&t.push(M)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function dx(n,e,t,i,r,s,a){const l=n.geometry.attributes.position;if(k_.fromBufferAttribute(l,r),j_.fromBufferAttribute(l,s),t.distanceSqToSegment(k_,j_,OA,hw)>i)return;OA.applyMatrix4(n.matrixWorld);const h=e.ray.origin.distanceTo(OA);if(!(h<e.near||h>e.far))return{distance:h,point:hw.clone().applyMatrix4(n.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:n}}const dw=new q,pw=new q;class ul extends sc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)dw.fromBufferAttribute(t,r),pw.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+dw.distanceTo(pw);e.setAttribute("lineDistance",new xt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class nT extends sc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Hb extends er{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ze(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const mw=new ft,ME=new E0,px=new Ir,mx=new q;class iT extends hn{constructor(e=new Gt,t=new Hb){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),px.copy(i.boundingSphere),px.applyMatrix4(r),px.radius+=s,e.ray.intersectsSphere(px)===!1)return;mw.copy(r).invert(),ME.copy(e.ray).applyMatrix4(mw);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=i.index,g=i.attributes.position;if(h!==null){const v=Math.max(0,a.start),x=Math.min(h.count,a.start+a.count);for(let b=v,M=x;b<M;b++){const A=h.getX(b);mx.fromBufferAttribute(g,A),gw(mx,A,u,r,e,t,this)}}else{const v=Math.max(0,a.start),x=Math.min(g.count,a.start+a.count);for(let b=v,M=x;b<M;b++)mx.fromBufferAttribute(g,b),gw(mx,b,u,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function gw(n,e,t,i,r,s,a){const l=ME.distanceSqToPoint(n);if(l<t){const u=new q;ME.closestPointToPoint(n,u),u.applyMatrix4(i);const h=r.ray.origin.distanceTo(u);if(h<r.near||h>r.far)return;s.push({distance:h,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class rT extends kn{constructor(e,t,i,r,s=Jn,a=Jn,l,u,h){super(e,t,i,r,s,a,l,u,h),this.isVideoTexture=!0,this.generateMipmaps=!1;const m=this;function g(){m.needsUpdate=!0,e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class kI extends rT{constructor(e,t,i,r,s,a,l,u){super({},e,t,i,r,s,a,l,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class jI extends kn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Wi,this.minFilter=Wi,this.generateMipmaps=!1,this.needsUpdate=!0}}class Gb extends kn{constructor(e,t,i,r,s,a,l,u,h,m,g,v){super(null,a,l,u,h,m,r,s,g,v),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class XI extends Gb{constructor(e,t,i,r,s,a){super(e,t,i,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Vs,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class WI extends Gb{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,$c),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class YI extends kn{constructor(e,t,i,r,s,a,l,u,h){super(e,t,i,r,s,a,l,u,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class zp extends kn{constructor(e,t,i=ic,r,s,a,l=Wi,u=Wi,h,m=m0){if(m!==m0&&m!==g0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,s,a,l,u,m,i,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new pf(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class qI extends zp{constructor(e=1,t=1,i=1){super(e,t),this.isDepthArrayTexture=!0,this.image={width:e,height:t,depth:i},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Vb extends Gt{constructor(e=1,t=1,i=4,r=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:s},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const a=[],l=[],u=[],h=[],m=t/2,g=Math.PI/2*e,v=t,x=2*g+v,b=i*2+s,M=r+1,A=new q,S=new q;for(let C=0;C<=b;C++){let R=0,B=0,N=0,U=0;if(C<=i){const L=C/i,O=L*Math.PI/2;B=-m-e*Math.cos(O),N=e*Math.sin(O),U=-e*Math.cos(O),R=L*g}else if(C<=i+s){const L=(C-i)/s;B=-m+L*t,N=e,U=0,R=g+L*v}else{const L=(C-i-s)/i,O=L*Math.PI/2;B=m+e*Math.sin(O),N=e*Math.cos(O),U=e*Math.sin(O),R=g+v+L*g}const I=Math.max(0,Math.min(1,R/x));let z=0;C===0?z=.5/r:C===b&&(z=-.5/r);for(let L=0;L<=r;L++){const O=L/r,G=O*Math.PI*2,$=Math.sin(G),Q=Math.cos(G);S.x=-N*Q,S.y=B,S.z=N*$,l.push(S.x,S.y,S.z),A.set(-N*Q,U,N*$),A.normalize(),u.push(A.x,A.y,A.z),h.push(O+z,I)}if(C>0){const L=(C-1)*M;for(let O=0;O<r;O++){const G=L+O,$=L+O+1,Q=C*M+O,ce=C*M+O+1;a.push(G,$,Q),a.push($,ce,Q)}}}this.setIndex(a),this.setAttribute("position",new xt(l,3)),this.setAttribute("normal",new xt(u,3)),this.setAttribute("uv",new xt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vb(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class kb extends Gt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],a=[],l=[],u=[],h=new q,m=new Pe;a.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let g=0,v=3;g<=t;g++,v+=3){const x=i+g/t*r;h.x=e*Math.cos(x),h.y=e*Math.sin(x),a.push(h.x,h.y,h.z),l.push(0,0,1),m.x=(a[v]/e+1)/2,m.y=(a[v+1]/e+1)/2,u.push(m.x,m.y)}for(let g=1;g<=t;g++)s.push(g,g+1,0);this.setIndex(s),this.setAttribute("position",new xt(a,3)),this.setAttribute("normal",new xt(l,3)),this.setAttribute("uv",new xt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kb(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Kv extends Gt{constructor(e=1,t=1,i=1,r=32,s=1,a=!1,l=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:l,thetaLength:u};const h=this;r=Math.floor(r),s=Math.floor(s);const m=[],g=[],v=[],x=[];let b=0;const M=[],A=i/2;let S=0;C(),a===!1&&(e>0&&R(!0),t>0&&R(!1)),this.setIndex(m),this.setAttribute("position",new xt(g,3)),this.setAttribute("normal",new xt(v,3)),this.setAttribute("uv",new xt(x,2));function C(){const B=new q,N=new q;let U=0;const I=(t-e)/i;for(let z=0;z<=s;z++){const L=[],O=z/s,G=O*(t-e)+e;for(let $=0;$<=r;$++){const Q=$/r,ce=Q*u+l,fe=Math.sin(ce),k=Math.cos(ce);N.x=G*fe,N.y=-O*i+A,N.z=G*k,g.push(N.x,N.y,N.z),B.set(fe,I,k).normalize(),v.push(B.x,B.y,B.z),x.push(Q,1-O),L.push(b++)}M.push(L)}for(let z=0;z<r;z++)for(let L=0;L<s;L++){const O=M[L][z],G=M[L+1][z],$=M[L+1][z+1],Q=M[L][z+1];(e>0||L!==0)&&(m.push(O,G,Q),U+=3),(t>0||L!==s-1)&&(m.push(G,$,Q),U+=3)}h.addGroup(S,U,0),S+=U}function R(B){const N=b,U=new Pe,I=new q;let z=0;const L=B===!0?e:t,O=B===!0?1:-1;for(let $=1;$<=r;$++)g.push(0,A*O,0),v.push(0,O,0),x.push(.5,.5),b++;const G=b;for(let $=0;$<=r;$++){const ce=$/r*u+l,fe=Math.cos(ce),k=Math.sin(ce);I.x=L*k,I.y=A*O,I.z=L*fe,g.push(I.x,I.y,I.z),v.push(0,O,0),U.x=fe*.5+.5,U.y=k*.5*O+.5,x.push(U.x,U.y),b++}for(let $=0;$<r;$++){const Q=N+$,ce=G+$;B===!0?m.push(ce,ce+1,Q):m.push(ce+1,ce,Q),z+=3}h.addGroup(S,z,B===!0?1:2),S+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Jv extends Kv{constructor(e=1,t=1,i=32,r=1,s=!1,a=0,l=Math.PI*2){super(0,e,t,i,r,s,a,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:l}}static fromJSON(e){return new Jv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Bf extends Gt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],a=[];l(r),h(i),m(),this.setAttribute("position",new xt(s,3)),this.setAttribute("normal",new xt(s.slice(),3)),this.setAttribute("uv",new xt(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(C){const R=new q,B=new q,N=new q;for(let U=0;U<t.length;U+=3)x(t[U+0],R),x(t[U+1],B),x(t[U+2],N),u(R,B,N,C)}function u(C,R,B,N){const U=N+1,I=[];for(let z=0;z<=U;z++){I[z]=[];const L=C.clone().lerp(B,z/U),O=R.clone().lerp(B,z/U),G=U-z;for(let $=0;$<=G;$++)$===0&&z===U?I[z][$]=L:I[z][$]=L.clone().lerp(O,$/G)}for(let z=0;z<U;z++)for(let L=0;L<2*(U-z)-1;L++){const O=Math.floor(L/2);L%2===0?(v(I[z][O+1]),v(I[z+1][O]),v(I[z][O])):(v(I[z][O+1]),v(I[z+1][O+1]),v(I[z+1][O]))}}function h(C){const R=new q;for(let B=0;B<s.length;B+=3)R.x=s[B+0],R.y=s[B+1],R.z=s[B+2],R.normalize().multiplyScalar(C),s[B+0]=R.x,s[B+1]=R.y,s[B+2]=R.z}function m(){const C=new q;for(let R=0;R<s.length;R+=3){C.x=s[R+0],C.y=s[R+1],C.z=s[R+2];const B=A(C)/2/Math.PI+.5,N=S(C)/Math.PI+.5;a.push(B,1-N)}b(),g()}function g(){for(let C=0;C<a.length;C+=6){const R=a[C+0],B=a[C+2],N=a[C+4],U=Math.max(R,B,N),I=Math.min(R,B,N);U>.9&&I<.1&&(R<.2&&(a[C+0]+=1),B<.2&&(a[C+2]+=1),N<.2&&(a[C+4]+=1))}}function v(C){s.push(C.x,C.y,C.z)}function x(C,R){const B=C*3;R.x=e[B+0],R.y=e[B+1],R.z=e[B+2]}function b(){const C=new q,R=new q,B=new q,N=new q,U=new Pe,I=new Pe,z=new Pe;for(let L=0,O=0;L<s.length;L+=9,O+=6){C.set(s[L+0],s[L+1],s[L+2]),R.set(s[L+3],s[L+4],s[L+5]),B.set(s[L+6],s[L+7],s[L+8]),U.set(a[O+0],a[O+1]),I.set(a[O+2],a[O+3]),z.set(a[O+4],a[O+5]),N.copy(C).add(R).add(B).divideScalar(3);const G=A(N);M(U,O+0,C,G),M(I,O+2,R,G),M(z,O+4,B,G)}}function M(C,R,B,N){N<0&&C.x===1&&(a[R]=C.x-1),B.x===0&&B.z===0&&(a[R]=N/2/Math.PI+.5)}function A(C){return Math.atan2(C.z,-C.x)}function S(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bf(e.vertices,e.indices,e.radius,e.details)}}class jb extends Bf{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new jb(e.radius,e.detail)}}const gx=new q,vx=new q,PA=new q,yx=new ua;class X6 extends Gt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(r0*t),a=e.getIndex(),l=e.getAttribute("position"),u=a?a.count:l.count,h=[0,0,0],m=["a","b","c"],g=new Array(3),v={},x=[];for(let b=0;b<u;b+=3){a?(h[0]=a.getX(b),h[1]=a.getX(b+1),h[2]=a.getX(b+2)):(h[0]=b,h[1]=b+1,h[2]=b+2);const{a:M,b:A,c:S}=yx;if(M.fromBufferAttribute(l,h[0]),A.fromBufferAttribute(l,h[1]),S.fromBufferAttribute(l,h[2]),yx.getNormal(PA),g[0]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,g[1]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,g[2]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let C=0;C<3;C++){const R=(C+1)%3,B=g[C],N=g[R],U=yx[m[C]],I=yx[m[R]],z=`${B}_${N}`,L=`${N}_${B}`;L in v&&v[L]?(PA.dot(v[L].normal)<=s&&(x.push(U.x,U.y,U.z),x.push(I.x,I.y,I.z)),v[L]=null):z in v||(v[z]={index0:h[C],index1:h[R],normal:PA.clone()})}}for(const b in v)if(v[b]){const{index0:M,index1:A}=v[b];gx.fromBufferAttribute(l,M),vx.fromBufferAttribute(l,A),x.push(gx.x,gx.y,gx.z),x.push(vx.x,vx.y,vx.z)}this.setAttribute("position",new xt(x,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class xo{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const s=i.length;let a;t?a=t:a=e*i[s-1];let l=0,u=s-1,h;for(;l<=u;)if(r=Math.floor(l+(u-l)/2),h=i[r]-a,h<0)l=r+1;else if(h>0)u=r-1;else{u=r;break}if(r=u,i[r]===a)return r/(s-1);const m=i[r],v=i[r+1]-m,x=(a-m)/v;return(r+x)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),l=this.getPoint(s),u=t||(a.isVector2?new Pe:new q);return u.copy(l).sub(a).normalize(),u}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new q,r=[],s=[],a=[],l=new q,u=new ft;for(let x=0;x<=e;x++){const b=x/e;r[x]=this.getTangentAt(b,new q)}s[0]=new q,a[0]=new q;let h=Number.MAX_VALUE;const m=Math.abs(r[0].x),g=Math.abs(r[0].y),v=Math.abs(r[0].z);m<=h&&(h=m,i.set(1,0,0)),g<=h&&(h=g,i.set(0,1,0)),v<=h&&i.set(0,0,1),l.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],l),a[0].crossVectors(r[0],s[0]);for(let x=1;x<=e;x++){if(s[x]=s[x-1].clone(),a[x]=a[x-1].clone(),l.crossVectors(r[x-1],r[x]),l.length()>Number.EPSILON){l.normalize();const b=Math.acos(Qt(r[x-1].dot(r[x]),-1,1));s[x].applyMatrix4(u.makeRotationAxis(l,b))}a[x].crossVectors(r[x],s[x])}if(t===!0){let x=Math.acos(Qt(s[0].dot(s[e]),-1,1));x/=e,r[0].dot(l.crossVectors(s[0],s[e]))>0&&(x=-x);for(let b=1;b<=e;b++)s[b].applyMatrix4(u.makeRotationAxis(r[b],x*b)),a[b].crossVectors(r[b],s[b])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Xb extends xo{constructor(e=0,t=0,i=1,r=1,s=0,a=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=l,this.aRotation=u}getPoint(e,t=new Pe){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let u=this.aX+this.xRadius*Math.cos(l),h=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const m=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=u-this.aX,x=h-this.aY;u=v*m-x*g+this.aX,h=v*g+x*m+this.aY}return i.set(u,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class W6 extends Xb{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function sT(){let n=0,e=0,t=0,i=0;function r(s,a,l,u){n=s,e=l,t=-3*s+3*a-2*l-u,i=2*s-2*a+l+u}return{initCatmullRom:function(s,a,l,u,h){r(a,l,h*(l-s),h*(u-a))},initNonuniformCatmullRom:function(s,a,l,u,h,m,g){let v=(a-s)/h-(l-s)/(h+m)+(l-a)/m,x=(l-a)/m-(u-a)/(m+g)+(u-l)/g;v*=m,x*=m,r(a,l,v,x)},calc:function(s){const a=s*s,l=a*s;return n+e*s+t*a+i*l}}}const xx=new q,UA=new sT,LA=new sT,NA=new sT;class Wb extends xo{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new q){const i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let l=Math.floor(a),u=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:u===0&&l===s-1&&(l=s-2,u=1);let h,m;this.closed||l>0?h=r[(l-1)%s]:(xx.subVectors(r[0],r[1]).add(r[0]),h=xx);const g=r[l%s],v=r[(l+1)%s];if(this.closed||l+2<s?m=r[(l+2)%s]:(xx.subVectors(r[s-1],r[s-2]).add(r[s-1]),m=xx),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let b=Math.pow(h.distanceToSquared(g),x),M=Math.pow(g.distanceToSquared(v),x),A=Math.pow(v.distanceToSquared(m),x);M<1e-4&&(M=1),b<1e-4&&(b=M),A<1e-4&&(A=M),UA.initNonuniformCatmullRom(h.x,g.x,v.x,m.x,b,M,A),LA.initNonuniformCatmullRom(h.y,g.y,v.y,m.y,b,M,A),NA.initNonuniformCatmullRom(h.z,g.z,v.z,m.z,b,M,A)}else this.curveType==="catmullrom"&&(UA.initCatmullRom(h.x,g.x,v.x,m.x,this.tension),LA.initCatmullRom(h.y,g.y,v.y,m.y,this.tension),NA.initCatmullRom(h.z,g.z,v.z,m.z,this.tension));return i.set(UA.calc(u),LA.calc(u),NA.calc(u)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new q().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function vw(n,e,t,i,r){const s=(i-e)*.5,a=(r-t)*.5,l=n*n,u=n*l;return(2*t-2*i+s+a)*u+(-3*t+3*i-2*s-a)*l+s*n+t}function KI(n,e){const t=1-n;return t*t*e}function JI(n,e){return 2*(1-n)*n*e}function $I(n,e){return n*n*e}function iv(n,e,t,i){return KI(n,e)+JI(n,t)+$I(n,i)}function ZI(n,e){const t=1-n;return t*t*t*e}function QI(n,e){const t=1-n;return 3*t*t*n*e}function e7(n,e){return 3*(1-n)*n*n*e}function t7(n,e){return n*n*n*e}function rv(n,e,t,i,r){return ZI(n,e)+QI(n,t)+e7(n,i)+t7(n,r)}class aT extends xo{constructor(e=new Pe,t=new Pe,i=new Pe,r=new Pe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Pe){const i=t,r=this.v0,s=this.v1,a=this.v2,l=this.v3;return i.set(rv(e,r.x,s.x,a.x,l.x),rv(e,r.y,s.y,a.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Y6 extends xo{constructor(e=new q,t=new q,i=new q,r=new q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new q){const i=t,r=this.v0,s=this.v1,a=this.v2,l=this.v3;return i.set(rv(e,r.x,s.x,a.x,l.x),rv(e,r.y,s.y,a.y,l.y),rv(e,r.z,s.z,a.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class oT extends xo{constructor(e=new Pe,t=new Pe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Pe){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Pe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class q6 extends xo{constructor(e=new q,t=new q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new q){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new q){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lT extends xo{constructor(e=new Pe,t=new Pe,i=new Pe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Pe){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(iv(e,r.x,s.x,a.x),iv(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cT extends xo{constructor(e=new q,t=new q,i=new q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new q){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(iv(e,r.x,s.x,a.x),iv(e,r.y,s.y,a.y),iv(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uT extends xo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Pe){const i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),l=s-a,u=r[a===0?a:a-1],h=r[a],m=r[a>r.length-2?r.length-1:a+1],g=r[a>r.length-3?r.length-1:a+2];return i.set(vw(l,u.x,h.x,m.x,g.x),vw(l,u.y,h.y,m.y,g.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Pe().fromArray(r))}return this}}var X_=Object.freeze({__proto__:null,ArcCurve:W6,CatmullRomCurve3:Wb,CubicBezierCurve:aT,CubicBezierCurve3:Y6,EllipseCurve:Xb,LineCurve:oT,LineCurve3:q6,QuadraticBezierCurve:lT,QuadraticBezierCurve3:cT,SplineCurve:uT});class K6 extends xo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new X_[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,l=this.curves[s],u=l.getLength(),h=u===0?0:1-a/u;return l.getPointAt(h,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],l=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,u=a.getPoints(l);for(let h=0;h<u.length;h++){const m=u[h];i&&i.equals(m)||(t.push(m),i=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new X_[r.type]().fromJSON(r))}return this}}class W_ extends K6{constructor(e){super(),this.type="Path",this.currentPoint=new Pe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new oT(this.currentPoint.clone(),new Pe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new lT(this.currentPoint.clone(),new Pe(e,t),new Pe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){const l=new aT(this.currentPoint.clone(),new Pe(e,t),new Pe(i,r),new Pe(s,a));return this.curves.push(l),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new uT(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+l,t+u,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,l,u){const h=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+h,t+m,i,r,s,a,l,u),this}absellipse(e,t,i,r,s,a,l,u){const h=new Xb(e,t,i,r,s,a,l,u);if(this.curves.length>0){const g=h.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(h);const m=h.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class s0 extends W_{constructor(e){super(e),this.uuid=Ua(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new W_().fromJSON(r))}return this}}function n7(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=J6(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let l,u,h;if(i&&(s=o7(n,e,s,t)),n.length>80*t){l=1/0,u=1/0;let m=-1/0,g=-1/0;for(let v=t;v<r;v+=t){const x=n[v],b=n[v+1];x<l&&(l=x),b<u&&(u=b),x>m&&(m=x),b>g&&(g=b)}h=Math.max(m-l,g-u),h=h!==0?32767/h:0}return Tv(s,a,t,l,u,h,0),a}function J6(n,e,t,i,r){let s;if(r===y7(n,e,t,i)>0)for(let a=e;a<t;a+=i)s=yw(a/i|0,n[a],n[a+1],s);else for(let a=t-i;a>=e;a-=i)s=yw(a/i|0,n[a],n[a+1],s);return s&&wp(s,s.next)&&(wv(s),s=s.next),s}function y0(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(wp(t,t.next)||Pi(t.prev,t,t.next)===0)){if(wv(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Tv(n,e,t,i,r,s,a){if(!n)return;!a&&s&&h7(n,i,r,s);let l=n;for(;n.prev!==n.next;){const u=n.prev,h=n.next;if(s?r7(n,i,r,s):i7(n)){e.push(u.i,n.i,h.i),wv(n),n=h.next,l=h.next;continue}if(n=h,n===l){a?a===1?(n=s7(y0(n),e),Tv(n,e,t,i,r,s,2)):a===2&&a7(n,e,t,i,r,s):Tv(y0(n),e,t,i,r,s,1);break}}}function i7(n){const e=n.prev,t=n,i=n.next;if(Pi(e,t,i)>=0)return!1;const r=e.x,s=t.x,a=i.x,l=e.y,u=t.y,h=i.y,m=Math.min(r,s,a),g=Math.min(l,u,h),v=Math.max(r,s,a),x=Math.max(l,u,h);let b=i.next;for(;b!==e;){if(b.x>=m&&b.x<=v&&b.y>=g&&b.y<=x&&jg(r,l,s,u,a,h,b.x,b.y)&&Pi(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function r7(n,e,t,i){const r=n.prev,s=n,a=n.next;if(Pi(r,s,a)>=0)return!1;const l=r.x,u=s.x,h=a.x,m=r.y,g=s.y,v=a.y,x=Math.min(l,u,h),b=Math.min(m,g,v),M=Math.max(l,u,h),A=Math.max(m,g,v),S=TE(x,b,e,t,i),C=TE(M,A,e,t,i);let R=n.prevZ,B=n.nextZ;for(;R&&R.z>=S&&B&&B.z<=C;){if(R.x>=x&&R.x<=M&&R.y>=b&&R.y<=A&&R!==r&&R!==a&&jg(l,m,u,g,h,v,R.x,R.y)&&Pi(R.prev,R,R.next)>=0||(R=R.prevZ,B.x>=x&&B.x<=M&&B.y>=b&&B.y<=A&&B!==r&&B!==a&&jg(l,m,u,g,h,v,B.x,B.y)&&Pi(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;R&&R.z>=S;){if(R.x>=x&&R.x<=M&&R.y>=b&&R.y<=A&&R!==r&&R!==a&&jg(l,m,u,g,h,v,R.x,R.y)&&Pi(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;B&&B.z<=C;){if(B.x>=x&&B.x<=M&&B.y>=b&&B.y<=A&&B!==r&&B!==a&&jg(l,m,u,g,h,v,B.x,B.y)&&Pi(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function s7(n,e){let t=n;do{const i=t.prev,r=t.next.next;!wp(i,r)&&Z6(i,t,t.next,r)&&Cv(i,r)&&Cv(r,i)&&(e.push(i.i,t.i,r.i),wv(t),wv(t.next),t=n=r),t=t.next}while(t!==n);return y0(t)}function a7(n,e,t,i,r,s){let a=n;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&m7(a,l)){let u=Q6(a,l);a=y0(a,a.next),u=y0(u,u.next),Tv(a,e,t,i,r,s,0),Tv(u,e,t,i,r,s,0);return}l=l.next}a=a.next}while(a!==n)}function o7(n,e,t,i){const r=[];for(let s=0,a=e.length;s<a;s++){const l=e[s]*i,u=s<a-1?e[s+1]*i:n.length,h=J6(n,l,u,i,!1);h===h.next&&(h.steiner=!0),r.push(p7(h))}r.sort(l7);for(let s=0;s<r.length;s++)t=c7(r[s],t);return t}function l7(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function c7(n,e){const t=u7(n,e);if(!t)return e;const i=Q6(t,n);return y0(i,i.next),y0(t,t.next)}function u7(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,a;if(wp(n,t))return t;do{if(wp(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const g=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=i&&g>s&&(s=g,a=t.x<t.next.x?t:t.next,g===i))return a}t=t.next}while(t!==e);if(!a)return null;const l=a,u=a.x,h=a.y;let m=1/0;t=a;do{if(i>=t.x&&t.x>=u&&i!==t.x&&$6(r<h?i:s,r,u,h,r<h?s:i,r,t.x,t.y)){const g=Math.abs(r-t.y)/(i-t.x);Cv(t,n)&&(g<m||g===m&&(t.x>a.x||t.x===a.x&&f7(a,t)))&&(a=t,m=g)}t=t.next}while(t!==l);return a}function f7(n,e){return Pi(n.prev,n,e.prev)<0&&Pi(e.next,n,n.next)<0}function h7(n,e,t,i){let r=n;do r.z===0&&(r.z=TE(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,d7(r)}function d7(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let a=i,l=0;for(let h=0;h<t&&(l++,a=a.nextZ,!!a);h++);let u=t;for(;l>0||u>0&&a;)l!==0&&(u===0||!a||i.z<=a.z)?(r=i,i=i.nextZ,l--):(r=a,a=a.nextZ,u--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=a}s.nextZ=null,t*=2}while(e>1);return n}function TE(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function p7(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function $6(n,e,t,i,r,s,a,l){return(r-a)*(e-l)>=(n-a)*(s-l)&&(n-a)*(i-l)>=(t-a)*(e-l)&&(t-a)*(s-l)>=(r-a)*(i-l)}function jg(n,e,t,i,r,s,a,l){return!(n===a&&e===l)&&$6(n,e,t,i,r,s,a,l)}function m7(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!g7(n,e)&&(Cv(n,e)&&Cv(e,n)&&v7(n,e)&&(Pi(n.prev,n,e.prev)||Pi(n,e.prev,e))||wp(n,e)&&Pi(n.prev,n,n.next)>0&&Pi(e.prev,e,e.next)>0)}function Pi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function wp(n,e){return n.x===e.x&&n.y===e.y}function Z6(n,e,t,i){const r=bx(Pi(n,e,t)),s=bx(Pi(n,e,i)),a=bx(Pi(t,i,n)),l=bx(Pi(t,i,e));return!!(r!==s&&a!==l||r===0&&_x(n,t,e)||s===0&&_x(n,i,e)||a===0&&_x(t,n,i)||l===0&&_x(t,e,i))}function _x(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function bx(n){return n>0?1:n<0?-1:0}function g7(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Z6(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Cv(n,e){return Pi(n.prev,n,n.next)<0?Pi(n,e,n.next)>=0&&Pi(n,n.prev,e)>=0:Pi(n,e,n.prev)<0||Pi(n,n.next,e)<0}function v7(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function Q6(n,e){const t=CE(n.i,n.x,n.y),i=CE(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function yw(n,e,t,i){const r=CE(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function wv(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function CE(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function y7(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}class x7{static triangulate(e,t,i=2){return n7(e,t,i)}}class sl{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return sl.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];xw(e),_w(i,e);let a=e.length;t.forEach(xw);for(let u=0;u<t.length;u++)r.push(a),a+=t[u].length,_w(i,t[u]);const l=x7.triangulate(i,r);for(let u=0;u<l.length;u+=3)s.push(l.slice(u,u+3));return s}}function xw(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function _w(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class $v extends Gt{constructor(e=new s0([new Pe(.5,.5),new Pe(-.5,.5),new Pe(-.5,-.5),new Pe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let l=0,u=e.length;l<u;l++){const h=e[l];a(h)}this.setAttribute("position",new xt(r,3)),this.setAttribute("uv",new xt(s,2)),this.computeVertexNormals();function a(l){const u=[],h=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,x=t.bevelThickness!==void 0?t.bevelThickness:.2,b=t.bevelSize!==void 0?t.bevelSize:x-.1,M=t.bevelOffset!==void 0?t.bevelOffset:0,A=t.bevelSegments!==void 0?t.bevelSegments:3;const S=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:_7;let R,B=!1,N,U,I,z;S&&(R=S.getSpacedPoints(m),B=!0,v=!1,N=S.computeFrenetFrames(m,!1),U=new q,I=new q,z=new q),v||(A=0,x=0,b=0,M=0);const L=l.extractPoints(h);let O=L.shape;const G=L.holes;if(!sl.isClockWise(O)){O=O.reverse();for(let Z=0,Qe=G.length;Z<Qe;Z++){const Xe=G[Z];sl.isClockWise(Xe)&&(G[Z]=Xe.reverse())}}function Q(Z){const Xe=10000000000000001e-36;let je=Z[0];for(let He=1;He<=Z.length;He++){const lt=He%Z.length,Ge=Z[lt],J=Ge.x-je.x,V=Ge.y-je.y,te=J*J+V*V,ge=Math.max(Math.abs(Ge.x),Math.abs(Ge.y),Math.abs(je.x),Math.abs(je.y)),Ne=Xe*ge*ge;if(te<=Ne){Z.splice(lt,1),He--;continue}je=Ge}}Q(O),G.forEach(Q);const ce=G.length,fe=O;for(let Z=0;Z<ce;Z++){const Qe=G[Z];O=O.concat(Qe)}function k(Z,Qe,Xe){return Qe||console.error("THREE.ExtrudeGeometry: vec does not exist"),Z.clone().addScaledVector(Qe,Xe)}const K=O.length;function ee(Z,Qe,Xe){let je,He,lt;const Ge=Z.x-Qe.x,J=Z.y-Qe.y,V=Xe.x-Z.x,te=Xe.y-Z.y,ge=Ge*Ge+J*J,Ne=Ge*te-J*V;if(Math.abs(Ne)>Number.EPSILON){const Te=Math.sqrt(ge),tt=Math.sqrt(V*V+te*te),$e=Qe.x-J/Te,ct=Qe.y+Ge/Te,Mt=Xe.x-te/tt,qe=Xe.y+V/tt,ut=((Mt-$e)*te-(qe-ct)*V)/(Ge*te-J*V);je=$e+Ge*ut-Z.x,He=ct+J*ut-Z.y;const vt=je*je+He*He;if(vt<=2)return new Pe(je,He);lt=Math.sqrt(vt/2)}else{let Te=!1;Ge>Number.EPSILON?V>Number.EPSILON&&(Te=!0):Ge<-Number.EPSILON?V<-Number.EPSILON&&(Te=!0):Math.sign(J)===Math.sign(te)&&(Te=!0),Te?(je=-J,He=Ge,lt=Math.sqrt(ge)):(je=Ge,He=J,lt=Math.sqrt(ge/2))}return new Pe(je/lt,He/lt)}const me=[];for(let Z=0,Qe=fe.length,Xe=Qe-1,je=Z+1;Z<Qe;Z++,Xe++,je++)Xe===Qe&&(Xe=0),je===Qe&&(je=0),me[Z]=ee(fe[Z],fe[Xe],fe[je]);const W=[];let ae,Se=me.concat();for(let Z=0,Qe=ce;Z<Qe;Z++){const Xe=G[Z];ae=[];for(let je=0,He=Xe.length,lt=He-1,Ge=je+1;je<He;je++,lt++,Ge++)lt===He&&(lt=0),Ge===He&&(Ge=0),ae[je]=ee(Xe[je],Xe[lt],Xe[Ge]);W.push(ae),Se=Se.concat(ae)}let Ae;if(A===0)Ae=sl.triangulateShape(fe,G);else{const Z=[],Qe=[];for(let Xe=0;Xe<A;Xe++){const je=Xe/A,He=x*Math.cos(je*Math.PI/2),lt=b*Math.sin(je*Math.PI/2)+M;for(let Ge=0,J=fe.length;Ge<J;Ge++){const V=k(fe[Ge],me[Ge],lt);gt(V.x,V.y,-He),je===0&&Z.push(V)}for(let Ge=0,J=ce;Ge<J;Ge++){const V=G[Ge];ae=W[Ge];const te=[];for(let ge=0,Ne=V.length;ge<Ne;ge++){const Te=k(V[ge],ae[ge],lt);gt(Te.x,Te.y,-He),je===0&&te.push(Te)}je===0&&Qe.push(te)}}Ae=sl.triangulateShape(Z,Qe)}const ie=Ae.length,_e=b+M;for(let Z=0;Z<K;Z++){const Qe=v?k(O[Z],Se[Z],_e):O[Z];B?(I.copy(N.normals[0]).multiplyScalar(Qe.x),U.copy(N.binormals[0]).multiplyScalar(Qe.y),z.copy(R[0]).add(I).add(U),gt(z.x,z.y,z.z)):gt(Qe.x,Qe.y,0)}for(let Z=1;Z<=m;Z++)for(let Qe=0;Qe<K;Qe++){const Xe=v?k(O[Qe],Se[Qe],_e):O[Qe];B?(I.copy(N.normals[Z]).multiplyScalar(Xe.x),U.copy(N.binormals[Z]).multiplyScalar(Xe.y),z.copy(R[Z]).add(I).add(U),gt(z.x,z.y,z.z)):gt(Xe.x,Xe.y,g/m*Z)}for(let Z=A-1;Z>=0;Z--){const Qe=Z/A,Xe=x*Math.cos(Qe*Math.PI/2),je=b*Math.sin(Qe*Math.PI/2)+M;for(let He=0,lt=fe.length;He<lt;He++){const Ge=k(fe[He],me[He],je);gt(Ge.x,Ge.y,g+Xe)}for(let He=0,lt=G.length;He<lt;He++){const Ge=G[He];ae=W[He];for(let J=0,V=Ge.length;J<V;J++){const te=k(Ge[J],ae[J],je);B?gt(te.x,te.y+R[m-1].y,R[m-1].x+Xe):gt(te.x,te.y,g+Xe)}}}Ue(),ke();function Ue(){const Z=r.length/3;if(v){let Qe=0,Xe=K*Qe;for(let je=0;je<ie;je++){const He=Ae[je];_t(He[2]+Xe,He[1]+Xe,He[0]+Xe)}Qe=m+A*2,Xe=K*Qe;for(let je=0;je<ie;je++){const He=Ae[je];_t(He[0]+Xe,He[1]+Xe,He[2]+Xe)}}else{for(let Qe=0;Qe<ie;Qe++){const Xe=Ae[Qe];_t(Xe[2],Xe[1],Xe[0])}for(let Qe=0;Qe<ie;Qe++){const Xe=Ae[Qe];_t(Xe[0]+K*m,Xe[1]+K*m,Xe[2]+K*m)}}i.addGroup(Z,r.length/3-Z,0)}function ke(){const Z=r.length/3;let Qe=0;Ye(fe,Qe),Qe+=fe.length;for(let Xe=0,je=G.length;Xe<je;Xe++){const He=G[Xe];Ye(He,Qe),Qe+=He.length}i.addGroup(Z,r.length/3-Z,1)}function Ye(Z,Qe){let Xe=Z.length;for(;--Xe>=0;){const je=Xe;let He=Xe-1;He<0&&(He=Z.length-1);for(let lt=0,Ge=m+A*2;lt<Ge;lt++){const J=K*lt,V=K*(lt+1),te=Qe+je+J,ge=Qe+He+J,Ne=Qe+He+V,Te=Qe+je+V;an(te,ge,Ne,Te)}}}function gt(Z,Qe,Xe){u.push(Z),u.push(Qe),u.push(Xe)}function _t(Z,Qe,Xe){Pt(Z),Pt(Qe),Pt(Xe);const je=r.length/3,He=C.generateTopUV(i,r,je-3,je-2,je-1);bt(He[0]),bt(He[1]),bt(He[2])}function an(Z,Qe,Xe,je){Pt(Z),Pt(Qe),Pt(je),Pt(Qe),Pt(Xe),Pt(je);const He=r.length/3,lt=C.generateSideWallUV(i,r,He-6,He-3,He-2,He-1);bt(lt[0]),bt(lt[1]),bt(lt[3]),bt(lt[1]),bt(lt[2]),bt(lt[3])}function Pt(Z){r.push(u[Z*3+0]),r.push(u[Z*3+1]),r.push(u[Z*3+2])}function bt(Z){s.push(Z.x),s.push(Z.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return b7(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const l=t[e.shapes[s]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new X_[r.type]().fromJSON(r)),new $v(i,e.options)}}const _7={generateTopUV:function(n,e,t,i,r){const s=e[t*3],a=e[t*3+1],l=e[i*3],u=e[i*3+1],h=e[r*3],m=e[r*3+1];return[new Pe(s,a),new Pe(l,u),new Pe(h,m)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[t*3],l=e[t*3+1],u=e[t*3+2],h=e[i*3],m=e[i*3+1],g=e[i*3+2],v=e[r*3],x=e[r*3+1],b=e[r*3+2],M=e[s*3],A=e[s*3+1],S=e[s*3+2];return Math.abs(l-m)<Math.abs(a-h)?[new Pe(a,1-u),new Pe(h,1-g),new Pe(v,1-b),new Pe(M,1-S)]:[new Pe(l,1-u),new Pe(m,1-g),new Pe(x,1-b),new Pe(A,1-S)]}};function b7(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Yb extends Bf{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Yb(e.radius,e.detail)}}class qb extends Gt{constructor(e=[new Pe(0,-.5),new Pe(.5,0),new Pe(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Qt(r,0,Math.PI*2);const s=[],a=[],l=[],u=[],h=[],m=1/t,g=new q,v=new Pe,x=new q,b=new q,M=new q;let A=0,S=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:A=e[C+1].x-e[C].x,S=e[C+1].y-e[C].y,x.x=S*1,x.y=-A,x.z=S*0,M.copy(x),x.normalize(),u.push(x.x,x.y,x.z);break;case e.length-1:u.push(M.x,M.y,M.z);break;default:A=e[C+1].x-e[C].x,S=e[C+1].y-e[C].y,x.x=S*1,x.y=-A,x.z=S*0,b.copy(x),x.x+=M.x,x.y+=M.y,x.z+=M.z,x.normalize(),u.push(x.x,x.y,x.z),M.copy(b)}for(let C=0;C<=t;C++){const R=i+C*m*r,B=Math.sin(R),N=Math.cos(R);for(let U=0;U<=e.length-1;U++){g.x=e[U].x*B,g.y=e[U].y,g.z=e[U].x*N,a.push(g.x,g.y,g.z),v.x=C/t,v.y=U/(e.length-1),l.push(v.x,v.y);const I=u[3*U+0]*B,z=u[3*U+1],L=u[3*U+0]*N;h.push(I,z,L)}}for(let C=0;C<t;C++)for(let R=0;R<e.length-1;R++){const B=R+C*e.length,N=B,U=B+e.length,I=B+e.length+1,z=B+1;s.push(N,U,z),s.push(I,z,U)}this.setIndex(s),this.setAttribute("position",new xt(a,3)),this.setAttribute("uv",new xt(l,2)),this.setAttribute("normal",new xt(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qb(e.points,e.segments,e.phiStart,e.phiLength)}}class Zv extends Bf{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Zv(e.radius,e.detail)}}class Hp extends Gt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,l=Math.floor(i),u=Math.floor(r),h=l+1,m=u+1,g=e/l,v=t/u,x=[],b=[],M=[],A=[];for(let S=0;S<m;S++){const C=S*v-a;for(let R=0;R<h;R++){const B=R*g-s;b.push(B,-C,0),M.push(0,0,1),A.push(R/l),A.push(1-S/u)}}for(let S=0;S<u;S++)for(let C=0;C<l;C++){const R=C+h*S,B=C+h*(S+1),N=C+1+h*(S+1),U=C+1+h*S;x.push(R,B,U),x.push(B,N,U)}this.setIndex(x),this.setAttribute("position",new xt(b,3)),this.setAttribute("normal",new xt(M,3)),this.setAttribute("uv",new xt(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hp(e.width,e.height,e.widthSegments,e.heightSegments)}}class Kb extends Gt{constructor(e=.5,t=1,i=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const l=[],u=[],h=[],m=[];let g=e;const v=(t-e)/r,x=new q,b=new Pe;for(let M=0;M<=r;M++){for(let A=0;A<=i;A++){const S=s+A/i*a;x.x=g*Math.cos(S),x.y=g*Math.sin(S),u.push(x.x,x.y,x.z),h.push(0,0,1),b.x=(x.x/t+1)/2,b.y=(x.y/t+1)/2,m.push(b.x,b.y)}g+=v}for(let M=0;M<r;M++){const A=M*(i+1);for(let S=0;S<i;S++){const C=S+A,R=C,B=C+i+1,N=C+i+2,U=C+1;l.push(R,B,U),l.push(B,N,U)}}this.setIndex(l),this.setAttribute("position",new xt(u,3)),this.setAttribute("normal",new xt(h,3)),this.setAttribute("uv",new xt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kb(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Jb extends Gt{constructor(e=new s0([new Pe(0,.5),new Pe(-.5,-.5),new Pe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],a=[];let l=0,u=0;if(Array.isArray(e)===!1)h(e);else for(let m=0;m<e.length;m++)h(e[m]),this.addGroup(l,u,m),l+=u,u=0;this.setIndex(i),this.setAttribute("position",new xt(r,3)),this.setAttribute("normal",new xt(s,3)),this.setAttribute("uv",new xt(a,2));function h(m){const g=r.length/3,v=m.extractPoints(t);let x=v.shape;const b=v.holes;sl.isClockWise(x)===!1&&(x=x.reverse());for(let A=0,S=b.length;A<S;A++){const C=b[A];sl.isClockWise(C)===!0&&(b[A]=C.reverse())}const M=sl.triangulateShape(x,b);for(let A=0,S=b.length;A<S;A++){const C=b[A];x=x.concat(C)}for(let A=0,S=x.length;A<S;A++){const C=x[A];r.push(C.x,C.y,0),s.push(0,0,1),a.push(C.x,C.y)}for(let A=0,S=M.length;A<S;A++){const C=M[A],R=C[0]+g,B=C[1]+g,N=C[2]+g;i.push(R,B,N),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return S7(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];i.push(a)}return new Jb(i,e.curveSegments)}}function S7(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Qv extends Gt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const u=Math.min(a+l,Math.PI);let h=0;const m=[],g=new q,v=new q,x=[],b=[],M=[],A=[];for(let S=0;S<=i;S++){const C=[],R=S/i;let B=0;S===0&&a===0?B=.5/t:S===i&&u===Math.PI&&(B=-.5/t);for(let N=0;N<=t;N++){const U=N/t;g.x=-e*Math.cos(r+U*s)*Math.sin(a+R*l),g.y=e*Math.cos(a+R*l),g.z=e*Math.sin(r+U*s)*Math.sin(a+R*l),b.push(g.x,g.y,g.z),v.copy(g).normalize(),M.push(v.x,v.y,v.z),A.push(U+B,1-R),C.push(h++)}m.push(C)}for(let S=0;S<i;S++)for(let C=0;C<t;C++){const R=m[S][C+1],B=m[S][C],N=m[S+1][C],U=m[S+1][C+1];(S!==0||a>0)&&x.push(R,B,U),(S!==i-1||u<Math.PI)&&x.push(B,N,U)}this.setIndex(x),this.setAttribute("position",new xt(b,3)),this.setAttribute("normal",new xt(M,3)),this.setAttribute("uv",new xt(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class $b extends Bf{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $b(e.radius,e.detail)}}class Zb extends Gt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],h=[],m=new q,g=new q,v=new q;for(let x=0;x<=i;x++)for(let b=0;b<=r;b++){const M=b/r*s,A=x/i*Math.PI*2;g.x=(e+t*Math.cos(A))*Math.cos(M),g.y=(e+t*Math.cos(A))*Math.sin(M),g.z=t*Math.sin(A),l.push(g.x,g.y,g.z),m.x=e*Math.cos(M),m.y=e*Math.sin(M),v.subVectors(g,m).normalize(),u.push(v.x,v.y,v.z),h.push(b/r),h.push(x/i)}for(let x=1;x<=i;x++)for(let b=1;b<=r;b++){const M=(r+1)*x+b-1,A=(r+1)*(x-1)+b-1,S=(r+1)*(x-1)+b,C=(r+1)*x+b;a.push(M,A,C),a.push(A,S,C)}this.setIndex(a),this.setAttribute("position",new xt(l,3)),this.setAttribute("normal",new xt(u,3)),this.setAttribute("uv",new xt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zb(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Qb extends Gt{constructor(e=1,t=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const l=[],u=[],h=[],m=[],g=new q,v=new q,x=new q,b=new q,M=new q,A=new q,S=new q;for(let R=0;R<=i;++R){const B=R/i*s*Math.PI*2;C(B,s,a,e,x),C(B+.01,s,a,e,b),A.subVectors(b,x),S.addVectors(b,x),M.crossVectors(A,S),S.crossVectors(M,A),M.normalize(),S.normalize();for(let N=0;N<=r;++N){const U=N/r*Math.PI*2,I=-t*Math.cos(U),z=t*Math.sin(U);g.x=x.x+(I*S.x+z*M.x),g.y=x.y+(I*S.y+z*M.y),g.z=x.z+(I*S.z+z*M.z),u.push(g.x,g.y,g.z),v.subVectors(g,x).normalize(),h.push(v.x,v.y,v.z),m.push(R/i),m.push(N/r)}}for(let R=1;R<=i;R++)for(let B=1;B<=r;B++){const N=(r+1)*(R-1)+(B-1),U=(r+1)*R+(B-1),I=(r+1)*R+B,z=(r+1)*(R-1)+B;l.push(N,U,z),l.push(U,I,z)}this.setIndex(l),this.setAttribute("position",new xt(u,3)),this.setAttribute("normal",new xt(h,3)),this.setAttribute("uv",new xt(m,2));function C(R,B,N,U,I){const z=Math.cos(R),L=Math.sin(R),O=N/B*R,G=Math.cos(O);I.x=U*(2+G)*.5*z,I.y=U*(2+G)*L*.5,I.z=U*Math.sin(O)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qb(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class eS extends Gt{constructor(e=new cT(new q(-1,-1,0),new q(-1,1,0),new q(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new q,u=new q,h=new Pe;let m=new q;const g=[],v=[],x=[],b=[];M(),this.setIndex(b),this.setAttribute("position",new xt(g,3)),this.setAttribute("normal",new xt(v,3)),this.setAttribute("uv",new xt(x,2));function M(){for(let R=0;R<t;R++)A(R);A(s===!1?t:0),C(),S()}function A(R){m=e.getPointAt(R/t,m);const B=a.normals[R],N=a.binormals[R];for(let U=0;U<=r;U++){const I=U/r*Math.PI*2,z=Math.sin(I),L=-Math.cos(I);u.x=L*B.x+z*N.x,u.y=L*B.y+z*N.y,u.z=L*B.z+z*N.z,u.normalize(),v.push(u.x,u.y,u.z),l.x=m.x+i*u.x,l.y=m.y+i*u.y,l.z=m.z+i*u.z,g.push(l.x,l.y,l.z)}}function S(){for(let R=1;R<=t;R++)for(let B=1;B<=r;B++){const N=(r+1)*(R-1)+(B-1),U=(r+1)*R+(B-1),I=(r+1)*R+B,z=(r+1)*(R-1)+B;b.push(N,U,z),b.push(U,I,z)}}function C(){for(let R=0;R<=t;R++)for(let B=0;B<=r;B++)h.x=R/t,h.y=B/r,x.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new eS(new X_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class eO extends Gt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new q,s=new q;if(e.index!==null){const a=e.attributes.position,l=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let h=0,m=u.length;h<m;++h){const g=u[h],v=g.start,x=g.count;for(let b=v,M=v+x;b<M;b+=3)for(let A=0;A<3;A++){const S=l.getX(b+A),C=l.getX(b+(A+1)%3);r.fromBufferAttribute(a,S),s.fromBufferAttribute(a,C),bw(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let l=0,u=a.count/3;l<u;l++)for(let h=0;h<3;h++){const m=3*l+h,g=3*l+(h+1)%3;r.fromBufferAttribute(a,m),s.fromBufferAttribute(a,g),bw(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new xt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function bw(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var Sw=Object.freeze({__proto__:null,BoxGeometry:M0,CapsuleGeometry:Vb,CircleGeometry:kb,ConeGeometry:Jv,CylinderGeometry:Kv,DodecahedronGeometry:jb,EdgesGeometry:X6,ExtrudeGeometry:$v,IcosahedronGeometry:Yb,LatheGeometry:qb,OctahedronGeometry:Zv,PlaneGeometry:Hp,PolyhedronGeometry:Bf,RingGeometry:Kb,ShapeGeometry:Jb,SphereGeometry:Qv,TetrahedronGeometry:$b,TorusGeometry:Zb,TorusKnotGeometry:Qb,TubeGeometry:eS,WireframeGeometry:eO});class tO extends er{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ze(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class nO extends tr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Gp extends er{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ze(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Df,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new fr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _o extends Gp{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Pe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Qt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ze(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ze(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ze(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class sv extends er{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ze(16777215),this.specular=new Ze(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Df,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new fr,this.combine=jv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class iO extends er{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ze(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Df,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class fT extends er{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Df,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class hT extends er{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Df,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new fr,this.combine=jv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dT extends er{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Rf,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class pT extends er{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class rO extends er{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ze(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Df,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sO extends Qr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Zh(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function aO(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function oO(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function wE(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const l=t[s]*e;for(let u=0;u!==e;++u)r[a++]=n[l+u]}return r}function mT(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),t.push(...a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),t.push(a)),s=n[r++];while(s!==void 0)}function A7(n,e,t,i,r=30){const s=n.clone();s.name=e;const a=[];for(let u=0;u<s.tracks.length;++u){const h=s.tracks[u],m=h.getValueSize(),g=[],v=[];for(let x=0;x<h.times.length;++x){const b=h.times[x]*r;if(!(b<t||b>=i)){g.push(h.times[x]);for(let M=0;M<m;++M)v.push(h.values[x*m+M])}}g.length!==0&&(h.times=Zh(g,h.times.constructor),h.values=Zh(v,h.values.constructor),a.push(h))}s.tracks=a;let l=1/0;for(let u=0;u<s.tracks.length;++u)l>s.tracks[u].times[0]&&(l=s.tracks[u].times[0]);for(let u=0;u<s.tracks.length;++u)s.tracks[u].shift(-1*l);return s.resetDuration(),s}function E7(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let a=0;a<r;++a){const l=t.tracks[a],u=l.ValueTypeName;if(u==="bool"||u==="string")continue;const h=n.tracks.find(function(S){return S.name===l.name&&S.ValueTypeName===u});if(h===void 0)continue;let m=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);let v=0;const x=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=x/3);const b=l.times.length-1;let M;if(s<=l.times[0]){const S=m,C=g-m;M=l.values.slice(S,C)}else if(s>=l.times[b]){const S=b*g+m,C=S+g-m;M=l.values.slice(S,C)}else{const S=l.createInterpolant(),C=m,R=g-m;S.evaluate(s),M=S.resultBuffer.slice(C,R)}u==="quaternion"&&new si().fromArray(M).normalize().conjugate().toArray(M);const A=h.times.length;for(let S=0;S<A;++S){const C=S*x+v;if(u==="quaternion")si.multiplyQuaternionsFlat(h.values,C,M,0,h.values,C);else{const R=x-v*2;for(let B=0;B<R;++B)h.values[C+B]-=M[B]}}}return n.blendMode=qM,n}class M7{static convertArray(e,t){return Zh(e,t)}static isTypedArray(e){return aO(e)}static getKeyframeOrder(e){return oO(e)}static sortedArray(e,t,i){return wE(e,t,i)}static flattenJSON(e,t,i,r){mT(e,t,i,r)}static subclip(e,t,i,r,s=30){return A7(e,t,i,r,s)}static makeClipAdditive(e,t=0,i=e,r=30){return E7(e,t,i,r)}}class Vp{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let l=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(i=2,s=l);for(let u=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const l=i+a>>>1;e<t[l]?a=l:i=l+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class lO extends Vp{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Jh,endingEnd:Jh}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,a=e+1,l=r[s],u=r[a];if(l===void 0)switch(this.getSettings_().endingStart){case $h:s=e,l=2*t-i;break;case bv:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=i}if(u===void 0)switch(this.getSettings_().endingEnd){case $h:a=e,u=2*i-t;break;case bv:a=1,u=i+r[1]-r[0];break;default:a=e-1,u=t}const h=(i-t)*.5,m=this.valueSize;this._weightPrev=h/(t-l),this._weightNext=h/(u-i),this._offsetPrev=s*m,this._offsetNext=a*m}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,m=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,x=this._weightNext,b=(i-t)/(r-t),M=b*b,A=M*b,S=-v*A+2*v*M-v*b,C=(1+v)*A+(-1.5-2*v)*M+(-.5+v)*b+1,R=(-1-x)*A+(1.5+x)*M+.5*b,B=x*A-x*M;for(let N=0;N!==l;++N)s[N]=S*a[m+N]+C*a[h+N]+R*a[u+N]+B*a[g+N];return s}}class gT extends Vp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,m=(i-t)/(r-t),g=1-m;for(let v=0;v!==l;++v)s[v]=a[h+v]*g+a[u+v]*m;return s}}class cO extends Vp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class bo{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Zh(t,this.TimeBufferType),this.values=Zh(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Zh(e.times,Array),values:Zh(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new cO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new gT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new lO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case bp:t=this.InterpolantFactoryMethodDiscrete;break;case Sp:t=this.InterpolantFactoryMethodLinear;break;case $x:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return bp;case this.InterpolantFactoryMethodLinear:return Sp;case this.InterpolantFactoryMethodSmooth:return $x}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const l=this.getValueSize();this.times=i.slice(s,a),this.values=this.values.slice(s*l,a*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let l=0;l!==s;l++){const u=i[l];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),e=!1;break}if(a!==null&&a>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,a),e=!1;break}a=u}if(r!==void 0&&aO(r))for(let l=0,u=r.length;l!==u;++l){const h=r[l];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===$x,s=e.length-1;let a=1;for(let l=1;l<s;++l){let u=!1;const h=e[l],m=e[l+1];if(h!==m&&(l!==1||h!==e[0]))if(r)u=!0;else{const g=l*i,v=g-i,x=g+i;for(let b=0;b!==i;++b){const M=t[g+b];if(M!==t[v+b]||M!==t[x+b]){u=!0;break}}}if(u){if(l!==a){e[a]=e[l];const g=l*i,v=a*i;for(let x=0;x!==i;++x)t[v+x]=t[g+x]}++a}}if(s>0){e[a]=e[s];for(let l=s*i,u=a*i,h=0;h!==i;++h)t[u+h]=t[l+h];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}bo.prototype.ValueTypeName="";bo.prototype.TimeBufferType=Float32Array;bo.prototype.ValueBufferType=Float32Array;bo.prototype.DefaultInterpolation=Sp;class T0 extends bo{constructor(e,t,i){super(e,t,i)}}T0.prototype.ValueTypeName="bool";T0.prototype.ValueBufferType=Array;T0.prototype.DefaultInterpolation=bp;T0.prototype.InterpolantFactoryMethodLinear=void 0;T0.prototype.InterpolantFactoryMethodSmooth=void 0;class vT extends bo{constructor(e,t,i,r){super(e,t,i,r)}}vT.prototype.ValueTypeName="color";class _f extends bo{constructor(e,t,i,r){super(e,t,i,r)}}_f.prototype.ValueTypeName="number";class uO extends Vp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=(i-t)/(r-t);let h=e*l;for(let m=h+l;h!==m;h+=4)si.slerpFlat(s,0,a,h-l,a,h,u);return s}}class bf extends bo{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new uO(this.times,this.values,this.getValueSize(),e)}}bf.prototype.ValueTypeName="quaternion";bf.prototype.InterpolantFactoryMethodSmooth=void 0;class C0 extends bo{constructor(e,t,i){super(e,t,i)}}C0.prototype.ValueTypeName="string";C0.prototype.ValueBufferType=Array;C0.prototype.DefaultInterpolation=bp;C0.prototype.InterpolantFactoryMethodLinear=void 0;C0.prototype.InterpolantFactoryMethodSmooth=void 0;class Sf extends bo{constructor(e,t,i,r){super(e,t,i,r)}}Sf.prototype.ValueTypeName="vector";class x0{constructor(e="",t=-1,i=[],r=Ob){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ua(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,l=i.length;a!==l;++a)t.push(C7(i[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(bo.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,a=[];for(let l=0;l<s;l++){let u=[],h=[];u.push((l+s-1)%s,l,(l+1)%s),h.push(0,1,0);const m=oO(u);u=wE(u,1,m),h=wE(h,1,m),!r&&u[0]===0&&(u.push(s),h.push(h[0])),a.push(new _f(".morphTargetInfluences["+t[l].name+"]",u,h).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,u=e.length;l<u;l++){const h=e[l],m=h.name.match(s);if(m&&m.length>1){const g=m[1];let v=r[g];v||(r[g]=v=[]),v.push(h)}}const a=[];for(const l in r)a.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return a}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(g,v,x,b,M){if(x.length!==0){const A=[],S=[];mT(x,A,S,b),A.length!==0&&M.push(new g(v,A,S))}},r=[],s=e.name||"default",a=e.fps||30,l=e.blendMode;let u=e.length||-1;const h=e.hierarchy||[];for(let g=0;g<h.length;g++){const v=h[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const x={};let b;for(b=0;b<v.length;b++)if(v[b].morphTargets)for(let M=0;M<v[b].morphTargets.length;M++)x[v[b].morphTargets[M]]=-1;for(const M in x){const A=[],S=[];for(let C=0;C!==v[b].morphTargets.length;++C){const R=v[b];A.push(R.time),S.push(R.morphTarget===M?1:0)}r.push(new _f(".morphTargetInfluence["+M+"]",A,S))}u=x.length*a}else{const x=".bones["+t[g].name+"]";i(Sf,x+".position",v,"pos",r),i(bf,x+".quaternion",v,"rot",r),i(Sf,x+".scale",v,"scl",r)}}return r.length===0?null:new this(s,u,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function T7(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return _f;case"vector":case"vector2":case"vector3":case"vector4":return Sf;case"color":return vT;case"quaternion":return bf;case"bool":case"boolean":return T0;case"string":return C0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function C7(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=T7(n.type);if(n.times===void 0){const t=[],i=[];mT(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const jc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class yT{constructor(e,t,i){const r=this;let s=!1,a=0,l=0,u;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(m){l++,s===!1&&r.onStart!==void 0&&r.onStart(m,a,l),s=!0},this.itemEnd=function(m){a++,r.onProgress!==void 0&&r.onProgress(m,a,l),a===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(m){r.onError!==void 0&&r.onError(m)},this.resolveURL=function(m){return u?u(m):m},this.setURLModifier=function(m){return u=m,this},this.addHandler=function(m,g){return h.push(m,g),this},this.removeHandler=function(m){const g=h.indexOf(m);return g!==-1&&h.splice(g,2),this},this.getHandler=function(m){for(let g=0,v=h.length;g<v;g+=2){const x=h[g],b=h[g+1];if(x.global&&(x.lastIndex=0),x.test(m))return b}return null}}}const fO=new yT;class Fr{constructor(e){this.manager=e!==void 0?e:fO,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Fr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Nc={};class w7 extends Error{constructor(e,t){super(e),this.response=t}}class Ws extends Fr{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=jc.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Nc[e]!==void 0){Nc[e].push({onLoad:t,onProgress:i,onError:r});return}Nc[e]=[],Nc[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(a).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const m=Nc[e],g=h.body.getReader(),v=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),x=v?parseInt(v):0,b=x!==0;let M=0;const A=new ReadableStream({start(S){C();function C(){g.read().then(({done:R,value:B})=>{if(R)S.close();else{M+=B.byteLength;const N=new ProgressEvent("progress",{lengthComputable:b,loaded:M,total:x});for(let U=0,I=m.length;U<I;U++){const z=m[U];z.onProgress&&z.onProgress(N)}S.enqueue(B),C()}},R=>{S.error(R)})}}});return new Response(A)}else throw new w7(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(u){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(m=>new DOMParser().parseFromString(m,l));case"json":return h.json();default:if(l==="")return h.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),v=g&&g[1]?g[1].toLowerCase():void 0,x=new TextDecoder(v);return h.arrayBuffer().then(b=>x.decode(b))}}}).then(h=>{jc.add(e,h);const m=Nc[e];delete Nc[e];for(let g=0,v=m.length;g<v;g++){const x=m[g];x.onLoad&&x.onLoad(h)}}).catch(h=>{const m=Nc[e];if(m===void 0)throw this.manager.itemError(e),h;delete Nc[e];for(let g=0,v=m.length;g<v;g++){const x=m[g];x.onError&&x.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class R7 extends Fr{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Ws(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=x0.parse(e[i]);t.push(r)}return t}}class D7 extends Fr{constructor(e){super(e)}load(e,t,i,r){const s=this,a=[],l=new Gb,u=new Ws(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(s.withCredentials);let h=0;function m(g){u.load(e[g],function(v){const x=s.parse(v,!0);a[g]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},h+=1,h===6&&(x.mipmapCount===1&&(l.minFilter=Jn),l.image=a,l.format=x.format,l.needsUpdate=!0,t&&t(l))},i,r)}if(Array.isArray(e))for(let g=0,v=e.length;g<v;++g)m(g);else u.load(e,function(g){const v=s.parse(g,!0);if(v.isCubemap){const x=v.mipmaps.length/v.mipmapCount;for(let b=0;b<x;b++){a[b]={mipmaps:[]};for(let M=0;M<v.mipmapCount;M++)a[b].mipmaps.push(v.mipmaps[b*v.mipmapCount+M]),a[b].format=v.format,a[b].width=v.width,a[b].height=v.height}l.image=a}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=Jn),l.format=v.format,l.needsUpdate=!0,t&&t(l)},i,r);return l}}class Rv extends Fr{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=jc.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const l=Mv("img");function u(){m(),jc.add(e,this),t&&t(this),s.manager.itemEnd(e)}function h(g){m(),r&&r(g),s.manager.itemError(e),s.manager.itemEnd(e)}function m(){l.removeEventListener("load",u,!1),l.removeEventListener("error",h,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class B7 extends Fr{constructor(e){super(e)}load(e,t,i,r){const s=new Yv;s.colorSpace=Fn;const a=new Rv(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function u(h){a.load(e[h],function(m){s.images[h]=m,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let h=0;h<e.length;++h)u(h);return s}}class O7 extends Fr{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new $l,l=new Ws(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(u){let h;try{h=s.parse(u)}catch(m){if(r!==void 0)r(m);else{console.error(m);return}}h.image!==void 0?a.image=h.image:h.data!==void 0&&(a.image.width=h.width,a.image.height=h.height,a.image.data=h.data),a.wrapS=h.wrapS!==void 0?h.wrapS:Vs,a.wrapT=h.wrapT!==void 0?h.wrapT:Vs,a.magFilter=h.magFilter!==void 0?h.magFilter:Jn,a.minFilter=h.minFilter!==void 0?h.minFilter:Jn,a.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&&(a.colorSpace=h.colorSpace),h.flipY!==void 0&&(a.flipY=h.flipY),h.format!==void 0&&(a.format=h.format),h.type!==void 0&&(a.type=h.type),h.mipmaps!==void 0&&(a.mipmaps=h.mipmaps,a.minFilter=mo),h.mipmapCount===1&&(a.minFilter=Jn),h.generateMipmaps!==void 0&&(a.generateMipmaps=h.generateMipmaps),a.needsUpdate=!0,t&&t(a,h)},i,r),a}}class kp extends Fr{constructor(e){super(e)}load(e,t,i,r){const s=new kn,a=new Rv(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Of extends hn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ze(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class hO extends Of{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ze(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const IA=new ft,Aw=new q,Ew=new q;class xT{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Pe(512,512),this.mapType=Mr,this.map=null,this.mapPass=null,this.matrix=new ft,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Fp,this._frameExtents=new Pe(1,1),this._viewportCount=1,this._viewports=[new Kt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Aw.setFromMatrixPosition(e.matrixWorld),t.position.copy(Aw),Ew.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Ew),t.updateMatrixWorld(),IA.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(IA),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(IA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class P7 extends xT{constructor(){super(new pi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Ap*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class tS extends Of{constructor(e,t,i=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.target=new hn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new P7}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Mw=new ft,Rg=new q,FA=new q;class U7 extends xT{constructor(){super(new pi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Pe(4,2),this._viewportCount=6,this._viewports=[new Kt(2,1,1,1),new Kt(0,1,1,1),new Kt(3,1,1,1),new Kt(1,1,1,1),new Kt(3,0,1,1),new Kt(1,0,1,1)],this._cubeDirections=[new q(1,0,0),new q(-1,0,0),new q(0,0,1),new q(0,0,-1),new q(0,1,0),new q(0,-1,0)],this._cubeUps=[new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,0,1),new q(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Rg.setFromMatrixPosition(e.matrixWorld),i.position.copy(Rg),FA.copy(i.position),FA.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(FA),i.updateMatrixWorld(),r.makeTranslation(-Rg.x,-Rg.y,-Rg.z),Mw.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Mw)}}class Dv extends Of{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new U7}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Zl extends Np{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,l=r+t,u=r-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,a=s+h*this.view.width,l-=m*this.view.offsetY,u=l-m*this.view.height}this.projectionMatrix.makeOrthographic(s,a,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class L7 extends xT{constructor(){super(new Zl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class nS extends Of{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.target=new hn,this.shadow=new L7}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class _T extends Of{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class dO extends Of{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class pO{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new q)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(i*s)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*i*s),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class mO extends Of{constructor(e=new pO,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class iS extends Fr{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,a=new Ws(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ze().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new Ze().setHex(a.value);break;case"v2":r.uniforms[s].value=new Pe().fromArray(a.value);break;case"v3":r.uniforms[s].value=new q().fromArray(a.value);break;case"v4":r.uniforms[s].value=new Kt().fromArray(a.value);break;case"m3":r.uniforms[s].value=new Zt().fromArray(a.value);break;case"m4":r.uniforms[s].value=new ft().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Pe().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Pe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return iS.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:tO,SpriteMaterial:eT,RawShaderMaterial:nO,ShaderMaterial:tr,PointsMaterial:Hb,MeshPhysicalMaterial:_o,MeshStandardMaterial:Gp,MeshPhongMaterial:sv,MeshToonMaterial:iO,MeshNormalMaterial:fT,MeshLambertMaterial:hT,MeshDepthMaterial:dT,MeshDistanceMaterial:pT,MeshBasicMaterial:Pa,MeshMatcapMaterial:rO,LineDashedMaterial:sO,LineBasicMaterial:Qr,Material:er};return new t[e]}}class Wc{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class gO extends Gt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class vO extends Fr{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Ws(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(x,b){if(t[b]!==void 0)return t[b];const A=x.interleavedBuffers[b],S=s(x,A.buffer),C=ap(A.type,S),R=new qv(C,A.stride);return R.uuid=A.uuid,t[b]=R,R}function s(x,b){if(i[b]!==void 0)return i[b];const A=x.arrayBuffers[b],S=new Uint32Array(A).buffer;return i[b]=S,S}const a=e.isInstancedBufferGeometry?new gO:new Gt,l=e.data.index;if(l!==void 0){const x=ap(l.type,l.array);a.setIndex(new mn(x,1))}const u=e.data.attributes;for(const x in u){const b=u[x];let M;if(b.isInterleavedBufferAttribute){const A=r(e.data,b.data);M=new xf(A,b.itemSize,b.offset,b.normalized)}else{const A=ap(b.type,b.array),S=b.isInstancedBufferAttribute?v0:mn;M=new S(A,b.itemSize,b.normalized)}b.name!==void 0&&(M.name=b.name),b.usage!==void 0&&M.setUsage(b.usage),a.setAttribute(x,M)}const h=e.data.morphAttributes;if(h)for(const x in h){const b=h[x],M=[];for(let A=0,S=b.length;A<S;A++){const C=b[A];let R;if(C.isInterleavedBufferAttribute){const B=r(e.data,C.data);R=new xf(B,C.itemSize,C.offset,C.normalized)}else{const B=ap(C.type,C.array);R=new mn(B,C.itemSize,C.normalized)}C.name!==void 0&&(R.name=C.name),M.push(R)}a.morphAttributes[x]=M}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let x=0,b=g.length;x!==b;++x){const M=g[x];a.addGroup(M.start,M.count,M.materialIndex)}const v=e.data.boundingSphere;if(v!==void 0){const x=new q;v.center!==void 0&&x.fromArray(v.center),a.boundingSphere=new Ir(x,v.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class N7 extends Fr{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?Wc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const l=new Ws(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){let h=null;try{h=JSON.parse(u)}catch(g){r!==void 0&&r(g),console.error("THREE:ObjectLoader: Can't parse "+e+".",g.message);return}const m=h.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(h,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Wc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Ws(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),l=JSON.parse(a),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(h)}),l=this.parseTextures(e.textures,a),u=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,s,u,l,i),m=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,m),this.bindLightTargets(h),t!==void 0){let g=!1;for(const v in a)if(a[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,r,l,a,t),h=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,h),this.bindLightTargets(u),u}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new s0().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const l=new Ip().fromJSON(e[s],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new vO;for(let s=0,a=e.length;s<a;s++){let l;const u=e[s];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(u);break;default:u.type in Sw?l=Sw[u.type].fromJSON(u,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,u.name!==void 0&&(l.name=u.name),u.userData!==void 0&&(l.userData=u.userData),i[u.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new iS;s.setTextures(t);for(let a=0,l=e.length;a<l;a++){const u=e[a];i[u.uuid]===void 0&&(i[u.uuid]=s.parse(u)),r[u.uuid]=i[u.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=x0.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function a(u){return i.manager.itemStart(u),s.load(u,function(){i.manager.itemEnd(u)},void 0,function(){i.manager.itemError(u),i.manager.itemEnd(u)})}function l(u){if(typeof u=="string"){const h=u,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:i.resourcePath+h;return a(m)}else return u.data?{data:ap(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new yT(t);s=new Rv(u),s.setCrossOrigin(this.crossOrigin);for(let h=0,m=e.length;h<m;h++){const g=e[h],v=g.url;if(Array.isArray(v)){const x=[];for(let b=0,M=v.length;b<M;b++){const A=v[b],S=l(A);S!==null&&(S instanceof HTMLImageElement?x.push(S):x.push(new $l(S.data,S.width,S.height)))}r[g.uuid]=new pf(x)}else{const x=l(g.url);r[g.uuid]=new pf(x)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(a){if(typeof a=="string"){const l=a,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(u)}else return a.data?{data:ap(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new Rv(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.url;if(Array.isArray(h)){const m=[];for(let g=0,v=h.length;g<v;g++){const x=h[g],b=await s(x);b!==null&&(b instanceof HTMLImageElement?m.push(b):m.push(new $l(b.data,b.width,b.height)))}i[u.uuid]=new pf(m)}else{const m=await s(u.url);i[u.uuid]=new pf(m)}}}return i}parseTextures(e,t){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const u=t[l.image],h=u.data;let m;Array.isArray(h)?(m=new Yv,h.length===6&&(m.needsUpdate=!0)):(h&&h.data?m=new $l:m=new kn,h&&(m.needsUpdate=!0)),m.source=u,m.uuid=l.uuid,l.name!==void 0&&(m.name=l.name),l.mapping!==void 0&&(m.mapping=i(l.mapping,I7)),l.channel!==void 0&&(m.channel=l.channel),l.offset!==void 0&&m.offset.fromArray(l.offset),l.repeat!==void 0&&m.repeat.fromArray(l.repeat),l.center!==void 0&&m.center.fromArray(l.center),l.rotation!==void 0&&(m.rotation=l.rotation),l.wrap!==void 0&&(m.wrapS=i(l.wrap[0],Tw),m.wrapT=i(l.wrap[1],Tw)),l.format!==void 0&&(m.format=l.format),l.internalFormat!==void 0&&(m.internalFormat=l.internalFormat),l.type!==void 0&&(m.type=l.type),l.colorSpace!==void 0&&(m.colorSpace=l.colorSpace),l.minFilter!==void 0&&(m.minFilter=i(l.minFilter,Cw)),l.magFilter!==void 0&&(m.magFilter=i(l.magFilter,Cw)),l.anisotropy!==void 0&&(m.anisotropy=l.anisotropy),l.flipY!==void 0&&(m.flipY=l.flipY),l.generateMipmaps!==void 0&&(m.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(m.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(m.compareFunction=l.compareFunction),l.userData!==void 0&&(m.userData=l.userData),r[l.uuid]=m}return r}parseObject(e,t,i,r,s){let a;function l(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function u(v){if(v!==void 0){if(Array.isArray(v)){const x=[];for(let b=0,M=v.length;b<M;b++){const A=v[b];i[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),x.push(i[A])}return x}return i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),i[v]}}function h(v){return r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),r[v]}let m,g;switch(e.type){case"Scene":a=new Tp,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new Ze(e.background):a.background=h(e.background)),e.environment!==void 0&&(a.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new Ib(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new Nb(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new pi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Zl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new _T(e.color,e.intensity);break;case"DirectionalLight":a=new nS(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new Dv(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new dO(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new tS(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new hO(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new mO().fromJSON(e);break;case"SkinnedMesh":m=l(e.geometry),g=u(e.material),a=new Fb(m,g),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":m=l(e.geometry),g=u(e.material),a=new Ai(m,g);break;case"InstancedMesh":m=l(e.geometry),g=u(e.material);const v=e.count,x=e.instanceMatrix,b=e.instanceColor;a=new tT(m,g,v),a.instanceMatrix=new v0(new Float32Array(x.array),16),b!==void 0&&(a.instanceColor=new v0(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":m=l(e.geometry),g=u(e.material),a=new j6(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),a.geometry=m,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._geometryInfo=e.geometryInfo.map(M=>{let A=null,S=null;return M.boundingBox!==void 0&&(A=new Zr,A.min.fromArray(M.boundingBox.min),A.max.fromArray(M.boundingBox.max)),M.boundingSphere!==void 0&&(S=new Ir,S.radius=M.boundingSphere.radius,S.center.fromArray(M.boundingSphere.center)),{...M,boundingBox:A,boundingSphere:S}}),a._instanceInfo=e.instanceInfo,a._availableInstanceIds=e._availableInstanceIds,a._availableGeometryIds=e._availableGeometryIds,a._nextIndexStart=e.nextIndexStart,a._nextVertexStart=e.nextVertexStart,a._geometryCount=e.geometryCount,a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._matricesTexture=h(e.matricesTexture.uuid),a._indirectTexture=h(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=h(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(a.boundingSphere=new Ir,a.boundingSphere.center.fromArray(e.boundingSphere.center),a.boundingSphere.radius=e.boundingSphere.radius),e.boundingBox!==void 0&&(a.boundingBox=new Zr,a.boundingBox.min.fromArray(e.boundingBox.min),a.boundingBox.max.fromArray(e.boundingBox.max));break;case"LOD":a=new k6;break;case"Line":a=new sc(l(e.geometry),u(e.material));break;case"LineLoop":a=new nT(l(e.geometry),u(e.material));break;case"LineSegments":a=new ul(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":a=new iT(l(e.geometry),u(e.material));break;case"Sprite":a=new V6(u(e.material));break;case"Group":a=new rl;break;case"Bone":a=new Cp;break;default:a=new hn}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let x=0;x<v.length;x++)a.add(this.parseObject(v[x],t,i,r,s))}if(e.animations!==void 0){const v=e.animations;for(let x=0;x<v.length;x++){const b=v[x];a.animations.push(s[b])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const v=e.levels;for(let x=0;x<v.length;x++){const b=v[x],M=a.getObjectByProperty("uuid",b.object);M!==void 0&&a.addLevel(M,b.distance,b.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new hn}})}}const I7={UVMapping:Eb,CubeReflectionMapping:$c,CubeRefractionMapping:yf,EquirectangularReflectionMapping:xp,EquirectangularRefractionMapping:_v,CubeUVReflectionMapping:Lp},Tw={RepeatWrapping:nc,ClampToEdgeWrapping:Vs,MirroredRepeatWrapping:_p},Cw={NearestFilter:Wi,NearestMipmapNearestFilter:Mb,NearestMipmapLinearFilter:Kh,LinearFilter:Jn,LinearMipmapNearestFilter:pp,LinearMipmapLinearFilter:mo};class yO extends Fr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=jc.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(h=>{t&&t(h),s.manager.itemEnd(e)}).catch(h=>{r&&r(h)});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const u=fetch(e,l).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(h){return jc.add(e,h),t&&t(h),s.manager.itemEnd(e),h}).catch(function(h){r&&r(h),jc.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});jc.add(e,u),s.manager.itemStart(e)}}let Sx;class bT{static getContext(){return Sx===void 0&&(Sx=new(window.AudioContext||window.webkitAudioContext)),Sx}static setContext(e){Sx=e}}class F7 extends Fr{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Ws(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(u){try{const h=u.slice(0);bT.getContext().decodeAudioData(h,function(g){t(g)}).catch(l)}catch(h){l(h)}},i,r);function l(u){r?r(u):console.error(u),s.manager.itemError(e)}}}const ww=new ft,Rw=new ft,Oh=new ft;class z7{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new pi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new pi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Oh.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,a=t.near*Math.tan(r0*t.fov*.5)/t.zoom;let l,u;Rw.elements[12]=-r,ww.elements[12]=r,l=-a*t.aspect+s,u=a*t.aspect+s,Oh.elements[0]=2*t.near/(u-l),Oh.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(Oh),l=-a*t.aspect-s,u=a*t.aspect-s,Oh.elements[0]=2*t.near/(u-l),Oh.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(Oh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Rw),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ww)}}class xO extends pi{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class ST{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Dw(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Dw();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Dw(){return performance.now()}const Ph=new q,Bw=new si,H7=new q,Uh=new q;class G7 extends hn{constructor(){super(),this.type="AudioListener",this.context=bT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ST}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ph,Bw,H7),Uh.set(0,0,-1).applyQuaternion(Bw),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ph.x,r),t.positionY.linearRampToValueAtTime(Ph.y,r),t.positionZ.linearRampToValueAtTime(Ph.z,r),t.forwardX.linearRampToValueAtTime(Uh.x,r),t.forwardY.linearRampToValueAtTime(Uh.y,r),t.forwardZ.linearRampToValueAtTime(Uh.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Ph.x,Ph.y,Ph.z),t.setOrientation(Uh.x,Uh.y,Uh.z,i.x,i.y,i.z)}}class _O extends hn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Lh=new q,Ow=new si,V7=new q,Nh=new q;class k7 extends _O{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Lh,Ow,V7),Nh.set(0,0,1).applyQuaternion(Ow);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Lh.x,i),t.positionY.linearRampToValueAtTime(Lh.y,i),t.positionZ.linearRampToValueAtTime(Lh.z,i),t.orientationX.linearRampToValueAtTime(Nh.x,i),t.orientationY.linearRampToValueAtTime(Nh.y,i),t.orientationZ.linearRampToValueAtTime(Nh.z,i)}else t.setPosition(Lh.x,Lh.y,Lh.z),t.setOrientation(Nh.x,Nh.y,Nh.z)}}class j7{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class bO{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==r;++l)i[s+l]=i[l];a=t}else{a+=t;const l=t/a;this._mixBufferRegion(i,s,0,l,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const u=t*this._origIndex;this._mixBufferRegion(i,r,u,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let u=t,h=t+t;u!==h;++u)if(i[u]!==i[u+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,a=r;s!==a;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){si.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const a=this._workIndex*s;si.multiplyQuaternionsFlat(e,a,e,t,e,i),si.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,s){const a=1-r;for(let l=0;l!==s;++l){const u=t+l;e[u]=e[u]*a+e[i+l]*r}}_lerpAdditive(e,t,i,r,s){for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]+e[i+a]*r}}}const AT="\\[\\]\\.:\\/",X7=new RegExp("["+AT+"]","g"),ET="[^"+AT+"]",W7="[^"+AT.replace("\\.","")+"]",Y7=/((?:WC+[\/:])*)/.source.replace("WC",ET),q7=/(WCOD+)?/.source.replace("WCOD",W7),K7=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ET),J7=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ET),$7=new RegExp("^"+Y7+q7+K7+J7+"$"),Z7=["material","materials","bones","map"];class Q7{constructor(e,t,i){const r=i||xn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class xn{constructor(e,t,i){this.path=t,this.parsedPath=i||xn.parseTrackName(t),this.node=xn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new xn.Composite(e,t,i):new xn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(X7,"")}static parseTrackName(e){const t=$7.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);Z7.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const l=s[a];if(l.name===t||l.uuid===t)return l;const u=i(l.children);if(u)return u}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=xn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let h=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===h){h=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const a=e[r];if(a===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}xn.Composite=Q7;xn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};xn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};xn.prototype.GetterByBindingType=[xn.prototype._getValue_direct,xn.prototype._getValue_array,xn.prototype._getValue_arrayElement,xn.prototype._getValue_toArray];xn.prototype.SetterByBindingTypeAndVersioning=[[xn.prototype._setValue_direct,xn.prototype._setValue_direct_setNeedsUpdate,xn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[xn.prototype._setValue_array,xn.prototype._setValue_array_setNeedsUpdate,xn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[xn.prototype._setValue_arrayElement,xn.prototype._setValue_arrayElement_setNeedsUpdate,xn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[xn.prototype._setValue_fromArray,xn.prototype._setValue_fromArray_setNeedsUpdate,xn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class eF{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ua(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let l,u=e.length,h=this.nCachedObjects_;for(let m=0,g=arguments.length;m!==g;++m){const v=arguments[m],x=v.uuid;let b=t[x];if(b===void 0){b=u++,t[x]=b,e.push(v);for(let M=0,A=a;M!==A;++M)s[M].push(new xn(v,i[M],r[M]))}else if(b<h){l=e[b];const M=--h,A=e[M];t[A.uuid]=b,e[b]=A,t[x]=M,e[M]=v;for(let S=0,C=a;S!==C;++S){const R=s[S],B=R[M];let N=R[b];R[b]=B,N===void 0&&(N=new xn(v,i[S],r[S])),R[M]=N}}else e[b]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],h=u.uuid,m=t[h];if(m!==void 0&&m>=s){const g=s++,v=e[g];t[v.uuid]=m,e[m]=v,t[h]=g,e[g]=u;for(let x=0,b=r;x!==b;++x){const M=i[x],A=M[g],S=M[m];M[m]=A,M[g]=S}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,a=e.length;for(let l=0,u=arguments.length;l!==u;++l){const h=arguments[l],m=h.uuid,g=t[m];if(g!==void 0)if(delete t[m],g<s){const v=--s,x=e[v],b=--a,M=e[b];t[x.uuid]=g,e[g]=x,t[M.uuid]=v,e[v]=M,e.pop();for(let A=0,S=r;A!==S;++A){const C=i[A],R=C[v],B=C[b];C[g]=R,C[v]=B,C.pop()}}else{const v=--a,x=e[v];v>0&&(t[x.uuid]=g),e[g]=x,e.pop();for(let b=0,M=r;b!==M;++b){const A=i[b];A[g]=A[v],A.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,l=this._parsedPaths,u=this._objects,h=u.length,m=this.nCachedObjects_,g=new Array(h);r=s.length,i[e]=r,a.push(e),l.push(t),s.push(g);for(let v=m,x=u.length;v!==x;++v){const b=u[v];g[v]=new xn(b,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,l=a.length-1,u=a[l],h=e[l];t[h]=i,a[i]=u,a.pop(),s[i]=s[l],s.pop(),r[i]=r[l],r.pop()}}}class SO{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,a=s.length,l=new Array(a),u={endingStart:Jh,endingEnd:Jh};for(let h=0;h!==a;++h){const m=s[h].createInterpolant(null);l[h]=m,m.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=S6,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,s=e._clip.duration,a=s/r,l=r/s;e.warp(1,a,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,h=l.sampleValues;return u[0]=s,u[1]=s+i,h[0]=e/a,h[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const u=(e-s)*i;u<0||i===0?t=0:(this._startTime=null,t=i*u)}t*=this._updateTimeScale(e);const a=this._updateTime(t),l=this._updateWeight(e);if(l>0){const u=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case qM:for(let m=0,g=u.length;m!==g;++m)u[m].evaluate(a),h[m].accumulateAdditive(l);break;case Ob:default:for(let m=0,g=u.length;m!==g;++m)u[m].evaluate(a),h[m].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===A6;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===YM){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,s+=Math.abs(l);const u=this.repetitions-s;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const h=e<0;this._setEndings(h,!h,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=$h,r.endingEnd=$h):(e?r.endingStart=this.zeroSlopeAtStart?$h:Jh:r.endingStart=bv,t?r.endingEnd=this.zeroSlopeAtEnd?$h:Jh:r.endingEnd=bv)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,u[0]=t,l[1]=s+e,u[1]=i,this}}const tF=new Float32Array(1);class AO extends La{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,l=e._interpolants,u=i.uuid,h=this._bindingsByRootAndName;let m=h[u];m===void 0&&(m={},h[u]=m);for(let g=0;g!==s;++g){const v=r[g],x=v.name;let b=m[x];if(b!==void 0)++b.referenceCount,a[g]=b;else{if(b=a[g],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,u,x));continue}const M=t&&t._propertyBindings[g].binding.parsedPath;b=new bO(xn.create(i,x,M),v.ValueTypeName,v.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,u,x),a[g]=b}l[g].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const l=a.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,l=a[s],u=l.knownActions,h=u[u.length-1],m=e._byClipCacheIndex;h._byClipCacheIndex=m,u[m]=h,u.pop(),e._byClipCacheIndex=null;const g=l.actionByRoot,v=(e._localRoot||this._root).uuid;delete g[v],u.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,l=a[r],u=t[t.length-1],h=e._cacheIndex;u._cacheIndex=h,t[h]=u,t.pop(),delete l[s],Object.keys(l).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new gT(new Float32Array(2),new Float32Array(2),1,tF),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?x0.findByName(r,e):e;const l=a!==null?a.uuid:e,u=this._actionsByClip[l];let h=null;if(i===void 0&&(a!==null?i=a.blendMode:i=Ob),u!==void 0){const g=u.actionByRoot[s];if(g!==void 0&&g.blendMode===i)return g;h=u.knownActions[0],a===null&&(a=h._clip)}if(a===null)return null;const m=new SO(this,a,t,i);return this._bindAction(m,h),this._addInactiveAction(m,l,s),m}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?x0.findByName(i,e):e,a=s?s.uuid:e,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let h=0;h!==i;++h)t[h]._update(r,e,s,a);const l=this._bindings,u=this._nActiveBindings;for(let h=0;h!==u;++h)l[h].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let l=0,u=a.length;l!==u;++l){const h=a[l];this._deactivateAction(h);const m=h._cacheIndex,g=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,g._cacheIndex=m,t[m]=g,t.pop(),this._removeInactiveBindingsForAction(h)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const l=i[a].actionByRoot,u=l[t];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const l=s[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class nF extends Pb{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new Ub(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class iF extends Pb{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=i,this.texture=new Wv(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Wt{constructor(e){this.value=e}clone(){return new Wt(this.value.clone===void 0?this.value:this.value.clone())}}let rF=0;class sF extends La{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:rF++}),this.name="",this.usage=Av,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class aF extends qv{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class oF{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Pw=new ft;class EO{constructor(e,t,i=0,r=1/0){this.ray=new E0(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Ep,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Pw.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Pw),this}intersectObject(e,t=!0,i=[]){return RE(e,this,i,t),i.sort(Uw),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)RE(e[r],this,i,t);return i.sort(Uw),i}}function Uw(n,e){return n.distance-e.distance}function RE(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let a=0,l=s.length;a<l;a++)RE(s[a],e,t,!0)}}class Y_{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Qt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Qt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class lF{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class MT{constructor(e,t,i,r){MT.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const Lw=new Pe;class cF{constructor(e=new Pe(1/0,1/0),t=new Pe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Lw.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Lw).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Nw=new q,Ax=new q;class uF{constructor(e=new q,t=new q){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Nw.subVectors(e,this.start),Ax.subVectors(this.end,this.start);const i=Ax.dot(Ax);let s=Ax.dot(Nw)/i;return t&&(s=Qt(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Iw=new q;class fF extends hn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Gt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,u=32;a<u;a++,l++){const h=a/u*Math.PI*2,m=l/u*Math.PI*2;r.push(Math.cos(h),Math.sin(h),1,Math.cos(m),Math.sin(m),1)}i.setAttribute("position",new xt(r,3));const s=new Qr({fog:!1,toneMapped:!1});this.cone=new ul(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Iw.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Iw),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const rf=new q,Ex=new ft,zA=new ft;class hF extends ul{constructor(e){const t=MO(e),i=new Gt,r=[],s=[],a=new Ze(0,0,1),l=new Ze(0,1,0);for(let h=0;h<t.length;h++){const m=t[h];m.parent&&m.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(l.r,l.g,l.b))}i.setAttribute("position",new xt(r,3)),i.setAttribute("color",new xt(s,3));const u=new Qr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");zA.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(Ex.multiplyMatrices(zA,l.matrixWorld),rf.setFromMatrixPosition(Ex),r.setXYZ(a,rf.x,rf.y,rf.z),Ex.multiplyMatrices(zA,l.parent.matrixWorld),rf.setFromMatrixPosition(Ex),r.setXYZ(a+1,rf.x,rf.y,rf.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function MO(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...MO(n.children[t]));return e}class dF extends Ai{constructor(e,t,i){const r=new Qv(t,4,2),s=new Pa({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const pF=new q,Fw=new Ze,zw=new Ze;class mF extends hn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Zv(t);r.rotateY(Math.PI*.5),this.material=new Pa({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new mn(a,3)),this.add(new Ai(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Fw.copy(this.light.color),zw.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?Fw:zw;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(pF.setFromMatrixPosition(this.light.matrixWorld).negate())}}class gF extends ul{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ze(i),r=new Ze(r);const s=t/2,a=e/t,l=e/2,u=[],h=[];for(let v=0,x=0,b=-l;v<=t;v++,b+=a){u.push(-l,0,b,l,0,b),u.push(b,0,-l,b,0,l);const M=v===s?i:r;M.toArray(h,x),x+=3,M.toArray(h,x),x+=3,M.toArray(h,x),x+=3,M.toArray(h,x),x+=3}const m=new Gt;m.setAttribute("position",new xt(u,3)),m.setAttribute("color",new xt(h,3));const g=new Qr({vertexColors:!0,toneMapped:!1});super(m,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class vF extends ul{constructor(e=10,t=16,i=8,r=64,s=4473924,a=8947848){s=new Ze(s),a=new Ze(a);const l=[],u=[];if(t>1)for(let g=0;g<t;g++){const v=g/t*(Math.PI*2),x=Math.sin(v)*e,b=Math.cos(v)*e;l.push(0,0,0),l.push(x,0,b);const M=g&1?s:a;u.push(M.r,M.g,M.b),u.push(M.r,M.g,M.b)}for(let g=0;g<i;g++){const v=g&1?s:a,x=e-e/i*g;for(let b=0;b<r;b++){let M=b/r*(Math.PI*2),A=Math.sin(M)*x,S=Math.cos(M)*x;l.push(A,0,S),u.push(v.r,v.g,v.b),M=(b+1)/r*(Math.PI*2),A=Math.sin(M)*x,S=Math.cos(M)*x,l.push(A,0,S),u.push(v.r,v.g,v.b)}}const h=new Gt;h.setAttribute("position",new xt(l,3)),h.setAttribute("color",new xt(u,3));const m=new Qr({vertexColors:!0,toneMapped:!1});super(h,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Hw=new q,Mx=new q,Gw=new q;class yF extends hn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Gt;r.setAttribute("position",new xt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Qr({fog:!1,toneMapped:!1});this.lightPlane=new sc(r,s),this.add(this.lightPlane),r=new Gt,r.setAttribute("position",new xt([0,0,0,0,0,1],3)),this.targetLine=new sc(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Hw.setFromMatrixPosition(this.light.matrixWorld),Mx.setFromMatrixPosition(this.light.target.matrixWorld),Gw.subVectors(Mx,Hw),this.lightPlane.lookAt(Mx),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Mx),this.targetLine.scale.z=Gw.length()}}const Tx=new q,ji=new Np;class xF extends ul{constructor(e){const t=new Gt,i=new Qr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(b,M){u(b),u(M)}function u(b){r.push(0,0,0),s.push(0,0,0),a[b]===void 0&&(a[b]=[]),a[b].push(r.length/3-1)}t.setAttribute("position",new xt(r,3)),t.setAttribute("color",new xt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const h=new Ze(16755200),m=new Ze(16711680),g=new Ze(43775),v=new Ze(16777215),x=new Ze(3355443);this.setColors(h,m,g,v,x)}setColors(e,t,i,r,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;ji.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===go?-1:0;Zi("c",t,e,ji,0,0,s),Zi("t",t,e,ji,0,0,1),Zi("n1",t,e,ji,-1,-1,s),Zi("n2",t,e,ji,i,-1,s),Zi("n3",t,e,ji,-1,r,s),Zi("n4",t,e,ji,i,r,s),Zi("f1",t,e,ji,-1,-1,1),Zi("f2",t,e,ji,i,-1,1),Zi("f3",t,e,ji,-1,r,1),Zi("f4",t,e,ji,i,r,1),Zi("u1",t,e,ji,i*.7,r*1.1,s),Zi("u2",t,e,ji,-1*.7,r*1.1,s),Zi("u3",t,e,ji,0,r*2,s),Zi("cf1",t,e,ji,-1,0,1),Zi("cf2",t,e,ji,i,0,1),Zi("cf3",t,e,ji,0,-1,1),Zi("cf4",t,e,ji,0,r,1),Zi("cn1",t,e,ji,-1,0,s),Zi("cn2",t,e,ji,i,0,s),Zi("cn3",t,e,ji,0,-1,s),Zi("cn4",t,e,ji,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Zi(n,e,t,i,r,s,a){Tx.set(r,s,a).unproject(i);const l=e[n];if(l!==void 0){const u=t.getAttribute("position");for(let h=0,m=l.length;h<m;h++)u.setXYZ(l[h],Tx.x,Tx.y,Tx.z)}}const Cx=new Zr;class _F extends ul{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Gt;s.setIndex(new mn(i,1)),s.setAttribute("position",new mn(r,3)),super(s,new Qr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Cx.setFromObject(this.object),Cx.isEmpty())return;const e=Cx.min,t=Cx.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class bF extends ul{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Gt;s.setIndex(new mn(i,1)),s.setAttribute("position",new xt(r,3)),super(s,new Qr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class SF extends sc{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Gt;a.setAttribute("position",new xt(s,3)),a.computeBoundingSphere(),super(a,new Qr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new Gt;u.setAttribute("position",new xt(l,3)),u.computeBoundingSphere(),this.add(new Ai(u,new Pa({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Vw=new q;let wx,HA;class AF extends hn{constructor(e=new q(0,0,1),t=new q(0,0,0),i=1,r=16776960,s=i*.2,a=s*.2){super(),this.type="ArrowHelper",wx===void 0&&(wx=new Gt,wx.setAttribute("position",new xt([0,0,0,0,1,0],3)),HA=new Jv(.5,1,5,1),HA.translate(0,-.5,0)),this.position.copy(t),this.line=new sc(wx,new Qr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ai(HA,new Pa({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Vw.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Vw,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class EF extends ul{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Gt;r.setAttribute("position",new xt(t,3)),r.setAttribute("color",new xt(i,3));const s=new Qr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Ze,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class TO{constructor(){this.type="ShapePath",this.color=new Ze,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new W_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,a){return this.currentPath.bezierCurveTo(e,t,i,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(S){const C=[];for(let R=0,B=S.length;R<B;R++){const N=S[R],U=new s0;U.curves=N.curves,C.push(U)}return C}function i(S,C){const R=C.length;let B=!1;for(let N=R-1,U=0;U<R;N=U++){let I=C[N],z=C[U],L=z.x-I.x,O=z.y-I.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(I=C[U],L=-L,z=C[N],O=-O),S.y<I.y||S.y>z.y)continue;if(S.y===I.y){if(S.x===I.x)return!0}else{const G=O*(S.x-I.x)-L*(S.y-I.y);if(G===0)return!0;if(G<0)continue;B=!B}}else{if(S.y!==I.y)continue;if(z.x<=S.x&&S.x<=I.x||I.x<=S.x&&S.x<=z.x)return!0}}return B}const r=sl.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,l,u;const h=[];if(s.length===1)return l=s[0],u=new s0,u.curves=l.curves,h.push(u),h;let m=!r(s[0].getPoints());m=e?!m:m;const g=[],v=[];let x=[],b=0,M;v[b]=void 0,x[b]=[];for(let S=0,C=s.length;S<C;S++)l=s[S],M=l.getPoints(),a=r(M),a=e?!a:a,a?(!m&&v[b]&&b++,v[b]={s:new s0,p:M},v[b].s.curves=l.curves,m&&b++,x[b]=[]):x[b].push({h:l,p:M[0]});if(!v[0])return t(s);if(v.length>1){let S=!1,C=0;for(let R=0,B=v.length;R<B;R++)g[R]=[];for(let R=0,B=v.length;R<B;R++){const N=x[R];for(let U=0;U<N.length;U++){const I=N[U];let z=!0;for(let L=0;L<v.length;L++)i(I.p,v[L].p)&&(R!==L&&C++,z?(z=!1,g[L].push(I)):S=!0);z&&g[R].push(I)}}C>0&&S===!1&&(x=g)}let A;for(let S=0,C=v.length;S<C;S++){u=v[S].s,h.push(u),A=x[S];for(let R=0,B=A.length;R<B;R++)u.holes.push(A[R].h)}return h}}class MF extends La{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function TF(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function CF(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function wF(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function DE(n,e,t,i){const r=RF(i);switch(t){case kM:return n*e;case Rb:return n*e/r.components*r.byteLength;case Xv:return n*e/r.components*r.byteLength;case XM:return n*e*2/r.components*r.byteLength;case Db:return n*e*2/r.components*r.byteLength;case jM:return n*e*3/r.components*r.byteLength;case gs:return n*e*4/r.components*r.byteLength;case Bb:return n*e*4/r.components*r.byteLength;case $g:case Zg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Qg:case ev:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case v_:case x_:return Math.max(n,16)*Math.max(e,8)/4;case g_:case y_:return Math.max(n,8)*Math.max(e,8)/2;case __:case b_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case S_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case A_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case E_:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case M_:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case T_:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case C_:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case w_:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case R_:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case D_:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case B_:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case O_:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case P_:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case U_:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case L_:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case N_:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case tv:case I_:case F_:return Math.ceil(n/4)*Math.ceil(e/4)*16;case WM:case z_:return Math.ceil(n/4)*Math.ceil(e/4)*8;case H_:case G_:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function RF(n){switch(n){case Mr:case HM:return{byteLength:1,components:1};case d0:case GM:case tu:return{byteLength:2,components:1};case Cb:case wb:return{byteLength:2,components:4};case ic:case Tb:case ks:return{byteLength:4,components:1};case VM:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class DF{static contain(e,t){return TF(e,t)}static cover(e,t){return CF(e,t)}static fill(e){return wF(e)}static getByteLength(e,t,i,r){return DE(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:wf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=wf);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function CO(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function BF(n){const e=new WeakMap;function t(l,u){const h=l.array,m=l.usage,g=h.byteLength,v=n.createBuffer();n.bindBuffer(u,v),n.bufferData(u,h,m),l.onUploadCallback();let x;if(h instanceof Float32Array)x=n.FLOAT;else if(h instanceof Uint16Array)l.isFloat16BufferAttribute?x=n.HALF_FLOAT:x=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)x=n.SHORT;else if(h instanceof Uint32Array)x=n.UNSIGNED_INT;else if(h instanceof Int32Array)x=n.INT;else if(h instanceof Int8Array)x=n.BYTE;else if(h instanceof Uint8Array)x=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)x=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:v,type:x,bytesPerElement:h.BYTES_PER_ELEMENT,version:l.version,size:g}}function i(l,u,h){const m=u.array,g=u.updateRanges;if(n.bindBuffer(h,l),g.length===0)n.bufferSubData(h,0,m);else{g.sort((x,b)=>x.start-b.start);let v=0;for(let x=1;x<g.length;x++){const b=g[v],M=g[x];M.start<=b.start+b.count+1?b.count=Math.max(b.count,M.start+M.count-b.start):(++v,g[v]=M)}g.length=v+1;for(let x=0,b=g.length;x<b;x++){const M=g[x];n.bufferSubData(h,M.start*m.BYTES_PER_ELEMENT,m,M.start,M.count)}u.clearUpdateRanges()}u.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=e.get(l);u&&(n.deleteBuffer(u.buffer),e.delete(l))}function a(l,u){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const m=e.get(l);(!m||m.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const h=e.get(l);if(h===void 0)e.set(l,t(l,u));else if(h.version<l.version){if(h.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(h.buffer,l,u),h.version=l.version}}return{get:r,remove:s,update:a}}var OF=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,PF=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,UF=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,LF=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,NF=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,IF=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,FF=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,zF=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,HF=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,GF=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,VF=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,kF=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,jF=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,XF=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,WF=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,YF=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,qF=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,KF=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,JF=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,$F=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ZF=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,QF=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,ez=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,tz=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,nz=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,iz=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,rz=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,sz=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,az=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,oz=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,lz="gl_FragColor = linearToOutputTexel( gl_FragColor );",cz=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,uz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,fz=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,hz=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,dz=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,pz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,mz=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,gz=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,vz=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,yz=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,xz=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,_z=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,bz=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Sz=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Az=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Ez=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Mz=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Tz=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Cz=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,wz=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Rz=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Dz=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Bz=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Oz=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Pz=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Uz=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Lz=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Nz=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Iz=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Fz=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,zz=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Hz=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Gz=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Vz=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,kz=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,jz=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Xz=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Wz=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Yz=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,qz=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Kz=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Jz=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,$z=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Zz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Qz=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,eH=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,tH=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,nH=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,iH=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,rH=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,sH=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,aH=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,oH=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,lH=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,cH=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,uH=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,fH=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,hH=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,dH=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,pH=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,mH=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,gH=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,vH=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,yH=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,xH=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,_H=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,bH=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,SH=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,AH=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,EH=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,MH=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,TH=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,CH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,wH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,RH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,DH=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const BH=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,OH=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,PH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,UH=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,LH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,NH=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,IH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,FH=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,zH=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,HH=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,GH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,VH=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kH=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jH=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,XH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,WH=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YH=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qH=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KH=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,JH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$H=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ZH=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,QH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eG=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tG=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,nG=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iG=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rG=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sG=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,aG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,oG=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lG=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,cG=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,uG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,cn={alphahash_fragment:OF,alphahash_pars_fragment:PF,alphamap_fragment:UF,alphamap_pars_fragment:LF,alphatest_fragment:NF,alphatest_pars_fragment:IF,aomap_fragment:FF,aomap_pars_fragment:zF,batching_pars_vertex:HF,batching_vertex:GF,begin_vertex:VF,beginnormal_vertex:kF,bsdfs:jF,iridescence_fragment:XF,bumpmap_pars_fragment:WF,clipping_planes_fragment:YF,clipping_planes_pars_fragment:qF,clipping_planes_pars_vertex:KF,clipping_planes_vertex:JF,color_fragment:$F,color_pars_fragment:ZF,color_pars_vertex:QF,color_vertex:ez,common:tz,cube_uv_reflection_fragment:nz,defaultnormal_vertex:iz,displacementmap_pars_vertex:rz,displacementmap_vertex:sz,emissivemap_fragment:az,emissivemap_pars_fragment:oz,colorspace_fragment:lz,colorspace_pars_fragment:cz,envmap_fragment:uz,envmap_common_pars_fragment:fz,envmap_pars_fragment:hz,envmap_pars_vertex:dz,envmap_physical_pars_fragment:Ez,envmap_vertex:pz,fog_vertex:mz,fog_pars_vertex:gz,fog_fragment:vz,fog_pars_fragment:yz,gradientmap_pars_fragment:xz,lightmap_pars_fragment:_z,lights_lambert_fragment:bz,lights_lambert_pars_fragment:Sz,lights_pars_begin:Az,lights_toon_fragment:Mz,lights_toon_pars_fragment:Tz,lights_phong_fragment:Cz,lights_phong_pars_fragment:wz,lights_physical_fragment:Rz,lights_physical_pars_fragment:Dz,lights_fragment_begin:Bz,lights_fragment_maps:Oz,lights_fragment_end:Pz,logdepthbuf_fragment:Uz,logdepthbuf_pars_fragment:Lz,logdepthbuf_pars_vertex:Nz,logdepthbuf_vertex:Iz,map_fragment:Fz,map_pars_fragment:zz,map_particle_fragment:Hz,map_particle_pars_fragment:Gz,metalnessmap_fragment:Vz,metalnessmap_pars_fragment:kz,morphinstance_vertex:jz,morphcolor_vertex:Xz,morphnormal_vertex:Wz,morphtarget_pars_vertex:Yz,morphtarget_vertex:qz,normal_fragment_begin:Kz,normal_fragment_maps:Jz,normal_pars_fragment:$z,normal_pars_vertex:Zz,normal_vertex:Qz,normalmap_pars_fragment:eH,clearcoat_normal_fragment_begin:tH,clearcoat_normal_fragment_maps:nH,clearcoat_pars_fragment:iH,iridescence_pars_fragment:rH,opaque_fragment:sH,packing:aH,premultiplied_alpha_fragment:oH,project_vertex:lH,dithering_fragment:cH,dithering_pars_fragment:uH,roughnessmap_fragment:fH,roughnessmap_pars_fragment:hH,shadowmap_pars_fragment:dH,shadowmap_pars_vertex:pH,shadowmap_vertex:mH,shadowmask_pars_fragment:gH,skinbase_vertex:vH,skinning_pars_vertex:yH,skinning_vertex:xH,skinnormal_vertex:_H,specularmap_fragment:bH,specularmap_pars_fragment:SH,tonemapping_fragment:AH,tonemapping_pars_fragment:EH,transmission_fragment:MH,transmission_pars_fragment:TH,uv_pars_fragment:CH,uv_pars_vertex:wH,uv_vertex:RH,worldpos_vertex:DH,background_vert:BH,background_frag:OH,backgroundCube_vert:PH,backgroundCube_frag:UH,cube_vert:LH,cube_frag:NH,depth_vert:IH,depth_frag:FH,distanceRGBA_vert:zH,distanceRGBA_frag:HH,equirect_vert:GH,equirect_frag:VH,linedashed_vert:kH,linedashed_frag:jH,meshbasic_vert:XH,meshbasic_frag:WH,meshlambert_vert:YH,meshlambert_frag:qH,meshmatcap_vert:KH,meshmatcap_frag:JH,meshnormal_vert:$H,meshnormal_frag:ZH,meshphong_vert:QH,meshphong_frag:eG,meshphysical_vert:tG,meshphysical_frag:nG,meshtoon_vert:iG,meshtoon_frag:rG,points_vert:sG,points_frag:aG,shadow_vert:oG,shadow_frag:lG,sprite_vert:cG,sprite_frag:uG},pt={common:{diffuse:{value:new Ze(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Zt},alphaMap:{value:null},alphaMapTransform:{value:new Zt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Zt}},envmap:{envMap:{value:null},envMapRotation:{value:new Zt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Zt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Zt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Zt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Zt},normalScale:{value:new Pe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Zt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Zt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Zt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Zt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ze(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ze(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Zt},alphaTest:{value:0},uvTransform:{value:new Zt}},sprite:{diffuse:{value:new Ze(16777215)},opacity:{value:1},center:{value:new Pe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Zt},alphaMap:{value:null},alphaMapTransform:{value:new Zt},alphaTest:{value:0}}},nl={basic:{uniforms:Is([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.fog]),vertexShader:cn.meshbasic_vert,fragmentShader:cn.meshbasic_frag},lambert:{uniforms:Is([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,pt.lights,{emissive:{value:new Ze(0)}}]),vertexShader:cn.meshlambert_vert,fragmentShader:cn.meshlambert_frag},phong:{uniforms:Is([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,pt.lights,{emissive:{value:new Ze(0)},specular:{value:new Ze(1118481)},shininess:{value:30}}]),vertexShader:cn.meshphong_vert,fragmentShader:cn.meshphong_frag},standard:{uniforms:Is([pt.common,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.roughnessmap,pt.metalnessmap,pt.fog,pt.lights,{emissive:{value:new Ze(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:cn.meshphysical_vert,fragmentShader:cn.meshphysical_frag},toon:{uniforms:Is([pt.common,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.gradientmap,pt.fog,pt.lights,{emissive:{value:new Ze(0)}}]),vertexShader:cn.meshtoon_vert,fragmentShader:cn.meshtoon_frag},matcap:{uniforms:Is([pt.common,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,{matcap:{value:null}}]),vertexShader:cn.meshmatcap_vert,fragmentShader:cn.meshmatcap_frag},points:{uniforms:Is([pt.points,pt.fog]),vertexShader:cn.points_vert,fragmentShader:cn.points_frag},dashed:{uniforms:Is([pt.common,pt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:cn.linedashed_vert,fragmentShader:cn.linedashed_frag},depth:{uniforms:Is([pt.common,pt.displacementmap]),vertexShader:cn.depth_vert,fragmentShader:cn.depth_frag},normal:{uniforms:Is([pt.common,pt.bumpmap,pt.normalmap,pt.displacementmap,{opacity:{value:1}}]),vertexShader:cn.meshnormal_vert,fragmentShader:cn.meshnormal_frag},sprite:{uniforms:Is([pt.sprite,pt.fog]),vertexShader:cn.sprite_vert,fragmentShader:cn.sprite_frag},background:{uniforms:{uvTransform:{value:new Zt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:cn.background_vert,fragmentShader:cn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Zt}},vertexShader:cn.backgroundCube_vert,fragmentShader:cn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:cn.cube_vert,fragmentShader:cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:cn.equirect_vert,fragmentShader:cn.equirect_frag},distanceRGBA:{uniforms:Is([pt.common,pt.displacementmap,{referencePosition:{value:new q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:cn.distanceRGBA_vert,fragmentShader:cn.distanceRGBA_frag},shadow:{uniforms:Is([pt.lights,pt.fog,{color:{value:new Ze(0)},opacity:{value:1}}]),vertexShader:cn.shadow_vert,fragmentShader:cn.shadow_frag}};nl.physical={uniforms:Is([nl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Zt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Zt},clearcoatNormalScale:{value:new Pe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Zt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Zt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Zt},sheen:{value:0},sheenColor:{value:new Ze(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Zt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Zt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Zt},transmissionSamplerSize:{value:new Pe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Zt},attenuationDistance:{value:0},attenuationColor:{value:new Ze(0)},specularColor:{value:new Ze(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Zt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Zt},anisotropyVector:{value:new Pe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Zt}}]),vertexShader:cn.meshphysical_vert,fragmentShader:cn.meshphysical_frag};const Rx={r:0,b:0,g:0},Ih=new fr,fG=new ft;function hG(n,e,t,i,r,s,a){const l=new Ze(0);let u=s===!0?0:1,h,m,g=null,v=0,x=null;function b(R){let B=R.isScene===!0?R.background:null;return B&&B.isTexture&&(B=(R.backgroundBlurriness>0?t:e).get(B)),B}function M(R){let B=!1;const N=b(R);N===null?S(l,u):N&&N.isColor&&(S(N,1),B=!0);const U=n.xr.getEnvironmentBlendMode();U==="additive"?i.buffers.color.setClear(0,0,0,1,a):U==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||B)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function A(R,B){const N=b(B);N&&(N.isCubeTexture||N.mapping===Lp)?(m===void 0&&(m=new Ai(new M0(1,1,1),new tr({name:"BackgroundCubeMaterial",uniforms:Mp(nl.backgroundCube.uniforms),vertexShader:nl.backgroundCube.vertexShader,fragmentShader:nl.backgroundCube.fragmentShader,side:ur,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(U,I,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(m)),Ih.copy(B.backgroundRotation),Ih.x*=-1,Ih.y*=-1,Ih.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(Ih.y*=-1,Ih.z*=-1),m.material.uniforms.envMap.value=N,m.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=B.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(fG.makeRotationFromEuler(Ih)),m.material.toneMapped=Rn.getTransfer(N.colorSpace)!==Kn,(g!==N||v!==N.version||x!==n.toneMapping)&&(m.material.needsUpdate=!0,g=N,v=N.version,x=n.toneMapping),m.layers.enableAll(),R.unshift(m,m.geometry,m.material,0,0,null)):N&&N.isTexture&&(h===void 0&&(h=new Ai(new Hp(2,2),new tr({name:"BackgroundMaterial",uniforms:Mp(nl.background.uniforms),vertexShader:nl.background.vertexShader,fragmentShader:nl.background.fragmentShader,side:ll,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=N,h.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,h.material.toneMapped=Rn.getTransfer(N.colorSpace)!==Kn,N.matrixAutoUpdate===!0&&N.updateMatrix(),h.material.uniforms.uvTransform.value.copy(N.matrix),(g!==N||v!==N.version||x!==n.toneMapping)&&(h.material.needsUpdate=!0,g=N,v=N.version,x=n.toneMapping),h.layers.enableAll(),R.unshift(h,h.geometry,h.material,0,0,null))}function S(R,B){R.getRGB(Rx,F6(n)),i.buffers.color.setClear(Rx.r,Rx.g,Rx.b,B,a)}function C(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return l},setClearColor:function(R,B=1){l.set(R),u=B,S(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(R){u=R,S(l,u)},render:M,addToRenderList:A,dispose:C}}function dG(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=v(null);let s=r,a=!1;function l(O,G,$,Q,ce){let fe=!1;const k=g(Q,$,G);s!==k&&(s=k,h(s.object)),fe=x(O,Q,$,ce),fe&&b(O,Q,$,ce),ce!==null&&e.update(ce,n.ELEMENT_ARRAY_BUFFER),(fe||a)&&(a=!1,B(O,G,$,Q),ce!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ce).buffer))}function u(){return n.createVertexArray()}function h(O){return n.bindVertexArray(O)}function m(O){return n.deleteVertexArray(O)}function g(O,G,$){const Q=$.wireframe===!0;let ce=i[O.id];ce===void 0&&(ce={},i[O.id]=ce);let fe=ce[G.id];fe===void 0&&(fe={},ce[G.id]=fe);let k=fe[Q];return k===void 0&&(k=v(u()),fe[Q]=k),k}function v(O){const G=[],$=[],Q=[];for(let ce=0;ce<t;ce++)G[ce]=0,$[ce]=0,Q[ce]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:G,enabledAttributes:$,attributeDivisors:Q,object:O,attributes:{},index:null}}function x(O,G,$,Q){const ce=s.attributes,fe=G.attributes;let k=0;const K=$.getAttributes();for(const ee in K)if(K[ee].location>=0){const W=ce[ee];let ae=fe[ee];if(ae===void 0&&(ee==="instanceMatrix"&&O.instanceMatrix&&(ae=O.instanceMatrix),ee==="instanceColor"&&O.instanceColor&&(ae=O.instanceColor)),W===void 0||W.attribute!==ae||ae&&W.data!==ae.data)return!0;k++}return s.attributesNum!==k||s.index!==Q}function b(O,G,$,Q){const ce={},fe=G.attributes;let k=0;const K=$.getAttributes();for(const ee in K)if(K[ee].location>=0){let W=fe[ee];W===void 0&&(ee==="instanceMatrix"&&O.instanceMatrix&&(W=O.instanceMatrix),ee==="instanceColor"&&O.instanceColor&&(W=O.instanceColor));const ae={};ae.attribute=W,W&&W.data&&(ae.data=W.data),ce[ee]=ae,k++}s.attributes=ce,s.attributesNum=k,s.index=Q}function M(){const O=s.newAttributes;for(let G=0,$=O.length;G<$;G++)O[G]=0}function A(O){S(O,0)}function S(O,G){const $=s.newAttributes,Q=s.enabledAttributes,ce=s.attributeDivisors;$[O]=1,Q[O]===0&&(n.enableVertexAttribArray(O),Q[O]=1),ce[O]!==G&&(n.vertexAttribDivisor(O,G),ce[O]=G)}function C(){const O=s.newAttributes,G=s.enabledAttributes;for(let $=0,Q=G.length;$<Q;$++)G[$]!==O[$]&&(n.disableVertexAttribArray($),G[$]=0)}function R(O,G,$,Q,ce,fe,k){k===!0?n.vertexAttribIPointer(O,G,$,ce,fe):n.vertexAttribPointer(O,G,$,Q,ce,fe)}function B(O,G,$,Q){M();const ce=Q.attributes,fe=$.getAttributes(),k=G.defaultAttributeValues;for(const K in fe){const ee=fe[K];if(ee.location>=0){let me=ce[K];if(me===void 0&&(K==="instanceMatrix"&&O.instanceMatrix&&(me=O.instanceMatrix),K==="instanceColor"&&O.instanceColor&&(me=O.instanceColor)),me!==void 0){const W=me.normalized,ae=me.itemSize,Se=e.get(me);if(Se===void 0)continue;const Ae=Se.buffer,ie=Se.type,_e=Se.bytesPerElement,Ue=ie===n.INT||ie===n.UNSIGNED_INT||me.gpuType===Tb;if(me.isInterleavedBufferAttribute){const ke=me.data,Ye=ke.stride,gt=me.offset;if(ke.isInstancedInterleavedBuffer){for(let _t=0;_t<ee.locationSize;_t++)S(ee.location+_t,ke.meshPerAttribute);O.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=ke.meshPerAttribute*ke.count)}else for(let _t=0;_t<ee.locationSize;_t++)A(ee.location+_t);n.bindBuffer(n.ARRAY_BUFFER,Ae);for(let _t=0;_t<ee.locationSize;_t++)R(ee.location+_t,ae/ee.locationSize,ie,W,Ye*_e,(gt+ae/ee.locationSize*_t)*_e,Ue)}else{if(me.isInstancedBufferAttribute){for(let ke=0;ke<ee.locationSize;ke++)S(ee.location+ke,me.meshPerAttribute);O.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let ke=0;ke<ee.locationSize;ke++)A(ee.location+ke);n.bindBuffer(n.ARRAY_BUFFER,Ae);for(let ke=0;ke<ee.locationSize;ke++)R(ee.location+ke,ae/ee.locationSize,ie,W,ae*_e,ae/ee.locationSize*ke*_e,Ue)}}else if(k!==void 0){const W=k[K];if(W!==void 0)switch(W.length){case 2:n.vertexAttrib2fv(ee.location,W);break;case 3:n.vertexAttrib3fv(ee.location,W);break;case 4:n.vertexAttrib4fv(ee.location,W);break;default:n.vertexAttrib1fv(ee.location,W)}}}}C()}function N(){z();for(const O in i){const G=i[O];for(const $ in G){const Q=G[$];for(const ce in Q)m(Q[ce].object),delete Q[ce];delete G[$]}delete i[O]}}function U(O){if(i[O.id]===void 0)return;const G=i[O.id];for(const $ in G){const Q=G[$];for(const ce in Q)m(Q[ce].object),delete Q[ce];delete G[$]}delete i[O.id]}function I(O){for(const G in i){const $=i[G];if($[O.id]===void 0)continue;const Q=$[O.id];for(const ce in Q)m(Q[ce].object),delete Q[ce];delete $[O.id]}}function z(){L(),a=!0,s!==r&&(s=r,h(s.object))}function L(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:z,resetDefaultState:L,dispose:N,releaseStatesOfGeometry:U,releaseStatesOfProgram:I,initAttributes:M,enableAttribute:A,disableUnusedAttributes:C}}function pG(n,e,t){let i;function r(h){i=h}function s(h,m){n.drawArrays(i,h,m),t.update(m,i,1)}function a(h,m,g){g!==0&&(n.drawArraysInstanced(i,h,m,g),t.update(m,i,g))}function l(h,m,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,h,0,m,0,g);let x=0;for(let b=0;b<g;b++)x+=m[b];t.update(x,i,1)}function u(h,m,g,v){if(g===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let b=0;b<h.length;b++)a(h[b],m[b],v[b]);else{x.multiDrawArraysInstancedWEBGL(i,h,0,m,0,v,0,g);let b=0;for(let M=0;M<g;M++)b+=m[M]*v[M];t.update(b,i,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function mG(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const I=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(I){return!(I!==gs&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(I){const z=I===tu&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(I!==Mr&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&I!==ks&&!z)}function u(I){if(I==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=t.precision!==void 0?t.precision:"highp";const m=u(h);m!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",m,"instead."),h=m);const g=t.logarithmicDepthBuffer===!0,v=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),x=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),M=n.getParameter(n.MAX_TEXTURE_SIZE),A=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),S=n.getParameter(n.MAX_VERTEX_ATTRIBS),C=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),R=n.getParameter(n.MAX_VARYING_VECTORS),B=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),N=b>0,U=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:u,textureFormatReadable:a,textureTypeReadable:l,precision:h,logarithmicDepthBuffer:g,reverseDepthBuffer:v,maxTextures:x,maxVertexTextures:b,maxTextureSize:M,maxCubemapSize:A,maxAttributes:S,maxVertexUniforms:C,maxVaryings:R,maxFragmentUniforms:B,vertexTextures:N,maxSamples:U}}function gG(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new tl,l=new Zt,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const x=g.length!==0||v||i!==0||r;return r=v,i=g.length,x},this.beginShadows=function(){s=!0,m(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(g,v){t=m(g,v,0)},this.setState=function(g,v,x){const b=g.clippingPlanes,M=g.clipIntersection,A=g.clipShadows,S=n.get(g);if(!r||b===null||b.length===0||s&&!A)s?m(null):h();else{const C=s?0:i,R=C*4;let B=S.clippingState||null;u.value=B,B=m(b,v,R,x);for(let N=0;N!==R;++N)B[N]=t[N];S.clippingState=B,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=C}};function h(){u.value!==t&&(u.value=t,u.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function m(g,v,x,b){const M=g!==null?g.length:0;let A=null;if(M!==0){if(A=u.value,b!==!0||A===null){const S=x+M*4,C=v.matrixWorldInverse;l.getNormalMatrix(C),(A===null||A.length<S)&&(A=new Float32Array(S));for(let R=0,B=x;R!==M;++R,B+=4)a.copy(g[R]).applyMatrix4(C,l),a.normal.toArray(A,B),A[B+3]=a.constant}u.value=A,u.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,A}}function vG(n){let e=new WeakMap;function t(a,l){return l===xp?a.mapping=$c:l===_v&&(a.mapping=yf),a}function i(a){if(a&&a.isTexture){const l=a.mapping;if(l===xp||l===_v)if(e.has(a)){const u=e.get(a).texture;return t(u,a.mapping)}else{const u=a.image;if(u&&u.height>0){const h=new H6(u.height);return h.fromEquirectangularTexture(n,a),e.set(a,h),a.addEventListener("dispose",r),t(h.texture,a.mapping)}else return null}}return a}function r(a){const l=a.target;l.removeEventListener("dispose",r);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const op=4,kw=[.125,.215,.35,.446,.526,.582],qh=20,GA=new Zl,jw=new Ze;let VA=null,kA=0,jA=0,XA=!1;const Xh=(1+Math.sqrt(5))/2,Kd=1/Xh,Xw=[new q(-Xh,Kd,0),new q(Xh,Kd,0),new q(-Kd,0,Xh),new q(Kd,0,Xh),new q(0,Xh,-Kd),new q(0,Xh,Kd),new q(-1,1,-1),new q(1,1,-1),new q(-1,1,1),new q(1,1,1)],yG=new q;class BE{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,s={}){const{size:a=256,position:l=yG}=s;VA=this._renderer.getRenderTarget(),kA=this._renderer.getActiveCubeFace(),jA=this._renderer.getActiveMipmapLevel(),XA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,i,r,u,l),t>0&&this._blur(u,0,0,t),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=qw(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Yw(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(VA,kA,jA),this._renderer.xr.enabled=XA,e.scissorTest=!1,Dx(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===$c||e.mapping===yf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),VA=this._renderer.getRenderTarget(),kA=this._renderer.getActiveCubeFace(),jA=this._renderer.getActiveMipmapLevel(),XA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Jn,minFilter:Jn,generateMipmaps:!1,type:tu,format:gs,colorSpace:rc,depthBuffer:!1},r=Ww(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Ww(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=xG(s)),this._blurMaterial=_G(s,e,t)}return r}_compileMaterial(e){const t=new Ai(this._lodPlanes[0],e);this._renderer.compile(t,GA)}_sceneToCubeUV(e,t,i,r,s){const u=new pi(90,1,t,i),h=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],g=this._renderer,v=g.autoClear,x=g.toneMapping;g.getClearColor(jw),g.toneMapping=al,g.autoClear=!1;const b=new Pa({name:"PMREM.Background",side:ur,depthWrite:!1,depthTest:!1}),M=new Ai(new M0,b);let A=!1;const S=e.background;S?S.isColor&&(b.color.copy(S),e.background=null,A=!0):(b.color.copy(jw),A=!0);for(let C=0;C<6;C++){const R=C%3;R===0?(u.up.set(0,h[C],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x+m[C],s.y,s.z)):R===1?(u.up.set(0,0,h[C]),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y+m[C],s.z)):(u.up.set(0,h[C],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y,s.z+m[C]));const B=this._cubeSize;Dx(r,R*B,C>2?B:0,B,B),g.setRenderTarget(r),A&&g.render(M,u),g.render(e,u)}M.geometry.dispose(),M.material.dispose(),g.toneMapping=x,g.autoClear=v,e.background=S}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===$c||e.mapping===yf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=qw()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Yw());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Ai(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const u=this._cubeSize;Dx(t,0,0,3*u,2*u),i.setRenderTarget(t),i.render(a,GA)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=Xw[(r-s-1)%Xw.length];this._blur(e,s-1,s,a,l)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,l){const u=this._renderer,h=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,g=new Ai(this._lodPlanes[r],h),v=h.uniforms,x=this._sizeLods[i]-1,b=isFinite(s)?Math.PI/(2*x):2*Math.PI/(2*qh-1),M=s/b,A=isFinite(s)?1+Math.floor(m*M):qh;A>qh&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${qh}`);const S=[];let C=0;for(let I=0;I<qh;++I){const z=I/M,L=Math.exp(-z*z/2);S.push(L),I===0?C+=L:I<A&&(C+=2*L)}for(let I=0;I<S.length;I++)S[I]=S[I]/C;v.envMap.value=e.texture,v.samples.value=A,v.weights.value=S,v.latitudinal.value=a==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:R}=this;v.dTheta.value=b,v.mipInt.value=R-i;const B=this._sizeLods[r],N=3*B*(r>R-op?r-R+op:0),U=4*(this._cubeSize-B);Dx(t,N,U,3*B,2*B),u.setRenderTarget(t),u.render(g,GA)}}function xG(n){const e=[],t=[],i=[];let r=n;const s=n-op+1+kw.length;for(let a=0;a<s;a++){const l=Math.pow(2,r);t.push(l);let u=1/l;a>n-op?u=kw[a-n+op-1]:a===0&&(u=0),i.push(u);const h=1/(l-2),m=-h,g=1+h,v=[m,m,g,m,g,g,m,m,g,g,m,g],x=6,b=6,M=3,A=2,S=1,C=new Float32Array(M*b*x),R=new Float32Array(A*b*x),B=new Float32Array(S*b*x);for(let U=0;U<x;U++){const I=U%3*2/3-1,z=U>2?0:-1,L=[I,z,0,I+2/3,z,0,I+2/3,z+1,0,I,z,0,I+2/3,z+1,0,I,z+1,0];C.set(L,M*b*U),R.set(v,A*b*U);const O=[U,U,U,U,U,U];B.set(O,S*b*U)}const N=new Gt;N.setAttribute("position",new mn(C,M)),N.setAttribute("uv",new mn(R,A)),N.setAttribute("faceIndex",new mn(B,S)),e.push(N),r>op&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function Ww(n,e,t){const i=new Ni(n,e,t);return i.texture.mapping=Lp,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Dx(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function _G(n,e,t){const i=new Float32Array(qh),r=new q(0,1,0);return new tr({name:"SphericalGaussianBlur",defines:{n:qh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:TT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:$r,depthTest:!1,depthWrite:!1})}function Yw(){return new tr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:TT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:$r,depthTest:!1,depthWrite:!1})}function qw(){return new tr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:TT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:$r,depthTest:!1,depthWrite:!1})}function TT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function bG(n){let e=new WeakMap,t=null;function i(l){if(l&&l.isTexture){const u=l.mapping,h=u===xp||u===_v,m=u===$c||u===yf;if(h||m){let g=e.get(l);const v=g!==void 0?g.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==v)return t===null&&(t=new BE(n)),g=h?t.fromEquirectangular(l,g):t.fromCubemap(l,g),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),g.texture;if(g!==void 0)return g.texture;{const x=l.image;return h&&x&&x.height>0||m&&x&&r(x)?(t===null&&(t=new BE(n)),g=h?t.fromEquirectangular(l):t.fromCubemap(l),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),l.addEventListener("dispose",s),g.texture):null}}}return l}function r(l){let u=0;const h=6;for(let m=0;m<h;m++)l[m]!==void 0&&u++;return u===h}function s(l){const u=l.target;u.removeEventListener("dispose",s);const h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function SG(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&Zx("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function AG(n,e,t,i){const r={},s=new WeakMap;function a(g){const v=g.target;v.index!==null&&e.remove(v.index);for(const b in v.attributes)e.remove(v.attributes[b]);v.removeEventListener("dispose",a),delete r[v.id];const x=s.get(v);x&&(e.remove(x),s.delete(v)),i.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function l(g,v){return r[v.id]===!0||(v.addEventListener("dispose",a),r[v.id]=!0,t.memory.geometries++),v}function u(g){const v=g.attributes;for(const x in v)e.update(v[x],n.ARRAY_BUFFER)}function h(g){const v=[],x=g.index,b=g.attributes.position;let M=0;if(x!==null){const C=x.array;M=x.version;for(let R=0,B=C.length;R<B;R+=3){const N=C[R+0],U=C[R+1],I=C[R+2];v.push(N,U,U,I,I,N)}}else if(b!==void 0){const C=b.array;M=b.version;for(let R=0,B=C.length/3-1;R<B;R+=3){const N=R+0,U=R+1,I=R+2;v.push(N,U,U,I,I,N)}}else return;const A=new(U6(v)?ZM:Lb)(v,1);A.version=M;const S=s.get(g);S&&e.remove(S),s.set(g,A)}function m(g){const v=s.get(g);if(v){const x=g.index;x!==null&&v.version<x.version&&h(g)}else h(g);return s.get(g)}return{get:l,update:u,getWireframeAttribute:m}}function EG(n,e,t){let i;function r(v){i=v}let s,a;function l(v){s=v.type,a=v.bytesPerElement}function u(v,x){n.drawElements(i,x,s,v*a),t.update(x,i,1)}function h(v,x,b){b!==0&&(n.drawElementsInstanced(i,x,s,v*a,b),t.update(x,i,b))}function m(v,x,b){if(b===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,x,0,s,v,0,b);let A=0;for(let S=0;S<b;S++)A+=x[S];t.update(A,i,1)}function g(v,x,b,M){if(b===0)return;const A=e.get("WEBGL_multi_draw");if(A===null)for(let S=0;S<v.length;S++)h(v[S]/a,x[S],M[S]);else{A.multiDrawElementsInstancedWEBGL(i,x,0,s,v,0,M,0,b);let S=0;for(let C=0;C<b;C++)S+=x[C]*M[C];t.update(S,i,1)}}this.setMode=r,this.setIndex=l,this.render=u,this.renderInstances=h,this.renderMultiDraw=m,this.renderMultiDrawInstances=g}function MG(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,l){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=l*(s/3);break;case n.LINES:t.lines+=l*(s/2);break;case n.LINE_STRIP:t.lines+=l*(s-1);break;case n.LINE_LOOP:t.lines+=l*s;break;case n.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function TG(n,e,t){const i=new WeakMap,r=new Kt;function s(a,l,u){const h=a.morphTargetInfluences,m=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,g=m!==void 0?m.length:0;let v=i.get(l);if(v===void 0||v.count!==g){let O=function(){z.dispose(),i.delete(l),l.removeEventListener("dispose",O)};var x=O;v!==void 0&&v.texture.dispose();const b=l.morphAttributes.position!==void 0,M=l.morphAttributes.normal!==void 0,A=l.morphAttributes.color!==void 0,S=l.morphAttributes.position||[],C=l.morphAttributes.normal||[],R=l.morphAttributes.color||[];let B=0;b===!0&&(B=1),M===!0&&(B=2),A===!0&&(B=3);let N=l.attributes.position.count*B,U=1;N>e.maxTextureSize&&(U=Math.ceil(N/e.maxTextureSize),N=e.maxTextureSize);const I=new Float32Array(N*U*4*g),z=new Wv(I,N,U,g);z.type=ks,z.needsUpdate=!0;const L=B*4;for(let G=0;G<g;G++){const $=S[G],Q=C[G],ce=R[G],fe=N*U*4*G;for(let k=0;k<$.count;k++){const K=k*L;b===!0&&(r.fromBufferAttribute($,k),I[fe+K+0]=r.x,I[fe+K+1]=r.y,I[fe+K+2]=r.z,I[fe+K+3]=0),M===!0&&(r.fromBufferAttribute(Q,k),I[fe+K+4]=r.x,I[fe+K+5]=r.y,I[fe+K+6]=r.z,I[fe+K+7]=0),A===!0&&(r.fromBufferAttribute(ce,k),I[fe+K+8]=r.x,I[fe+K+9]=r.y,I[fe+K+10]=r.z,I[fe+K+11]=ce.itemSize===4?r.w:1)}}v={count:g,texture:z,size:new Pe(N,U)},i.set(l,v),l.addEventListener("dispose",O)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)u.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let b=0;for(let A=0;A<h.length;A++)b+=h[A];const M=l.morphTargetsRelative?1:1-b;u.getUniforms().setValue(n,"morphTargetBaseInfluence",M),u.getUniforms().setValue(n,"morphTargetInfluences",h)}u.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),u.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}return{update:s}}function CG(n,e,t,i){let r=new WeakMap;function s(u){const h=i.render.frame,m=u.geometry,g=e.get(u,m);if(r.get(g)!==h&&(e.update(g),r.set(g,h)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),r.get(u)!==h&&(t.update(u.instanceMatrix,n.ARRAY_BUFFER),u.instanceColor!==null&&t.update(u.instanceColor,n.ARRAY_BUFFER),r.set(u,h))),u.isSkinnedMesh){const v=u.skeleton;r.get(v)!==h&&(v.update(),r.set(v,h))}return g}function a(){r=new WeakMap}function l(u){const h=u.target;h.removeEventListener("dispose",l),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:s,dispose:a}}const wO=new kn,Kw=new zp(1,1),RO=new Wv,DO=new Ub,BO=new Yv,Jw=[],$w=[],Zw=new Float32Array(16),Qw=new Float32Array(9),eR=new Float32Array(4);function jp(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=Jw[r];if(s===void 0&&(s=new Float32Array(r),Jw[r]=s),e!==0){i.toArray(s,0);for(let a=1,l=0;a!==e;++a)l+=t,n[a].toArray(s,l)}return s}function Tr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Cr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function rS(n,e){let t=$w[e];t===void 0&&(t=new Int32Array(e),$w[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function wG(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function RG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Tr(t,e))return;n.uniform2fv(this.addr,e),Cr(t,e)}}function DG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Tr(t,e))return;n.uniform3fv(this.addr,e),Cr(t,e)}}function BG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Tr(t,e))return;n.uniform4fv(this.addr,e),Cr(t,e)}}function OG(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Tr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Cr(t,e)}else{if(Tr(t,i))return;eR.set(i),n.uniformMatrix2fv(this.addr,!1,eR),Cr(t,i)}}function PG(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Tr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Cr(t,e)}else{if(Tr(t,i))return;Qw.set(i),n.uniformMatrix3fv(this.addr,!1,Qw),Cr(t,i)}}function UG(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Tr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Cr(t,e)}else{if(Tr(t,i))return;Zw.set(i),n.uniformMatrix4fv(this.addr,!1,Zw),Cr(t,i)}}function LG(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function NG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Tr(t,e))return;n.uniform2iv(this.addr,e),Cr(t,e)}}function IG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Tr(t,e))return;n.uniform3iv(this.addr,e),Cr(t,e)}}function FG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Tr(t,e))return;n.uniform4iv(this.addr,e),Cr(t,e)}}function zG(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function HG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Tr(t,e))return;n.uniform2uiv(this.addr,e),Cr(t,e)}}function GG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Tr(t,e))return;n.uniform3uiv(this.addr,e),Cr(t,e)}}function VG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Tr(t,e))return;n.uniform4uiv(this.addr,e),Cr(t,e)}}function kG(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(Kw.compareFunction=JM,s=Kw):s=wO,t.setTexture2D(e||s,r)}function jG(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||DO,r)}function XG(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||BO,r)}function WG(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||RO,r)}function YG(n){switch(n){case 5126:return wG;case 35664:return RG;case 35665:return DG;case 35666:return BG;case 35674:return OG;case 35675:return PG;case 35676:return UG;case 5124:case 35670:return LG;case 35667:case 35671:return NG;case 35668:case 35672:return IG;case 35669:case 35673:return FG;case 5125:return zG;case 36294:return HG;case 36295:return GG;case 36296:return VG;case 35678:case 36198:case 36298:case 36306:case 35682:return kG;case 35679:case 36299:case 36307:return jG;case 35680:case 36300:case 36308:case 36293:return XG;case 36289:case 36303:case 36311:case 36292:return WG}}function qG(n,e){n.uniform1fv(this.addr,e)}function KG(n,e){const t=jp(e,this.size,2);n.uniform2fv(this.addr,t)}function JG(n,e){const t=jp(e,this.size,3);n.uniform3fv(this.addr,t)}function $G(n,e){const t=jp(e,this.size,4);n.uniform4fv(this.addr,t)}function ZG(n,e){const t=jp(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function QG(n,e){const t=jp(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function eV(n,e){const t=jp(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function tV(n,e){n.uniform1iv(this.addr,e)}function nV(n,e){n.uniform2iv(this.addr,e)}function iV(n,e){n.uniform3iv(this.addr,e)}function rV(n,e){n.uniform4iv(this.addr,e)}function sV(n,e){n.uniform1uiv(this.addr,e)}function aV(n,e){n.uniform2uiv(this.addr,e)}function oV(n,e){n.uniform3uiv(this.addr,e)}function lV(n,e){n.uniform4uiv(this.addr,e)}function cV(n,e,t){const i=this.cache,r=e.length,s=rS(t,r);Tr(i,s)||(n.uniform1iv(this.addr,s),Cr(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||wO,s[a])}function uV(n,e,t){const i=this.cache,r=e.length,s=rS(t,r);Tr(i,s)||(n.uniform1iv(this.addr,s),Cr(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||DO,s[a])}function fV(n,e,t){const i=this.cache,r=e.length,s=rS(t,r);Tr(i,s)||(n.uniform1iv(this.addr,s),Cr(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||BO,s[a])}function hV(n,e,t){const i=this.cache,r=e.length,s=rS(t,r);Tr(i,s)||(n.uniform1iv(this.addr,s),Cr(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||RO,s[a])}function dV(n){switch(n){case 5126:return qG;case 35664:return KG;case 35665:return JG;case 35666:return $G;case 35674:return ZG;case 35675:return QG;case 35676:return eV;case 5124:case 35670:return tV;case 35667:case 35671:return nV;case 35668:case 35672:return iV;case 35669:case 35673:return rV;case 5125:return sV;case 36294:return aV;case 36295:return oV;case 36296:return lV;case 35678:case 36198:case 36298:case 36306:case 35682:return cV;case 35679:case 36299:case 36307:return uV;case 35680:case 36300:case 36308:case 36293:return fV;case 36289:case 36303:case 36311:case 36292:return hV}}class pV{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=YG(t.type)}}class mV{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=dV(t.type)}}class gV{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const l=r[s];l.setValue(e,t[l.id],i)}}}const WA=/(\w+)(\])?(\[|\.)?/g;function tR(n,e){n.seq.push(e),n.map[e.id]=e}function vV(n,e,t){const i=n.name,r=i.length;for(WA.lastIndex=0;;){const s=WA.exec(i),a=WA.lastIndex;let l=s[1];const u=s[2]==="]",h=s[3];if(u&&(l=l|0),h===void 0||h==="["&&a+2===r){tR(t,h===void 0?new pV(l,n,e):new mV(l,n,e));break}else{let g=t.map[l];g===void 0&&(g=new gV(l),tR(t,g)),t=g}}}class e_{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);vV(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const l=t[s],u=i[l.id];u.needsUpdate!==!1&&l.setValue(e,u.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function nR(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const yV=37297;let xV=0;function _V(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const l=a+1;i.push(`${l===e?">":" "} ${l}: ${t[a]}`)}return i.join(`
`)}const iR=new Zt;function bV(n){Rn._getMatrix(iR,Rn.workingColorSpace,n);const e=`mat3( ${iR.elements.map(t=>t.toFixed(4))} )`;switch(Rn.getTransfer(n)){case Sv:return[e,"LinearTransferOETF"];case Kn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function rR(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+_V(n.getShaderSource(e),a)}else return r}function SV(n,e){const t=bV(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function AV(n,e){let t;switch(e){case m6:t="Linear";break;case g6:t="Reinhard";break;case v6:t="Cineon";break;case zM:t="ACESFilmic";break;case x6:t="AgX";break;case _6:t="Neutral";break;case y6:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Bx=new q;function EV(){Rn.getLuminanceCoefficients(Bx);const n=Bx.x.toFixed(4),e=Bx.y.toFixed(4),t=Bx.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function MV(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Xg).join(`
`)}function TV(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function CV(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let l=1;s.type===n.FLOAT_MAT2&&(l=2),s.type===n.FLOAT_MAT3&&(l=3),s.type===n.FLOAT_MAT4&&(l=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:l}}return t}function Xg(n){return n!==""}function sR(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function aR(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const wV=/^[ \t]*#include +<([\w\d./]+)>/gm;function OE(n){return n.replace(wV,DV)}const RV=new Map;function DV(n,e){let t=cn[e];if(t===void 0){const i=RV.get(e);if(i!==void 0)t=cn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return OE(t)}const BV=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function oR(n){return n.replace(BV,OV)}function OV(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function lR(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function PV(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Ab?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Jg?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===el&&(e="SHADOWMAP_TYPE_VSM"),e}function UV(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case $c:case yf:e="ENVMAP_TYPE_CUBE";break;case Lp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function LV(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case yf:e="ENVMAP_MODE_REFRACTION";break}return e}function NV(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case jv:e="ENVMAP_BLENDING_MULTIPLY";break;case d6:e="ENVMAP_BLENDING_MIX";break;case p6:e="ENVMAP_BLENDING_ADD";break}return e}function IV(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function FV(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,l=t.fragmentShader;const u=PV(t),h=UV(t),m=LV(t),g=NV(t),v=IV(t),x=MV(t),b=TV(s),M=r.createProgram();let A,S,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(A=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(Xg).join(`
`),A.length>0&&(A+=`
`),S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(Xg).join(`
`),S.length>0&&(S+=`
`)):(A=[lR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Xg).join(`
`),S=[lR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+m:"",t.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==al?"#define TONE_MAPPING":"",t.toneMapping!==al?cn.tonemapping_pars_fragment:"",t.toneMapping!==al?AV("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",cn.colorspace_pars_fragment,SV("linearToOutputTexel",t.outputColorSpace),EV(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Xg).join(`
`)),a=OE(a),a=sR(a,t),a=aR(a,t),l=OE(l),l=sR(l,t),l=aR(l,t),a=oR(a),l=oR(l),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,A=[x,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,S=["#define varying in",t.glslVersion===EE?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===EE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const R=C+A+a,B=C+S+l,N=nR(r,r.VERTEX_SHADER,R),U=nR(r,r.FRAGMENT_SHADER,B);r.attachShader(M,N),r.attachShader(M,U),t.index0AttributeName!==void 0?r.bindAttribLocation(M,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(M,0,"position"),r.linkProgram(M);function I(G){if(n.debug.checkShaderErrors){const $=r.getProgramInfoLog(M).trim(),Q=r.getShaderInfoLog(N).trim(),ce=r.getShaderInfoLog(U).trim();let fe=!0,k=!0;if(r.getProgramParameter(M,r.LINK_STATUS)===!1)if(fe=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,M,N,U);else{const K=rR(r,N,"vertex"),ee=rR(r,U,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(M,r.VALIDATE_STATUS)+`

Material Name: `+G.name+`
Material Type: `+G.type+`

Program Info Log: `+$+`
`+K+`
`+ee)}else $!==""?console.warn("THREE.WebGLProgram: Program Info Log:",$):(Q===""||ce==="")&&(k=!1);k&&(G.diagnostics={runnable:fe,programLog:$,vertexShader:{log:Q,prefix:A},fragmentShader:{log:ce,prefix:S}})}r.deleteShader(N),r.deleteShader(U),z=new e_(r,M),L=CV(r,M)}let z;this.getUniforms=function(){return z===void 0&&I(this),z};let L;this.getAttributes=function(){return L===void 0&&I(this),L};let O=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=r.getProgramParameter(M,yV)),O},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(M),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=xV++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=N,this.fragmentShader=U,this}let zV=0;class HV{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new GV(e),t.set(e,i)),i}}class GV{constructor(e){this.id=zV++,this.code=e,this.usedTimes=0}}function VV(n,e,t,i,r,s,a){const l=new Ep,u=new HV,h=new Set,m=[],g=r.logarithmicDepthBuffer,v=r.vertexTextures;let x=r.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(L){return h.add(L),L===0?"uv":`uv${L}`}function A(L,O,G,$,Q){const ce=$.fog,fe=Q.geometry,k=L.isMeshStandardMaterial?$.environment:null,K=(L.isMeshStandardMaterial?t:e).get(L.envMap||k),ee=K&&K.mapping===Lp?K.image.height:null,me=b[L.type];L.precision!==null&&(x=r.getMaxPrecision(L.precision),x!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",x,"instead."));const W=fe.morphAttributes.position||fe.morphAttributes.normal||fe.morphAttributes.color,ae=W!==void 0?W.length:0;let Se=0;fe.morphAttributes.position!==void 0&&(Se=1),fe.morphAttributes.normal!==void 0&&(Se=2),fe.morphAttributes.color!==void 0&&(Se=3);let Ae,ie,_e,Ue;if(me){const en=nl[me];Ae=en.vertexShader,ie=en.fragmentShader}else Ae=L.vertexShader,ie=L.fragmentShader,u.update(L),_e=u.getVertexShaderID(L),Ue=u.getFragmentShaderID(L);const ke=n.getRenderTarget(),Ye=n.state.buffers.depth.getReversed(),gt=Q.isInstancedMesh===!0,_t=Q.isBatchedMesh===!0,an=!!L.map,Pt=!!L.matcap,bt=!!K,Z=!!L.aoMap,Qe=!!L.lightMap,Xe=!!L.bumpMap,je=!!L.normalMap,He=!!L.displacementMap,lt=!!L.emissiveMap,Ge=!!L.metalnessMap,J=!!L.roughnessMap,V=L.anisotropy>0,te=L.clearcoat>0,ge=L.dispersion>0,Ne=L.iridescence>0,Te=L.sheen>0,tt=L.transmission>0,$e=V&&!!L.anisotropyMap,ct=te&&!!L.clearcoatMap,Mt=te&&!!L.clearcoatNormalMap,qe=te&&!!L.clearcoatRoughnessMap,ut=Ne&&!!L.iridescenceMap,vt=Ne&&!!L.iridescenceThicknessMap,St=Te&&!!L.sheenColorMap,it=Te&&!!L.sheenRoughnessMap,ue=!!L.specularMap,Le=!!L.specularColorMap,rt=!!L.specularIntensityMap,le=tt&&!!L.transmissionMap,Je=tt&&!!L.thicknessMap,Oe=!!L.gradientMap,Ie=!!L.alphaMap,ht=L.alphaTest>0,at=!!L.alphaHash,wt=!!L.extensions;let on=al;L.toneMapped&&(ke===null||ke.isXRRenderTarget===!0)&&(on=n.toneMapping);const On={shaderID:me,shaderType:L.type,shaderName:L.name,vertexShader:Ae,fragmentShader:ie,defines:L.defines,customVertexShaderID:_e,customFragmentShaderID:Ue,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:x,batching:_t,batchingColor:_t&&Q._colorsTexture!==null,instancing:gt,instancingColor:gt&&Q.instanceColor!==null,instancingMorph:gt&&Q.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:ke===null?n.outputColorSpace:ke.isXRRenderTarget===!0?ke.texture.colorSpace:rc,alphaToCoverage:!!L.alphaToCoverage,map:an,matcap:Pt,envMap:bt,envMapMode:bt&&K.mapping,envMapCubeUVHeight:ee,aoMap:Z,lightMap:Qe,bumpMap:Xe,normalMap:je,displacementMap:v&&He,emissiveMap:lt,normalMapObjectSpace:je&&L.normalMapType===T6,normalMapTangentSpace:je&&L.normalMapType===Df,metalnessMap:Ge,roughnessMap:J,anisotropy:V,anisotropyMap:$e,clearcoat:te,clearcoatMap:ct,clearcoatNormalMap:Mt,clearcoatRoughnessMap:qe,dispersion:ge,iridescence:Ne,iridescenceMap:ut,iridescenceThicknessMap:vt,sheen:Te,sheenColorMap:St,sheenRoughnessMap:it,specularMap:ue,specularColorMap:Le,specularIntensityMap:rt,transmission:tt,transmissionMap:le,thicknessMap:Je,gradientMap:Oe,opaque:L.transparent===!1&&L.blending===i0&&L.alphaToCoverage===!1,alphaMap:Ie,alphaTest:ht,alphaHash:at,combine:L.combine,mapUv:an&&M(L.map.channel),aoMapUv:Z&&M(L.aoMap.channel),lightMapUv:Qe&&M(L.lightMap.channel),bumpMapUv:Xe&&M(L.bumpMap.channel),normalMapUv:je&&M(L.normalMap.channel),displacementMapUv:He&&M(L.displacementMap.channel),emissiveMapUv:lt&&M(L.emissiveMap.channel),metalnessMapUv:Ge&&M(L.metalnessMap.channel),roughnessMapUv:J&&M(L.roughnessMap.channel),anisotropyMapUv:$e&&M(L.anisotropyMap.channel),clearcoatMapUv:ct&&M(L.clearcoatMap.channel),clearcoatNormalMapUv:Mt&&M(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:qe&&M(L.clearcoatRoughnessMap.channel),iridescenceMapUv:ut&&M(L.iridescenceMap.channel),iridescenceThicknessMapUv:vt&&M(L.iridescenceThicknessMap.channel),sheenColorMapUv:St&&M(L.sheenColorMap.channel),sheenRoughnessMapUv:it&&M(L.sheenRoughnessMap.channel),specularMapUv:ue&&M(L.specularMap.channel),specularColorMapUv:Le&&M(L.specularColorMap.channel),specularIntensityMapUv:rt&&M(L.specularIntensityMap.channel),transmissionMapUv:le&&M(L.transmissionMap.channel),thicknessMapUv:Je&&M(L.thicknessMap.channel),alphaMapUv:Ie&&M(L.alphaMap.channel),vertexTangents:!!fe.attributes.tangent&&(je||V),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!fe.attributes.color&&fe.attributes.color.itemSize===4,pointsUvs:Q.isPoints===!0&&!!fe.attributes.uv&&(an||Ie),fog:!!ce,useFog:L.fog===!0,fogExp2:!!ce&&ce.isFogExp2,flatShading:L.flatShading===!0,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:Ye,skinning:Q.isSkinnedMesh===!0,morphTargets:fe.morphAttributes.position!==void 0,morphNormals:fe.morphAttributes.normal!==void 0,morphColors:fe.morphAttributes.color!==void 0,morphTargetsCount:ae,morphTextureStride:Se,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:L.dithering,shadowMapEnabled:n.shadowMap.enabled&&G.length>0,shadowMapType:n.shadowMap.type,toneMapping:on,decodeVideoTexture:an&&L.map.isVideoTexture===!0&&Rn.getTransfer(L.map.colorSpace)===Kn,decodeVideoTextureEmissive:lt&&L.emissiveMap.isVideoTexture===!0&&Rn.getTransfer(L.emissiveMap.colorSpace)===Kn,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===ps,flipSided:L.side===ur,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:wt&&L.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(wt&&L.extensions.multiDraw===!0||_t)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return On.vertexUv1s=h.has(1),On.vertexUv2s=h.has(2),On.vertexUv3s=h.has(3),h.clear(),On}function S(L){const O=[];if(L.shaderID?O.push(L.shaderID):(O.push(L.customVertexShaderID),O.push(L.customFragmentShaderID)),L.defines!==void 0)for(const G in L.defines)O.push(G),O.push(L.defines[G]);return L.isRawShaderMaterial===!1&&(C(O,L),R(O,L),O.push(n.outputColorSpace)),O.push(L.customProgramCacheKey),O.join()}function C(L,O){L.push(O.precision),L.push(O.outputColorSpace),L.push(O.envMapMode),L.push(O.envMapCubeUVHeight),L.push(O.mapUv),L.push(O.alphaMapUv),L.push(O.lightMapUv),L.push(O.aoMapUv),L.push(O.bumpMapUv),L.push(O.normalMapUv),L.push(O.displacementMapUv),L.push(O.emissiveMapUv),L.push(O.metalnessMapUv),L.push(O.roughnessMapUv),L.push(O.anisotropyMapUv),L.push(O.clearcoatMapUv),L.push(O.clearcoatNormalMapUv),L.push(O.clearcoatRoughnessMapUv),L.push(O.iridescenceMapUv),L.push(O.iridescenceThicknessMapUv),L.push(O.sheenColorMapUv),L.push(O.sheenRoughnessMapUv),L.push(O.specularMapUv),L.push(O.specularColorMapUv),L.push(O.specularIntensityMapUv),L.push(O.transmissionMapUv),L.push(O.thicknessMapUv),L.push(O.combine),L.push(O.fogExp2),L.push(O.sizeAttenuation),L.push(O.morphTargetsCount),L.push(O.morphAttributeCount),L.push(O.numDirLights),L.push(O.numPointLights),L.push(O.numSpotLights),L.push(O.numSpotLightMaps),L.push(O.numHemiLights),L.push(O.numRectAreaLights),L.push(O.numDirLightShadows),L.push(O.numPointLightShadows),L.push(O.numSpotLightShadows),L.push(O.numSpotLightShadowsWithMaps),L.push(O.numLightProbes),L.push(O.shadowMapType),L.push(O.toneMapping),L.push(O.numClippingPlanes),L.push(O.numClipIntersection),L.push(O.depthPacking)}function R(L,O){l.disableAll(),O.supportsVertexTextures&&l.enable(0),O.instancing&&l.enable(1),O.instancingColor&&l.enable(2),O.instancingMorph&&l.enable(3),O.matcap&&l.enable(4),O.envMap&&l.enable(5),O.normalMapObjectSpace&&l.enable(6),O.normalMapTangentSpace&&l.enable(7),O.clearcoat&&l.enable(8),O.iridescence&&l.enable(9),O.alphaTest&&l.enable(10),O.vertexColors&&l.enable(11),O.vertexAlphas&&l.enable(12),O.vertexUv1s&&l.enable(13),O.vertexUv2s&&l.enable(14),O.vertexUv3s&&l.enable(15),O.vertexTangents&&l.enable(16),O.anisotropy&&l.enable(17),O.alphaHash&&l.enable(18),O.batching&&l.enable(19),O.dispersion&&l.enable(20),O.batchingColor&&l.enable(21),L.push(l.mask),l.disableAll(),O.fog&&l.enable(0),O.useFog&&l.enable(1),O.flatShading&&l.enable(2),O.logarithmicDepthBuffer&&l.enable(3),O.reverseDepthBuffer&&l.enable(4),O.skinning&&l.enable(5),O.morphTargets&&l.enable(6),O.morphNormals&&l.enable(7),O.morphColors&&l.enable(8),O.premultipliedAlpha&&l.enable(9),O.shadowMapEnabled&&l.enable(10),O.doubleSided&&l.enable(11),O.flipSided&&l.enable(12),O.useDepthPacking&&l.enable(13),O.dithering&&l.enable(14),O.transmission&&l.enable(15),O.sheen&&l.enable(16),O.opaque&&l.enable(17),O.pointsUvs&&l.enable(18),O.decodeVideoTexture&&l.enable(19),O.decodeVideoTextureEmissive&&l.enable(20),O.alphaToCoverage&&l.enable(21),L.push(l.mask)}function B(L){const O=b[L.type];let G;if(O){const $=nl[O];G=QM.clone($.uniforms)}else G=L.uniforms;return G}function N(L,O){let G;for(let $=0,Q=m.length;$<Q;$++){const ce=m[$];if(ce.cacheKey===O){G=ce,++G.usedTimes;break}}return G===void 0&&(G=new FV(n,O,L,s),m.push(G)),G}function U(L){if(--L.usedTimes===0){const O=m.indexOf(L);m[O]=m[m.length-1],m.pop(),L.destroy()}}function I(L){u.remove(L)}function z(){u.dispose()}return{getParameters:A,getProgramCacheKey:S,getUniforms:B,acquireProgram:N,releaseProgram:U,releaseShaderCache:I,programs:m,dispose:z}}function kV(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let l=n.get(a);return l===void 0&&(l={},n.set(a,l)),l}function i(a){n.delete(a)}function r(a,l,u){n.get(a)[l]=u}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function jV(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function cR(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function uR(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(g,v,x,b,M,A){let S=n[e];return S===void 0?(S={id:g.id,object:g,geometry:v,material:x,groupOrder:b,renderOrder:g.renderOrder,z:M,group:A},n[e]=S):(S.id=g.id,S.object=g,S.geometry=v,S.material=x,S.groupOrder=b,S.renderOrder=g.renderOrder,S.z=M,S.group=A),e++,S}function l(g,v,x,b,M,A){const S=a(g,v,x,b,M,A);x.transmission>0?i.push(S):x.transparent===!0?r.push(S):t.push(S)}function u(g,v,x,b,M,A){const S=a(g,v,x,b,M,A);x.transmission>0?i.unshift(S):x.transparent===!0?r.unshift(S):t.unshift(S)}function h(g,v){t.length>1&&t.sort(g||jV),i.length>1&&i.sort(v||cR),r.length>1&&r.sort(v||cR)}function m(){for(let g=e,v=n.length;g<v;g++){const x=n[g];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:l,unshift:u,finish:m,sort:h}}function XV(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new uR,n.set(i,[a])):r>=s.length?(a=new uR,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function WV(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new q,color:new Ze};break;case"SpotLight":t={position:new q,direction:new q,color:new Ze,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new q,color:new Ze,distance:0,decay:0};break;case"HemisphereLight":t={direction:new q,skyColor:new Ze,groundColor:new Ze};break;case"RectAreaLight":t={color:new Ze,position:new q,halfWidth:new q,halfHeight:new q};break}return n[e.id]=t,t}}}function YV(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pe};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pe};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let qV=0;function KV(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function JV(n){const e=new WV,t=YV(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)i.probe.push(new q);const r=new q,s=new ft,a=new ft;function l(h){let m=0,g=0,v=0;for(let L=0;L<9;L++)i.probe[L].set(0,0,0);let x=0,b=0,M=0,A=0,S=0,C=0,R=0,B=0,N=0,U=0,I=0;h.sort(KV);for(let L=0,O=h.length;L<O;L++){const G=h[L],$=G.color,Q=G.intensity,ce=G.distance,fe=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)m+=$.r*Q,g+=$.g*Q,v+=$.b*Q;else if(G.isLightProbe){for(let k=0;k<9;k++)i.probe[k].addScaledVector(G.sh.coefficients[k],Q);I++}else if(G.isDirectionalLight){const k=e.get(G);if(k.color.copy(G.color).multiplyScalar(G.intensity),G.castShadow){const K=G.shadow,ee=t.get(G);ee.shadowIntensity=K.intensity,ee.shadowBias=K.bias,ee.shadowNormalBias=K.normalBias,ee.shadowRadius=K.radius,ee.shadowMapSize=K.mapSize,i.directionalShadow[x]=ee,i.directionalShadowMap[x]=fe,i.directionalShadowMatrix[x]=G.shadow.matrix,C++}i.directional[x]=k,x++}else if(G.isSpotLight){const k=e.get(G);k.position.setFromMatrixPosition(G.matrixWorld),k.color.copy($).multiplyScalar(Q),k.distance=ce,k.coneCos=Math.cos(G.angle),k.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),k.decay=G.decay,i.spot[M]=k;const K=G.shadow;if(G.map&&(i.spotLightMap[N]=G.map,N++,K.updateMatrices(G),G.castShadow&&U++),i.spotLightMatrix[M]=K.matrix,G.castShadow){const ee=t.get(G);ee.shadowIntensity=K.intensity,ee.shadowBias=K.bias,ee.shadowNormalBias=K.normalBias,ee.shadowRadius=K.radius,ee.shadowMapSize=K.mapSize,i.spotShadow[M]=ee,i.spotShadowMap[M]=fe,B++}M++}else if(G.isRectAreaLight){const k=e.get(G);k.color.copy($).multiplyScalar(Q),k.halfWidth.set(G.width*.5,0,0),k.halfHeight.set(0,G.height*.5,0),i.rectArea[A]=k,A++}else if(G.isPointLight){const k=e.get(G);if(k.color.copy(G.color).multiplyScalar(G.intensity),k.distance=G.distance,k.decay=G.decay,G.castShadow){const K=G.shadow,ee=t.get(G);ee.shadowIntensity=K.intensity,ee.shadowBias=K.bias,ee.shadowNormalBias=K.normalBias,ee.shadowRadius=K.radius,ee.shadowMapSize=K.mapSize,ee.shadowCameraNear=K.camera.near,ee.shadowCameraFar=K.camera.far,i.pointShadow[b]=ee,i.pointShadowMap[b]=fe,i.pointShadowMatrix[b]=G.shadow.matrix,R++}i.point[b]=k,b++}else if(G.isHemisphereLight){const k=e.get(G);k.skyColor.copy(G.color).multiplyScalar(Q),k.groundColor.copy(G.groundColor).multiplyScalar(Q),i.hemi[S]=k,S++}}A>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=pt.LTC_FLOAT_1,i.rectAreaLTC2=pt.LTC_FLOAT_2):(i.rectAreaLTC1=pt.LTC_HALF_1,i.rectAreaLTC2=pt.LTC_HALF_2)),i.ambient[0]=m,i.ambient[1]=g,i.ambient[2]=v;const z=i.hash;(z.directionalLength!==x||z.pointLength!==b||z.spotLength!==M||z.rectAreaLength!==A||z.hemiLength!==S||z.numDirectionalShadows!==C||z.numPointShadows!==R||z.numSpotShadows!==B||z.numSpotMaps!==N||z.numLightProbes!==I)&&(i.directional.length=x,i.spot.length=M,i.rectArea.length=A,i.point.length=b,i.hemi.length=S,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=R,i.pointShadowMap.length=R,i.spotShadow.length=B,i.spotShadowMap.length=B,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=R,i.spotLightMatrix.length=B+N-U,i.spotLightMap.length=N,i.numSpotLightShadowsWithMaps=U,i.numLightProbes=I,z.directionalLength=x,z.pointLength=b,z.spotLength=M,z.rectAreaLength=A,z.hemiLength=S,z.numDirectionalShadows=C,z.numPointShadows=R,z.numSpotShadows=B,z.numSpotMaps=N,z.numLightProbes=I,i.version=qV++)}function u(h,m){let g=0,v=0,x=0,b=0,M=0;const A=m.matrixWorldInverse;for(let S=0,C=h.length;S<C;S++){const R=h[S];if(R.isDirectionalLight){const B=i.directional[g];B.direction.setFromMatrixPosition(R.matrixWorld),r.setFromMatrixPosition(R.target.matrixWorld),B.direction.sub(r),B.direction.transformDirection(A),g++}else if(R.isSpotLight){const B=i.spot[x];B.position.setFromMatrixPosition(R.matrixWorld),B.position.applyMatrix4(A),B.direction.setFromMatrixPosition(R.matrixWorld),r.setFromMatrixPosition(R.target.matrixWorld),B.direction.sub(r),B.direction.transformDirection(A),x++}else if(R.isRectAreaLight){const B=i.rectArea[b];B.position.setFromMatrixPosition(R.matrixWorld),B.position.applyMatrix4(A),a.identity(),s.copy(R.matrixWorld),s.premultiply(A),a.extractRotation(s),B.halfWidth.set(R.width*.5,0,0),B.halfHeight.set(0,R.height*.5,0),B.halfWidth.applyMatrix4(a),B.halfHeight.applyMatrix4(a),b++}else if(R.isPointLight){const B=i.point[v];B.position.setFromMatrixPosition(R.matrixWorld),B.position.applyMatrix4(A),v++}else if(R.isHemisphereLight){const B=i.hemi[M];B.direction.setFromMatrixPosition(R.matrixWorld),B.direction.transformDirection(A),M++}}}return{setup:l,setupView:u,state:i}}function fR(n){const e=new JV(n),t=[],i=[];function r(m){h.camera=m,t.length=0,i.length=0}function s(m){t.push(m)}function a(m){i.push(m)}function l(){e.setup(t)}function u(m){e.setupView(t,m)}const h={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:h,setupLights:l,setupLightsView:u,pushLight:s,pushShadow:a}}function $V(n){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let l;return a===void 0?(l=new fR(n),e.set(r,[l])):s>=a.length?(l=new fR(n),a.push(l)):l=a[s],l}function i(){e=new WeakMap}return{get:t,dispose:i}}const ZV=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,QV=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ek(n,e,t){let i=new Fp;const r=new Pe,s=new Pe,a=new Kt,l=new dT({depthPacking:M6}),u=new pT,h={},m=t.maxTextureSize,g={[ll]:ur,[ur]:ll,[ps]:ps},v=new tr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Pe},radius:{value:4}},vertexShader:ZV,fragmentShader:QV}),x=v.clone();x.defines.HORIZONTAL_PASS=1;const b=new Gt;b.setAttribute("position",new mn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new Ai(b,v),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ab;let S=this.type;this.render=function(U,I,z){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||U.length===0)return;const L=n.getRenderTarget(),O=n.getActiveCubeFace(),G=n.getActiveMipmapLevel(),$=n.state;$.setBlending($r),$.buffers.color.setClear(1,1,1,1),$.buffers.depth.setTest(!0),$.setScissorTest(!1);const Q=S!==el&&this.type===el,ce=S===el&&this.type!==el;for(let fe=0,k=U.length;fe<k;fe++){const K=U[fe],ee=K.shadow;if(ee===void 0){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if(ee.autoUpdate===!1&&ee.needsUpdate===!1)continue;r.copy(ee.mapSize);const me=ee.getFrameExtents();if(r.multiply(me),s.copy(ee.mapSize),(r.x>m||r.y>m)&&(r.x>m&&(s.x=Math.floor(m/me.x),r.x=s.x*me.x,ee.mapSize.x=s.x),r.y>m&&(s.y=Math.floor(m/me.y),r.y=s.y*me.y,ee.mapSize.y=s.y)),ee.map===null||Q===!0||ce===!0){const ae=this.type!==el?{minFilter:Wi,magFilter:Wi}:{};ee.map!==null&&ee.map.dispose(),ee.map=new Ni(r.x,r.y,ae),ee.map.texture.name=K.name+".shadowMap",ee.camera.updateProjectionMatrix()}n.setRenderTarget(ee.map),n.clear();const W=ee.getViewportCount();for(let ae=0;ae<W;ae++){const Se=ee.getViewport(ae);a.set(s.x*Se.x,s.y*Se.y,s.x*Se.z,s.y*Se.w),$.viewport(a),ee.updateMatrices(K,ae),i=ee.getFrustum(),B(I,z,ee.camera,K,this.type)}ee.isPointLightShadow!==!0&&this.type===el&&C(ee,z),ee.needsUpdate=!1}S=this.type,A.needsUpdate=!1,n.setRenderTarget(L,O,G)};function C(U,I){const z=e.update(M);v.defines.VSM_SAMPLES!==U.blurSamples&&(v.defines.VSM_SAMPLES=U.blurSamples,x.defines.VSM_SAMPLES=U.blurSamples,v.needsUpdate=!0,x.needsUpdate=!0),U.mapPass===null&&(U.mapPass=new Ni(r.x,r.y)),v.uniforms.shadow_pass.value=U.map.texture,v.uniforms.resolution.value=U.mapSize,v.uniforms.radius.value=U.radius,n.setRenderTarget(U.mapPass),n.clear(),n.renderBufferDirect(I,null,z,v,M,null),x.uniforms.shadow_pass.value=U.mapPass.texture,x.uniforms.resolution.value=U.mapSize,x.uniforms.radius.value=U.radius,n.setRenderTarget(U.map),n.clear(),n.renderBufferDirect(I,null,z,x,M,null)}function R(U,I,z,L){let O=null;const G=z.isPointLight===!0?U.customDistanceMaterial:U.customDepthMaterial;if(G!==void 0)O=G;else if(O=z.isPointLight===!0?u:l,n.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0||I.alphaToCoverage===!0){const $=O.uuid,Q=I.uuid;let ce=h[$];ce===void 0&&(ce={},h[$]=ce);let fe=ce[Q];fe===void 0&&(fe=O.clone(),ce[Q]=fe,I.addEventListener("dispose",N)),O=fe}if(O.visible=I.visible,O.wireframe=I.wireframe,L===el?O.side=I.shadowSide!==null?I.shadowSide:I.side:O.side=I.shadowSide!==null?I.shadowSide:g[I.side],O.alphaMap=I.alphaMap,O.alphaTest=I.alphaToCoverage===!0?.5:I.alphaTest,O.map=I.map,O.clipShadows=I.clipShadows,O.clippingPlanes=I.clippingPlanes,O.clipIntersection=I.clipIntersection,O.displacementMap=I.displacementMap,O.displacementScale=I.displacementScale,O.displacementBias=I.displacementBias,O.wireframeLinewidth=I.wireframeLinewidth,O.linewidth=I.linewidth,z.isPointLight===!0&&O.isMeshDistanceMaterial===!0){const $=n.properties.get(O);$.light=z}return O}function B(U,I,z,L,O){if(U.visible===!1)return;if(U.layers.test(I.layers)&&(U.isMesh||U.isLine||U.isPoints)&&(U.castShadow||U.receiveShadow&&O===el)&&(!U.frustumCulled||i.intersectsObject(U))){U.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,U.matrixWorld);const Q=e.update(U),ce=U.material;if(Array.isArray(ce)){const fe=Q.groups;for(let k=0,K=fe.length;k<K;k++){const ee=fe[k],me=ce[ee.materialIndex];if(me&&me.visible){const W=R(U,me,L,O);U.onBeforeShadow(n,U,I,z,Q,W,ee),n.renderBufferDirect(z,null,Q,W,U,ee),U.onAfterShadow(n,U,I,z,Q,W,ee)}}}else if(ce.visible){const fe=R(U,ce,L,O);U.onBeforeShadow(n,U,I,z,Q,fe,null),n.renderBufferDirect(z,null,Q,fe,U,null),U.onAfterShadow(n,U,I,z,Q,fe,null)}}const $=U.children;for(let Q=0,ce=$.length;Q<ce;Q++)B($[Q],I,z,L,O)}function N(U){U.target.removeEventListener("dispose",N);for(const z in h){const L=h[z],O=U.target.uuid;O in L&&(L[O].dispose(),delete L[O])}}}const tk={[c_]:u_,[f_]:p_,[h_]:m_,[h0]:d_,[u_]:c_,[p_]:f_,[m_]:h_,[d_]:h0};function nk(n,e){function t(){let le=!1;const Je=new Kt;let Oe=null;const Ie=new Kt(0,0,0,0);return{setMask:function(ht){Oe!==ht&&!le&&(n.colorMask(ht,ht,ht,ht),Oe=ht)},setLocked:function(ht){le=ht},setClear:function(ht,at,wt,on,On){On===!0&&(ht*=on,at*=on,wt*=on),Je.set(ht,at,wt,on),Ie.equals(Je)===!1&&(n.clearColor(ht,at,wt,on),Ie.copy(Je))},reset:function(){le=!1,Oe=null,Ie.set(-1,0,0,0)}}}function i(){let le=!1,Je=!1,Oe=null,Ie=null,ht=null;return{setReversed:function(at){if(Je!==at){const wt=e.get("EXT_clip_control");at?wt.clipControlEXT(wt.LOWER_LEFT_EXT,wt.ZERO_TO_ONE_EXT):wt.clipControlEXT(wt.LOWER_LEFT_EXT,wt.NEGATIVE_ONE_TO_ONE_EXT),Je=at;const on=ht;ht=null,this.setClear(on)}},getReversed:function(){return Je},setTest:function(at){at?ke(n.DEPTH_TEST):Ye(n.DEPTH_TEST)},setMask:function(at){Oe!==at&&!le&&(n.depthMask(at),Oe=at)},setFunc:function(at){if(Je&&(at=tk[at]),Ie!==at){switch(at){case c_:n.depthFunc(n.NEVER);break;case u_:n.depthFunc(n.ALWAYS);break;case f_:n.depthFunc(n.LESS);break;case h0:n.depthFunc(n.LEQUAL);break;case h_:n.depthFunc(n.EQUAL);break;case d_:n.depthFunc(n.GEQUAL);break;case p_:n.depthFunc(n.GREATER);break;case m_:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ie=at}},setLocked:function(at){le=at},setClear:function(at){ht!==at&&(Je&&(at=1-at),n.clearDepth(at),ht=at)},reset:function(){le=!1,Oe=null,Ie=null,ht=null,Je=!1}}}function r(){let le=!1,Je=null,Oe=null,Ie=null,ht=null,at=null,wt=null,on=null,On=null;return{setTest:function(en){le||(en?ke(n.STENCIL_TEST):Ye(n.STENCIL_TEST))},setMask:function(en){Je!==en&&!le&&(n.stencilMask(en),Je=en)},setFunc:function(en,Ii,ai){(Oe!==en||Ie!==Ii||ht!==ai)&&(n.stencilFunc(en,Ii,ai),Oe=en,Ie=Ii,ht=ai)},setOp:function(en,Ii,ai){(at!==en||wt!==Ii||on!==ai)&&(n.stencilOp(en,Ii,ai),at=en,wt=Ii,on=ai)},setLocked:function(en){le=en},setClear:function(en){On!==en&&(n.clearStencil(en),On=en)},reset:function(){le=!1,Je=null,Oe=null,Ie=null,ht=null,at=null,wt=null,on=null,On=null}}}const s=new t,a=new i,l=new r,u=new WeakMap,h=new WeakMap;let m={},g={},v=new WeakMap,x=[],b=null,M=!1,A=null,S=null,C=null,R=null,B=null,N=null,U=null,I=new Ze(0,0,0),z=0,L=!1,O=null,G=null,$=null,Q=null,ce=null;const fe=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let k=!1,K=0;const ee=n.getParameter(n.VERSION);ee.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(ee)[1]),k=K>=1):ee.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(ee)[1]),k=K>=2);let me=null,W={};const ae=n.getParameter(n.SCISSOR_BOX),Se=n.getParameter(n.VIEWPORT),Ae=new Kt().fromArray(ae),ie=new Kt().fromArray(Se);function _e(le,Je,Oe,Ie){const ht=new Uint8Array(4),at=n.createTexture();n.bindTexture(le,at),n.texParameteri(le,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(le,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let wt=0;wt<Oe;wt++)le===n.TEXTURE_3D||le===n.TEXTURE_2D_ARRAY?n.texImage3D(Je,0,n.RGBA,1,1,Ie,0,n.RGBA,n.UNSIGNED_BYTE,ht):n.texImage2D(Je+wt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ht);return at}const Ue={};Ue[n.TEXTURE_2D]=_e(n.TEXTURE_2D,n.TEXTURE_2D,1),Ue[n.TEXTURE_CUBE_MAP]=_e(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ue[n.TEXTURE_2D_ARRAY]=_e(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ue[n.TEXTURE_3D]=_e(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),l.setClear(0),ke(n.DEPTH_TEST),a.setFunc(h0),Xe(!1),je(xE),ke(n.CULL_FACE),Z($r);function ke(le){m[le]!==!0&&(n.enable(le),m[le]=!0)}function Ye(le){m[le]!==!1&&(n.disable(le),m[le]=!1)}function gt(le,Je){return g[le]!==Je?(n.bindFramebuffer(le,Je),g[le]=Je,le===n.DRAW_FRAMEBUFFER&&(g[n.FRAMEBUFFER]=Je),le===n.FRAMEBUFFER&&(g[n.DRAW_FRAMEBUFFER]=Je),!0):!1}function _t(le,Je){let Oe=x,Ie=!1;if(le){Oe=v.get(Je),Oe===void 0&&(Oe=[],v.set(Je,Oe));const ht=le.textures;if(Oe.length!==ht.length||Oe[0]!==n.COLOR_ATTACHMENT0){for(let at=0,wt=ht.length;at<wt;at++)Oe[at]=n.COLOR_ATTACHMENT0+at;Oe.length=ht.length,Ie=!0}}else Oe[0]!==n.BACK&&(Oe[0]=n.BACK,Ie=!0);Ie&&n.drawBuffers(Oe)}function an(le){return b!==le?(n.useProgram(le),b=le,!0):!1}const Pt={[hf]:n.FUNC_ADD,[J5]:n.FUNC_SUBTRACT,[$5]:n.FUNC_REVERSE_SUBTRACT};Pt[Z5]=n.MIN,Pt[Q5]=n.MAX;const bt={[e6]:n.ZERO,[t6]:n.ONE,[n6]:n.SRC_COLOR,[o_]:n.SRC_ALPHA,[l6]:n.SRC_ALPHA_SATURATE,[a6]:n.DST_COLOR,[r6]:n.DST_ALPHA,[i6]:n.ONE_MINUS_SRC_COLOR,[l_]:n.ONE_MINUS_SRC_ALPHA,[o6]:n.ONE_MINUS_DST_COLOR,[s6]:n.ONE_MINUS_DST_ALPHA,[c6]:n.CONSTANT_COLOR,[u6]:n.ONE_MINUS_CONSTANT_COLOR,[f6]:n.CONSTANT_ALPHA,[h6]:n.ONE_MINUS_CONSTANT_ALPHA};function Z(le,Je,Oe,Ie,ht,at,wt,on,On,en){if(le===$r){M===!0&&(Ye(n.BLEND),M=!1);return}if(M===!1&&(ke(n.BLEND),M=!0),le!==K5){if(le!==A||en!==L){if((S!==hf||B!==hf)&&(n.blendEquation(n.FUNC_ADD),S=hf,B=hf),en)switch(le){case i0:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case xv:n.blendFunc(n.ONE,n.ONE);break;case _E:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case bE:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}else switch(le){case i0:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case xv:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case _E:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case bE:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}C=null,R=null,N=null,U=null,I.set(0,0,0),z=0,A=le,L=en}return}ht=ht||Je,at=at||Oe,wt=wt||Ie,(Je!==S||ht!==B)&&(n.blendEquationSeparate(Pt[Je],Pt[ht]),S=Je,B=ht),(Oe!==C||Ie!==R||at!==N||wt!==U)&&(n.blendFuncSeparate(bt[Oe],bt[Ie],bt[at],bt[wt]),C=Oe,R=Ie,N=at,U=wt),(on.equals(I)===!1||On!==z)&&(n.blendColor(on.r,on.g,on.b,On),I.copy(on),z=On),A=le,L=!1}function Qe(le,Je){le.side===ps?Ye(n.CULL_FACE):ke(n.CULL_FACE);let Oe=le.side===ur;Je&&(Oe=!Oe),Xe(Oe),le.blending===i0&&le.transparent===!1?Z($r):Z(le.blending,le.blendEquation,le.blendSrc,le.blendDst,le.blendEquationAlpha,le.blendSrcAlpha,le.blendDstAlpha,le.blendColor,le.blendAlpha,le.premultipliedAlpha),a.setFunc(le.depthFunc),a.setTest(le.depthTest),a.setMask(le.depthWrite),s.setMask(le.colorWrite);const Ie=le.stencilWrite;l.setTest(Ie),Ie&&(l.setMask(le.stencilWriteMask),l.setFunc(le.stencilFunc,le.stencilRef,le.stencilFuncMask),l.setOp(le.stencilFail,le.stencilZFail,le.stencilZPass)),lt(le.polygonOffset,le.polygonOffsetFactor,le.polygonOffsetUnits),le.alphaToCoverage===!0?ke(n.SAMPLE_ALPHA_TO_COVERAGE):Ye(n.SAMPLE_ALPHA_TO_COVERAGE)}function Xe(le){O!==le&&(le?n.frontFace(n.CW):n.frontFace(n.CCW),O=le)}function je(le){le!==W5?(ke(n.CULL_FACE),le!==G&&(le===xE?n.cullFace(n.BACK):le===Y5?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ye(n.CULL_FACE),G=le}function He(le){le!==$&&(k&&n.lineWidth(le),$=le)}function lt(le,Je,Oe){le?(ke(n.POLYGON_OFFSET_FILL),(Q!==Je||ce!==Oe)&&(n.polygonOffset(Je,Oe),Q=Je,ce=Oe)):Ye(n.POLYGON_OFFSET_FILL)}function Ge(le){le?ke(n.SCISSOR_TEST):Ye(n.SCISSOR_TEST)}function J(le){le===void 0&&(le=n.TEXTURE0+fe-1),me!==le&&(n.activeTexture(le),me=le)}function V(le,Je,Oe){Oe===void 0&&(me===null?Oe=n.TEXTURE0+fe-1:Oe=me);let Ie=W[Oe];Ie===void 0&&(Ie={type:void 0,texture:void 0},W[Oe]=Ie),(Ie.type!==le||Ie.texture!==Je)&&(me!==Oe&&(n.activeTexture(Oe),me=Oe),n.bindTexture(le,Je||Ue[le]),Ie.type=le,Ie.texture=Je)}function te(){const le=W[me];le!==void 0&&le.type!==void 0&&(n.bindTexture(le.type,null),le.type=void 0,le.texture=void 0)}function ge(){try{n.compressedTexImage2D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ne(){try{n.compressedTexImage3D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Te(){try{n.texSubImage2D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function tt(){try{n.texSubImage3D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function $e(){try{n.compressedTexSubImage2D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function ct(){try{n.compressedTexSubImage3D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Mt(){try{n.texStorage2D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function qe(){try{n.texStorage3D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function ut(){try{n.texImage2D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function vt(){try{n.texImage3D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function St(le){Ae.equals(le)===!1&&(n.scissor(le.x,le.y,le.z,le.w),Ae.copy(le))}function it(le){ie.equals(le)===!1&&(n.viewport(le.x,le.y,le.z,le.w),ie.copy(le))}function ue(le,Je){let Oe=h.get(Je);Oe===void 0&&(Oe=new WeakMap,h.set(Je,Oe));let Ie=Oe.get(le);Ie===void 0&&(Ie=n.getUniformBlockIndex(Je,le.name),Oe.set(le,Ie))}function Le(le,Je){const Ie=h.get(Je).get(le);u.get(Je)!==Ie&&(n.uniformBlockBinding(Je,Ie,le.__bindingPointIndex),u.set(Je,Ie))}function rt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),m={},me=null,W={},g={},v=new WeakMap,x=[],b=null,M=!1,A=null,S=null,C=null,R=null,B=null,N=null,U=null,I=new Ze(0,0,0),z=0,L=!1,O=null,G=null,$=null,Q=null,ce=null,Ae.set(0,0,n.canvas.width,n.canvas.height),ie.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),l.reset()}return{buffers:{color:s,depth:a,stencil:l},enable:ke,disable:Ye,bindFramebuffer:gt,drawBuffers:_t,useProgram:an,setBlending:Z,setMaterial:Qe,setFlipSided:Xe,setCullFace:je,setLineWidth:He,setPolygonOffset:lt,setScissorTest:Ge,activeTexture:J,bindTexture:V,unbindTexture:te,compressedTexImage2D:ge,compressedTexImage3D:Ne,texImage2D:ut,texImage3D:vt,updateUBOMapping:ue,uniformBlockBinding:Le,texStorage2D:Mt,texStorage3D:qe,texSubImage2D:Te,texSubImage3D:tt,compressedTexSubImage2D:$e,compressedTexSubImage3D:ct,scissor:St,viewport:it,reset:rt}}function ik(n,e,t,i,r,s,a){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new Pe,m=new WeakMap;let g;const v=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(J,V){return x?new OffscreenCanvas(J,V):Mv("canvas")}function M(J,V,te){let ge=1;const Ne=Ge(J);if((Ne.width>te||Ne.height>te)&&(ge=te/Math.max(Ne.width,Ne.height)),ge<1)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap||typeof VideoFrame<"u"&&J instanceof VideoFrame){const Te=Math.floor(ge*Ne.width),tt=Math.floor(ge*Ne.height);g===void 0&&(g=b(Te,tt));const $e=V?b(Te,tt):g;return $e.width=Te,$e.height=tt,$e.getContext("2d").drawImage(J,0,0,Te,tt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ne.width+"x"+Ne.height+") to ("+Te+"x"+tt+")."),$e}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ne.width+"x"+Ne.height+")."),J;return J}function A(J){return J.generateMipmaps}function S(J){n.generateMipmap(J)}function C(J){return J.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:J.isWebGL3DRenderTarget?n.TEXTURE_3D:J.isWebGLArrayRenderTarget||J.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function R(J,V,te,ge,Ne=!1){if(J!==null){if(n[J]!==void 0)return n[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let Te=V;if(V===n.RED&&(te===n.FLOAT&&(Te=n.R32F),te===n.HALF_FLOAT&&(Te=n.R16F),te===n.UNSIGNED_BYTE&&(Te=n.R8)),V===n.RED_INTEGER&&(te===n.UNSIGNED_BYTE&&(Te=n.R8UI),te===n.UNSIGNED_SHORT&&(Te=n.R16UI),te===n.UNSIGNED_INT&&(Te=n.R32UI),te===n.BYTE&&(Te=n.R8I),te===n.SHORT&&(Te=n.R16I),te===n.INT&&(Te=n.R32I)),V===n.RG&&(te===n.FLOAT&&(Te=n.RG32F),te===n.HALF_FLOAT&&(Te=n.RG16F),te===n.UNSIGNED_BYTE&&(Te=n.RG8)),V===n.RG_INTEGER&&(te===n.UNSIGNED_BYTE&&(Te=n.RG8UI),te===n.UNSIGNED_SHORT&&(Te=n.RG16UI),te===n.UNSIGNED_INT&&(Te=n.RG32UI),te===n.BYTE&&(Te=n.RG8I),te===n.SHORT&&(Te=n.RG16I),te===n.INT&&(Te=n.RG32I)),V===n.RGB_INTEGER&&(te===n.UNSIGNED_BYTE&&(Te=n.RGB8UI),te===n.UNSIGNED_SHORT&&(Te=n.RGB16UI),te===n.UNSIGNED_INT&&(Te=n.RGB32UI),te===n.BYTE&&(Te=n.RGB8I),te===n.SHORT&&(Te=n.RGB16I),te===n.INT&&(Te=n.RGB32I)),V===n.RGBA_INTEGER&&(te===n.UNSIGNED_BYTE&&(Te=n.RGBA8UI),te===n.UNSIGNED_SHORT&&(Te=n.RGBA16UI),te===n.UNSIGNED_INT&&(Te=n.RGBA32UI),te===n.BYTE&&(Te=n.RGBA8I),te===n.SHORT&&(Te=n.RGBA16I),te===n.INT&&(Te=n.RGBA32I)),V===n.RGB&&te===n.UNSIGNED_INT_5_9_9_9_REV&&(Te=n.RGB9_E5),V===n.RGBA){const tt=Ne?Sv:Rn.getTransfer(ge);te===n.FLOAT&&(Te=n.RGBA32F),te===n.HALF_FLOAT&&(Te=n.RGBA16F),te===n.UNSIGNED_BYTE&&(Te=tt===Kn?n.SRGB8_ALPHA8:n.RGBA8),te===n.UNSIGNED_SHORT_4_4_4_4&&(Te=n.RGBA4),te===n.UNSIGNED_SHORT_5_5_5_1&&(Te=n.RGB5_A1)}return(Te===n.R16F||Te===n.R32F||Te===n.RG16F||Te===n.RG32F||Te===n.RGBA16F||Te===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Te}function B(J,V){let te;return J?V===null||V===ic||V===p0?te=n.DEPTH24_STENCIL8:V===ks?te=n.DEPTH32F_STENCIL8:V===d0&&(te=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):V===null||V===ic||V===p0?te=n.DEPTH_COMPONENT24:V===ks?te=n.DEPTH_COMPONENT32F:V===d0&&(te=n.DEPTH_COMPONENT16),te}function N(J,V){return A(J)===!0||J.isFramebufferTexture&&J.minFilter!==Wi&&J.minFilter!==Jn?Math.log2(Math.max(V.width,V.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?V.mipmaps.length:1}function U(J){const V=J.target;V.removeEventListener("dispose",U),z(V),V.isVideoTexture&&m.delete(V)}function I(J){const V=J.target;V.removeEventListener("dispose",I),O(V)}function z(J){const V=i.get(J);if(V.__webglInit===void 0)return;const te=J.source,ge=v.get(te);if(ge){const Ne=ge[V.__cacheKey];Ne.usedTimes--,Ne.usedTimes===0&&L(J),Object.keys(ge).length===0&&v.delete(te)}i.remove(J)}function L(J){const V=i.get(J);n.deleteTexture(V.__webglTexture);const te=J.source,ge=v.get(te);delete ge[V.__cacheKey],a.memory.textures--}function O(J){const V=i.get(J);if(J.depthTexture&&(J.depthTexture.dispose(),i.remove(J.depthTexture)),J.isWebGLCubeRenderTarget)for(let ge=0;ge<6;ge++){if(Array.isArray(V.__webglFramebuffer[ge]))for(let Ne=0;Ne<V.__webglFramebuffer[ge].length;Ne++)n.deleteFramebuffer(V.__webglFramebuffer[ge][Ne]);else n.deleteFramebuffer(V.__webglFramebuffer[ge]);V.__webglDepthbuffer&&n.deleteRenderbuffer(V.__webglDepthbuffer[ge])}else{if(Array.isArray(V.__webglFramebuffer))for(let ge=0;ge<V.__webglFramebuffer.length;ge++)n.deleteFramebuffer(V.__webglFramebuffer[ge]);else n.deleteFramebuffer(V.__webglFramebuffer);if(V.__webglDepthbuffer&&n.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&n.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer)for(let ge=0;ge<V.__webglColorRenderbuffer.length;ge++)V.__webglColorRenderbuffer[ge]&&n.deleteRenderbuffer(V.__webglColorRenderbuffer[ge]);V.__webglDepthRenderbuffer&&n.deleteRenderbuffer(V.__webglDepthRenderbuffer)}const te=J.textures;for(let ge=0,Ne=te.length;ge<Ne;ge++){const Te=i.get(te[ge]);Te.__webglTexture&&(n.deleteTexture(Te.__webglTexture),a.memory.textures--),i.remove(te[ge])}i.remove(J)}let G=0;function $(){G=0}function Q(){const J=G;return J>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+r.maxTextures),G+=1,J}function ce(J){const V=[];return V.push(J.wrapS),V.push(J.wrapT),V.push(J.wrapR||0),V.push(J.magFilter),V.push(J.minFilter),V.push(J.anisotropy),V.push(J.internalFormat),V.push(J.format),V.push(J.type),V.push(J.generateMipmaps),V.push(J.premultiplyAlpha),V.push(J.flipY),V.push(J.unpackAlignment),V.push(J.colorSpace),V.join()}function fe(J,V){const te=i.get(J);if(J.isVideoTexture&&He(J),J.isRenderTargetTexture===!1&&J.version>0&&te.__version!==J.version){const ge=J.image;if(ge===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ie(te,J,V);return}}t.bindTexture(n.TEXTURE_2D,te.__webglTexture,n.TEXTURE0+V)}function k(J,V){const te=i.get(J);if(J.version>0&&te.__version!==J.version){ie(te,J,V);return}t.bindTexture(n.TEXTURE_2D_ARRAY,te.__webglTexture,n.TEXTURE0+V)}function K(J,V){const te=i.get(J);if(J.version>0&&te.__version!==J.version){ie(te,J,V);return}t.bindTexture(n.TEXTURE_3D,te.__webglTexture,n.TEXTURE0+V)}function ee(J,V){const te=i.get(J);if(J.version>0&&te.__version!==J.version){_e(te,J,V);return}t.bindTexture(n.TEXTURE_CUBE_MAP,te.__webglTexture,n.TEXTURE0+V)}const me={[nc]:n.REPEAT,[Vs]:n.CLAMP_TO_EDGE,[_p]:n.MIRRORED_REPEAT},W={[Wi]:n.NEAREST,[Mb]:n.NEAREST_MIPMAP_NEAREST,[Kh]:n.NEAREST_MIPMAP_LINEAR,[Jn]:n.LINEAR,[pp]:n.LINEAR_MIPMAP_NEAREST,[mo]:n.LINEAR_MIPMAP_LINEAR},ae={[C6]:n.NEVER,[P6]:n.ALWAYS,[w6]:n.LESS,[JM]:n.LEQUAL,[R6]:n.EQUAL,[O6]:n.GEQUAL,[D6]:n.GREATER,[B6]:n.NOTEQUAL};function Se(J,V){if(V.type===ks&&e.has("OES_texture_float_linear")===!1&&(V.magFilter===Jn||V.magFilter===pp||V.magFilter===Kh||V.magFilter===mo||V.minFilter===Jn||V.minFilter===pp||V.minFilter===Kh||V.minFilter===mo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(J,n.TEXTURE_WRAP_S,me[V.wrapS]),n.texParameteri(J,n.TEXTURE_WRAP_T,me[V.wrapT]),(J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY)&&n.texParameteri(J,n.TEXTURE_WRAP_R,me[V.wrapR]),n.texParameteri(J,n.TEXTURE_MAG_FILTER,W[V.magFilter]),n.texParameteri(J,n.TEXTURE_MIN_FILTER,W[V.minFilter]),V.compareFunction&&(n.texParameteri(J,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(J,n.TEXTURE_COMPARE_FUNC,ae[V.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(V.magFilter===Wi||V.minFilter!==Kh&&V.minFilter!==mo||V.type===ks&&e.has("OES_texture_float_linear")===!1)return;if(V.anisotropy>1||i.get(V).__currentAnisotropy){const te=e.get("EXT_texture_filter_anisotropic");n.texParameterf(J,te.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,r.getMaxAnisotropy())),i.get(V).__currentAnisotropy=V.anisotropy}}}function Ae(J,V){let te=!1;J.__webglInit===void 0&&(J.__webglInit=!0,V.addEventListener("dispose",U));const ge=V.source;let Ne=v.get(ge);Ne===void 0&&(Ne={},v.set(ge,Ne));const Te=ce(V);if(Te!==J.__cacheKey){Ne[Te]===void 0&&(Ne[Te]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,te=!0),Ne[Te].usedTimes++;const tt=Ne[J.__cacheKey];tt!==void 0&&(Ne[J.__cacheKey].usedTimes--,tt.usedTimes===0&&L(V)),J.__cacheKey=Te,J.__webglTexture=Ne[Te].texture}return te}function ie(J,V,te){let ge=n.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(ge=n.TEXTURE_2D_ARRAY),V.isData3DTexture&&(ge=n.TEXTURE_3D);const Ne=Ae(J,V),Te=V.source;t.bindTexture(ge,J.__webglTexture,n.TEXTURE0+te);const tt=i.get(Te);if(Te.version!==tt.__version||Ne===!0){t.activeTexture(n.TEXTURE0+te);const $e=Rn.getPrimaries(Rn.workingColorSpace),ct=V.colorSpace===il?null:Rn.getPrimaries(V.colorSpace),Mt=V.colorSpace===il||$e===ct?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,V.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,V.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Mt);let qe=M(V.image,!1,r.maxTextureSize);qe=lt(V,qe);const ut=s.convert(V.format,V.colorSpace),vt=s.convert(V.type);let St=R(V.internalFormat,ut,vt,V.colorSpace,V.isVideoTexture);Se(ge,V);let it;const ue=V.mipmaps,Le=V.isVideoTexture!==!0,rt=tt.__version===void 0||Ne===!0,le=Te.dataReady,Je=N(V,qe);if(V.isDepthTexture)St=B(V.format===g0,V.type),rt&&(Le?t.texStorage2D(n.TEXTURE_2D,1,St,qe.width,qe.height):t.texImage2D(n.TEXTURE_2D,0,St,qe.width,qe.height,0,ut,vt,null));else if(V.isDataTexture)if(ue.length>0){Le&&rt&&t.texStorage2D(n.TEXTURE_2D,Je,St,ue[0].width,ue[0].height);for(let Oe=0,Ie=ue.length;Oe<Ie;Oe++)it=ue[Oe],Le?le&&t.texSubImage2D(n.TEXTURE_2D,Oe,0,0,it.width,it.height,ut,vt,it.data):t.texImage2D(n.TEXTURE_2D,Oe,St,it.width,it.height,0,ut,vt,it.data);V.generateMipmaps=!1}else Le?(rt&&t.texStorage2D(n.TEXTURE_2D,Je,St,qe.width,qe.height),le&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,qe.width,qe.height,ut,vt,qe.data)):t.texImage2D(n.TEXTURE_2D,0,St,qe.width,qe.height,0,ut,vt,qe.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){Le&&rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Je,St,ue[0].width,ue[0].height,qe.depth);for(let Oe=0,Ie=ue.length;Oe<Ie;Oe++)if(it=ue[Oe],V.format!==gs)if(ut!==null)if(Le){if(le)if(V.layerUpdates.size>0){const ht=DE(it.width,it.height,V.format,V.type);for(const at of V.layerUpdates){const wt=it.data.subarray(at*ht/it.data.BYTES_PER_ELEMENT,(at+1)*ht/it.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Oe,0,0,at,it.width,it.height,1,ut,wt)}V.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Oe,0,0,0,it.width,it.height,qe.depth,ut,it.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Oe,St,it.width,it.height,qe.depth,0,it.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Le?le&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Oe,0,0,0,it.width,it.height,qe.depth,ut,vt,it.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Oe,St,it.width,it.height,qe.depth,0,ut,vt,it.data)}else{Le&&rt&&t.texStorage2D(n.TEXTURE_2D,Je,St,ue[0].width,ue[0].height);for(let Oe=0,Ie=ue.length;Oe<Ie;Oe++)it=ue[Oe],V.format!==gs?ut!==null?Le?le&&t.compressedTexSubImage2D(n.TEXTURE_2D,Oe,0,0,it.width,it.height,ut,it.data):t.compressedTexImage2D(n.TEXTURE_2D,Oe,St,it.width,it.height,0,it.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?le&&t.texSubImage2D(n.TEXTURE_2D,Oe,0,0,it.width,it.height,ut,vt,it.data):t.texImage2D(n.TEXTURE_2D,Oe,St,it.width,it.height,0,ut,vt,it.data)}else if(V.isDataArrayTexture)if(Le){if(rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Je,St,qe.width,qe.height,qe.depth),le)if(V.layerUpdates.size>0){const Oe=DE(qe.width,qe.height,V.format,V.type);for(const Ie of V.layerUpdates){const ht=qe.data.subarray(Ie*Oe/qe.data.BYTES_PER_ELEMENT,(Ie+1)*Oe/qe.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ie,qe.width,qe.height,1,ut,vt,ht)}V.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,qe.width,qe.height,qe.depth,ut,vt,qe.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,St,qe.width,qe.height,qe.depth,0,ut,vt,qe.data);else if(V.isData3DTexture)Le?(rt&&t.texStorage3D(n.TEXTURE_3D,Je,St,qe.width,qe.height,qe.depth),le&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,qe.width,qe.height,qe.depth,ut,vt,qe.data)):t.texImage3D(n.TEXTURE_3D,0,St,qe.width,qe.height,qe.depth,0,ut,vt,qe.data);else if(V.isFramebufferTexture){if(rt)if(Le)t.texStorage2D(n.TEXTURE_2D,Je,St,qe.width,qe.height);else{let Oe=qe.width,Ie=qe.height;for(let ht=0;ht<Je;ht++)t.texImage2D(n.TEXTURE_2D,ht,St,Oe,Ie,0,ut,vt,null),Oe>>=1,Ie>>=1}}else if(ue.length>0){if(Le&&rt){const Oe=Ge(ue[0]);t.texStorage2D(n.TEXTURE_2D,Je,St,Oe.width,Oe.height)}for(let Oe=0,Ie=ue.length;Oe<Ie;Oe++)it=ue[Oe],Le?le&&t.texSubImage2D(n.TEXTURE_2D,Oe,0,0,ut,vt,it):t.texImage2D(n.TEXTURE_2D,Oe,St,ut,vt,it);V.generateMipmaps=!1}else if(Le){if(rt){const Oe=Ge(qe);t.texStorage2D(n.TEXTURE_2D,Je,St,Oe.width,Oe.height)}le&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ut,vt,qe)}else t.texImage2D(n.TEXTURE_2D,0,St,ut,vt,qe);A(V)&&S(ge),tt.__version=Te.version,V.onUpdate&&V.onUpdate(V)}J.__version=V.version}function _e(J,V,te){if(V.image.length!==6)return;const ge=Ae(J,V),Ne=V.source;t.bindTexture(n.TEXTURE_CUBE_MAP,J.__webglTexture,n.TEXTURE0+te);const Te=i.get(Ne);if(Ne.version!==Te.__version||ge===!0){t.activeTexture(n.TEXTURE0+te);const tt=Rn.getPrimaries(Rn.workingColorSpace),$e=V.colorSpace===il?null:Rn.getPrimaries(V.colorSpace),ct=V.colorSpace===il||tt===$e?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,V.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,V.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ct);const Mt=V.isCompressedTexture||V.image[0].isCompressedTexture,qe=V.image[0]&&V.image[0].isDataTexture,ut=[];for(let Ie=0;Ie<6;Ie++)!Mt&&!qe?ut[Ie]=M(V.image[Ie],!0,r.maxCubemapSize):ut[Ie]=qe?V.image[Ie].image:V.image[Ie],ut[Ie]=lt(V,ut[Ie]);const vt=ut[0],St=s.convert(V.format,V.colorSpace),it=s.convert(V.type),ue=R(V.internalFormat,St,it,V.colorSpace),Le=V.isVideoTexture!==!0,rt=Te.__version===void 0||ge===!0,le=Ne.dataReady;let Je=N(V,vt);Se(n.TEXTURE_CUBE_MAP,V);let Oe;if(Mt){Le&&rt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Je,ue,vt.width,vt.height);for(let Ie=0;Ie<6;Ie++){Oe=ut[Ie].mipmaps;for(let ht=0;ht<Oe.length;ht++){const at=Oe[ht];V.format!==gs?St!==null?Le?le&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,ht,0,0,at.width,at.height,St,at.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,ht,ue,at.width,at.height,0,at.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Le?le&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,ht,0,0,at.width,at.height,St,it,at.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,ht,ue,at.width,at.height,0,St,it,at.data)}}}else{if(Oe=V.mipmaps,Le&&rt){Oe.length>0&&Je++;const Ie=Ge(ut[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Je,ue,Ie.width,Ie.height)}for(let Ie=0;Ie<6;Ie++)if(qe){Le?le&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,ut[Ie].width,ut[Ie].height,St,it,ut[Ie].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,ue,ut[Ie].width,ut[Ie].height,0,St,it,ut[Ie].data);for(let ht=0;ht<Oe.length;ht++){const wt=Oe[ht].image[Ie].image;Le?le&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,ht+1,0,0,wt.width,wt.height,St,it,wt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,ht+1,ue,wt.width,wt.height,0,St,it,wt.data)}}else{Le?le&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,St,it,ut[Ie]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,ue,St,it,ut[Ie]);for(let ht=0;ht<Oe.length;ht++){const at=Oe[ht];Le?le&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,ht+1,0,0,St,it,at.image[Ie]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,ht+1,ue,St,it,at.image[Ie])}}}A(V)&&S(n.TEXTURE_CUBE_MAP),Te.__version=Ne.version,V.onUpdate&&V.onUpdate(V)}J.__version=V.version}function Ue(J,V,te,ge,Ne,Te){const tt=s.convert(te.format,te.colorSpace),$e=s.convert(te.type),ct=R(te.internalFormat,tt,$e,te.colorSpace),Mt=i.get(V),qe=i.get(te);if(qe.__renderTarget=V,!Mt.__hasExternalTextures){const ut=Math.max(1,V.width>>Te),vt=Math.max(1,V.height>>Te);Ne===n.TEXTURE_3D||Ne===n.TEXTURE_2D_ARRAY?t.texImage3D(Ne,Te,ct,ut,vt,V.depth,0,tt,$e,null):t.texImage2D(Ne,Te,ct,ut,vt,0,tt,$e,null)}t.bindFramebuffer(n.FRAMEBUFFER,J),je(V)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ge,Ne,qe.__webglTexture,0,Xe(V)):(Ne===n.TEXTURE_2D||Ne>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ne<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ge,Ne,qe.__webglTexture,Te),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ke(J,V,te){if(n.bindRenderbuffer(n.RENDERBUFFER,J),V.depthBuffer){const ge=V.depthTexture,Ne=ge&&ge.isDepthTexture?ge.type:null,Te=B(V.stencilBuffer,Ne),tt=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,$e=Xe(V);je(V)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,$e,Te,V.width,V.height):te?n.renderbufferStorageMultisample(n.RENDERBUFFER,$e,Te,V.width,V.height):n.renderbufferStorage(n.RENDERBUFFER,Te,V.width,V.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,tt,n.RENDERBUFFER,J)}else{const ge=V.textures;for(let Ne=0;Ne<ge.length;Ne++){const Te=ge[Ne],tt=s.convert(Te.format,Te.colorSpace),$e=s.convert(Te.type),ct=R(Te.internalFormat,tt,$e,Te.colorSpace),Mt=Xe(V);te&&je(V)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Mt,ct,V.width,V.height):je(V)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Mt,ct,V.width,V.height):n.renderbufferStorage(n.RENDERBUFFER,ct,V.width,V.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ye(J,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,J),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ge=i.get(V.depthTexture);ge.__renderTarget=V,(!ge.__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),fe(V.depthTexture,0);const Ne=ge.__webglTexture,Te=Xe(V);if(V.depthTexture.format===m0)je(V)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ne,0,Te):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ne,0);else if(V.depthTexture.format===g0)je(V)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ne,0,Te):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ne,0);else throw new Error("Unknown depthTexture format")}function gt(J){const V=i.get(J),te=J.isWebGLCubeRenderTarget===!0;if(V.__boundDepthTexture!==J.depthTexture){const ge=J.depthTexture;if(V.__depthDisposeCallback&&V.__depthDisposeCallback(),ge){const Ne=()=>{delete V.__boundDepthTexture,delete V.__depthDisposeCallback,ge.removeEventListener("dispose",Ne)};ge.addEventListener("dispose",Ne),V.__depthDisposeCallback=Ne}V.__boundDepthTexture=ge}if(J.depthTexture&&!V.__autoAllocateDepthBuffer){if(te)throw new Error("target.depthTexture not supported in Cube render targets");const ge=J.texture.mipmaps;ge&&ge.length>0?Ye(V.__webglFramebuffer[0],J):Ye(V.__webglFramebuffer,J)}else if(te){V.__webglDepthbuffer=[];for(let ge=0;ge<6;ge++)if(t.bindFramebuffer(n.FRAMEBUFFER,V.__webglFramebuffer[ge]),V.__webglDepthbuffer[ge]===void 0)V.__webglDepthbuffer[ge]=n.createRenderbuffer(),ke(V.__webglDepthbuffer[ge],J,!1);else{const Ne=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Te=V.__webglDepthbuffer[ge];n.bindRenderbuffer(n.RENDERBUFFER,Te),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ne,n.RENDERBUFFER,Te)}}else{const ge=J.texture.mipmaps;if(ge&&ge.length>0?t.bindFramebuffer(n.FRAMEBUFFER,V.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer===void 0)V.__webglDepthbuffer=n.createRenderbuffer(),ke(V.__webglDepthbuffer,J,!1);else{const Ne=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Te=V.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Te),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ne,n.RENDERBUFFER,Te)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function _t(J,V,te){const ge=i.get(J);V!==void 0&&Ue(ge.__webglFramebuffer,J,J.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),te!==void 0&&gt(J)}function an(J){const V=J.texture,te=i.get(J),ge=i.get(V);J.addEventListener("dispose",I);const Ne=J.textures,Te=J.isWebGLCubeRenderTarget===!0,tt=Ne.length>1;if(tt||(ge.__webglTexture===void 0&&(ge.__webglTexture=n.createTexture()),ge.__version=V.version,a.memory.textures++),Te){te.__webglFramebuffer=[];for(let $e=0;$e<6;$e++)if(V.mipmaps&&V.mipmaps.length>0){te.__webglFramebuffer[$e]=[];for(let ct=0;ct<V.mipmaps.length;ct++)te.__webglFramebuffer[$e][ct]=n.createFramebuffer()}else te.__webglFramebuffer[$e]=n.createFramebuffer()}else{if(V.mipmaps&&V.mipmaps.length>0){te.__webglFramebuffer=[];for(let $e=0;$e<V.mipmaps.length;$e++)te.__webglFramebuffer[$e]=n.createFramebuffer()}else te.__webglFramebuffer=n.createFramebuffer();if(tt)for(let $e=0,ct=Ne.length;$e<ct;$e++){const Mt=i.get(Ne[$e]);Mt.__webglTexture===void 0&&(Mt.__webglTexture=n.createTexture(),a.memory.textures++)}if(J.samples>0&&je(J)===!1){te.__webglMultisampledFramebuffer=n.createFramebuffer(),te.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,te.__webglMultisampledFramebuffer);for(let $e=0;$e<Ne.length;$e++){const ct=Ne[$e];te.__webglColorRenderbuffer[$e]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,te.__webglColorRenderbuffer[$e]);const Mt=s.convert(ct.format,ct.colorSpace),qe=s.convert(ct.type),ut=R(ct.internalFormat,Mt,qe,ct.colorSpace,J.isXRRenderTarget===!0),vt=Xe(J);n.renderbufferStorageMultisample(n.RENDERBUFFER,vt,ut,J.width,J.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+$e,n.RENDERBUFFER,te.__webglColorRenderbuffer[$e])}n.bindRenderbuffer(n.RENDERBUFFER,null),J.depthBuffer&&(te.__webglDepthRenderbuffer=n.createRenderbuffer(),ke(te.__webglDepthRenderbuffer,J,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Te){t.bindTexture(n.TEXTURE_CUBE_MAP,ge.__webglTexture),Se(n.TEXTURE_CUBE_MAP,V);for(let $e=0;$e<6;$e++)if(V.mipmaps&&V.mipmaps.length>0)for(let ct=0;ct<V.mipmaps.length;ct++)Ue(te.__webglFramebuffer[$e][ct],J,V,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+$e,ct);else Ue(te.__webglFramebuffer[$e],J,V,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0);A(V)&&S(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(tt){for(let $e=0,ct=Ne.length;$e<ct;$e++){const Mt=Ne[$e],qe=i.get(Mt);t.bindTexture(n.TEXTURE_2D,qe.__webglTexture),Se(n.TEXTURE_2D,Mt),Ue(te.__webglFramebuffer,J,Mt,n.COLOR_ATTACHMENT0+$e,n.TEXTURE_2D,0),A(Mt)&&S(n.TEXTURE_2D)}t.unbindTexture()}else{let $e=n.TEXTURE_2D;if((J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&($e=J.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture($e,ge.__webglTexture),Se($e,V),V.mipmaps&&V.mipmaps.length>0)for(let ct=0;ct<V.mipmaps.length;ct++)Ue(te.__webglFramebuffer[ct],J,V,n.COLOR_ATTACHMENT0,$e,ct);else Ue(te.__webglFramebuffer,J,V,n.COLOR_ATTACHMENT0,$e,0);A(V)&&S($e),t.unbindTexture()}J.depthBuffer&&gt(J)}function Pt(J){const V=J.textures;for(let te=0,ge=V.length;te<ge;te++){const Ne=V[te];if(A(Ne)){const Te=C(J),tt=i.get(Ne).__webglTexture;t.bindTexture(Te,tt),S(Te),t.unbindTexture()}}}const bt=[],Z=[];function Qe(J){if(J.samples>0){if(je(J)===!1){const V=J.textures,te=J.width,ge=J.height;let Ne=n.COLOR_BUFFER_BIT;const Te=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,tt=i.get(J),$e=V.length>1;if($e)for(let Mt=0;Mt<V.length;Mt++)t.bindFramebuffer(n.FRAMEBUFFER,tt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Mt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,tt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Mt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,tt.__webglMultisampledFramebuffer);const ct=J.texture.mipmaps;ct&&ct.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,tt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,tt.__webglFramebuffer);for(let Mt=0;Mt<V.length;Mt++){if(J.resolveDepthBuffer&&(J.depthBuffer&&(Ne|=n.DEPTH_BUFFER_BIT),J.stencilBuffer&&J.resolveStencilBuffer&&(Ne|=n.STENCIL_BUFFER_BIT)),$e){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,tt.__webglColorRenderbuffer[Mt]);const qe=i.get(V[Mt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,qe,0)}n.blitFramebuffer(0,0,te,ge,0,0,te,ge,Ne,n.NEAREST),u===!0&&(bt.length=0,Z.length=0,bt.push(n.COLOR_ATTACHMENT0+Mt),J.depthBuffer&&J.resolveDepthBuffer===!1&&(bt.push(Te),Z.push(Te),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Z)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,bt))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),$e)for(let Mt=0;Mt<V.length;Mt++){t.bindFramebuffer(n.FRAMEBUFFER,tt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Mt,n.RENDERBUFFER,tt.__webglColorRenderbuffer[Mt]);const qe=i.get(V[Mt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,tt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Mt,n.TEXTURE_2D,qe,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,tt.__webglMultisampledFramebuffer)}else if(J.depthBuffer&&J.resolveDepthBuffer===!1&&u){const V=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[V])}}}function Xe(J){return Math.min(r.maxSamples,J.samples)}function je(J){const V=i.get(J);return J.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function He(J){const V=a.render.frame;m.get(J)!==V&&(m.set(J,V),J.update())}function lt(J,V){const te=J.colorSpace,ge=J.format,Ne=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||te!==rc&&te!==il&&(Rn.getTransfer(te)===Kn?(ge!==gs||Ne!==Mr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",te)),V}function Ge(J){return typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement?(h.width=J.naturalWidth||J.width,h.height=J.naturalHeight||J.height):typeof VideoFrame<"u"&&J instanceof VideoFrame?(h.width=J.displayWidth,h.height=J.displayHeight):(h.width=J.width,h.height=J.height),h}this.allocateTextureUnit=Q,this.resetTextureUnits=$,this.setTexture2D=fe,this.setTexture2DArray=k,this.setTexture3D=K,this.setTextureCube=ee,this.rebindTextures=_t,this.setupRenderTarget=an,this.updateRenderTargetMipmap=Pt,this.updateMultisampleRenderTarget=Qe,this.setupDepthRenderbuffer=gt,this.setupFrameBufferTexture=Ue,this.useMultisampledRTT=je}function OO(n,e){function t(i,r=il){let s;const a=Rn.getTransfer(r);if(i===Mr)return n.UNSIGNED_BYTE;if(i===Cb)return n.UNSIGNED_SHORT_4_4_4_4;if(i===wb)return n.UNSIGNED_SHORT_5_5_5_1;if(i===VM)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===HM)return n.BYTE;if(i===GM)return n.SHORT;if(i===d0)return n.UNSIGNED_SHORT;if(i===Tb)return n.INT;if(i===ic)return n.UNSIGNED_INT;if(i===ks)return n.FLOAT;if(i===tu)return n.HALF_FLOAT;if(i===kM)return n.ALPHA;if(i===jM)return n.RGB;if(i===gs)return n.RGBA;if(i===m0)return n.DEPTH_COMPONENT;if(i===g0)return n.DEPTH_STENCIL;if(i===Rb)return n.RED;if(i===Xv)return n.RED_INTEGER;if(i===XM)return n.RG;if(i===Db)return n.RG_INTEGER;if(i===Bb)return n.RGBA_INTEGER;if(i===$g||i===Zg||i===Qg||i===ev)if(a===Kn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===$g)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Zg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Qg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===ev)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===$g)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Zg)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Qg)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===ev)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===g_||i===v_||i===y_||i===x_)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===g_)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===v_)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===y_)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===x_)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===__||i===b_||i===S_)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===__||i===b_)return a===Kn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===S_)return a===Kn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===A_||i===E_||i===M_||i===T_||i===C_||i===w_||i===R_||i===D_||i===B_||i===O_||i===P_||i===U_||i===L_||i===N_)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===A_)return a===Kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===E_)return a===Kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===M_)return a===Kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===T_)return a===Kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===C_)return a===Kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===w_)return a===Kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===R_)return a===Kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===D_)return a===Kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===B_)return a===Kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===O_)return a===Kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===P_)return a===Kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===U_)return a===Kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===L_)return a===Kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===N_)return a===Kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===tv||i===I_||i===F_)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===tv)return a===Kn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===I_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===F_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===WM||i===z_||i===H_||i===G_)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===tv)return s.COMPRESSED_RED_RGTC1_EXT;if(i===z_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===H_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===G_)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===p0?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const rk=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,sk=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ak{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new kn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new tr({vertexShader:rk,fragmentShader:sk,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ai(new Hp(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class ok extends La{constructor(e,t){super();const i=this;let r=null,s=1,a=null,l="local-floor",u=1,h=null,m=null,g=null,v=null,x=null,b=null;const M=new ak,A=t.getContextAttributes();let S=null,C=null;const R=[],B=[],N=new Pe;let U=null;const I=new pi;I.viewport=new Kt;const z=new pi;z.viewport=new Kt;const L=[I,z],O=new xO;let G=null,$=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let _e=R[ie];return _e===void 0&&(_e=new Qx,R[ie]=_e),_e.getTargetRaySpace()},this.getControllerGrip=function(ie){let _e=R[ie];return _e===void 0&&(_e=new Qx,R[ie]=_e),_e.getGripSpace()},this.getHand=function(ie){let _e=R[ie];return _e===void 0&&(_e=new Qx,R[ie]=_e),_e.getHandSpace()};function Q(ie){const _e=B.indexOf(ie.inputSource);if(_e===-1)return;const Ue=R[_e];Ue!==void 0&&(Ue.update(ie.inputSource,ie.frame,h||a),Ue.dispatchEvent({type:ie.type,data:ie.inputSource}))}function ce(){r.removeEventListener("select",Q),r.removeEventListener("selectstart",Q),r.removeEventListener("selectend",Q),r.removeEventListener("squeeze",Q),r.removeEventListener("squeezestart",Q),r.removeEventListener("squeezeend",Q),r.removeEventListener("end",ce),r.removeEventListener("inputsourceschange",fe);for(let ie=0;ie<R.length;ie++){const _e=B[ie];_e!==null&&(B[ie]=null,R[ie].disconnect(_e))}G=null,$=null,M.reset(),e.setRenderTarget(S),x=null,v=null,g=null,r=null,C=null,Ae.stop(),i.isPresenting=!1,e.setPixelRatio(U),e.setSize(N.width,N.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ie){s=ie,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ie){l=ie,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||a},this.setReferenceSpace=function(ie){h=ie},this.getBaseLayer=function(){return v!==null?v:x},this.getBinding=function(){return g},this.getFrame=function(){return b},this.getSession=function(){return r},this.setSession=async function(ie){if(r=ie,r!==null){if(S=e.getRenderTarget(),r.addEventListener("select",Q),r.addEventListener("selectstart",Q),r.addEventListener("selectend",Q),r.addEventListener("squeeze",Q),r.addEventListener("squeezestart",Q),r.addEventListener("squeezeend",Q),r.addEventListener("end",ce),r.addEventListener("inputsourceschange",fe),A.xrCompatible!==!0&&await t.makeXRCompatible(),U=e.getPixelRatio(),e.getSize(N),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ue=null,ke=null,Ye=null;A.depth&&(Ye=A.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ue=A.stencil?g0:m0,ke=A.stencil?p0:ic);const gt={colorFormat:t.RGBA8,depthFormat:Ye,scaleFactor:s};g=new XRWebGLBinding(r,t),v=g.createProjectionLayer(gt),r.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),C=new Ni(v.textureWidth,v.textureHeight,{format:gs,type:Mr,depthTexture:new zp(v.textureWidth,v.textureHeight,ke,void 0,void 0,void 0,void 0,void 0,void 0,Ue),stencilBuffer:A.stencil,colorSpace:e.outputColorSpace,samples:A.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const Ue={antialias:A.antialias,alpha:!0,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:s};x=new XRWebGLLayer(r,t,Ue),r.updateRenderState({baseLayer:x}),e.setPixelRatio(1),e.setSize(x.framebufferWidth,x.framebufferHeight,!1),C=new Ni(x.framebufferWidth,x.framebufferHeight,{format:gs,type:Mr,colorSpace:e.outputColorSpace,stencilBuffer:A.stencil,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}C.isXRRenderTarget=!0,this.setFoveation(u),h=null,a=await r.requestReferenceSpace(l),Ae.setContext(r),Ae.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return M.getDepthTexture()};function fe(ie){for(let _e=0;_e<ie.removed.length;_e++){const Ue=ie.removed[_e],ke=B.indexOf(Ue);ke>=0&&(B[ke]=null,R[ke].disconnect(Ue))}for(let _e=0;_e<ie.added.length;_e++){const Ue=ie.added[_e];let ke=B.indexOf(Ue);if(ke===-1){for(let gt=0;gt<R.length;gt++)if(gt>=B.length){B.push(Ue),ke=gt;break}else if(B[gt]===null){B[gt]=Ue,ke=gt;break}if(ke===-1)break}const Ye=R[ke];Ye&&Ye.connect(Ue)}}const k=new q,K=new q;function ee(ie,_e,Ue){k.setFromMatrixPosition(_e.matrixWorld),K.setFromMatrixPosition(Ue.matrixWorld);const ke=k.distanceTo(K),Ye=_e.projectionMatrix.elements,gt=Ue.projectionMatrix.elements,_t=Ye[14]/(Ye[10]-1),an=Ye[14]/(Ye[10]+1),Pt=(Ye[9]+1)/Ye[5],bt=(Ye[9]-1)/Ye[5],Z=(Ye[8]-1)/Ye[0],Qe=(gt[8]+1)/gt[0],Xe=_t*Z,je=_t*Qe,He=ke/(-Z+Qe),lt=He*-Z;if(_e.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(lt),ie.translateZ(He),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert(),Ye[10]===-1)ie.projectionMatrix.copy(_e.projectionMatrix),ie.projectionMatrixInverse.copy(_e.projectionMatrixInverse);else{const Ge=_t+He,J=an+He,V=Xe-lt,te=je+(ke-lt),ge=Pt*an/J*Ge,Ne=bt*an/J*Ge;ie.projectionMatrix.makePerspective(V,te,ge,Ne,Ge,J),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}}function me(ie,_e){_e===null?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(_e.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(r===null)return;let _e=ie.near,Ue=ie.far;M.texture!==null&&(M.depthNear>0&&(_e=M.depthNear),M.depthFar>0&&(Ue=M.depthFar)),O.near=z.near=I.near=_e,O.far=z.far=I.far=Ue,(G!==O.near||$!==O.far)&&(r.updateRenderState({depthNear:O.near,depthFar:O.far}),G=O.near,$=O.far),I.layers.mask=ie.layers.mask|2,z.layers.mask=ie.layers.mask|4,O.layers.mask=I.layers.mask|z.layers.mask;const ke=ie.parent,Ye=O.cameras;me(O,ke);for(let gt=0;gt<Ye.length;gt++)me(Ye[gt],ke);Ye.length===2?ee(O,I,z):O.projectionMatrix.copy(I.projectionMatrix),W(ie,O,ke)};function W(ie,_e,Ue){Ue===null?ie.matrix.copy(_e.matrixWorld):(ie.matrix.copy(Ue.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(_e.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0),ie.projectionMatrix.copy(_e.projectionMatrix),ie.projectionMatrixInverse.copy(_e.projectionMatrixInverse),ie.isPerspectiveCamera&&(ie.fov=Ap*2*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(v===null&&x===null))return u},this.setFoveation=function(ie){u=ie,v!==null&&(v.fixedFoveation=ie),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=ie)},this.hasDepthSensing=function(){return M.texture!==null},this.getDepthSensingMesh=function(){return M.getMesh(O)};let ae=null;function Se(ie,_e){if(m=_e.getViewerPose(h||a),b=_e,m!==null){const Ue=m.views;x!==null&&(e.setRenderTargetFramebuffer(C,x.framebuffer),e.setRenderTarget(C));let ke=!1;Ue.length!==O.cameras.length&&(O.cameras.length=0,ke=!0);for(let _t=0;_t<Ue.length;_t++){const an=Ue[_t];let Pt=null;if(x!==null)Pt=x.getViewport(an);else{const Z=g.getViewSubImage(v,an);Pt=Z.viewport,_t===0&&(e.setRenderTargetTextures(C,Z.colorTexture,Z.depthStencilTexture),e.setRenderTarget(C))}let bt=L[_t];bt===void 0&&(bt=new pi,bt.layers.enable(_t),bt.viewport=new Kt,L[_t]=bt),bt.matrix.fromArray(an.transform.matrix),bt.matrix.decompose(bt.position,bt.quaternion,bt.scale),bt.projectionMatrix.fromArray(an.projectionMatrix),bt.projectionMatrixInverse.copy(bt.projectionMatrix).invert(),bt.viewport.set(Pt.x,Pt.y,Pt.width,Pt.height),_t===0&&(O.matrix.copy(bt.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),ke===!0&&O.cameras.push(bt)}const Ye=r.enabledFeatures;if(Ye&&Ye.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&g){const _t=g.getDepthInformation(Ue[0]);_t&&_t.isValid&&_t.texture&&M.init(e,_t,r.renderState)}}for(let Ue=0;Ue<R.length;Ue++){const ke=B[Ue],Ye=R[Ue];ke!==null&&Ye!==void 0&&Ye.update(ke,_e,h||a)}ae&&ae(ie,_e),_e.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:_e}),b=null}const Ae=new CO;Ae.setAnimationLoop(Se),this.setAnimationLoop=function(ie){ae=ie},this.dispose=function(){}}}const Fh=new fr,lk=new ft;function ck(n,e){function t(A,S){A.matrixAutoUpdate===!0&&A.updateMatrix(),S.value.copy(A.matrix)}function i(A,S){S.color.getRGB(A.fogColor.value,F6(n)),S.isFog?(A.fogNear.value=S.near,A.fogFar.value=S.far):S.isFogExp2&&(A.fogDensity.value=S.density)}function r(A,S,C,R,B){S.isMeshBasicMaterial||S.isMeshLambertMaterial?s(A,S):S.isMeshToonMaterial?(s(A,S),g(A,S)):S.isMeshPhongMaterial?(s(A,S),m(A,S)):S.isMeshStandardMaterial?(s(A,S),v(A,S),S.isMeshPhysicalMaterial&&x(A,S,B)):S.isMeshMatcapMaterial?(s(A,S),b(A,S)):S.isMeshDepthMaterial?s(A,S):S.isMeshDistanceMaterial?(s(A,S),M(A,S)):S.isMeshNormalMaterial?s(A,S):S.isLineBasicMaterial?(a(A,S),S.isLineDashedMaterial&&l(A,S)):S.isPointsMaterial?u(A,S,C,R):S.isSpriteMaterial?h(A,S):S.isShadowMaterial?(A.color.value.copy(S.color),A.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function s(A,S){A.opacity.value=S.opacity,S.color&&A.diffuse.value.copy(S.color),S.emissive&&A.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(A.map.value=S.map,t(S.map,A.mapTransform)),S.alphaMap&&(A.alphaMap.value=S.alphaMap,t(S.alphaMap,A.alphaMapTransform)),S.bumpMap&&(A.bumpMap.value=S.bumpMap,t(S.bumpMap,A.bumpMapTransform),A.bumpScale.value=S.bumpScale,S.side===ur&&(A.bumpScale.value*=-1)),S.normalMap&&(A.normalMap.value=S.normalMap,t(S.normalMap,A.normalMapTransform),A.normalScale.value.copy(S.normalScale),S.side===ur&&A.normalScale.value.negate()),S.displacementMap&&(A.displacementMap.value=S.displacementMap,t(S.displacementMap,A.displacementMapTransform),A.displacementScale.value=S.displacementScale,A.displacementBias.value=S.displacementBias),S.emissiveMap&&(A.emissiveMap.value=S.emissiveMap,t(S.emissiveMap,A.emissiveMapTransform)),S.specularMap&&(A.specularMap.value=S.specularMap,t(S.specularMap,A.specularMapTransform)),S.alphaTest>0&&(A.alphaTest.value=S.alphaTest);const C=e.get(S),R=C.envMap,B=C.envMapRotation;R&&(A.envMap.value=R,Fh.copy(B),Fh.x*=-1,Fh.y*=-1,Fh.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(Fh.y*=-1,Fh.z*=-1),A.envMapRotation.value.setFromMatrix4(lk.makeRotationFromEuler(Fh)),A.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,A.reflectivity.value=S.reflectivity,A.ior.value=S.ior,A.refractionRatio.value=S.refractionRatio),S.lightMap&&(A.lightMap.value=S.lightMap,A.lightMapIntensity.value=S.lightMapIntensity,t(S.lightMap,A.lightMapTransform)),S.aoMap&&(A.aoMap.value=S.aoMap,A.aoMapIntensity.value=S.aoMapIntensity,t(S.aoMap,A.aoMapTransform))}function a(A,S){A.diffuse.value.copy(S.color),A.opacity.value=S.opacity,S.map&&(A.map.value=S.map,t(S.map,A.mapTransform))}function l(A,S){A.dashSize.value=S.dashSize,A.totalSize.value=S.dashSize+S.gapSize,A.scale.value=S.scale}function u(A,S,C,R){A.diffuse.value.copy(S.color),A.opacity.value=S.opacity,A.size.value=S.size*C,A.scale.value=R*.5,S.map&&(A.map.value=S.map,t(S.map,A.uvTransform)),S.alphaMap&&(A.alphaMap.value=S.alphaMap,t(S.alphaMap,A.alphaMapTransform)),S.alphaTest>0&&(A.alphaTest.value=S.alphaTest)}function h(A,S){A.diffuse.value.copy(S.color),A.opacity.value=S.opacity,A.rotation.value=S.rotation,S.map&&(A.map.value=S.map,t(S.map,A.mapTransform)),S.alphaMap&&(A.alphaMap.value=S.alphaMap,t(S.alphaMap,A.alphaMapTransform)),S.alphaTest>0&&(A.alphaTest.value=S.alphaTest)}function m(A,S){A.specular.value.copy(S.specular),A.shininess.value=Math.max(S.shininess,1e-4)}function g(A,S){S.gradientMap&&(A.gradientMap.value=S.gradientMap)}function v(A,S){A.metalness.value=S.metalness,S.metalnessMap&&(A.metalnessMap.value=S.metalnessMap,t(S.metalnessMap,A.metalnessMapTransform)),A.roughness.value=S.roughness,S.roughnessMap&&(A.roughnessMap.value=S.roughnessMap,t(S.roughnessMap,A.roughnessMapTransform)),S.envMap&&(A.envMapIntensity.value=S.envMapIntensity)}function x(A,S,C){A.ior.value=S.ior,S.sheen>0&&(A.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),A.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(A.sheenColorMap.value=S.sheenColorMap,t(S.sheenColorMap,A.sheenColorMapTransform)),S.sheenRoughnessMap&&(A.sheenRoughnessMap.value=S.sheenRoughnessMap,t(S.sheenRoughnessMap,A.sheenRoughnessMapTransform))),S.clearcoat>0&&(A.clearcoat.value=S.clearcoat,A.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(A.clearcoatMap.value=S.clearcoatMap,t(S.clearcoatMap,A.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(A.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,t(S.clearcoatRoughnessMap,A.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(A.clearcoatNormalMap.value=S.clearcoatNormalMap,t(S.clearcoatNormalMap,A.clearcoatNormalMapTransform),A.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===ur&&A.clearcoatNormalScale.value.negate())),S.dispersion>0&&(A.dispersion.value=S.dispersion),S.iridescence>0&&(A.iridescence.value=S.iridescence,A.iridescenceIOR.value=S.iridescenceIOR,A.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],A.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(A.iridescenceMap.value=S.iridescenceMap,t(S.iridescenceMap,A.iridescenceMapTransform)),S.iridescenceThicknessMap&&(A.iridescenceThicknessMap.value=S.iridescenceThicknessMap,t(S.iridescenceThicknessMap,A.iridescenceThicknessMapTransform))),S.transmission>0&&(A.transmission.value=S.transmission,A.transmissionSamplerMap.value=C.texture,A.transmissionSamplerSize.value.set(C.width,C.height),S.transmissionMap&&(A.transmissionMap.value=S.transmissionMap,t(S.transmissionMap,A.transmissionMapTransform)),A.thickness.value=S.thickness,S.thicknessMap&&(A.thicknessMap.value=S.thicknessMap,t(S.thicknessMap,A.thicknessMapTransform)),A.attenuationDistance.value=S.attenuationDistance,A.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(A.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(A.anisotropyMap.value=S.anisotropyMap,t(S.anisotropyMap,A.anisotropyMapTransform))),A.specularIntensity.value=S.specularIntensity,A.specularColor.value.copy(S.specularColor),S.specularColorMap&&(A.specularColorMap.value=S.specularColorMap,t(S.specularColorMap,A.specularColorMapTransform)),S.specularIntensityMap&&(A.specularIntensityMap.value=S.specularIntensityMap,t(S.specularIntensityMap,A.specularIntensityMapTransform))}function b(A,S){S.matcap&&(A.matcap.value=S.matcap)}function M(A,S){const C=e.get(S).light;A.referencePosition.value.setFromMatrixPosition(C.matrixWorld),A.nearDistance.value=C.shadow.camera.near,A.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function uk(n,e,t,i){let r={},s={},a=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function u(C,R){const B=R.program;i.uniformBlockBinding(C,B)}function h(C,R){let B=r[C.id];B===void 0&&(b(C),B=m(C),r[C.id]=B,C.addEventListener("dispose",A));const N=R.program;i.updateUBOMapping(C,N);const U=e.render.frame;s[C.id]!==U&&(v(C),s[C.id]=U)}function m(C){const R=g();C.__bindingPointIndex=R;const B=n.createBuffer(),N=C.__size,U=C.usage;return n.bindBuffer(n.UNIFORM_BUFFER,B),n.bufferData(n.UNIFORM_BUFFER,N,U),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,R,B),B}function g(){for(let C=0;C<l;C++)if(a.indexOf(C)===-1)return a.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(C){const R=r[C.id],B=C.uniforms,N=C.__cache;n.bindBuffer(n.UNIFORM_BUFFER,R);for(let U=0,I=B.length;U<I;U++){const z=Array.isArray(B[U])?B[U]:[B[U]];for(let L=0,O=z.length;L<O;L++){const G=z[L];if(x(G,U,L,N)===!0){const $=G.__offset,Q=Array.isArray(G.value)?G.value:[G.value];let ce=0;for(let fe=0;fe<Q.length;fe++){const k=Q[fe],K=M(k);typeof k=="number"||typeof k=="boolean"?(G.__data[0]=k,n.bufferSubData(n.UNIFORM_BUFFER,$+ce,G.__data)):k.isMatrix3?(G.__data[0]=k.elements[0],G.__data[1]=k.elements[1],G.__data[2]=k.elements[2],G.__data[3]=0,G.__data[4]=k.elements[3],G.__data[5]=k.elements[4],G.__data[6]=k.elements[5],G.__data[7]=0,G.__data[8]=k.elements[6],G.__data[9]=k.elements[7],G.__data[10]=k.elements[8],G.__data[11]=0):(k.toArray(G.__data,ce),ce+=K.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,$,G.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function x(C,R,B,N){const U=C.value,I=R+"_"+B;if(N[I]===void 0)return typeof U=="number"||typeof U=="boolean"?N[I]=U:N[I]=U.clone(),!0;{const z=N[I];if(typeof U=="number"||typeof U=="boolean"){if(z!==U)return N[I]=U,!0}else if(z.equals(U)===!1)return z.copy(U),!0}return!1}function b(C){const R=C.uniforms;let B=0;const N=16;for(let I=0,z=R.length;I<z;I++){const L=Array.isArray(R[I])?R[I]:[R[I]];for(let O=0,G=L.length;O<G;O++){const $=L[O],Q=Array.isArray($.value)?$.value:[$.value];for(let ce=0,fe=Q.length;ce<fe;ce++){const k=Q[ce],K=M(k),ee=B%N,me=ee%K.boundary,W=ee+me;B+=me,W!==0&&N-W<K.storage&&(B+=N-W),$.__data=new Float32Array(K.storage/Float32Array.BYTES_PER_ELEMENT),$.__offset=B,B+=K.storage}}}const U=B%N;return U>0&&(B+=N-U),C.__size=B,C.__cache={},this}function M(C){const R={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(R.boundary=4,R.storage=4):C.isVector2?(R.boundary=8,R.storage=8):C.isVector3||C.isColor?(R.boundary=16,R.storage=12):C.isVector4?(R.boundary=16,R.storage=16):C.isMatrix3?(R.boundary=48,R.storage=48):C.isMatrix4?(R.boundary=64,R.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),R}function A(C){const R=C.target;R.removeEventListener("dispose",A);const B=a.indexOf(R.__bindingPointIndex);a.splice(B,1),n.deleteBuffer(r[R.id]),delete r[R.id],delete s[R.id]}function S(){for(const C in r)n.deleteBuffer(r[C]);a=[],r={},s={}}return{bind:u,update:h,dispose:S}}class PO{constructor(e={}){const{canvas:t=L6(),context:i=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:h=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:v=!1}=e;this.isWebGLRenderer=!0;let x;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");x=i.getContextAttributes().alpha}else x=a;const b=new Uint32Array(4),M=new Int32Array(4);let A=null,S=null;const C=[],R=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=al,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const B=this;let N=!1;this._outputColorSpace=Fn;let U=0,I=0,z=null,L=-1,O=null;const G=new Kt,$=new Kt;let Q=null;const ce=new Ze(0);let fe=0,k=t.width,K=t.height,ee=1,me=null,W=null;const ae=new Kt(0,0,k,K),Se=new Kt(0,0,k,K);let Ae=!1;const ie=new Fp;let _e=!1,Ue=!1;const ke=new ft,Ye=new ft,gt=new q,_t=new Kt,an={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Pt=!1;function bt(){return z===null?ee:1}let Z=i;function Qe(X,pe){return t.getContext(X,pe)}try{const X={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:m,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${wf}`),t.addEventListener("webglcontextlost",Ie,!1),t.addEventListener("webglcontextrestored",ht,!1),t.addEventListener("webglcontextcreationerror",at,!1),Z===null){const pe="webgl2";if(Z=Qe(pe,X),Z===null)throw Qe(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(X){throw console.error("THREE.WebGLRenderer: "+X.message),X}let Xe,je,He,lt,Ge,J,V,te,ge,Ne,Te,tt,$e,ct,Mt,qe,ut,vt,St,it,ue,Le,rt,le;function Je(){Xe=new SG(Z),Xe.init(),Le=new OO(Z,Xe),je=new mG(Z,Xe,e,Le),He=new nk(Z,Xe),je.reverseDepthBuffer&&v&&He.buffers.depth.setReversed(!0),lt=new MG(Z),Ge=new kV,J=new ik(Z,Xe,He,Ge,je,Le,lt),V=new vG(B),te=new bG(B),ge=new BF(Z),rt=new dG(Z,ge),Ne=new AG(Z,ge,lt,rt),Te=new CG(Z,Ne,ge,lt),St=new TG(Z,je,J),qe=new gG(Ge),tt=new VV(B,V,te,Xe,je,rt,qe),$e=new ck(B,Ge),ct=new XV,Mt=new $V(Xe),vt=new hG(B,V,te,He,Te,x,u),ut=new ek(B,Te,je),le=new uk(Z,lt,je,He),it=new pG(Z,Xe,lt),ue=new EG(Z,Xe,lt),lt.programs=tt.programs,B.capabilities=je,B.extensions=Xe,B.properties=Ge,B.renderLists=ct,B.shadowMap=ut,B.state=He,B.info=lt}Je();const Oe=new ok(B,Z);this.xr=Oe,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const X=Xe.get("WEBGL_lose_context");X&&X.loseContext()},this.forceContextRestore=function(){const X=Xe.get("WEBGL_lose_context");X&&X.restoreContext()},this.getPixelRatio=function(){return ee},this.setPixelRatio=function(X){X!==void 0&&(ee=X,this.setSize(k,K,!1))},this.getSize=function(X){return X.set(k,K)},this.setSize=function(X,pe,we=!0){if(Oe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}k=X,K=pe,t.width=Math.floor(X*ee),t.height=Math.floor(pe*ee),we===!0&&(t.style.width=X+"px",t.style.height=pe+"px"),this.setViewport(0,0,X,pe)},this.getDrawingBufferSize=function(X){return X.set(k*ee,K*ee).floor()},this.setDrawingBufferSize=function(X,pe,we){k=X,K=pe,ee=we,t.width=Math.floor(X*we),t.height=Math.floor(pe*we),this.setViewport(0,0,X,pe)},this.getCurrentViewport=function(X){return X.copy(G)},this.getViewport=function(X){return X.copy(ae)},this.setViewport=function(X,pe,we,Re){X.isVector4?ae.set(X.x,X.y,X.z,X.w):ae.set(X,pe,we,Re),He.viewport(G.copy(ae).multiplyScalar(ee).round())},this.getScissor=function(X){return X.copy(Se)},this.setScissor=function(X,pe,we,Re){X.isVector4?Se.set(X.x,X.y,X.z,X.w):Se.set(X,pe,we,Re),He.scissor($.copy(Se).multiplyScalar(ee).round())},this.getScissorTest=function(){return Ae},this.setScissorTest=function(X){He.setScissorTest(Ae=X)},this.setOpaqueSort=function(X){me=X},this.setTransparentSort=function(X){W=X},this.getClearColor=function(X){return X.copy(vt.getClearColor())},this.setClearColor=function(){vt.setClearColor(...arguments)},this.getClearAlpha=function(){return vt.getClearAlpha()},this.setClearAlpha=function(){vt.setClearAlpha(...arguments)},this.clear=function(X=!0,pe=!0,we=!0){let Re=0;if(X){let ye=!1;if(z!==null){const Ke=z.texture.format;ye=Ke===Bb||Ke===Db||Ke===Xv}if(ye){const Ke=z.texture.type,st=Ke===Mr||Ke===ic||Ke===d0||Ke===p0||Ke===Cb||Ke===wb,ot=vt.getClearColor(),yt=vt.getClearAlpha(),Ft=ot.r,Dt=ot.g,Tt=ot.b;st?(b[0]=Ft,b[1]=Dt,b[2]=Tt,b[3]=yt,Z.clearBufferuiv(Z.COLOR,0,b)):(M[0]=Ft,M[1]=Dt,M[2]=Tt,M[3]=yt,Z.clearBufferiv(Z.COLOR,0,M))}else Re|=Z.COLOR_BUFFER_BIT}pe&&(Re|=Z.DEPTH_BUFFER_BIT),we&&(Re|=Z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Z.clear(Re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ie,!1),t.removeEventListener("webglcontextrestored",ht,!1),t.removeEventListener("webglcontextcreationerror",at,!1),vt.dispose(),ct.dispose(),Mt.dispose(),Ge.dispose(),V.dispose(),te.dispose(),Te.dispose(),rt.dispose(),le.dispose(),tt.dispose(),Oe.dispose(),Oe.removeEventListener("sessionstart",Fi),Oe.removeEventListener("sessionend",Yi),Rr.stop()};function Ie(X){X.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function ht(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const X=lt.autoReset,pe=ut.enabled,we=ut.autoUpdate,Re=ut.needsUpdate,ye=ut.type;Je(),lt.autoReset=X,ut.enabled=pe,ut.autoUpdate=we,ut.needsUpdate=Re,ut.type=ye}function at(X){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",X.statusMessage)}function wt(X){const pe=X.target;pe.removeEventListener("dispose",wt),on(pe)}function on(X){On(X),Ge.remove(X)}function On(X){const pe=Ge.get(X).programs;pe!==void 0&&(pe.forEach(function(we){tt.releaseProgram(we)}),X.isShaderMaterial&&tt.releaseShaderCache(X))}this.renderBufferDirect=function(X,pe,we,Re,ye,Ke){pe===null&&(pe=an);const st=ye.isMesh&&ye.matrixWorld.determinant()<0,ot=dl(X,pe,we,Re,ye);He.setMaterial(Re,st);let yt=we.index,Ft=1;if(Re.wireframe===!0){if(yt=Ne.getWireframeAttribute(we),yt===void 0)return;Ft=2}const Dt=we.drawRange,Tt=we.attributes.position;let un=Dt.start*Ft,Tn=(Dt.start+Dt.count)*Ft;Ke!==null&&(un=Math.max(un,Ke.start*Ft),Tn=Math.min(Tn,(Ke.start+Ke.count)*Ft)),yt!==null?(un=Math.max(un,0),Tn=Math.min(Tn,yt.count)):Tt!=null&&(un=Math.max(un,0),Tn=Math.min(Tn,Tt.count));const oi=Tn-un;if(oi<0||oi===1/0)return;rt.setup(ye,Re,ot,we,yt);let dn,gn=it;if(yt!==null&&(dn=ge.get(yt),gn=ue,gn.setIndex(dn)),ye.isMesh)Re.wireframe===!0?(He.setLineWidth(Re.wireframeLinewidth*bt()),gn.setMode(Z.LINES)):gn.setMode(Z.TRIANGLES);else if(ye.isLine){let Bt=Re.linewidth;Bt===void 0&&(Bt=1),He.setLineWidth(Bt*bt()),ye.isLineSegments?gn.setMode(Z.LINES):ye.isLineLoop?gn.setMode(Z.LINE_LOOP):gn.setMode(Z.LINE_STRIP)}else ye.isPoints?gn.setMode(Z.POINTS):ye.isSprite&&gn.setMode(Z.TRIANGLES);if(ye.isBatchedMesh)if(ye._multiDrawInstances!==null)Zx("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),gn.renderMultiDrawInstances(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount,ye._multiDrawInstances);else if(Xe.get("WEBGL_multi_draw"))gn.renderMultiDraw(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount);else{const Bt=ye._multiDrawStarts,fi=ye._multiDrawCounts,An=ye._multiDrawCount,dr=yt?ge.get(yt).bytesPerElement:1,Ia=Ge.get(Re).currentProgram.getUniforms();for(let jn=0;jn<An;jn++)Ia.setValue(Z,"_gl_DrawID",jn),gn.render(Bt[jn]/dr,fi[jn])}else if(ye.isInstancedMesh)gn.renderInstances(un,oi,ye.count);else if(we.isInstancedBufferGeometry){const Bt=we._maxInstanceCount!==void 0?we._maxInstanceCount:1/0,fi=Math.min(we.instanceCount,Bt);gn.renderInstances(un,oi,fi)}else gn.render(un,oi)};function en(X,pe,we){X.transparent===!0&&X.side===ps&&X.forceSinglePass===!1?(X.side=ur,X.needsUpdate=!0,Hn(X,pe,we),X.side=ll,X.needsUpdate=!0,Hn(X,pe,we),X.side=ps):Hn(X,pe,we)}this.compile=function(X,pe,we=null){we===null&&(we=X),S=Mt.get(we),S.init(pe),R.push(S),we.traverseVisible(function(ye){ye.isLight&&ye.layers.test(pe.layers)&&(S.pushLight(ye),ye.castShadow&&S.pushShadow(ye))}),X!==we&&X.traverseVisible(function(ye){ye.isLight&&ye.layers.test(pe.layers)&&(S.pushLight(ye),ye.castShadow&&S.pushShadow(ye))}),S.setupLights();const Re=new Set;return X.traverse(function(ye){if(!(ye.isMesh||ye.isPoints||ye.isLine||ye.isSprite))return;const Ke=ye.material;if(Ke)if(Array.isArray(Ke))for(let st=0;st<Ke.length;st++){const ot=Ke[st];en(ot,we,ye),Re.add(ot)}else en(Ke,we,ye),Re.add(Ke)}),S=R.pop(),Re},this.compileAsync=function(X,pe,we=null){const Re=this.compile(X,pe,we);return new Promise(ye=>{function Ke(){if(Re.forEach(function(st){Ge.get(st).currentProgram.isReady()&&Re.delete(st)}),Re.size===0){ye(X);return}setTimeout(Ke,10)}Xe.get("KHR_parallel_shader_compile")!==null?Ke():setTimeout(Ke,10)})};let Ii=null;function ai(X){Ii&&Ii(X)}function Fi(){Rr.stop()}function Yi(){Rr.start()}const Rr=new CO;Rr.setAnimationLoop(ai),typeof self<"u"&&Rr.setContext(self),this.setAnimationLoop=function(X){Ii=X,Oe.setAnimationLoop(X),X===null?Rr.stop():Rr.start()},Oe.addEventListener("sessionstart",Fi),Oe.addEventListener("sessionend",Yi),this.render=function(X,pe){if(pe!==void 0&&pe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;if(X.matrixWorldAutoUpdate===!0&&X.updateMatrixWorld(),pe.parent===null&&pe.matrixWorldAutoUpdate===!0&&pe.updateMatrixWorld(),Oe.enabled===!0&&Oe.isPresenting===!0&&(Oe.cameraAutoUpdate===!0&&Oe.updateCamera(pe),pe=Oe.getCamera()),X.isScene===!0&&X.onBeforeRender(B,X,pe,z),S=Mt.get(X,R.length),S.init(pe),R.push(S),Ye.multiplyMatrices(pe.projectionMatrix,pe.matrixWorldInverse),ie.setFromProjectionMatrix(Ye),Ue=this.localClippingEnabled,_e=qe.init(this.clippingPlanes,Ue),A=ct.get(X,C.length),A.init(),C.push(A),Oe.enabled===!0&&Oe.isPresenting===!0){const Ke=B.xr.getDepthSensingMesh();Ke!==null&&es(Ke,pe,-1/0,B.sortObjects)}es(X,pe,0,B.sortObjects),A.finish(),B.sortObjects===!0&&A.sort(me,W),Pt=Oe.enabled===!1||Oe.isPresenting===!1||Oe.hasDepthSensing()===!1,Pt&&vt.addToRenderList(A,X),this.info.render.frame++,_e===!0&&qe.beginShadows();const we=S.state.shadowsArray;ut.render(we,X,pe),_e===!0&&qe.endShadows(),this.info.autoReset===!0&&this.info.reset();const Re=A.opaque,ye=A.transmissive;if(S.setupLights(),pe.isArrayCamera){const Ke=pe.cameras;if(ye.length>0)for(let st=0,ot=Ke.length;st<ot;st++){const yt=Ke[st];pa(Re,ye,X,yt)}Pt&&vt.render(X);for(let st=0,ot=Ke.length;st<ot;st++){const yt=Ke[st];Uf(A,X,yt,yt.viewport)}}else ye.length>0&&pa(Re,ye,X,pe),Pt&&vt.render(X),Uf(A,X,pe);z!==null&&I===0&&(J.updateMultisampleRenderTarget(z),J.updateRenderTargetMipmap(z)),X.isScene===!0&&X.onAfterRender(B,X,pe),rt.resetDefaultState(),L=-1,O=null,R.pop(),R.length>0?(S=R[R.length-1],_e===!0&&qe.setGlobalState(B.clippingPlanes,S.state.camera)):S=null,C.pop(),C.length>0?A=C[C.length-1]:A=null};function es(X,pe,we,Re){if(X.visible===!1)return;if(X.layers.test(pe.layers)){if(X.isGroup)we=X.renderOrder;else if(X.isLOD)X.autoUpdate===!0&&X.update(pe);else if(X.isLight)S.pushLight(X),X.castShadow&&S.pushShadow(X);else if(X.isSprite){if(!X.frustumCulled||ie.intersectsSprite(X)){Re&&_t.setFromMatrixPosition(X.matrixWorld).applyMatrix4(Ye);const st=Te.update(X),ot=X.material;ot.visible&&A.push(X,st,ot,we,_t.z,null)}}else if((X.isMesh||X.isLine||X.isPoints)&&(!X.frustumCulled||ie.intersectsObject(X))){const st=Te.update(X),ot=X.material;if(Re&&(X.boundingSphere!==void 0?(X.boundingSphere===null&&X.computeBoundingSphere(),_t.copy(X.boundingSphere.center)):(st.boundingSphere===null&&st.computeBoundingSphere(),_t.copy(st.boundingSphere.center)),_t.applyMatrix4(X.matrixWorld).applyMatrix4(Ye)),Array.isArray(ot)){const yt=st.groups;for(let Ft=0,Dt=yt.length;Ft<Dt;Ft++){const Tt=yt[Ft],un=ot[Tt.materialIndex];un&&un.visible&&A.push(X,st,un,we,_t.z,Tt)}}else ot.visible&&A.push(X,st,ot,we,_t.z,null)}}const Ke=X.children;for(let st=0,ot=Ke.length;st<ot;st++)es(Ke[st],pe,we,Re)}function Uf(X,pe,we,Re){const ye=X.opaque,Ke=X.transmissive,st=X.transparent;S.setupLightsView(we),_e===!0&&qe.setGlobalState(B.clippingPlanes,we),Re&&He.viewport(G.copy(Re)),ye.length>0&&zr(ye,pe,we),Ke.length>0&&zr(Ke,pe,we),st.length>0&&zr(st,pe,we),He.buffers.depth.setTest(!0),He.buffers.depth.setMask(!0),He.buffers.color.setMask(!0),He.setPolygonOffset(!1)}function pa(X,pe,we,Re){if((we.isScene===!0?we.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[Re.id]===void 0&&(S.state.transmissionRenderTarget[Re.id]=new Ni(1,1,{generateMipmaps:!0,type:Xe.has("EXT_color_buffer_half_float")||Xe.has("EXT_color_buffer_float")?tu:Mr,minFilter:mo,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Rn.workingColorSpace}));const Ke=S.state.transmissionRenderTarget[Re.id],st=Re.viewport||G;Ke.setSize(st.z*B.transmissionResolutionScale,st.w*B.transmissionResolutionScale);const ot=B.getRenderTarget();B.setRenderTarget(Ke),B.getClearColor(ce),fe=B.getClearAlpha(),fe<1&&B.setClearColor(16777215,.5),B.clear(),Pt&&vt.render(we);const yt=B.toneMapping;B.toneMapping=al;const Ft=Re.viewport;if(Re.viewport!==void 0&&(Re.viewport=void 0),S.setupLightsView(Re),_e===!0&&qe.setGlobalState(B.clippingPlanes,Re),zr(X,we,Re),J.updateMultisampleRenderTarget(Ke),J.updateRenderTargetMipmap(Ke),Xe.has("WEBGL_multisampled_render_to_texture")===!1){let Dt=!1;for(let Tt=0,un=pe.length;Tt<un;Tt++){const Tn=pe[Tt],oi=Tn.object,dn=Tn.geometry,gn=Tn.material,Bt=Tn.group;if(gn.side===ps&&oi.layers.test(Re.layers)){const fi=gn.side;gn.side=ur,gn.needsUpdate=!0,ma(oi,we,Re,dn,gn,Bt),gn.side=fi,gn.needsUpdate=!0,Dt=!0}}Dt===!0&&(J.updateMultisampleRenderTarget(Ke),J.updateRenderTargetMipmap(Ke))}B.setRenderTarget(ot),B.setClearColor(ce,fe),Ft!==void 0&&(Re.viewport=Ft),B.toneMapping=yt}function zr(X,pe,we){const Re=pe.isScene===!0?pe.overrideMaterial:null;for(let ye=0,Ke=X.length;ye<Ke;ye++){const st=X[ye],ot=st.object,yt=st.geometry,Ft=st.group;let Dt=st.material;Dt.allowOverride===!0&&Re!==null&&(Dt=Re),ot.layers.test(we.layers)&&ma(ot,pe,we,yt,Dt,Ft)}}function ma(X,pe,we,Re,ye,Ke){X.onBeforeRender(B,pe,we,Re,ye,Ke),X.modelViewMatrix.multiplyMatrices(we.matrixWorldInverse,X.matrixWorld),X.normalMatrix.getNormalMatrix(X.modelViewMatrix),ye.onBeforeRender(B,pe,we,Re,X,Ke),ye.transparent===!0&&ye.side===ps&&ye.forceSinglePass===!1?(ye.side=ur,ye.needsUpdate=!0,B.renderBufferDirect(we,pe,Re,ye,X,Ke),ye.side=ll,ye.needsUpdate=!0,B.renderBufferDirect(we,pe,Re,ye,X,Ke),ye.side=ps):B.renderBufferDirect(we,pe,Re,ye,X,Ke),X.onAfterRender(B,pe,we,Re,ye,Ke)}function Hn(X,pe,we){pe.isScene!==!0&&(pe=an);const Re=Ge.get(X),ye=S.state.lights,Ke=S.state.shadowsArray,st=ye.state.version,ot=tt.getParameters(X,ye.state,Ke,pe,we),yt=tt.getProgramCacheKey(ot);let Ft=Re.programs;Re.environment=X.isMeshStandardMaterial?pe.environment:null,Re.fog=pe.fog,Re.envMap=(X.isMeshStandardMaterial?te:V).get(X.envMap||Re.environment),Re.envMapRotation=Re.environment!==null&&X.envMap===null?pe.environmentRotation:X.envMapRotation,Ft===void 0&&(X.addEventListener("dispose",wt),Ft=new Map,Re.programs=Ft);let Dt=Ft.get(yt);if(Dt!==void 0){if(Re.currentProgram===Dt&&Re.lightsStateVersion===st)return va(X,ot),Dt}else ot.uniforms=tt.getUniforms(X),X.onBeforeCompile(ot,B),Dt=tt.acquireProgram(ot,yt),Ft.set(yt,Dt),Re.uniforms=ot.uniforms;const Tt=Re.uniforms;return(!X.isShaderMaterial&&!X.isRawShaderMaterial||X.clipping===!0)&&(Tt.clippingPlanes=qe.uniform),va(X,ot),Re.needsLights=zi(X),Re.lightsStateVersion=st,Re.needsLights&&(Tt.ambientLightColor.value=ye.state.ambient,Tt.lightProbe.value=ye.state.probe,Tt.directionalLights.value=ye.state.directional,Tt.directionalLightShadows.value=ye.state.directionalShadow,Tt.spotLights.value=ye.state.spot,Tt.spotLightShadows.value=ye.state.spotShadow,Tt.rectAreaLights.value=ye.state.rectArea,Tt.ltc_1.value=ye.state.rectAreaLTC1,Tt.ltc_2.value=ye.state.rectAreaLTC2,Tt.pointLights.value=ye.state.point,Tt.pointLightShadows.value=ye.state.pointShadow,Tt.hemisphereLights.value=ye.state.hemi,Tt.directionalShadowMap.value=ye.state.directionalShadowMap,Tt.directionalShadowMatrix.value=ye.state.directionalShadowMatrix,Tt.spotShadowMap.value=ye.state.spotShadowMap,Tt.spotLightMatrix.value=ye.state.spotLightMatrix,Tt.spotLightMap.value=ye.state.spotLightMap,Tt.pointShadowMap.value=ye.state.pointShadowMap,Tt.pointShadowMatrix.value=ye.state.pointShadowMatrix),Re.currentProgram=Dt,Re.uniformsList=null,Dt}function ga(X){if(X.uniformsList===null){const pe=X.currentProgram.getUniforms();X.uniformsList=e_.seqWithValue(pe.seq,X.uniforms)}return X.uniformsList}function va(X,pe){const we=Ge.get(X);we.outputColorSpace=pe.outputColorSpace,we.batching=pe.batching,we.batchingColor=pe.batchingColor,we.instancing=pe.instancing,we.instancingColor=pe.instancingColor,we.instancingMorph=pe.instancingMorph,we.skinning=pe.skinning,we.morphTargets=pe.morphTargets,we.morphNormals=pe.morphNormals,we.morphColors=pe.morphColors,we.morphTargetsCount=pe.morphTargetsCount,we.numClippingPlanes=pe.numClippingPlanes,we.numIntersection=pe.numClipIntersection,we.vertexAlphas=pe.vertexAlphas,we.vertexTangents=pe.vertexTangents,we.toneMapping=pe.toneMapping}function dl(X,pe,we,Re,ye){pe.isScene!==!0&&(pe=an),J.resetTextureUnits();const Ke=pe.fog,st=Re.isMeshStandardMaterial?pe.environment:null,ot=z===null?B.outputColorSpace:z.isXRRenderTarget===!0?z.texture.colorSpace:rc,yt=(Re.isMeshStandardMaterial?te:V).get(Re.envMap||st),Ft=Re.vertexColors===!0&&!!we.attributes.color&&we.attributes.color.itemSize===4,Dt=!!we.attributes.tangent&&(!!Re.normalMap||Re.anisotropy>0),Tt=!!we.morphAttributes.position,un=!!we.morphAttributes.normal,Tn=!!we.morphAttributes.color;let oi=al;Re.toneMapped&&(z===null||z.isXRRenderTarget===!0)&&(oi=B.toneMapping);const dn=we.morphAttributes.position||we.morphAttributes.normal||we.morphAttributes.color,gn=dn!==void 0?dn.length:0,Bt=Ge.get(Re),fi=S.state.lights;if(_e===!0&&(Ue===!0||X!==O)){const nr=X===O&&Re.id===L;qe.setState(Re,X,nr)}let An=!1;Re.version===Bt.__version?(Bt.needsLights&&Bt.lightsStateVersion!==fi.state.version||Bt.outputColorSpace!==ot||ye.isBatchedMesh&&Bt.batching===!1||!ye.isBatchedMesh&&Bt.batching===!0||ye.isBatchedMesh&&Bt.batchingColor===!0&&ye.colorTexture===null||ye.isBatchedMesh&&Bt.batchingColor===!1&&ye.colorTexture!==null||ye.isInstancedMesh&&Bt.instancing===!1||!ye.isInstancedMesh&&Bt.instancing===!0||ye.isSkinnedMesh&&Bt.skinning===!1||!ye.isSkinnedMesh&&Bt.skinning===!0||ye.isInstancedMesh&&Bt.instancingColor===!0&&ye.instanceColor===null||ye.isInstancedMesh&&Bt.instancingColor===!1&&ye.instanceColor!==null||ye.isInstancedMesh&&Bt.instancingMorph===!0&&ye.morphTexture===null||ye.isInstancedMesh&&Bt.instancingMorph===!1&&ye.morphTexture!==null||Bt.envMap!==yt||Re.fog===!0&&Bt.fog!==Ke||Bt.numClippingPlanes!==void 0&&(Bt.numClippingPlanes!==qe.numPlanes||Bt.numIntersection!==qe.numIntersection)||Bt.vertexAlphas!==Ft||Bt.vertexTangents!==Dt||Bt.morphTargets!==Tt||Bt.morphNormals!==un||Bt.morphColors!==Tn||Bt.toneMapping!==oi||Bt.morphTargetsCount!==gn)&&(An=!0):(An=!0,Bt.__version=Re.version);let dr=Bt.currentProgram;An===!0&&(dr=Hn(Re,pe,ye));let Ia=!1,jn=!1,Fa=!1;const Gn=dr.getUniforms(),pr=Bt.uniforms;if(He.useProgram(dr.program)&&(Ia=!0,jn=!0,Fa=!0),Re.id!==L&&(L=Re.id,jn=!0),Ia||O!==X){He.buffers.depth.getReversed()?(ke.copy(X.projectionMatrix),tI(ke),nI(ke),Gn.setValue(Z,"projectionMatrix",ke)):Gn.setValue(Z,"projectionMatrix",X.projectionMatrix),Gn.setValue(Z,"viewMatrix",X.matrixWorldInverse);const ir=Gn.map.cameraPosition;ir!==void 0&&ir.setValue(Z,gt.setFromMatrixPosition(X.matrixWorld)),je.logarithmicDepthBuffer&&Gn.setValue(Z,"logDepthBufFC",2/(Math.log(X.far+1)/Math.LN2)),(Re.isMeshPhongMaterial||Re.isMeshToonMaterial||Re.isMeshLambertMaterial||Re.isMeshBasicMaterial||Re.isMeshStandardMaterial||Re.isShaderMaterial)&&Gn.setValue(Z,"isOrthographic",X.isOrthographicCamera===!0),O!==X&&(O=X,jn=!0,Fa=!0)}if(ye.isSkinnedMesh){Gn.setOptional(Z,ye,"bindMatrix"),Gn.setOptional(Z,ye,"bindMatrixInverse");const nr=ye.skeleton;nr&&(nr.boneTexture===null&&nr.computeBoneTexture(),Gn.setValue(Z,"boneTexture",nr.boneTexture,J))}ye.isBatchedMesh&&(Gn.setOptional(Z,ye,"batchingTexture"),Gn.setValue(Z,"batchingTexture",ye._matricesTexture,J),Gn.setOptional(Z,ye,"batchingIdTexture"),Gn.setValue(Z,"batchingIdTexture",ye._indirectTexture,J),Gn.setOptional(Z,ye,"batchingColorTexture"),ye._colorsTexture!==null&&Gn.setValue(Z,"batchingColorTexture",ye._colorsTexture,J));const Hi=we.morphAttributes;if((Hi.position!==void 0||Hi.normal!==void 0||Hi.color!==void 0)&&St.update(ye,we,dr),(jn||Bt.receiveShadow!==ye.receiveShadow)&&(Bt.receiveShadow=ye.receiveShadow,Gn.setValue(Z,"receiveShadow",ye.receiveShadow)),Re.isMeshGouraudMaterial&&Re.envMap!==null&&(pr.envMap.value=yt,pr.flipEnvMap.value=yt.isCubeTexture&&yt.isRenderTargetTexture===!1?-1:1),Re.isMeshStandardMaterial&&Re.envMap===null&&pe.environment!==null&&(pr.envMapIntensity.value=pe.environmentIntensity),jn&&(Gn.setValue(Z,"toneMappingExposure",B.toneMappingExposure),Bt.needsLights&&Ao(pr,Fa),Ke&&Re.fog===!0&&$e.refreshFogUniforms(pr,Ke),$e.refreshMaterialUniforms(pr,Re,ee,K,S.state.transmissionRenderTarget[X.id]),e_.upload(Z,ga(Bt),pr,J)),Re.isShaderMaterial&&Re.uniformsNeedUpdate===!0&&(e_.upload(Z,ga(Bt),pr,J),Re.uniformsNeedUpdate=!1),Re.isSpriteMaterial&&Gn.setValue(Z,"center",ye.center),Gn.setValue(Z,"modelViewMatrix",ye.modelViewMatrix),Gn.setValue(Z,"normalMatrix",ye.normalMatrix),Gn.setValue(Z,"modelMatrix",ye.matrixWorld),Re.isShaderMaterial||Re.isRawShaderMaterial){const nr=Re.uniformsGroups;for(let ir=0,Hr=nr.length;ir<Hr;ir++){const za=nr[ir];le.update(za,dr),le.bind(za,dr)}}return dr}function Ao(X,pe){X.ambientLightColor.needsUpdate=pe,X.lightProbe.needsUpdate=pe,X.directionalLights.needsUpdate=pe,X.directionalLightShadows.needsUpdate=pe,X.pointLights.needsUpdate=pe,X.pointLightShadows.needsUpdate=pe,X.spotLights.needsUpdate=pe,X.spotLightShadows.needsUpdate=pe,X.rectAreaLights.needsUpdate=pe,X.hemisphereLights.needsUpdate=pe}function zi(X){return X.isMeshLambertMaterial||X.isMeshToonMaterial||X.isMeshPhongMaterial||X.isMeshStandardMaterial||X.isShadowMaterial||X.isShaderMaterial&&X.lights===!0}this.getActiveCubeFace=function(){return U},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(X,pe,we){const Re=Ge.get(X);Re.__autoAllocateDepthBuffer=X.resolveDepthBuffer===!1,Re.__autoAllocateDepthBuffer===!1&&(Re.__useRenderToTexture=!1),Ge.get(X.texture).__webglTexture=pe,Ge.get(X.depthTexture).__webglTexture=Re.__autoAllocateDepthBuffer?void 0:we,Re.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(X,pe){const we=Ge.get(X);we.__webglFramebuffer=pe,we.__useDefaultFramebuffer=pe===void 0};const ru=Z.createFramebuffer();this.setRenderTarget=function(X,pe=0,we=0){z=X,U=pe,I=we;let Re=!0,ye=null,Ke=!1,st=!1;if(X){const yt=Ge.get(X);if(yt.__useDefaultFramebuffer!==void 0)He.bindFramebuffer(Z.FRAMEBUFFER,null),Re=!1;else if(yt.__webglFramebuffer===void 0)J.setupRenderTarget(X);else if(yt.__hasExternalTextures)J.rebindTextures(X,Ge.get(X.texture).__webglTexture,Ge.get(X.depthTexture).__webglTexture);else if(X.depthBuffer){const Tt=X.depthTexture;if(yt.__boundDepthTexture!==Tt){if(Tt!==null&&Ge.has(Tt)&&(X.width!==Tt.image.width||X.height!==Tt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");J.setupDepthRenderbuffer(X)}}const Ft=X.texture;(Ft.isData3DTexture||Ft.isDataArrayTexture||Ft.isCompressedArrayTexture)&&(st=!0);const Dt=Ge.get(X).__webglFramebuffer;X.isWebGLCubeRenderTarget?(Array.isArray(Dt[pe])?ye=Dt[pe][we]:ye=Dt[pe],Ke=!0):X.samples>0&&J.useMultisampledRTT(X)===!1?ye=Ge.get(X).__webglMultisampledFramebuffer:Array.isArray(Dt)?ye=Dt[we]:ye=Dt,G.copy(X.viewport),$.copy(X.scissor),Q=X.scissorTest}else G.copy(ae).multiplyScalar(ee).floor(),$.copy(Se).multiplyScalar(ee).floor(),Q=Ae;if(we!==0&&(ye=ru),He.bindFramebuffer(Z.FRAMEBUFFER,ye)&&Re&&He.drawBuffers(X,ye),He.viewport(G),He.scissor($),He.setScissorTest(Q),Ke){const yt=Ge.get(X.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+pe,yt.__webglTexture,we)}else if(st){const yt=Ge.get(X.texture),Ft=pe;Z.framebufferTextureLayer(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,yt.__webglTexture,we,Ft)}else if(X!==null&&we!==0){const yt=Ge.get(X.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,yt.__webglTexture,we)}L=-1},this.readRenderTargetPixels=function(X,pe,we,Re,ye,Ke,st){if(!(X&&X.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ot=Ge.get(X).__webglFramebuffer;if(X.isWebGLCubeRenderTarget&&st!==void 0&&(ot=ot[st]),ot){He.bindFramebuffer(Z.FRAMEBUFFER,ot);try{const yt=X.texture,Ft=yt.format,Dt=yt.type;if(!je.textureFormatReadable(Ft)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!je.textureTypeReadable(Dt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}pe>=0&&pe<=X.width-Re&&we>=0&&we<=X.height-ye&&Z.readPixels(pe,we,Re,ye,Le.convert(Ft),Le.convert(Dt),Ke)}finally{const yt=z!==null?Ge.get(z).__webglFramebuffer:null;He.bindFramebuffer(Z.FRAMEBUFFER,yt)}}},this.readRenderTargetPixelsAsync=async function(X,pe,we,Re,ye,Ke,st){if(!(X&&X.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ot=Ge.get(X).__webglFramebuffer;if(X.isWebGLCubeRenderTarget&&st!==void 0&&(ot=ot[st]),ot)if(pe>=0&&pe<=X.width-Re&&we>=0&&we<=X.height-ye){He.bindFramebuffer(Z.FRAMEBUFFER,ot);const yt=X.texture,Ft=yt.format,Dt=yt.type;if(!je.textureFormatReadable(Ft))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!je.textureTypeReadable(Dt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Tt=Z.createBuffer();Z.bindBuffer(Z.PIXEL_PACK_BUFFER,Tt),Z.bufferData(Z.PIXEL_PACK_BUFFER,Ke.byteLength,Z.STREAM_READ),Z.readPixels(pe,we,Re,ye,Le.convert(Ft),Le.convert(Dt),0);const un=z!==null?Ge.get(z).__webglFramebuffer:null;He.bindFramebuffer(Z.FRAMEBUFFER,un);const Tn=Z.fenceSync(Z.SYNC_GPU_COMMANDS_COMPLETE,0);return Z.flush(),await eI(Z,Tn,4),Z.bindBuffer(Z.PIXEL_PACK_BUFFER,Tt),Z.getBufferSubData(Z.PIXEL_PACK_BUFFER,0,Ke),Z.deleteBuffer(Tt),Z.deleteSync(Tn),Ke}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(X,pe=null,we=0){const Re=Math.pow(2,-we),ye=Math.floor(X.image.width*Re),Ke=Math.floor(X.image.height*Re),st=pe!==null?pe.x:0,ot=pe!==null?pe.y:0;J.setTexture2D(X,0),Z.copyTexSubImage2D(Z.TEXTURE_2D,we,0,0,st,ot,ye,Ke),He.unbindTexture()};const su=Z.createFramebuffer(),ya=Z.createFramebuffer();this.copyTextureToTexture=function(X,pe,we=null,Re=null,ye=0,Ke=null){Ke===null&&(ye!==0?(Zx("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ke=ye,ye=0):Ke=0);let st,ot,yt,Ft,Dt,Tt,un,Tn,oi;const dn=X.isCompressedTexture?X.mipmaps[Ke]:X.image;if(we!==null)st=we.max.x-we.min.x,ot=we.max.y-we.min.y,yt=we.isBox3?we.max.z-we.min.z:1,Ft=we.min.x,Dt=we.min.y,Tt=we.isBox3?we.min.z:0;else{const Hi=Math.pow(2,-ye);st=Math.floor(dn.width*Hi),ot=Math.floor(dn.height*Hi),X.isDataArrayTexture?yt=dn.depth:X.isData3DTexture?yt=Math.floor(dn.depth*Hi):yt=1,Ft=0,Dt=0,Tt=0}Re!==null?(un=Re.x,Tn=Re.y,oi=Re.z):(un=0,Tn=0,oi=0);const gn=Le.convert(pe.format),Bt=Le.convert(pe.type);let fi;pe.isData3DTexture?(J.setTexture3D(pe,0),fi=Z.TEXTURE_3D):pe.isDataArrayTexture||pe.isCompressedArrayTexture?(J.setTexture2DArray(pe,0),fi=Z.TEXTURE_2D_ARRAY):(J.setTexture2D(pe,0),fi=Z.TEXTURE_2D),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,pe.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pe.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,pe.unpackAlignment);const An=Z.getParameter(Z.UNPACK_ROW_LENGTH),dr=Z.getParameter(Z.UNPACK_IMAGE_HEIGHT),Ia=Z.getParameter(Z.UNPACK_SKIP_PIXELS),jn=Z.getParameter(Z.UNPACK_SKIP_ROWS),Fa=Z.getParameter(Z.UNPACK_SKIP_IMAGES);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,dn.width),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,dn.height),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,Ft),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,Dt),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Tt);const Gn=X.isDataArrayTexture||X.isData3DTexture,pr=pe.isDataArrayTexture||pe.isData3DTexture;if(X.isDepthTexture){const Hi=Ge.get(X),nr=Ge.get(pe),ir=Ge.get(Hi.__renderTarget),Hr=Ge.get(nr.__renderTarget);He.bindFramebuffer(Z.READ_FRAMEBUFFER,ir.__webglFramebuffer),He.bindFramebuffer(Z.DRAW_FRAMEBUFFER,Hr.__webglFramebuffer);for(let za=0;za<yt;za++)Gn&&(Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Ge.get(X).__webglTexture,ye,Tt+za),Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Ge.get(pe).__webglTexture,Ke,oi+za)),Z.blitFramebuffer(Ft,Dt,st,ot,un,Tn,st,ot,Z.DEPTH_BUFFER_BIT,Z.NEAREST);He.bindFramebuffer(Z.READ_FRAMEBUFFER,null),He.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else if(ye!==0||X.isRenderTargetTexture||Ge.has(X)){const Hi=Ge.get(X),nr=Ge.get(pe);He.bindFramebuffer(Z.READ_FRAMEBUFFER,su),He.bindFramebuffer(Z.DRAW_FRAMEBUFFER,ya);for(let ir=0;ir<yt;ir++)Gn?Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Hi.__webglTexture,ye,Tt+ir):Z.framebufferTexture2D(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,Hi.__webglTexture,ye),pr?Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,nr.__webglTexture,Ke,oi+ir):Z.framebufferTexture2D(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,nr.__webglTexture,Ke),ye!==0?Z.blitFramebuffer(Ft,Dt,st,ot,un,Tn,st,ot,Z.COLOR_BUFFER_BIT,Z.NEAREST):pr?Z.copyTexSubImage3D(fi,Ke,un,Tn,oi+ir,Ft,Dt,st,ot):Z.copyTexSubImage2D(fi,Ke,un,Tn,Ft,Dt,st,ot);He.bindFramebuffer(Z.READ_FRAMEBUFFER,null),He.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else pr?X.isDataTexture||X.isData3DTexture?Z.texSubImage3D(fi,Ke,un,Tn,oi,st,ot,yt,gn,Bt,dn.data):pe.isCompressedArrayTexture?Z.compressedTexSubImage3D(fi,Ke,un,Tn,oi,st,ot,yt,gn,dn.data):Z.texSubImage3D(fi,Ke,un,Tn,oi,st,ot,yt,gn,Bt,dn):X.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,Ke,un,Tn,st,ot,gn,Bt,dn.data):X.isCompressedTexture?Z.compressedTexSubImage2D(Z.TEXTURE_2D,Ke,un,Tn,dn.width,dn.height,gn,dn.data):Z.texSubImage2D(Z.TEXTURE_2D,Ke,un,Tn,st,ot,gn,Bt,dn);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,An),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,dr),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,Ia),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,jn),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Fa),Ke===0&&pe.generateMipmaps&&Z.generateMipmap(fi),He.unbindTexture()},this.copyTextureToTexture3D=function(X,pe,we=null,Re=null,ye=0){return Zx('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(X,pe,we,Re,ye)},this.initRenderTarget=function(X){Ge.get(X).__webglFramebuffer===void 0&&J.setupRenderTarget(X)},this.initTexture=function(X){X.isCubeTexture?J.setTextureCube(X,0):X.isData3DTexture?J.setTexture3D(X,0):X.isDataArrayTexture||X.isCompressedArrayTexture?J.setTexture2DArray(X,0):J.setTexture2D(X,0),He.unbindTexture()},this.resetState=function(){U=0,I=0,z=null,He.reset(),rt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return go}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Rn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Rn._getUnpackColorSpace()}}const fk=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:zM,AddEquation:hf,AddOperation:p6,AdditiveAnimationBlendMode:qM,AdditiveBlending:xv,AgXToneMapping:x6,AlphaFormat:kM,AlwaysCompare:P6,AlwaysDepth:u_,AlwaysStencilFunc:AE,AmbientLight:_T,AnimationAction:SO,AnimationClip:x0,AnimationLoader:R7,AnimationMixer:AO,AnimationObjectGroup:eF,AnimationUtils:M7,ArcCurve:W6,ArrayCamera:xO,ArrowHelper:AF,AttachedBindMode:SE,Audio:_O,AudioAnalyser:j7,AudioContext:bT,AudioListener:G7,AudioLoader:F7,AxesHelper:EF,BackSide:ur,BasicDepthPacking:Rf,BasicShadowMap:q5,BatchedMesh:j6,Bone:Cp,BooleanKeyframeTrack:T0,Box2:cF,Box3:Zr,Box3Helper:bF,BoxGeometry:M0,BoxHelper:_F,BufferAttribute:mn,BufferGeometry:Gt,BufferGeometryLoader:vO,ByteType:HM,Cache:jc,Camera:Np,CameraHelper:xF,CanvasTexture:YI,CapsuleGeometry:Vb,CatmullRomCurve3:Wb,CineonToneMapping:v6,CircleGeometry:kb,ClampToEdgeWrapping:Vs,Clock:ST,Color:Ze,ColorKeyframeTrack:vT,ColorManagement:Rn,CompressedArrayTexture:XI,CompressedCubeTexture:WI,CompressedTexture:Gb,CompressedTextureLoader:D7,ConeGeometry:Jv,ConstantAlphaFactor:f6,ConstantColorFactor:c6,Controls:MF,CubeCamera:z6,CubeReflectionMapping:$c,CubeRefractionMapping:yf,CubeTexture:Yv,CubeTextureLoader:B7,CubeUVReflectionMapping:Lp,CubicBezierCurve:aT,CubicBezierCurve3:Y6,CubicInterpolant:lO,CullFaceBack:xE,CullFaceFront:Y5,CullFaceFrontBack:iN,CullFaceNone:W5,Curve:xo,CurvePath:K6,CustomBlending:K5,CustomToneMapping:y6,CylinderGeometry:Kv,Cylindrical:lF,Data3DTexture:Ub,DataArrayTexture:Wv,DataTexture:$l,DataTextureLoader:O7,DataUtils:vI,DecrementStencilOp:pN,DecrementWrapStencilOp:gN,DefaultLoadingManager:fO,DepthArrayTexture:qI,DepthFormat:m0,DepthStencilFormat:g0,DepthTexture:zp,DetachedBindMode:b6,DirectionalLight:nS,DirectionalLightHelper:yF,DiscreteInterpolant:cO,DodecahedronGeometry:jb,DoubleSide:ps,DstAlphaFactor:r6,DstColorFactor:a6,DynamicCopyUsage:BN,DynamicDrawUsage:MN,DynamicReadUsage:wN,EdgesGeometry:X6,EllipseCurve:Xb,EqualCompare:R6,EqualDepth:h_,EqualStencilFunc:_N,EquirectangularReflectionMapping:xp,EquirectangularRefractionMapping:_v,Euler:fr,EventDispatcher:La,ExtrudeGeometry:$v,FileLoader:Ws,Float16BufferAttribute:EI,Float32BufferAttribute:xt,FloatType:ks,Fog:Ib,FogExp2:Nb,FramebufferTexture:jI,FrontSide:ll,Frustum:Fp,FrustumArray:zb,GLBufferAttribute:oF,GLSL1:PN,GLSL3:EE,GreaterCompare:D6,GreaterDepth:p_,GreaterEqualCompare:O6,GreaterEqualDepth:d_,GreaterEqualStencilFunc:EN,GreaterStencilFunc:SN,GridHelper:gF,Group:rl,HalfFloatType:tu,HemisphereLight:hO,HemisphereLightHelper:mF,IcosahedronGeometry:Yb,ImageBitmapLoader:yO,ImageLoader:Rv,ImageUtils:N6,IncrementStencilOp:dN,IncrementWrapStencilOp:mN,InstancedBufferAttribute:v0,InstancedBufferGeometry:gO,InstancedInterleavedBuffer:aF,InstancedMesh:tT,Int16BufferAttribute:SI,Int32BufferAttribute:AI,Int8BufferAttribute:xI,IntType:Tb,InterleavedBuffer:qv,InterleavedBufferAttribute:xf,Interpolant:Vp,InterpolateDiscrete:bp,InterpolateLinear:Sp,InterpolateSmooth:$x,InterpolationSamplingMode:NN,InterpolationSamplingType:LN,InvertStencilOp:vN,KeepStencilOp:jh,KeyframeTrack:bo,LOD:k6,LatheGeometry:qb,Layers:Ep,LessCompare:w6,LessDepth:f_,LessEqualCompare:JM,LessEqualDepth:h0,LessEqualStencilFunc:bN,LessStencilFunc:xN,Light:Of,LightProbe:mO,Line:sc,Line3:uF,LineBasicMaterial:Qr,LineCurve:oT,LineCurve3:q6,LineDashedMaterial:sO,LineLoop:nT,LineSegments:ul,LinearFilter:Jn,LinearInterpolant:gT,LinearMipMapLinearFilter:oN,LinearMipMapNearestFilter:aN,LinearMipmapLinearFilter:mo,LinearMipmapNearestFilter:pp,LinearSRGBColorSpace:rc,LinearToneMapping:m6,LinearTransfer:Sv,Loader:Fr,LoaderUtils:Wc,LoadingManager:yT,LoopOnce:YM,LoopPingPong:A6,LoopRepeat:S6,MOUSE:Vh,Material:er,MaterialLoader:iS,MathUtils:ms,Matrix2:MT,Matrix3:Zt,Matrix4:ft,MaxEquation:Q5,Mesh:Ai,MeshBasicMaterial:Pa,MeshDepthMaterial:dT,MeshDistanceMaterial:pT,MeshLambertMaterial:hT,MeshMatcapMaterial:rO,MeshNormalMaterial:fT,MeshPhongMaterial:sv,MeshPhysicalMaterial:_o,MeshStandardMaterial:Gp,MeshToonMaterial:iO,MinEquation:Z5,MirroredRepeatWrapping:_p,MixOperation:d6,MultiplyBlending:bE,MultiplyOperation:jv,NearestFilter:Wi,NearestMipMapLinearFilter:sN,NearestMipMapNearestFilter:rN,NearestMipmapLinearFilter:Kh,NearestMipmapNearestFilter:Mb,NeutralToneMapping:_6,NeverCompare:C6,NeverDepth:c_,NeverStencilFunc:yN,NoBlending:$r,NoColorSpace:il,NoToneMapping:al,NormalAnimationBlendMode:Ob,NormalBlending:i0,NotEqualCompare:B6,NotEqualDepth:m_,NotEqualStencilFunc:AN,NumberKeyframeTrack:_f,Object3D:hn,ObjectLoader:N7,ObjectSpaceNormalMap:T6,OctahedronGeometry:Zv,OneFactor:t6,OneMinusConstantAlphaFactor:h6,OneMinusConstantColorFactor:u6,OneMinusDstAlphaFactor:s6,OneMinusDstColorFactor:o6,OneMinusSrcAlphaFactor:l_,OneMinusSrcColorFactor:i6,OrthographicCamera:Zl,PCFShadowMap:Ab,PCFSoftShadowMap:Jg,PMREMGenerator:BE,Path:W_,PerspectiveCamera:pi,Plane:tl,PlaneGeometry:Hp,PlaneHelper:SF,PointLight:Dv,PointLightHelper:dF,Points:iT,PointsMaterial:Hb,PolarGridHelper:vF,PolyhedronGeometry:Bf,PositionalAudio:k7,PropertyBinding:xn,PropertyMixer:bO,QuadraticBezierCurve:lT,QuadraticBezierCurve3:cT,Quaternion:si,QuaternionKeyframeTrack:bf,QuaternionLinearInterpolant:uO,RED_GREEN_RGTC2_Format:H_,RED_RGTC1_Format:WM,REVISION:wf,RGBADepthPacking:M6,RGBAFormat:gs,RGBAIntegerFormat:Bb,RGBA_ASTC_10x10_Format:U_,RGBA_ASTC_10x5_Format:B_,RGBA_ASTC_10x6_Format:O_,RGBA_ASTC_10x8_Format:P_,RGBA_ASTC_12x10_Format:L_,RGBA_ASTC_12x12_Format:N_,RGBA_ASTC_4x4_Format:A_,RGBA_ASTC_5x4_Format:E_,RGBA_ASTC_5x5_Format:M_,RGBA_ASTC_6x5_Format:T_,RGBA_ASTC_6x6_Format:C_,RGBA_ASTC_8x5_Format:w_,RGBA_ASTC_8x6_Format:R_,RGBA_ASTC_8x8_Format:D_,RGBA_BPTC_Format:tv,RGBA_ETC2_EAC_Format:S_,RGBA_PVRTC_2BPPV1_Format:x_,RGBA_PVRTC_4BPPV1_Format:y_,RGBA_S3TC_DXT1_Format:Zg,RGBA_S3TC_DXT3_Format:Qg,RGBA_S3TC_DXT5_Format:ev,RGBDepthPacking:cN,RGBFormat:jM,RGBIntegerFormat:lN,RGB_BPTC_SIGNED_Format:I_,RGB_BPTC_UNSIGNED_Format:F_,RGB_ETC1_Format:__,RGB_ETC2_Format:b_,RGB_PVRTC_2BPPV1_Format:v_,RGB_PVRTC_4BPPV1_Format:g_,RGB_S3TC_DXT1_Format:$g,RGDepthPacking:uN,RGFormat:XM,RGIntegerFormat:Db,RawShaderMaterial:nO,Ray:E0,Raycaster:EO,RectAreaLight:dO,RedFormat:Rb,RedIntegerFormat:Xv,ReinhardToneMapping:g6,RenderTarget:Pb,RenderTarget3D:nF,RenderTargetArray:iF,RepeatWrapping:nc,ReplaceStencilOp:hN,ReverseSubtractEquation:$5,RingGeometry:Kb,SIGNED_RED_GREEN_RGTC2_Format:G_,SIGNED_RED_RGTC1_Format:z_,SRGBColorSpace:Fn,SRGBTransfer:Kn,Scene:Tp,ShaderChunk:cn,ShaderLib:nl,ShaderMaterial:tr,ShadowMaterial:tO,Shape:s0,ShapeGeometry:Jb,ShapePath:TO,ShapeUtils:sl,ShortType:GM,Skeleton:Ip,SkeletonHelper:hF,SkinnedMesh:Fb,Source:pf,Sphere:Ir,SphereGeometry:Qv,Spherical:Y_,SphericalHarmonics3:pO,SplineCurve:uT,SpotLight:tS,SpotLightHelper:fF,Sprite:V6,SpriteMaterial:eT,SrcAlphaFactor:o_,SrcAlphaSaturateFactor:l6,SrcColorFactor:n6,StaticCopyUsage:DN,StaticDrawUsage:Av,StaticReadUsage:CN,StereoCamera:z7,StreamCopyUsage:ON,StreamDrawUsage:TN,StreamReadUsage:RN,StringKeyframeTrack:C0,SubtractEquation:J5,SubtractiveBlending:_E,TOUCH:kh,TangentSpaceNormalMap:Df,TetrahedronGeometry:$b,Texture:kn,TextureLoader:kp,TextureUtils:DF,TimestampQuery:UN,TorusGeometry:Zb,TorusKnotGeometry:Qb,Triangle:ua,TriangleFanDrawMode:V_,TriangleStripDrawMode:KM,TrianglesDrawMode:E6,TubeGeometry:eS,UVMapping:Eb,Uint16BufferAttribute:Lb,Uint32BufferAttribute:ZM,Uint8BufferAttribute:_I,Uint8ClampedBufferAttribute:bI,Uniform:Wt,UniformsGroup:sF,UniformsLib:pt,UniformsUtils:QM,UnsignedByteType:Mr,UnsignedInt248Type:p0,UnsignedInt5999Type:VM,UnsignedIntType:ic,UnsignedShort4444Type:Cb,UnsignedShort5551Type:wb,UnsignedShortType:d0,VSMShadowMap:el,Vector2:Pe,Vector3:q,Vector4:Kt,VectorKeyframeTrack:Sf,VideoFrameTexture:kI,VideoTexture:rT,WebGL3DRenderTarget:oI,WebGLArrayRenderTarget:aI,WebGLCoordinateSystem:go,WebGLCubeRenderTarget:H6,WebGLRenderTarget:Ni,WebGLRenderer:PO,WebGLUtils:OO,WebGPUCoordinateSystem:Ev,WebXRController:Qx,WireframeGeometry:eO,WrapAroundEnding:bv,ZeroCurvatureEnding:Jh,ZeroFactor:e6,ZeroSlopeEnding:$h,ZeroStencilOp:fN,createCanvasElement:L6},Symbol.toStringTag,{value:"Module"}));var YA={exports:{}},Ic={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hR;function hk(){return hR||(hR=1,Ic.ConcurrentRoot=1,Ic.ContinuousEventPriority=8,Ic.DefaultEventPriority=32,Ic.DiscreteEventPriority=2,Ic.IdleEventPriority=268435456,Ic.LegacyRoot=0,Ic.NoEventPriority=0),Ic}var dR;function dk(){return dR||(dR=1,YA.exports=hk()),YA.exports}var t_=dk(),qA={exports:{}},KA={},JA={exports:{}},$A={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pR;function pk(){if(pR)return $A;pR=1;var n=Up();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function l(g,v){var x=v(),b=i({inst:{value:x,getSnapshot:v}}),M=b[0].inst,A=b[1];return s(function(){M.value=x,M.getSnapshot=v,u(M)&&A({inst:M})},[g,x,v]),r(function(){return u(M)&&A({inst:M}),g(function(){u(M)&&A({inst:M})})},[g]),a(x),x}function u(g){var v=g.getSnapshot;g=g.value;try{var x=v();return!t(g,x)}catch{return!0}}function h(g,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return $A.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,$A}var mR;function mk(){return mR||(mR=1,JA.exports=pk()),JA.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gR;function gk(){if(gR)return KA;gR=1;var n=Up(),e=mk();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,l=n.useMemo,u=n.useDebugValue;return KA.useSyncExternalStoreWithSelector=function(h,m,g,v,x){var b=s(null);if(b.current===null){var M={hasValue:!1,value:null};b.current=M}else M=b.current;b=l(function(){function S(U){if(!C){if(C=!0,R=U,U=v(U),x!==void 0&&M.hasValue){var I=M.value;if(x(I,U))return B=I}return B=U}if(I=B,i(R,U))return I;var z=v(U);return x!==void 0&&x(I,z)?(R=U,I):(R=U,B=z)}var C=!1,R,B,N=g===void 0?null:g;return[function(){return S(m())},N===null?void 0:function(){return S(N())}]},[m,g,v,x]);var A=r(h,b[0],b[1]);return a(function(){M.hasValue=!0,M.value=A},[A]),u(A),A},KA}var vR;function vk(){return vR||(vR=1,qA.exports=gk()),qA.exports}var yk=vk();const xk=A0(yk),yR=n=>{let e;const t=new Set,i=(h,m)=>{const g=typeof h=="function"?h(e):h;if(!Object.is(g,e)){const v=e;e=m??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(x=>x(e,v))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>u,subscribe:h=>(t.add(h),()=>t.delete(h))},u=e=n(i,r,l);return l},_k=n=>n?yR(n):yR,{useSyncExternalStoreWithSelector:bk}=xk,Sk=n=>n;function Ak(n,e=Sk,t){const i=bk(n.subscribe,n.getState,n.getInitialState,e,t);return oe.useDebugValue(i),i}const xR=(n,e)=>{const t=_k(n),i=(r,s=e)=>Ak(t,r,s);return Object.assign(i,t),i},Ek=(n,e)=>n?xR(n,e):xR;var ZA={exports:{}},QA={exports:{}},e2={exports:{}},t2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _R;function Mk(){return _R||(_R=1,function(n){function e(k,K){var ee=k.length;k.push(K);e:for(;0<ee;){var me=ee-1>>>1,W=k[me];if(0<r(W,K))k[me]=K,k[ee]=W,ee=me;else break e}}function t(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var K=k[0],ee=k.pop();if(ee!==K){k[0]=ee;e:for(var me=0,W=k.length,ae=W>>>1;me<ae;){var Se=2*(me+1)-1,Ae=k[Se],ie=Se+1,_e=k[ie];if(0>r(Ae,ee))ie<W&&0>r(_e,Ae)?(k[me]=_e,k[ie]=ee,me=ie):(k[me]=Ae,k[Se]=ee,me=Se);else if(ie<W&&0>r(_e,ee))k[me]=_e,k[ie]=ee,me=ie;else break e}}return K}function r(k,K){var ee=k.sortIndex-K.sortIndex;return ee!==0?ee:k.id-K.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var u=[],h=[],m=1,g=null,v=3,x=!1,b=!1,M=!1,A=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function R(k){for(var K=t(h);K!==null;){if(K.callback===null)i(h);else if(K.startTime<=k)i(h),K.sortIndex=K.expirationTime,e(u,K);else break;K=t(h)}}function B(k){if(M=!1,R(k),!b)if(t(u)!==null)b=!0,ce();else{var K=t(h);K!==null&&fe(B,K.startTime-k)}}var N=!1,U=-1,I=5,z=-1;function L(){return!(n.unstable_now()-z<I)}function O(){if(N){var k=n.unstable_now();z=k;var K=!0;try{e:{b=!1,M&&(M=!1,S(U),U=-1),x=!0;var ee=v;try{t:{for(R(k),g=t(u);g!==null&&!(g.expirationTime>k&&L());){var me=g.callback;if(typeof me=="function"){g.callback=null,v=g.priorityLevel;var W=me(g.expirationTime<=k);if(k=n.unstable_now(),typeof W=="function"){g.callback=W,R(k),K=!0;break t}g===t(u)&&i(u),R(k)}else i(u);g=t(u)}if(g!==null)K=!0;else{var ae=t(h);ae!==null&&fe(B,ae.startTime-k),K=!1}}break e}finally{g=null,v=ee,x=!1}K=void 0}}finally{K?G():N=!1}}}var G;if(typeof C=="function")G=function(){C(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Q=$.port2;$.port1.onmessage=O,G=function(){Q.postMessage(null)}}else G=function(){A(O,0)};function ce(){N||(N=!0,G())}function fe(k,K){U=A(function(){k(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){b||x||(b=!0,ce())},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(k){switch(v){case 1:case 2:case 3:var K=3;break;default:K=v}var ee=v;v=K;try{return k()}finally{v=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,K){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var ee=v;v=k;try{return K()}finally{v=ee}},n.unstable_scheduleCallback=function(k,K,ee){var me=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?me+ee:me):ee=me,k){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ee+W,k={id:m++,callback:K,priorityLevel:k,startTime:ee,expirationTime:W,sortIndex:-1},ee>me?(k.sortIndex=ee,e(h,k),t(u)===null&&k===t(h)&&(M?(S(U),U=-1):M=!0,fe(B,ee-me))):(k.sortIndex=W,e(u,k),b||x||(b=!0,ce())),k},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(k){var K=v;return function(){var ee=v;v=K;try{return k.apply(this,arguments)}finally{v=ee}}}}(t2)),t2}var bR;function UO(){return bR||(bR=1,e2.exports=Mk()),e2.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SR;function Tk(){return SR||(SR=1,function(n){n.exports=function(e){function t(f,d,_,T){return new Bm(f,d,_,T)}function i(){}function r(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)d+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(f){return f===null||typeof f!="object"?null:(f=No&&f[No]||f["@@iterator"],typeof f=="function"?f:null)}function a(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===Lm?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case Rl:return"Fragment";case Js:return"Portal";case ed:return"Profiler";case lh:return"StrictMode";case td:return"Suspense";case Mu:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case ba:return(f.displayName||"Context")+".Provider";case Pm:return(f._context.displayName||"Context")+".Consumer";case uh:var d=f.render;return f=f.displayName,f||(f=d.displayName||d.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case nd:return d=f.displayName||null,d!==null?d:a(f.type)||"Memo";case $s:d=f._payload,f=f._init;try{return a(f(d))}catch{}}return null}function l(f){if(ja===void 0)try{throw Error()}catch(_){var d=_.stack.trim().match(/\n( *(at )?)/);ja=d&&d[1]||"",Io=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ja+f+Io}function u(f,d){if(!f||hc)return"";hc=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var T={DetermineComponentFrameRoot:function(){try{if(d){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(qt){var mt=qt}Reflect.construct(f,[],dt)}else{try{dt.call()}catch(qt){mt=qt}f.call(dt.prototype)}}else{try{throw Error()}catch(qt){mt=qt}(dt=f())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(qt){if(qt&&mt&&typeof qt.stack=="string")return[qt.stack,mt.stack]}return[null,null]}};T.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(T.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(T.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=T.DetermineComponentFrameRoot(),Y=P[0],se=P[1];if(Y&&se){var xe=Y.split(`
`),Fe=se.split(`
`);for(D=T=0;T<xe.length&&!xe[T].includes("DetermineComponentFrameRoot");)T++;for(;D<Fe.length&&!Fe[D].includes("DetermineComponentFrameRoot");)D++;if(T===xe.length||D===Fe.length)for(T=xe.length-1,D=Fe.length-1;1<=T&&0<=D&&xe[T]!==Fe[D];)D--;for(;1<=T&&0<=D;T--,D--)if(xe[T]!==Fe[D]){if(T!==1||D!==1)do if(T--,D--,0>D||xe[T]!==Fe[D]){var nt=`
`+xe[T].replace(" at new "," at ");return f.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",f.displayName)),nt}while(1<=T&&0<=D);break}}}finally{hc=!1,Error.prepareStackTrace=_}return(_=f?f.displayName||f.name:"")?l(_):""}function h(f){switch(f.tag){case 26:case 27:case 5:return l(f.type);case 16:return l("Lazy");case 13:return l("Suspense");case 19:return l("SuspenseList");case 0:case 15:return f=u(f.type,!1),f;case 11:return f=u(f.type.render,!1),f;case 1:return f=u(f.type,!0),f;default:return""}}function m(f){try{var d="";do d+=h(f),f=f.return;while(f);return d}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}function g(f){var d=f,_=f;if(f.alternate)for(;d.return;)d=d.return;else{f=d;do d=f,(d.flags&4098)!==0&&(_=d.return),f=d.return;while(f)}return d.tag===3?_:null}function v(f){if(g(f)!==f)throw Error(r(188))}function x(f){var d=f.alternate;if(!d){if(d=g(f),d===null)throw Error(r(188));return d!==f?null:f}for(var _=f,T=d;;){var D=_.return;if(D===null)break;var P=D.alternate;if(P===null){if(T=D.return,T!==null){_=T;continue}break}if(D.child===P.child){for(P=D.child;P;){if(P===_)return v(D),f;if(P===T)return v(D),d;P=P.sibling}throw Error(r(188))}if(_.return!==T.return)_=D,T=P;else{for(var Y=!1,se=D.child;se;){if(se===_){Y=!0,_=D,T=P;break}if(se===T){Y=!0,T=D,_=P;break}se=se.sibling}if(!Y){for(se=P.child;se;){if(se===_){Y=!0,_=P,T=D;break}if(se===T){Y=!0,T=P,_=D;break}se=se.sibling}if(!Y)throw Error(r(189))}}if(_.alternate!==T)throw Error(r(190))}if(_.tag!==3)throw Error(r(188));return _.stateNode.current===_?f:d}function b(f){var d=f.tag;if(d===5||d===26||d===27||d===6)return f;for(f=f.child;f!==null;){if(d=b(f),d!==null)return d;f=f.sibling}return null}function M(f){var d=f.tag;if(d===5||d===26||d===27||d===6)return f;for(f=f.child;f!==null;){if(f.tag!==4&&(d=M(f),d!==null))return d;f=f.sibling}return null}function A(f){return{current:f}}function S(f){0>Go||(f.current=Ci[Go],Ci[Go]=null,Go--)}function C(f,d){Go++,Ci[Go]=f.current,f.current=d}function R(f){return f>>>=0,f===0?32:31-(y1(f)/x1|0)|0}function B(f){var d=f&42;if(d!==0)return d;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function N(f,d){var _=f.pendingLanes;if(_===0)return 0;var T=0,D=f.suspendedLanes,P=f.pingedLanes,Y=f.warmLanes;f=f.finishedLanes!==0;var se=_&134217727;return se!==0?(_=se&~D,_!==0?T=B(_):(P&=se,P!==0?T=B(P):f||(Y=se&~Y,Y!==0&&(T=B(Y))))):(se=_&~D,se!==0?T=B(se):P!==0?T=B(P):f||(Y=_&~Y,Y!==0&&(T=B(Y)))),T===0?0:d!==0&&d!==T&&(d&D)===0&&(D=T&-T,Y=d&-d,D>=Y||D===32&&(Y&4194176)!==0)?d:T}function U(f,d){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&d)===0}function I(f,d){switch(f){case 1:case 2:case 4:case 8:return d+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z(){var f=Wa;return Wa<<=1,(Wa&4194176)===0&&(Wa=128),f}function L(){var f=mc;return mc<<=1,(mc&62914560)===0&&(mc=4194304),f}function O(f){for(var d=[],_=0;31>_;_++)d.push(f);return d}function G(f,d){f.pendingLanes|=d,d!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function $(f,d,_,T,D,P){var Y=f.pendingLanes;f.pendingLanes=_,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=_,f.entangledLanes&=_,f.errorRecoveryDisabledLanes&=_,f.shellSuspendCounter=0;var se=f.entanglements,xe=f.expirationTimes,Fe=f.hiddenUpdates;for(_=Y&~_;0<_;){var nt=31-Wr(_),dt=1<<nt;se[nt]=0,xe[nt]=-1;var mt=Fe[nt];if(mt!==null)for(Fe[nt]=null,nt=0;nt<mt.length;nt++){var qt=mt[nt];qt!==null&&(qt.lane&=-536870913)}_&=~dt}T!==0&&Q(f,T,0),P!==0&&D===0&&f.tag!==0&&(f.suspendedLanes|=P&~(Y&~d))}function Q(f,d,_){f.pendingLanes|=d,f.suspendedLanes&=~d;var T=31-Wr(d);f.entangledLanes|=d,f.entanglements[T]=f.entanglements[T]|1073741824|_&4194218}function ce(f,d){var _=f.entangledLanes|=d;for(f=f.entanglements;_;){var T=31-Wr(_),D=1<<T;D&d|f[T]&d&&(f[T]|=d),_&=~D}}function fe(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function k(f){if(os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot(wi,f,void 0,(f.current.flags&128)===128)}catch{}}function K(f){if(typeof S1=="function"&&ar(f),os&&typeof os.setStrictMode=="function")try{os.setStrictMode(wi,f)}catch{}}function ee(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}function me(f,d){if(typeof f=="object"&&f!==null){var _=eg.get(f);return _!==void 0?_:(d={value:f,source:d,stack:m(d)},eg.set(f,d),d)}return{value:f,source:d,stack:m(d)}}function W(f,d){gc[vc++]=Uu,gc[vc++]=yc,yc=f,Uu=d}function ae(f,d,_){Es[Ms++]=Ea,Es[Ms++]=Ma,Es[Ms++]=Nl,Nl=f;var T=Ea;f=Ma;var D=32-Wr(T)-1;T&=~(1<<D),_+=1;var P=32-Wr(d)+D;if(30<P){var Y=D-D%5;P=(T&(1<<Y)-1).toString(32),T>>=Y,D-=Y,Ea=1<<32-Wr(d)+D|_<<D|T,Ma=P+f}else Ea=1<<P|_<<D|T,Ma=f}function Se(f){f.return!==null&&(W(f,1),ae(f,1,0))}function Ae(f){for(;f===yc;)yc=gc[--vc],gc[vc]=null,Uu=gc[--vc],gc[vc]=null;for(;f===Nl;)Nl=Es[--Ms],Es[Ms]=null,Ma=Es[--Ms],Es[Ms]=null,Ea=Es[--Ms],Es[Ms]=null}function ie(f,d){C(Ya,d),C(Lu,f),C(Ki,null),f=Iy(d),S(Ki),C(Ki,f)}function _e(){S(Ki),S(Lu),S(Ya)}function Ue(f){f.memoizedState!==null&&C(xc,f);var d=Ki.current,_=Ru(d,f.type);d!==_&&(C(Lu,f),C(Ki,_))}function ke(f){Lu.current===f&&(S(Ki),S(Lu)),xc.current===f&&(S(xc),jr?Sa._currentValue=Bl:Sa._currentValue2=Bl)}function Ye(f){var d=Error(r(418,""));throw bt(me(d,f)),xh}function gt(f,d){if(!_r)throw Error(r(175));l1(f.stateNode,f.type,f.memoizedProps,d,f)||Ye(f)}function _t(f){for(br=f.return;br;)switch(br.tag){case 3:case 27:or=!0;return;case 5:case 13:or=!1;return;default:br=br.return}}function an(f){if(!_r||f!==br)return!1;if(!En)return _t(f),En=!0,!1;var d=!1;if(Xn?f.tag!==3&&f.tag!==27&&(f.tag!==5||fd(f.type)&&!$t(f.type,f.memoizedProps))&&(d=!0):f.tag!==3&&(f.tag!==5||fd(f.type)&&!$t(f.type,f.memoizedProps))&&(d=!0),d&&Sr&&Ye(f),_t(f),f.tag===13){if(!_r)throw Error(r(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));Sr=u1(f)}else Sr=br?Jm(f.stateNode):null;return!0}function Pt(){_r&&(Sr=br=null,En=!1)}function bt(f){ea===null?ea=[f]:ea.push(f)}function Z(){for(var f=_c,d=Ta=_c=0;d<f;){var _=ta[d];ta[d++]=null;var T=ta[d];ta[d++]=null;var D=ta[d];ta[d++]=null;var P=ta[d];if(ta[d++]=null,T!==null&&D!==null){var Y=T.pending;Y===null?D.next=D:(D.next=Y.next,Y.next=D),T.pending=D}P!==0&&He(_,D,P)}}function Qe(f,d,_,T){ta[_c++]=f,ta[_c++]=d,ta[_c++]=_,ta[_c++]=T,Ta|=T,f.lanes|=T,f=f.alternate,f!==null&&(f.lanes|=T)}function Xe(f,d,_,T){return Qe(f,d,_,T),lt(f)}function je(f,d){return Qe(f,null,null,d),lt(f)}function He(f,d,_){f.lanes|=_;var T=f.alternate;T!==null&&(T.lanes|=_);for(var D=!1,P=f.return;P!==null;)P.childLanes|=_,T=P.alternate,T!==null&&(T.childLanes|=_),P.tag===22&&(f=P.stateNode,f===null||f._visibility&1||(D=!0)),f=P,P=P.return;D&&d!==null&&f.tag===3&&(P=f.stateNode,D=31-Wr(_),P=P.hiddenUpdates,f=P[D],f===null?P[D]=[d]:f.push(d),d.lane=_|536870912)}function lt(f){if(50<ju)throw ju=0,Td=null,Error(r(185));for(var d=f.return;d!==null;)f=d,d=f.return;return f.tag===3?f.stateNode:null}function Ge(f){f!==Vo&&f.next===null&&(Vo===null?_h=Vo=f:Vo=Vo.next=f),$n=!0,bc||(bc=!0,Te(V))}function J(f,d){if(!tg&&$n){tg=!0;do for(var _=!1,T=_h;T!==null;){if(f!==0){var D=T.pendingLanes;if(D===0)var P=0;else{var Y=T.suspendedLanes,se=T.pingedLanes;P=(1<<31-Wr(42|f)+1)-1,P&=D&~(Y&~se),P=P&201326677?P&201326677|1:P?P|2:0}P!==0&&(_=!0,Ne(T,P))}else P=vn,P=N(T,T===Ln?P:0),(P&3)===0||U(T,P)||(_=!0,Ne(T,P));T=T.next}while(_);tg=!1}}function V(){$n=bc=!1;var f=0;Nu!==0&&(Gy()&&(f=Nu),Nu=0);for(var d=Qs(),_=null,T=_h;T!==null;){var D=T.next,P=te(T,d);P===0?(T.next=null,_===null?_h=D:_.next=D,D===null&&(Vo=_)):(_=T,(f!==0||(P&3)!==0)&&($n=!0)),T=D}J(f)}function te(f,d){for(var _=f.suspendedLanes,T=f.pingedLanes,D=f.expirationTimes,P=f.pendingLanes&-62914561;0<P;){var Y=31-Wr(P),se=1<<Y,xe=D[Y];xe===-1?((se&_)===0||(se&T)!==0)&&(D[Y]=I(se,d)):xe<=d&&(f.expiredLanes|=se),P&=~se}if(d=Ln,_=vn,_=N(f,f===d?_:0),T=f.callbackNode,_===0||f===d&&Vn===2||f.cancelPendingCommit!==null)return T!==null&&T!==null&&md(T),f.callbackNode=null,f.callbackPriority=0;if((_&3)===0||U(f,_)){if(d=_&-_,d===f.callbackPriority)return d;switch(T!==null&&md(T),fe(_)){case 2:case 8:_=b1;break;case 32:_=yd;break;case 268435456:_=DS;break;default:_=yd}return T=ge.bind(null,f),_=yh(_,T),f.callbackPriority=d,f.callbackNode=_,d}return T!==null&&T!==null&&md(T),f.callbackPriority=2,f.callbackNode=null,2}function ge(f,d){var _=f.callbackNode;if(_a()&&f.callbackNode!==_)return null;var T=vn;return T=N(f,f===Ln?T:0),T===0?null:(El(f,T,d),te(f,Qs()),f.callbackNode!=null&&f.callbackNode===_?ge.bind(null,f):null)}function Ne(f,d){if(_a())return null;El(f,d,!0)}function Te(f){Hm?Ho(function(){(wn&6)!==0?yh(vd,f):f()}):yh(vd,f)}function tt(){return Nu===0&&(Nu=z()),Nu}function $e(f,d){if(Iu===null){var _=Iu=[];Sc=0,Ts=tt(),Ac={status:"pending",value:void 0,then:function(T){_.push(T)}}}return Sc++,d.then(ct,ct),d}function ct(){if(--Sc===0&&Iu!==null){Ac!==null&&(Ac.status="fulfilled");var f=Iu;Iu=null,Ts=0,Ac=null;for(var d=0;d<f.length;d++)(0,f[d])()}}function Mt(f,d){var _=[],T={status:"pending",value:null,reason:null,then:function(D){_.push(D)}};return f.then(function(){T.status="fulfilled",T.value=d;for(var D=0;D<_.length;D++)(0,_[D])(d)},function(D){for(T.status="rejected",T.reason=D,D=0;D<_.length;D++)(0,_[D])(void 0)}),T}function qe(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ut(f,d){f=f.updateQueue,d.updateQueue===f&&(d.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function vt(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function St(f,d,_){var T=f.updateQueue;if(T===null)return null;if(T=T.shared,(wn&2)!==0){var D=T.pending;return D===null?d.next=d:(d.next=D.next,D.next=d),T.pending=d,d=lt(f),He(f,null,_),d}return Qe(f,T,d,_),lt(f)}function it(f,d,_){if(d=d.updateQueue,d!==null&&(d=d.shared,(_&4194176)!==0)){var T=d.lanes;T&=f.pendingLanes,_|=T,d.lanes=_,ce(f,_)}}function ue(f,d){var _=f.updateQueue,T=f.alternate;if(T!==null&&(T=T.updateQueue,_===T)){var D=null,P=null;if(_=_.firstBaseUpdate,_!==null){do{var Y={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};P===null?D=P=Y:P=P.next=Y,_=_.next}while(_!==null);P===null?D=P=d:P=P.next=d}else D=P=d;_={baseState:T.baseState,firstBaseUpdate:D,lastBaseUpdate:P,shared:T.shared,callbacks:T.callbacks},f.updateQueue=_;return}f=_.lastBaseUpdate,f===null?_.firstBaseUpdate=d:f.next=d,_.lastBaseUpdate=d}function Le(){if(Ec){var f=Ac;if(f!==null)throw f}}function rt(f,d,_,T){Ec=!1;var D=f.updateQueue;ko=!1;var P=D.firstBaseUpdate,Y=D.lastBaseUpdate,se=D.shared.pending;if(se!==null){D.shared.pending=null;var xe=se,Fe=xe.next;xe.next=null,Y===null?P=Fe:Y.next=Fe,Y=xe;var nt=f.alternate;nt!==null&&(nt=nt.updateQueue,se=nt.lastBaseUpdate,se!==Y&&(se===null?nt.firstBaseUpdate=Fe:se.next=Fe,nt.lastBaseUpdate=xe))}if(P!==null){var dt=D.baseState;Y=0,nt=Fe=xe=null,se=P;do{var mt=se.lane&-536870913,qt=mt!==se.lane;if(qt?(vn&mt)===mt:(T&mt)===mt){mt!==0&&mt===Ts&&(Ec=!0),nt!==null&&(nt=nt.next={lane:0,tag:se.tag,payload:se.payload,callback:null,next:null});e:{var Us=f,Xl=se;mt=d;var Wl=_;switch(Xl.tag){case 1:if(Us=Xl.payload,typeof Us=="function"){dt=Us.call(Wl,dt,mt);break e}dt=Us;break e;case 3:Us.flags=Us.flags&-65537|128;case 0:if(Us=Xl.payload,mt=typeof Us=="function"?Us.call(Wl,dt,mt):Us,mt==null)break e;dt=Q0({},dt,mt);break e;case 2:ko=!0}}mt=se.callback,mt!==null&&(f.flags|=64,qt&&(f.flags|=8192),qt=D.callbacks,qt===null?D.callbacks=[mt]:qt.push(mt))}else qt={lane:mt,tag:se.tag,payload:se.payload,callback:se.callback,next:null},nt===null?(Fe=nt=qt,xe=dt):nt=nt.next=qt,Y|=mt;if(se=se.next,se===null){if(se=D.shared.pending,se===null)break;qt=se,se=qt.next,qt.next=null,D.lastBaseUpdate=qt,D.shared.pending=null}}while(!0);nt===null&&(xe=dt),D.baseState=xe,D.firstBaseUpdate=Fe,D.lastBaseUpdate=nt,P===null&&(D.shared.lanes=0),Os|=Y,f.lanes=Y,f.memoizedState=dt}}function le(f,d){if(typeof f!="function")throw Error(r(191,f));f.call(d)}function Je(f,d){var _=f.callbacks;if(_!==null)for(f.callbacks=null,f=0;f<_.length;f++)le(_[f],d)}function Oe(f,d){if(ls(f,d))return!0;if(typeof f!="object"||f===null||typeof d!="object"||d===null)return!1;var _=Object.keys(f),T=Object.keys(d);if(_.length!==T.length)return!1;for(T=0;T<_.length;T++){var D=_[T];if(!qa.call(d,D)||!ls(f[D],d[D]))return!1}return!0}function Ie(f){return f=f.status,f==="fulfilled"||f==="rejected"}function ht(){}function at(f,d,_){switch(_=f[_],_===void 0?f.push(d):_!==d&&(d.then(ht,ht),d=_),d.status){case"fulfilled":return d.value;case"rejected":throw f=d.reason,f===Fu?Error(r(483)):f;default:if(typeof d.status=="string")d.then(ht,ht);else{if(f=Ln,f!==null&&100<f.shellSuspendCounter)throw Error(r(482));f=d,f.status="pending",f.then(function(T){if(d.status==="pending"){var D=d;D.status="fulfilled",D.value=T}},function(T){if(d.status==="pending"){var D=d;D.status="rejected",D.reason=T}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw f=d.reason,f===Fu?Error(r(483)):f}throw Il=d,Fu}}function wt(){if(Il===null)throw Error(r(459));var f=Il;return Il=null,f}function on(f){var d=zl;return zl+=1,Fl===null&&(Fl=[]),at(Fl,f,d)}function On(f,d){d=d.props.ref,f.ref=d!==void 0?d:null}function en(f,d){throw d.$$typeof===AS?Error(r(525)):(f=Object.prototype.toString.call(d),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":f)))}function Ii(f){var d=f._init;return d(f._payload)}function ai(f){function d(Me,he){if(f){var Be=Me.deletions;Be===null?(Me.deletions=[he],Me.flags|=16):Be.push(he)}}function _(Me,he){if(!f)return null;for(;he!==null;)d(Me,he),he=he.sibling;return null}function T(Me){for(var he=new Map;Me!==null;)Me.key!==null?he.set(Me.key,Me):he.set(Me.index,Me),Me=Me.sibling;return he}function D(Me,he){return Me=Ks(Me,he),Me.index=0,Me.sibling=null,Me}function P(Me,he,Be){return Me.index=Be,f?(Be=Me.alternate,Be!==null?(Be=Be.index,Be<he?(Me.flags|=33554434,he):Be):(Me.flags|=33554434,he)):(Me.flags|=1048576,he)}function Y(Me){return f&&Me.alternate===null&&(Me.flags|=33554434),Me}function se(Me,he,Be,et){return he===null||he.tag!==6?(he=$0(Be,Me.mode,et),he.return=Me,he):(he=D(he,Be),he.return=Me,he)}function xe(Me,he,Be,et){var Ct=Be.type;return Ct===Rl?nt(Me,he,Be.props.children,et,Be.key):he!==null&&(he.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===$s&&Ii(Ct)===he.type)?(he=D(he,Be.props),On(he,Be),he.return=Me,he):(he=ka(Be.type,Be.key,Be.props,null,Me.mode,et),On(he,Be),he.return=Me,he)}function Fe(Me,he,Be,et){return he===null||he.tag!==4||he.stateNode.containerInfo!==Be.containerInfo||he.stateNode.implementation!==Be.implementation?(he=Om(Be,Me.mode,et),he.return=Me,he):(he=D(he,Be.children||[]),he.return=Me,he)}function nt(Me,he,Be,et,Ct){return he===null||he.tag!==7?(he=vi(Be,Me.mode,et,Ct),he.return=Me,he):(he=D(he,Be),he.return=Me,he)}function dt(Me,he,Be){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return he=$0(""+he,Me.mode,Be),he.return=Me,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case oh:return Be=ka(he.type,he.key,he.props,null,Me.mode,Be),On(Be,he),Be.return=Me,Be;case Js:return he=Om(he,Me.mode,Be),he.return=Me,he;case $s:var et=he._init;return he=et(he._payload),dt(Me,he,Be)}if(Tu(he)||s(he))return he=vi(he,Me.mode,Be,null),he.return=Me,he;if(typeof he.then=="function")return dt(Me,on(he),Be);if(he.$$typeof===ba)return dt(Me,Wf(Me,he),Be);en(Me,he)}return null}function mt(Me,he,Be,et){var Ct=he!==null?he.key:null;if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return Ct!==null?null:se(Me,he,""+Be,et);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case oh:return Be.key===Ct?xe(Me,he,Be,et):null;case Js:return Be.key===Ct?Fe(Me,he,Be,et):null;case $s:return Ct=Be._init,Be=Ct(Be._payload),mt(Me,he,Be,et)}if(Tu(Be)||s(Be))return Ct!==null?null:nt(Me,he,Be,et,null);if(typeof Be.then=="function")return mt(Me,he,on(Be),et);if(Be.$$typeof===ba)return mt(Me,he,Wf(Me,Be),et);en(Me,Be)}return null}function qt(Me,he,Be,et,Ct){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return Me=Me.get(Be)||null,se(he,Me,""+et,Ct);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case oh:return Me=Me.get(et.key===null?Be:et.key)||null,xe(he,Me,et,Ct);case Js:return Me=Me.get(et.key===null?Be:et.key)||null,Fe(he,Me,et,Ct);case $s:var ri=et._init;return et=ri(et._payload),qt(Me,he,Be,et,Ct)}if(Tu(et)||s(et))return Me=Me.get(Be)||null,nt(he,Me,et,Ct,null);if(typeof et.then=="function")return qt(Me,he,Be,on(et),Ct);if(et.$$typeof===ba)return qt(Me,he,Be,Wf(he,et),Ct);en(he,et)}return null}function Us(Me,he,Be,et){for(var Ct=null,ri=null,kt=he,Bn=he=0,Ri=null;kt!==null&&Bn<Be.length;Bn++){kt.index>Bn?(Ri=kt,kt=null):Ri=kt.sibling;var pn=mt(Me,kt,Be[Bn],et);if(pn===null){kt===null&&(kt=Ri);break}f&&kt&&pn.alternate===null&&d(Me,kt),he=P(pn,he,Bn),ri===null?Ct=pn:ri.sibling=pn,ri=pn,kt=Ri}if(Bn===Be.length)return _(Me,kt),En&&W(Me,Bn),Ct;if(kt===null){for(;Bn<Be.length;Bn++)kt=dt(Me,Be[Bn],et),kt!==null&&(he=P(kt,he,Bn),ri===null?Ct=kt:ri.sibling=kt,ri=kt);return En&&W(Me,Bn),Ct}for(kt=T(kt);Bn<Be.length;Bn++)Ri=qt(kt,Me,Bn,Be[Bn],et),Ri!==null&&(f&&Ri.alternate!==null&&kt.delete(Ri.key===null?Bn:Ri.key),he=P(Ri,he,Bn),ri===null?Ct=Ri:ri.sibling=Ri,ri=Ri);return f&&kt.forEach(function(no){return d(Me,no)}),En&&W(Me,Bn),Ct}function Xl(Me,he,Be,et){if(Be==null)throw Error(r(151));for(var Ct=null,ri=null,kt=he,Bn=he=0,Ri=null,pn=Be.next();kt!==null&&!pn.done;Bn++,pn=Be.next()){kt.index>Bn?(Ri=kt,kt=null):Ri=kt.sibling;var no=mt(Me,kt,pn.value,et);if(no===null){kt===null&&(kt=Ri);break}f&&kt&&no.alternate===null&&d(Me,kt),he=P(no,he,Bn),ri===null?Ct=no:ri.sibling=no,ri=no,kt=Ri}if(pn.done)return _(Me,kt),En&&W(Me,Bn),Ct;if(kt===null){for(;!pn.done;Bn++,pn=Be.next())pn=dt(Me,pn.value,et),pn!==null&&(he=P(pn,he,Bn),ri===null?Ct=pn:ri.sibling=pn,ri=pn);return En&&W(Me,Bn),Ct}for(kt=T(kt);!pn.done;Bn++,pn=Be.next())pn=qt(kt,Me,Bn,pn.value,et),pn!==null&&(f&&pn.alternate!==null&&kt.delete(pn.key===null?Bn:pn.key),he=P(pn,he,Bn),ri===null?Ct=pn:ri.sibling=pn,ri=pn);return f&&kt.forEach(function(Cd){return d(Me,Cd)}),En&&W(Me,Bn),Ct}function Wl(Me,he,Be,et){if(typeof Be=="object"&&Be!==null&&Be.type===Rl&&Be.key===null&&(Be=Be.props.children),typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case oh:e:{for(var Ct=Be.key;he!==null;){if(he.key===Ct){if(Ct=Be.type,Ct===Rl){if(he.tag===7){_(Me,he.sibling),et=D(he,Be.props.children),et.return=Me,Me=et;break e}}else if(he.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===$s&&Ii(Ct)===he.type){_(Me,he.sibling),et=D(he,Be.props),On(et,Be),et.return=Me,Me=et;break e}_(Me,he);break}else d(Me,he);he=he.sibling}Be.type===Rl?(et=vi(Be.props.children,Me.mode,et,Be.key),et.return=Me,Me=et):(et=ka(Be.type,Be.key,Be.props,null,Me.mode,et),On(et,Be),et.return=Me,Me=et)}return Y(Me);case Js:e:{for(Ct=Be.key;he!==null;){if(he.key===Ct)if(he.tag===4&&he.stateNode.containerInfo===Be.containerInfo&&he.stateNode.implementation===Be.implementation){_(Me,he.sibling),et=D(he,Be.children||[]),et.return=Me,Me=et;break e}else{_(Me,he);break}else d(Me,he);he=he.sibling}et=Om(Be,Me.mode,et),et.return=Me,Me=et}return Y(Me);case $s:return Ct=Be._init,Be=Ct(Be._payload),Wl(Me,he,Be,et)}if(Tu(Be))return Us(Me,he,Be,et);if(s(Be)){if(Ct=s(Be),typeof Ct!="function")throw Error(r(150));return Be=Ct.call(Be),Xl(Me,he,Be,et)}if(typeof Be.then=="function")return Wl(Me,he,on(Be),et);if(Be.$$typeof===ba)return Wl(Me,he,Wf(Me,Be),et);en(Me,Be)}return typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint"?(Be=""+Be,he!==null&&he.tag===6?(_(Me,he.sibling),et=D(he,Be),et.return=Me,Me=et):(_(Me,he),et=$0(Be,Me.mode,et),et.return=Me,Me=et),Y(Me)):_(Me,he)}return function(Me,he,Be,et){try{zl=0;var Ct=Wl(Me,he,Be,et);return Fl=null,Ct}catch(kt){if(kt===Fu)throw kt;var ri=t(29,kt,null,Me.mode);return ri.lanes=et,ri.return=Me,ri}finally{}}}function Fi(f,d){f=Pr,C(zu,f),C(Zn,d),Pr=f|d.baseLanes}function Yi(){C(zu,Pr),C(Zn,Zn.current)}function Rr(){Pr=zu.current,S(Zn),S(zu)}function es(f){var d=f.alternate;C(Ji,Ji.current&1),C(Cs,f),Wn===null&&(d===null||Zn.current!==null||d.memoizedState!==null)&&(Wn=f)}function Uf(f){if(f.tag===22){if(C(Ji,Ji.current),C(Cs,f),Wn===null){var d=f.alternate;d!==null&&d.memoizedState!==null&&(Wn=f)}}else pa()}function pa(){C(Ji,Ji.current),C(Cs,Cs.current)}function zr(f){S(Cs),Wn===f&&(Wn=null),S(Ji)}function ma(f){for(var d=f;d!==null;){if(d.tag===13){var _=d.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||ld(_)||cd(_)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break;for(;d.sibling===null;){if(d.return===null||d.return===f)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function Hn(){throw Error(r(321))}function ga(f,d){if(d===null)return!1;for(var _=0;_<d.length&&_<f.length;_++)if(!ls(f[_],d[_]))return!1;return!0}function va(f,d,_,T,D,P){return jo=P,rn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Vt.H=f===null||f.memoizedState===null?Vl:Yr,Gl=!1,P=_(T,D),Gl=!1,Mc&&(P=Ao(d,_,T,D)),dl(f),P}function dl(f){Vt.H=yi;var d=Ut!==null&&Ut.next!==null;if(jo=0,Cn=Ut=rn=null,na=!1,Tc=0,lr=null,d)throw Error(r(300));f===null||Yn||(f=f.dependencies,f!==null&&Xf(f)&&(Yn=!0))}function Ao(f,d,_,T){rn=f;var D=0;do{if(Mc&&(lr=null),Tc=0,Mc=!1,25<=D)throw Error(r(301));if(D+=1,Cn=Ut=null,f.updateQueue!=null){var P=f.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}Vt.H=ws,P=d(_,T)}while(Mc);return P}function zi(){var f=Vt.H,d=f.useState()[0];return d=typeof d.then=="function"?we(d):d,f=f.useState()[0],(Ut!==null?Ut.memoizedState:null)!==f&&(rn.flags|=1024),d}function ru(){var f=xd!==0;return xd=0,f}function su(f,d,_){d.updateQueue=f.updateQueue,d.flags&=-2053,f.lanes&=~_}function ya(f){if(na){for(f=f.memoizedState;f!==null;){var d=f.queue;d!==null&&(d.pending=null),f=f.next}na=!1}jo=0,Cn=Ut=rn=null,Mc=!1,Tc=xd=0,lr=null}function X(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?rn.memoizedState=Cn=f:Cn=Cn.next=f,Cn}function pe(){if(Ut===null){var f=rn.alternate;f=f!==null?f.memoizedState:null}else f=Ut.next;var d=Cn===null?rn.memoizedState:Cn.next;if(d!==null)Cn=d,Ut=f;else{if(f===null)throw rn.alternate===null?Error(r(467)):Error(r(310));Ut=f,f={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Cn===null?rn.memoizedState=Cn=f:Cn=Cn.next=f}return Cn}function we(f){var d=Tc;return Tc+=1,lr===null&&(lr=[]),f=at(lr,f,d),d=rn,(Cn===null?d.memoizedState:Cn.next)===null&&(d=d.alternate,Vt.H=d===null||d.memoizedState===null?Vl:Yr),f}function Re(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return we(f);if(f.$$typeof===ba)return gr(f)}throw Error(r(438,String(f)))}function ye(f){var d=null,_=rn.updateQueue;if(_!==null&&(d=_.memoCache),d==null){var T=rn.alternate;T!==null&&(T=T.updateQueue,T!==null&&(T=T.memoCache,T!=null&&(d={data:T.data.map(function(D){return D.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),_===null&&(_=_d(),rn.updateQueue=_),_.memoCache=d,_=d.data[d.index],_===void 0)for(_=d.data[d.index]=Array(f),T=0;T<f;T++)_[T]=Ny;return d.index++,_}function Ke(f,d){return typeof d=="function"?d(f):d}function st(f){var d=pe();return ot(d,Ut,f)}function ot(f,d,_){var T=f.queue;if(T===null)throw Error(r(311));T.lastRenderedReducer=_;var D=f.baseQueue,P=T.pending;if(P!==null){if(D!==null){var Y=D.next;D.next=P.next,P.next=Y}d.baseQueue=D=P,T.pending=null}if(P=f.baseState,D===null)f.memoizedState=P;else{d=D.next;var se=Y=null,xe=null,Fe=d,nt=!1;do{var dt=Fe.lane&-536870913;if(dt!==Fe.lane?(vn&dt)===dt:(jo&dt)===dt){var mt=Fe.revertLane;if(mt===0)xe!==null&&(xe=xe.next={lane:0,revertLane:0,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),dt===Ts&&(nt=!0);else if((jo&mt)===mt){Fe=Fe.next,mt===Ts&&(nt=!0);continue}else dt={lane:0,revertLane:Fe.revertLane,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null},xe===null?(se=xe=dt,Y=P):xe=xe.next=dt,rn.lanes|=mt,Os|=mt;dt=Fe.action,Gl&&_(P,dt),P=Fe.hasEagerState?Fe.eagerState:_(P,dt)}else mt={lane:dt,revertLane:Fe.revertLane,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null},xe===null?(se=xe=mt,Y=P):xe=xe.next=mt,rn.lanes|=dt,Os|=dt;Fe=Fe.next}while(Fe!==null&&Fe!==d);if(xe===null?Y=P:xe.next=se,!ls(P,f.memoizedState)&&(Yn=!0,nt&&(_=Ac,_!==null)))throw _;f.memoizedState=P,f.baseState=Y,f.baseQueue=xe,T.lastRenderedState=P}return D===null&&(T.lanes=0),[f.memoizedState,T.dispatch]}function yt(f){var d=pe(),_=d.queue;if(_===null)throw Error(r(311));_.lastRenderedReducer=f;var T=_.dispatch,D=_.pending,P=d.memoizedState;if(D!==null){_.pending=null;var Y=D=D.next;do P=f(P,Y.action),Y=Y.next;while(Y!==D);ls(P,d.memoizedState)||(Yn=!0),d.memoizedState=P,d.baseQueue===null&&(d.baseState=P),_.lastRenderedState=P}return[P,T]}function Ft(f,d,_){var T=rn,D=pe(),P=En;if(P){if(_===void 0)throw Error(r(407));_=_()}else _=d();var Y=!ls((Ut||D).memoizedState,_);if(Y&&(D.memoizedState=_,Yn=!0),D=D.queue,im(un.bind(null,T,D,f),[f]),D.getSnapshot!==d||Y||Cn!==null&&Cn.memoizedState.tag&1){if(T.flags|=2048,Hr(9,Tt.bind(null,T,D,_,d),{destroy:void 0},null),Ln===null)throw Error(r(349));P||(jo&60)!==0||Dt(T,d,_)}return _}function Dt(f,d,_){f.flags|=16384,f={getSnapshot:d,value:_},d=rn.updateQueue,d===null?(d=_d(),rn.updateQueue=d,d.stores=[f]):(_=d.stores,_===null?d.stores=[f]:_.push(f))}function Tt(f,d,_,T){d.value=_,d.getSnapshot=T,Tn(d)&&oi(f)}function un(f,d,_){return _(function(){Tn(d)&&oi(f)})}function Tn(f){var d=f.getSnapshot;f=f.value;try{var _=d();return!ls(f,_)}catch{return!0}}function oi(f){var d=je(f,2);d!==null&&sr(d,f,2)}function dn(f){var d=X();if(typeof f=="function"){var _=f;if(f=_(),Gl){K(!0);try{_()}finally{K(!1)}}}return d.memoizedState=d.baseState=f,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ke,lastRenderedState:f},d}function gn(f,d,_,T){return f.baseState=_,ot(f,Ut,typeof T=="function"?T:Ke)}function Bt(f,d,_,T,D){if(Hf(f))throw Error(r(485));if(f=d.action,f!==null){var P={payload:D,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){P.listeners.push(Y)}};Vt.T!==null?_(!0):P.isTransition=!1,T(P),_=d.pending,_===null?(P.next=d.pending=P,fi(d,P)):(P.next=_.next,d.pending=_.next=P)}}function fi(f,d){var _=d.action,T=d.payload,D=f.state;if(d.isTransition){var P=Vt.T,Y={};Vt.T=Y;try{var se=_(D,T),xe=Vt.S;xe!==null&&xe(Y,se),An(f,d,se)}catch(Fe){Ia(f,d,Fe)}finally{Vt.T=P}}else try{P=_(D,T),An(f,d,P)}catch(Fe){Ia(f,d,Fe)}}function An(f,d,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(T){dr(f,d,T)},function(T){return Ia(f,d,T)}):dr(f,d,_)}function dr(f,d,_){d.status="fulfilled",d.value=_,jn(d),f.state=_,d=f.pending,d!==null&&(_=d.next,_===d?f.pending=null:(_=_.next,d.next=_,fi(f,_)))}function Ia(f,d,_){var T=f.pending;if(f.pending=null,T!==null){T=T.next;do d.status="rejected",d.reason=_,jn(d),d=d.next;while(d!==T)}f.action=null}function jn(f){f=f.listeners;for(var d=0;d<f.length;d++)(0,f[d])()}function Fa(f,d){return d}function Gn(f,d){if(En){var _=Ln.formState;if(_!==null){e:{var T=rn;if(En){if(Sr){var D=Km(Sr,or);if(D){Sr=Jm(D),T=r1(D);break e}}Ye(T)}T=!1}T&&(d=_[0])}}_=X(),_.memoizedState=_.baseState=d,T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:d},_.queue=T,_=om.bind(null,rn,T),T.dispatch=_,T=dn(!1);var P=lu.bind(null,rn,!1,T.queue);return T=X(),D={state:d,dispatch:null,action:f,pending:null},T.queue=D,_=Bt.bind(null,rn,D,P,_),D.dispatch=_,T.memoizedState=f,[d,_,!1]}function pr(f){var d=pe();return Hi(d,Ut,f)}function Hi(f,d,_){d=ot(f,d,Fa)[0],f=st(Ke)[0],d=typeof d=="object"&&d!==null&&typeof d.then=="function"?we(d):d;var T=pe(),D=T.queue,P=D.dispatch;return _!==T.memoizedState&&(rn.flags|=2048,Hr(9,nr.bind(null,D,_),{destroy:void 0},null)),[d,P,f]}function nr(f,d){f.action=d}function ir(f){var d=pe(),_=Ut;if(_!==null)return Hi(d,_,f);pe(),d=d.memoizedState,_=pe();var T=_.queue.dispatch;return _.memoizedState=f,[d,T,!1]}function Hr(f,d,_,T){return f={tag:f,create:d,inst:_,deps:T,next:null},d=rn.updateQueue,d===null&&(d=_d(),rn.updateQueue=d),_=d.lastEffect,_===null?d.lastEffect=f.next=f:(T=_.next,_.next=f,f.next=T,d.lastEffect=f),f}function za(){return pe().memoizedState}function Lf(f,d,_,T){var D=X();rn.flags|=f,D.memoizedState=Hr(1|d,_,{destroy:void 0},T===void 0?null:T)}function Nf(f,d,_,T){var D=pe();T=T===void 0?null:T;var P=D.memoizedState.inst;Ut!==null&&T!==null&&ga(T,Ut.memoizedState.deps)?D.memoizedState=Hr(d,_,P,T):(rn.flags|=f,D.memoizedState=Hr(1|d,_,P,T))}function B0(f,d){Lf(8390656,8,f,d)}function im(f,d){Nf(2048,8,f,d)}function py(f,d){return Nf(4,2,f,d)}function If(f,d){return Nf(4,4,f,d)}function O0(f,d){if(typeof d=="function"){f=f();var _=d(f);return function(){typeof _=="function"?_():d(null)}}if(d!=null)return f=f(),d.current=f,function(){d.current=null}}function P0(f,d,_){_=_!=null?_.concat([f]):null,Nf(4,4,O0.bind(null,d,f),_)}function pl(){}function lc(f,d){var _=pe();d=d===void 0?null:d;var T=_.memoizedState;return d!==null&&ga(d,T[1])?T[0]:(_.memoizedState=[f,d],f)}function rm(f,d){var _=pe();d=d===void 0?null:d;var T=_.memoizedState;if(d!==null&&ga(d,T[1]))return T[0];if(T=f(),Gl){K(!0);try{f()}finally{K(!1)}}return _.memoizedState=[T,d],T}function Ff(f,d,_){return _===void 0||(jo&1073741824)!==0?f.memoizedState=d:(f.memoizedState=_,f=Tm(),rn.lanes|=f,Os|=f,_)}function sm(f,d,_,T){return ls(_,d)?_:Zn.current!==null?(f=Ff(f,_,T),ls(f,d)||(Yn=!0),f):(jo&42)===0?(Yn=!0,f.memoizedState=_):(f=Tm(),rn.lanes|=f,Os|=f,d)}function au(f,d,_,T,D){var P=zo();Br(P!==0&&8>P?P:8);var Y=Vt.T,se={};Vt.T=se,lu(f,!1,d,_);try{var xe=D(),Fe=Vt.S;if(Fe!==null&&Fe(se,xe),xe!==null&&typeof xe=="object"&&typeof xe.then=="function"){var nt=Mt(xe,T);ml(f,d,nt,Mi(f))}else ml(f,d,T,Mi(f))}catch(dt){ml(f,d,{then:function(){},status:"rejected",reason:dt},Mi())}finally{Br(P),Vt.T=Y}}function Ha(f){var d=f.memoizedState;if(d!==null)return d;d={memoizedState:Bl,baseState:Bl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ke,lastRenderedState:Bl},next:null};var _={};return d.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ke,lastRenderedState:_},next:null},f.memoizedState=d,f=f.alternate,f!==null&&(f.memoizedState=d),d}function zf(){return gr(Sa)}function ou(){return pe().memoizedState}function Eo(){return pe().memoizedState}function am(f){for(var d=f.return;d!==null;){switch(d.tag){case 24:case 3:var _=Mi();f=vt(_);var T=St(d,f,_);T!==null&&(sr(T,d,_),it(T,d,_)),d={cache:xl()},f.payload=d;return}d=d.return}}function U0(f,d,_){var T=Mi();_={lane:T,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null},Hf(f)?Gr(d,_):(_=Xe(f,d,_,T),_!==null&&(sr(_,f,T),gl(_,d,T)))}function om(f,d,_){var T=Mi();ml(f,d,_,T)}function ml(f,d,_,T){var D={lane:T,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null};if(Hf(f))Gr(d,D);else{var P=f.alternate;if(f.lanes===0&&(P===null||P.lanes===0)&&(P=d.lastRenderedReducer,P!==null))try{var Y=d.lastRenderedState,se=P(Y,_);if(D.hasEagerState=!0,D.eagerState=se,ls(se,Y))return Qe(f,d,D,0),Ln===null&&Z(),!1}catch{}finally{}if(_=Xe(f,d,D,T),_!==null)return sr(_,f,T),gl(_,d,T),!0}return!1}function lu(f,d,_,T){if(T={lane:2,revertLane:tt(),action:T,hasEagerState:!1,eagerState:null,next:null},Hf(f)){if(d)throw Error(r(479))}else d=Xe(f,_,T,2),d!==null&&sr(d,f,2)}function Hf(f){var d=f.alternate;return f===rn||d!==null&&d===rn}function Gr(f,d){Mc=na=!0;var _=f.pending;_===null?d.next=d:(d.next=_.next,_.next=d),f.pending=d}function gl(f,d,_){if((_&4194176)!==0){var T=d.lanes;T&=f.pendingLanes,_|=T,d.lanes=_,ce(f,_)}}function cu(f,d,_,T){d=f.memoizedState,_=_(T,d),_=_==null?d:Q0({},d,_),f.memoizedState=_,f.lanes===0&&(f.updateQueue.baseState=_)}function uu(f,d,_,T,D,P,Y){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(T,P,Y):d.prototype&&d.prototype.isPureReactComponent?!Oe(_,T)||!Oe(D,P):!0}function my(f,d,_,T){f=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(_,T),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(_,T),d.state!==f&&Ja.enqueueReplaceState(d,d.state,null)}function Mo(f,d){var _=d;if("ref"in d){_={};for(var T in d)T!=="ref"&&(_[T]=d[T])}if(f=f.defaultProps){_===d&&(_=Q0({},_));for(var D in f)_[D]===void 0&&(_[D]=f[D])}return _}function fu(f,d){try{var _=f.onUncaughtError;_(d.value,{componentStack:d.stack})}catch(T){setTimeout(function(){throw T})}}function hu(f,d,_){try{var T=f.onCaughtError;T(_.value,{componentStack:_.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function du(f,d,_){return _=vt(_),_.tag=3,_.payload={element:null},_.callback=function(){fu(f,d)},_}function lm(f){return f=vt(f),f.tag=3,f}function gy(f,d,_,T){var D=_.type.getDerivedStateFromError;if(typeof D=="function"){var P=T.value;f.payload=function(){return D(P)},f.callback=function(){hu(d,_,T)}}var Y=_.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(f.callback=function(){hu(d,_,T),typeof D!="function"&&(kl===null?kl=new Set([this]):kl.add(this));var se=T.stack;this.componentDidCatch(T.value,{componentStack:se!==null?se:""})})}function xS(f,d,_,T,D){if(_.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){if(d=_.alternate,d!==null&&jf(d,_,D,!0),_=Cs.current,_!==null){switch(_.tag){case 13:return Wn===null?Po():_.alternate===null&&qn===0&&(qn=3),_.flags&=-257,_.flags|=65536,_.lanes=D,T===Sh?_.flags|=16384:(d=_.updateQueue,d===null?_.updateQueue=new Set([T]):d.add(T),fc(f,T,D)),!1;case 22:return _.flags|=65536,T===Sh?_.flags|=16384:(d=_.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([T])},_.updateQueue=d):(_=d.retryQueue,_===null?d.retryQueue=new Set([T]):_.add(T)),fc(f,T,D)),!1}throw Error(r(435,_.tag))}return fc(f,T,D),Po(),!1}if(En)return d=Cs.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=D,T!==xh&&(f=Error(r(422),{cause:T}),bt(me(f,_)))):(T!==xh&&(d=Error(r(423),{cause:T}),bt(me(d,_))),f=f.current.alternate,f.flags|=65536,D&=-D,f.lanes|=D,T=me(T,_),D=du(f.stateNode,T,D),ue(f,D),qn!==4&&(qn=2)),!1;var P=Error(r(520),{cause:T});if(P=me(P,_),wc===null?wc=[P]:wc.push(P),qn!==4&&(qn=2),d===null)return!0;T=me(T,_),_=d;do{switch(_.tag){case 3:return _.flags|=65536,f=D&-D,_.lanes|=f,f=du(_.stateNode,T,f),ue(_,f),!1;case 1:if(d=_.type,P=_.stateNode,(_.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(kl===null||!kl.has(P))))return _.flags|=65536,D&=-D,_.lanes|=D,D=lm(D),gy(D,f,_,T),ue(_,D),!1}_=_.return}while(_!==null);return!1}function mr(f,d,_,T){d.child=f===null?Ka(d,null,_,T):Hl(d,f.child,_,T)}function L0(f,d,_,T,D){_=_.render;var P=d.ref;if("ref"in T){var Y={};for(var se in T)se!=="ref"&&(Y[se]=T[se])}else Y=T;return yl(d),T=va(f,d,_,Y,P,D),se=ru(),f!==null&&!Yn?(su(f,d,D),To(f,d,D)):(En&&se&&Se(d),d.flags|=1,mr(f,d,T,D),d.child)}function vy(f,d,_,T,D){if(f===null){var P=_.type;return typeof P=="function"&&!ih(P)&&P.defaultProps===void 0&&_.compare===null?(d.tag=15,d.type=P,yy(f,d,P,T,D)):(f=ka(_.type,null,T,d,d.mode,D),f.ref=d.ref,f.return=d,d.child=f)}if(P=f.child,!dm(f,D)){var Y=P.memoizedProps;if(_=_.compare,_=_!==null?_:Oe,_(Y,T)&&f.ref===d.ref)return To(f,d,D)}return d.flags|=1,f=Ks(P,T),f.ref=d.ref,f.return=d,d.child=f}function yy(f,d,_,T,D){if(f!==null){var P=f.memoizedProps;if(Oe(P,T)&&f.ref===d.ref)if(Yn=!1,d.pendingProps=T=P,dm(f,D))(f.flags&131072)!==0&&(Yn=!0);else return d.lanes=f.lanes,To(f,d,D)}return N0(f,d,_,T,D)}function xy(f,d,_){var T=d.pendingProps,D=T.children,P=(d.stateNode._pendingVisibility&2)!==0,Y=f!==null?f.memoizedState:null;if(Gf(f,d),T.mode==="hidden"||P){if((d.flags&128)!==0){if(T=Y!==null?Y.baseLanes|_:_,f!==null){for(D=d.child=f.child,P=0;D!==null;)P=P|D.lanes|D.childLanes,D=D.sibling;d.childLanes=P&~T}else d.childLanes=0,d.child=null;return _y(f,d,T,_)}if((_&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},f!==null&&F0(d,Y!==null?Y.cachePool:null),Y!==null?Fi(d,Y):Yi(),Uf(d);else return d.lanes=d.childLanes=536870912,_y(f,d,Y!==null?Y.baseLanes|_:_,_)}else Y!==null?(F0(d,Y.cachePool),Fi(d,Y),pa(),d.memoizedState=null):(f!==null&&F0(d,null),Yi(),pa());return mr(f,d,D,_),d.child}function _y(f,d,_,T){var D=mm();return D=D===null?null:{parent:jr?Qn._currentValue:Qn._currentValue2,pool:D},d.memoizedState={baseLanes:_,cachePool:D},f!==null&&F0(d,null),Yi(),Uf(d),f!==null&&jf(f,d,T,!0),null}function Gf(f,d){var _=d.ref;if(_===null)f!==null&&f.ref!==null&&(d.flags|=2097664);else{if(typeof _!="function"&&typeof _!="object")throw Error(r(284));(f===null||f.ref!==_)&&(d.flags|=2097664)}}function N0(f,d,_,T,D){return yl(d),_=va(f,d,_,T,void 0,D),T=ru(),f!==null&&!Yn?(su(f,d,D),To(f,d,D)):(En&&T&&Se(d),d.flags|=1,mr(f,d,_,D),d.child)}function by(f,d,_,T,D,P){return yl(d),d.updateQueue=null,_=Ao(d,T,_,D),dl(f),T=ru(),f!==null&&!Yn?(su(f,d,P),To(f,d,P)):(En&&T&&Se(d),d.flags|=1,mr(f,d,_,P),d.child)}function Sy(f,d,_,T,D){if(yl(d),d.stateNode===null){var P=Ll,Y=_.contextType;typeof Y=="object"&&Y!==null&&(P=gr(Y)),P=new _(T,P),d.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=Ja,d.stateNode=P,P._reactInternals=d,P=d.stateNode,P.props=T,P.state=d.memoizedState,P.refs={},qe(d),Y=_.contextType,P.context=typeof Y=="object"&&Y!==null?gr(Y):Ll,P.state=d.memoizedState,Y=_.getDerivedStateFromProps,typeof Y=="function"&&(cu(d,_,Y,T),P.state=d.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(Y=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),Y!==P.state&&Ja.enqueueReplaceState(P,P.state,null),rt(d,T,P,D),Le(),P.state=d.memoizedState),typeof P.componentDidMount=="function"&&(d.flags|=4194308),T=!0}else if(f===null){P=d.stateNode;var se=d.memoizedProps,xe=Mo(_,se);P.props=xe;var Fe=P.context,nt=_.contextType;Y=Ll,typeof nt=="object"&&nt!==null&&(Y=gr(nt));var dt=_.getDerivedStateFromProps;nt=typeof dt=="function"||typeof P.getSnapshotBeforeUpdate=="function",se=d.pendingProps!==se,nt||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(se||Fe!==Y)&&my(d,P,T,Y),ko=!1;var mt=d.memoizedState;P.state=mt,rt(d,T,P,D),Le(),Fe=d.memoizedState,se||mt!==Fe||ko?(typeof dt=="function"&&(cu(d,_,dt,T),Fe=d.memoizedState),(xe=ko||uu(d,_,xe,T,mt,Fe,Y))?(nt||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(d.flags|=4194308)):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=T,d.memoizedState=Fe),P.props=T,P.state=Fe,P.context=Y,T=xe):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),T=!1)}else{P=d.stateNode,ut(f,d),Y=d.memoizedProps,nt=Mo(_,Y),P.props=nt,dt=d.pendingProps,mt=P.context,Fe=_.contextType,xe=Ll,typeof Fe=="object"&&Fe!==null&&(xe=gr(Fe)),se=_.getDerivedStateFromProps,(Fe=typeof se=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(Y!==dt||mt!==xe)&&my(d,P,T,xe),ko=!1,mt=d.memoizedState,P.state=mt,rt(d,T,P,D),Le();var qt=d.memoizedState;Y!==dt||mt!==qt||ko||f!==null&&f.dependencies!==null&&Xf(f.dependencies)?(typeof se=="function"&&(cu(d,_,se,T),qt=d.memoizedState),(nt=ko||uu(d,_,nt,T,mt,qt,xe)||f!==null&&f.dependencies!==null&&Xf(f.dependencies))?(Fe||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(T,qt,xe),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(T,qt,xe)),typeof P.componentDidUpdate=="function"&&(d.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof P.componentDidUpdate!="function"||Y===f.memoizedProps&&mt===f.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||Y===f.memoizedProps&&mt===f.memoizedState||(d.flags|=1024),d.memoizedProps=T,d.memoizedState=qt),P.props=T,P.state=qt,P.context=xe,T=nt):(typeof P.componentDidUpdate!="function"||Y===f.memoizedProps&&mt===f.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||Y===f.memoizedProps&&mt===f.memoizedState||(d.flags|=1024),T=!1)}return P=T,Gf(f,d),T=(d.flags&128)!==0,P||T?(P=d.stateNode,_=T&&typeof _.getDerivedStateFromError!="function"?null:P.render(),d.flags|=1,f!==null&&T?(d.child=Hl(d,f.child,null,D),d.child=Hl(d,null,_,D)):mr(f,d,_,D),d.memoizedState=P.state,f=d.child):f=To(f,d,D),f}function Ay(f,d,_,T){return Pt(),d.flags|=256,mr(f,d,_,T),d.child}function cm(f){return{baseLanes:f,cachePool:gm()}}function Vf(f,d,_){return f=f!==null?f.childLanes&~_:0,d&&(f|=Ps),f}function Ey(f,d,_){var T=d.pendingProps,D=!1,P=(d.flags&128)!==0,Y;if((Y=P)||(Y=f!==null&&f.memoizedState===null?!1:(Ji.current&2)!==0),Y&&(D=!0,d.flags&=-129),Y=(d.flags&32)!==0,d.flags&=-33,f===null){if(En){if(D?es(d):pa(),En){var se=Sr,xe;(xe=se)&&(se=o1(se,or),se!==null?(d.memoizedState={dehydrated:se,treeContext:Nl!==null?{id:Ea,overflow:Ma}:null,retryLane:536870912},xe=t(18,null,null,0),xe.stateNode=se,xe.return=d,d.child=xe,br=d,Sr=null,xe=!0):xe=!1),xe||Ye(d)}if(se=d.memoizedState,se!==null&&(se=se.dehydrated,se!==null))return cd(se)?d.lanes=16:d.lanes=536870912,null;zr(d)}return se=T.children,T=T.fallback,D?(pa(),D=d.mode,se=fm({mode:"hidden",children:se},D),T=vi(T,D,_,null),se.return=d,T.return=d,se.sibling=T,d.child=se,D=d.child,D.memoizedState=cm(_),D.childLanes=Vf(f,Y,_),d.memoizedState=Ad,T):(es(d),um(d,se))}if(xe=f.memoizedState,xe!==null&&(se=xe.dehydrated,se!==null)){if(P)d.flags&256?(es(d),d.flags&=-257,d=I0(f,d,_)):d.memoizedState!==null?(pa(),d.child=f.child,d.flags|=128,d=null):(pa(),D=T.fallback,se=d.mode,T=fm({mode:"visible",children:T.children},se),D=vi(D,se,_,null),D.flags|=2,T.return=d,D.return=d,T.sibling=D,d.child=T,Hl(d,f.child,null,_),T=d.child,T.memoizedState=cm(_),T.childLanes=Vf(f,Y,_),d.memoizedState=Ad,d=D);else if(es(d),cd(se))Y=n1(se).digest,T=Error(r(419)),T.stack="",T.digest=Y,bt({value:T,source:null,stack:null}),d=I0(f,d,_);else if(Yn||jf(f,d,_,!1),Y=(_&f.childLanes)!==0,Yn||Y){if(Y=Ln,Y!==null){if(T=_&-_,(T&42)!==0)T=1;else switch(T){case 2:T=1;break;case 8:T=4;break;case 32:T=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:T=64;break;case 268435456:T=134217728;break;default:T=0}if(T=(T&(Y.suspendedLanes|_))!==0?0:T,T!==0&&T!==xe.retryLane)throw xe.retryLane=T,je(f,T),sr(Y,f,T),Sd}ld(se)||Po(),d=I0(f,d,_)}else ld(se)?(d.flags|=128,d.child=f.child,d=Uo.bind(null,f),i1(se,d),d=null):(f=xe.treeContext,_r&&(Sr=a1(se),br=d,En=!0,ea=null,or=!1,f!==null&&(Es[Ms++]=Ea,Es[Ms++]=Ma,Es[Ms++]=Nl,Ea=f.id,Ma=f.overflow,Nl=d)),d=um(d,T.children),d.flags|=4096);return d}return D?(pa(),D=T.fallback,se=d.mode,xe=f.child,P=xe.sibling,T=Ks(xe,{mode:"hidden",children:T.children}),T.subtreeFlags=xe.subtreeFlags&31457280,P!==null?D=Ks(P,D):(D=vi(D,se,_,null),D.flags|=2),D.return=d,T.return=d,T.sibling=D,d.child=T,T=D,D=d.child,se=f.child.memoizedState,se===null?se=cm(_):(xe=se.cachePool,xe!==null?(P=jr?Qn._currentValue:Qn._currentValue2,xe=xe.parent!==P?{parent:P,pool:P}:xe):xe=gm(),se={baseLanes:se.baseLanes|_,cachePool:xe}),D.memoizedState=se,D.childLanes=Vf(f,Y,_),d.memoizedState=Ad,T):(es(d),_=f.child,f=_.sibling,_=Ks(_,{mode:"visible",children:T.children}),_.return=d,_.sibling=null,f!==null&&(Y=d.deletions,Y===null?(d.deletions=[f],d.flags|=16):Y.push(f)),d.child=_,d.memoizedState=null,_)}function um(f,d){return d=fm({mode:"visible",children:d},f.mode),d.return=f,f.child=d}function fm(f,d){return sh(f,d,0,null)}function I0(f,d,_){return Hl(d,f.child,null,_),f=um(d,d.pendingProps.children),f.flags|=2,d.memoizedState=null,f}function My(f,d,_){f.lanes|=d;var T=f.alternate;T!==null&&(T.lanes|=d),kf(f.return,d,_)}function hm(f,d,_,T,D){var P=f.memoizedState;P===null?f.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:T,tail:_,tailMode:D}:(P.isBackwards=d,P.rendering=null,P.renderingStartTime=0,P.last=T,P.tail=_,P.tailMode=D)}function Ty(f,d,_){var T=d.pendingProps,D=T.revealOrder,P=T.tail;if(mr(f,d,T.children,_),T=Ji.current,(T&2)!==0)T=T&1|2,d.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=d.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&My(f,_,d);else if(f.tag===19)My(f,_,d);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break e;for(;f.sibling===null;){if(f.return===null||f.return===d)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}T&=1}switch(C(Ji,T),D){case"forwards":for(_=d.child,D=null;_!==null;)f=_.alternate,f!==null&&ma(f)===null&&(D=_),_=_.sibling;_=D,_===null?(D=d.child,d.child=null):(D=_.sibling,_.sibling=null),hm(d,!1,D,_,P);break;case"backwards":for(_=null,D=d.child,d.child=null;D!==null;){if(f=D.alternate,f!==null&&ma(f)===null){d.child=D;break}f=D.sibling,D.sibling=_,_=D,D=f}hm(d,!0,_,null,P);break;case"together":hm(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function To(f,d,_){if(f!==null&&(d.dependencies=f.dependencies),Os|=d.lanes,(_&d.childLanes)===0)if(f!==null){if(jf(f,d,_,!1),(_&d.childLanes)===0)return null}else return null;if(f!==null&&d.child!==f.child)throw Error(r(153));if(d.child!==null){for(f=d.child,_=Ks(f,f.pendingProps),d.child=_,_.return=d;f.sibling!==null;)f=f.sibling,_=_.sibling=Ks(f,f.pendingProps),_.return=d;_.sibling=null}return d.child}function dm(f,d){return(f.lanes&d)!==0?!0:(f=f.dependencies,!!(f!==null&&Xf(f)))}function _S(f,d,_){switch(d.tag){case 3:ie(d,d.stateNode.containerInfo),vl(d,Qn,f.memoizedState.cache),Pt();break;case 27:case 5:Ue(d);break;case 4:ie(d,d.stateNode.containerInfo);break;case 10:vl(d,d.type,d.memoizedProps.value);break;case 13:var T=d.memoizedState;if(T!==null)return T.dehydrated!==null?(es(d),d.flags|=128,null):(_&d.child.childLanes)!==0?Ey(f,d,_):(es(d),f=To(f,d,_),f!==null?f.sibling:null);es(d);break;case 19:var D=(f.flags&128)!==0;if(T=(_&d.childLanes)!==0,T||(jf(f,d,_,!1),T=(_&d.childLanes)!==0),D){if(T)return Ty(f,d,_);d.flags|=128}if(D=d.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),C(Ji,Ji.current),T)break;return null;case 22:case 23:return d.lanes=0,xy(f,d,_);case 24:vl(d,Qn,f.memoizedState.cache)}return To(f,d,_)}function Cy(f,d,_){if(f!==null)if(f.memoizedProps!==d.pendingProps)Yn=!0;else{if(!dm(f,_)&&(d.flags&128)===0)return Yn=!1,_S(f,d,_);Yn=(f.flags&131072)!==0}else Yn=!1,En&&(d.flags&1048576)!==0&&ae(d,Uu,d.index);switch(d.lanes=0,d.tag){case 16:e:{f=d.pendingProps;var T=d.elementType,D=T._init;if(T=D(T._payload),d.type=T,typeof T=="function")ih(T)?(f=Mo(T,f),d.tag=1,d=Sy(null,d,T,f,_)):(d.tag=0,d=N0(null,d,T,f,_));else{if(T!=null){if(D=T.$$typeof,D===uh){d.tag=11,d=L0(null,d,T,f,_);break e}else if(D===nd){d.tag=14,d=vy(null,d,T,f,_);break e}}throw d=a(T)||T,Error(r(306,d,""))}}return d;case 0:return N0(f,d,d.type,d.pendingProps,_);case 1:return T=d.type,D=Mo(T,d.pendingProps),Sy(f,d,T,D,_);case 3:e:{if(ie(d,d.stateNode.containerInfo),f===null)throw Error(r(387));var P=d.pendingProps;D=d.memoizedState,T=D.element,ut(f,d),rt(d,P,null,_);var Y=d.memoizedState;if(P=Y.cache,vl(d,Qn,P),P!==D.cache&&cc(d,[Qn],_,!0),Le(),P=Y.element,_r&&D.isDehydrated)if(D={element:P,isDehydrated:!1,cache:Y.cache},d.updateQueue.baseState=D,d.memoizedState=D,d.flags&256){d=Ay(f,d,P,_);break e}else if(P!==T){T=me(Error(r(424)),d),bt(T),d=Ay(f,d,P,_);break e}else for(_r&&(Sr=s1(d.stateNode.containerInfo),br=d,En=!0,ea=null,or=!0),_=Ka(d,null,P,_),d.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(Pt(),P===T){d=To(f,d,_);break e}mr(f,d,P,_)}d=d.child}return d;case 26:if(As)return Gf(f,d),f===null?(_=Qm(d.type,null,d.pendingProps,null))?d.memoizedState=_:En||(d.stateNode=pd(d.type,d.pendingProps,Ya.current,d)):d.memoizedState=Qm(d.type,f.memoizedProps,d.pendingProps,f.memoizedState),null;case 27:if(Xn)return Ue(d),f===null&&Xn&&En&&(T=d.stateNode=Aa(d.type,d.pendingProps,Ya.current,Ki.current,!1),br=d,or=!0,Sr=ud(T)),T=d.pendingProps.children,f!==null||En?mr(f,d,T,_):d.child=Hl(d,null,T,_),Gf(f,d),d.child;case 5:return f===null&&En&&(hd(d.type,d.pendingProps,Ki.current),(D=T=Sr)&&(T=CS(T,d.type,d.pendingProps,or),T!==null?(d.stateNode=T,br=d,Sr=ud(T),or=!1,D=!0):D=!1),D||Ye(d)),Ue(d),D=d.type,P=d.pendingProps,Y=f!==null?f.memoizedProps:null,T=P.children,$t(D,P)?T=null:Y!==null&&$t(D,Y)&&(d.flags|=32),d.memoizedState!==null&&(D=va(f,d,zi,null,null,_),jr?Sa._currentValue=D:Sa._currentValue2=D),Gf(f,d),mr(f,d,T,_),d.child;case 6:return f===null&&En&&(h1(d.pendingProps,Ki.current),(f=_=Sr)&&(_=$m(_,d.pendingProps,or),_!==null?(d.stateNode=_,br=d,Sr=null,f=!0):f=!1),f||Ye(d)),null;case 13:return Ey(f,d,_);case 4:return ie(d,d.stateNode.containerInfo),T=d.pendingProps,f===null?d.child=Hl(d,null,T,_):mr(f,d,T,_),d.child;case 11:return L0(f,d,d.type,d.pendingProps,_);case 7:return mr(f,d,d.pendingProps,_),d.child;case 8:return mr(f,d,d.pendingProps.children,_),d.child;case 12:return mr(f,d,d.pendingProps.children,_),d.child;case 10:return T=d.pendingProps,vl(d,d.type,T.value),mr(f,d,T.children,_),d.child;case 9:return D=d.type._context,T=d.pendingProps.children,yl(d),D=gr(D),T=T(D),d.flags|=1,mr(f,d,T,_),d.child;case 14:return vy(f,d,d.type,d.pendingProps,_);case 15:return yy(f,d,d.type,d.pendingProps,_);case 19:return Ty(f,d,_);case 22:return xy(f,d,_);case 24:return yl(d),T=gr(Qn),f===null?(D=mm(),D===null&&(D=Ln,P=xl(),D.pooledCache=P,P.refCount++,P!==null&&(D.pooledCacheLanes|=_),D=P),d.memoizedState={parent:T,cache:D},qe(d),vl(d,Qn,D)):((f.lanes&_)!==0&&(ut(f,d),rt(d,null,null,_),Le()),D=f.memoizedState,P=d.memoizedState,D.parent!==T?(D={parent:T,cache:T},d.memoizedState=D,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=D),vl(d,Qn,T)):(T=P.cache,vl(d,Qn,T),T!==D.cache&&cc(d,[Qn],_,!0))),mr(f,d,d.pendingProps.children,_),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function vl(f,d,_){jr?(C(Xo,d._currentValue),d._currentValue=_):(C(Xo,d._currentValue2),d._currentValue2=_)}function Co(f){var d=Xo.current;jr?f._currentValue=d:f._currentValue2=d,S(Xo)}function kf(f,d,_){for(;f!==null;){var T=f.alternate;if((f.childLanes&d)!==d?(f.childLanes|=d,T!==null&&(T.childLanes|=d)):T!==null&&(T.childLanes&d)!==d&&(T.childLanes|=d),f===_)break;f=f.return}}function cc(f,d,_,T){var D=f.child;for(D!==null&&(D.return=f);D!==null;){var P=D.dependencies;if(P!==null){var Y=D.child;P=P.firstContext;e:for(;P!==null;){var se=P;P=D;for(var xe=0;xe<d.length;xe++)if(se.context===d[xe]){P.lanes|=_,se=P.alternate,se!==null&&(se.lanes|=_),kf(P.return,_,f),T||(Y=null);break e}P=se.next}}else if(D.tag===18){if(Y=D.return,Y===null)throw Error(r(341));Y.lanes|=_,P=Y.alternate,P!==null&&(P.lanes|=_),kf(Y,_,f),Y=null}else Y=D.child;if(Y!==null)Y.return=D;else for(Y=D;Y!==null;){if(Y===f){Y=null;break}if(D=Y.sibling,D!==null){D.return=Y.return,Y=D;break}Y=Y.return}D=Y}}function jf(f,d,_,T){f=null;for(var D=d,P=!1;D!==null;){if(!P){if((D.flags&524288)!==0)P=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var Y=D.alternate;if(Y===null)throw Error(r(387));if(Y=Y.memoizedProps,Y!==null){var se=D.type;ls(D.pendingProps.value,Y.value)||(f!==null?f.push(se):f=[se])}}else if(D===xc.current){if(Y=D.alternate,Y===null)throw Error(r(387));Y.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(f!==null?f.push(Sa):f=[Sa])}D=D.return}f!==null&&cc(d,f,_,T),d.flags|=262144}function Xf(f){for(f=f.firstContext;f!==null;){var d=f.context;if(!ls(jr?d._currentValue:d._currentValue2,f.memoizedValue))return!0;f=f.next}return!1}function yl(f){wa=f,Rs=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function gr(f){return pm(wa,f)}function Wf(f,d){return wa===null&&yl(f),pm(f,d)}function pm(f,d){var _=jr?d._currentValue:d._currentValue2;if(d={context:d,memoizedValue:_,next:null},Rs===null){if(f===null)throw Error(r(308));Rs=d,f.dependencies={lanes:0,firstContext:d},f.flags|=524288}else Rs=Rs.next=d;return _}function xl(){return{controller:new Hu,data:new Map,refCount:0}}function Yf(f){f.refCount--,f.refCount===0&&A1(E1,function(){f.controller.abort()})}function mm(){var f=$a.current;return f!==null?f:Ln.pooledCache}function F0(f,d){d===null?C($a,$a.current):C($a,d.pool)}function gm(){var f=mm();return f===null?null:{parent:jr?Qn._currentValue:Qn._currentValue2,pool:f}}function ts(f){f.flags|=4}function pu(f,d){if(f!==null&&f.child===d.child)return!1;if((d.flags&16)!==0)return!0;for(f=d.child;f!==null;){if((f.flags&13878)!==0||(f.subtreeFlags&13878)!==0)return!0;f=f.sibling}return!1}function uc(f,d,_,T){if(qi)for(_=d.child;_!==null;){if(_.tag===5||_.tag===6)hh(f,_.stateNode);else if(!(_.tag===4||Xn&&_.tag===27)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===d)break;for(;_.sibling===null;){if(_.return===null||_.return===d)return;_=_.return}_.sibling.return=_.return,_=_.sibling}else if(Zs)for(var D=d.child;D!==null;){if(D.tag===5){var P=D.stateNode;_&&T&&(P=Ym(P,D.type,D.memoizedProps)),hh(f,P)}else if(D.tag===6)P=D.stateNode,_&&T&&(P=qm(P,D.memoizedProps)),hh(f,P);else if(D.tag!==4){if(D.tag===22&&D.memoizedState!==null)P=D.child,P!==null&&(P.return=D),uc(f,D,!0,!0);else if(D.child!==null){D.child.return=D,D=D.child;continue}}if(D===d)break;for(;D.sibling===null;){if(D.return===null||D.return===d)return;D=D.return}D.sibling.return=D.return,D=D.sibling}}function wy(f,d,_,T){if(Zs)for(var D=d.child;D!==null;){if(D.tag===5){var P=D.stateNode;_&&T&&(P=Ym(P,D.type,D.memoizedProps)),Wm(f,P)}else if(D.tag===6)P=D.stateNode,_&&T&&(P=qm(P,D.memoizedProps)),Wm(f,P);else if(D.tag!==4){if(D.tag===22&&D.memoizedState!==null)P=D.child,P!==null&&(P.return=D),wy(f,D,!(D.memoizedProps!==null&&D.memoizedProps.mode==="manual"),!0);else if(D.child!==null){D.child.return=D,D=D.child;continue}}if(D===d)break;for(;D.sibling===null;){if(D.return===null||D.return===d)return;D=D.return}D.sibling.return=D.return,D=D.sibling}}function qf(f,d){if(Zs&&pu(f,d)){f=d.stateNode;var _=f.containerInfo,T=dh();wy(T,d,!1,!1),f.pendingChildren=T,ts(d),od(_,T)}}function z0(f,d,_,T){if(qi)f.memoizedProps!==T&&ts(d);else if(Zs){var D=f.stateNode,P=f.memoizedProps;if((f=pu(f,d))||P!==T){var Y=Ki.current;P=Bu(D,_,P,T,!f,null),P===D?d.stateNode=D:(Fo(P,_,T,Y)&&ts(d),d.stateNode=P,f?uc(P,d,!1,!1):ts(d))}else d.stateNode=D}}function H0(f,d,_){if(Fm(d,_)){if(f.flags|=16777216,!sd(d,_))if(Ml())f.flags|=8192;else throw Il=Sh,bh}else f.flags&=-16777217}function G0(f,d){if(m1(d)){if(f.flags|=16777216,!pc(d))if(Ml())f.flags|=8192;else throw Il=Sh,bh}else f.flags&=-16777217}function mu(f,d){d!==null&&(f.flags|=4),f.flags&16384&&(d=f.tag!==22?L():536870912,f.lanes|=d,eo|=d)}function gu(f,d){if(!En)switch(f.tailMode){case"hidden":d=f.tail;for(var _=null;d!==null;)d.alternate!==null&&(_=d),d=d.sibling;_===null?f.tail=null:_.sibling=null;break;case"collapsed":_=f.tail;for(var T=null;_!==null;)_.alternate!==null&&(T=_),_=_.sibling;T===null?d||f.tail===null?f.tail=null:f.tail.sibling=null:T.sibling=null}}function li(f){var d=f.alternate!==null&&f.alternate.child===f.child,_=0,T=0;if(d)for(var D=f.child;D!==null;)_|=D.lanes|D.childLanes,T|=D.subtreeFlags&31457280,T|=D.flags&31457280,D.return=f,D=D.sibling;else for(D=f.child;D!==null;)_|=D.lanes|D.childLanes,T|=D.subtreeFlags,T|=D.flags,D.return=f,D=D.sibling;return f.subtreeFlags|=T,f.childLanes=_,d}function Ry(f,d,_){var T=d.pendingProps;switch(Ae(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return li(d),null;case 1:return li(d),null;case 3:return _=d.stateNode,T=null,f!==null&&(T=f.memoizedState.cache),d.memoizedState.cache!==T&&(d.flags|=2048),Co(Qn),_e(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(f===null||f.child===null)&&(an(d)?ts(d):f===null||f.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,ea!==null&&(th(ea),ea=null))),qf(f,d),li(d),null;case 26:if(As){_=d.type;var D=d.memoizedState;return f===null?(ts(d),D!==null?(li(d),G0(d,D)):(li(d),H0(d,_,T))):D?D!==f.memoizedState?(ts(d),li(d),G0(d,D)):(li(d),d.flags&=-16777217):(qi?f.memoizedProps!==T&&ts(d):z0(f,d,_,T),li(d),H0(d,_,T)),null}case 27:if(Xn){if(ke(d),_=Ya.current,D=d.type,f!==null&&d.stateNode!=null)qi?f.memoizedProps!==T&&ts(d):z0(f,d,D,T);else{if(!T){if(d.stateNode===null)throw Error(r(166));return li(d),null}f=Ki.current,an(d)?gt(d,f):(f=Aa(D,T,_,f,!0),d.stateNode=f,ts(d))}return li(d),null}case 5:if(ke(d),_=d.type,f!==null&&d.stateNode!=null)z0(f,d,_,T);else{if(!T){if(d.stateNode===null)throw Error(r(166));return li(d),null}f=Ki.current,an(d)?gt(d,f):(D=Im(_,T,Ya.current,f,d),uc(D,d,!1,!1),d.stateNode=D,Fo(D,_,T,f)&&ts(d))}return li(d),H0(d,d.type,d.pendingProps),null;case 6:if(f&&d.stateNode!=null)_=f.memoizedProps,qi?_!==T&&ts(d):Zs&&(_!==T?(d.stateNode=zn(T,Ya.current,Ki.current,d),ts(d)):d.stateNode=f.stateNode);else{if(typeof T!="string"&&d.stateNode===null)throw Error(r(166));if(f=Ya.current,_=Ki.current,an(d)){if(!_r)throw Error(r(176));if(f=d.stateNode,_=d.memoizedProps,T=null,D=br,D!==null)switch(D.tag){case 27:case 5:T=D.memoizedProps}Zm(f,_,d,T)||Ye(d)}else d.stateNode=zn(T,f,_,d)}return li(d),null;case 13:if(T=d.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(D=an(d),T!==null&&T.dehydrated!==null){if(f===null){if(!D)throw Error(r(318));if(!_r)throw Error(r(344));if(D=d.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(r(317));c1(D,d)}else Pt(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;li(d),D=!1}else ea!==null&&(th(ea),ea=null),D=!0;if(!D)return d.flags&256?(zr(d),d):(zr(d),null)}if(zr(d),(d.flags&128)!==0)return d.lanes=_,d;if(_=T!==null,f=f!==null&&f.memoizedState!==null,_){T=d.child,D=null,T.alternate!==null&&T.alternate.memoizedState!==null&&T.alternate.memoizedState.cachePool!==null&&(D=T.alternate.memoizedState.cachePool.pool);var P=null;T.memoizedState!==null&&T.memoizedState.cachePool!==null&&(P=T.memoizedState.cachePool.pool),P!==D&&(T.flags|=2048)}return _!==f&&_&&(d.child.flags|=8192),mu(d,d.updateQueue),li(d),null;case 4:return _e(),qf(f,d),f===null&&Ti(d.stateNode.containerInfo),li(d),null;case 10:return Co(d.type),li(d),null;case 19:if(S(Ji),D=d.memoizedState,D===null)return li(d),null;if(T=(d.flags&128)!==0,P=D.rendering,P===null)if(T)gu(D,!1);else{if(qn!==0||f!==null&&(f.flags&128)!==0)for(f=d.child;f!==null;){if(P=ma(f),P!==null){for(d.flags|=128,gu(D,!1),f=P.updateQueue,d.updateQueue=f,mu(d,f),d.subtreeFlags=0,f=_,_=d.child;_!==null;)rh(_,f),_=_.sibling;return C(Ji,Ji.current&1|2),d.child}f=f.sibling}D.tail!==null&&Qs()>ku&&(d.flags|=128,T=!0,gu(D,!1),d.lanes=4194304)}else{if(!T)if(f=ma(P),f!==null){if(d.flags|=128,T=!0,f=f.updateQueue,d.updateQueue=f,mu(d,f),gu(D,!0),D.tail===null&&D.tailMode==="hidden"&&!P.alternate&&!En)return li(d),null}else 2*Qs()-D.renderingStartTime>ku&&_!==536870912&&(d.flags|=128,T=!0,gu(D,!1),d.lanes=4194304);D.isBackwards?(P.sibling=d.child,d.child=P):(f=D.last,f!==null?f.sibling=P:d.child=P,D.last=P)}return D.tail!==null?(d=D.tail,D.rendering=d,D.tail=d.sibling,D.renderingStartTime=Qs(),d.sibling=null,f=Ji.current,C(Ji,T?f&1|2:f&1),d):(li(d),null);case 22:case 23:return zr(d),Rr(),T=d.memoizedState!==null,f!==null?f.memoizedState!==null!==T&&(d.flags|=8192):T&&(d.flags|=8192),T?(_&536870912)!==0&&(d.flags&128)===0&&(li(d),d.subtreeFlags&6&&(d.flags|=8192)):li(d),_=d.updateQueue,_!==null&&mu(d,_.retryQueue),_=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),T=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(T=d.memoizedState.cachePool.pool),T!==_&&(d.flags|=2048),f!==null&&S($a),null;case 24:return _=null,f!==null&&(_=f.memoizedState.cache),d.memoizedState.cache!==_&&(d.flags|=2048),Co(Qn),li(d),null;case 25:return null}throw Error(r(156,d.tag))}function bS(f,d){switch(Ae(d),d.tag){case 1:return f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 3:return Co(Qn),_e(),f=d.flags,(f&65536)!==0&&(f&128)===0?(d.flags=f&-65537|128,d):null;case 26:case 27:case 5:return ke(d),null;case 13:if(zr(d),f=d.memoizedState,f!==null&&f.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Pt()}return f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 19:return S(Ji),null;case 4:return _e(),null;case 10:return Co(d.type),null;case 22:case 23:return zr(d),Rr(),f!==null&&S($a),f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 24:return Co(Qn),null;case 25:return null;default:return null}}function Dy(f,d){switch(Ae(d),d.tag){case 3:Co(Qn),_e();break;case 26:case 27:case 5:ke(d);break;case 4:_e();break;case 13:zr(d);break;case 19:S(Ji);break;case 10:Co(d.type);break;case 22:case 23:zr(d),Rr(),f!==null&&S($a);break;case 24:Co(Qn)}}function Kf(f,d){try{var _=d.updateQueue,T=_!==null?_.lastEffect:null;if(T!==null){var D=T.next;_=D;do{if((_.tag&f)===f){T=void 0;var P=_.create,Y=_.inst;T=P(),Y.destroy=T}_=_.next}while(_!==D)}}catch(se){Pn(d,d.return,se)}}function _l(f,d,_){try{var T=d.updateQueue,D=T!==null?T.lastEffect:null;if(D!==null){var P=D.next;T=P;do{if((T.tag&f)===f){var Y=T.inst,se=Y.destroy;if(se!==void 0){Y.destroy=void 0,D=d;var xe=_;try{se()}catch(Fe){Pn(D,xe,Fe)}}}T=T.next}while(T!==P)}}catch(Fe){Pn(d,d.return,Fe)}}function By(f){var d=f.updateQueue;if(d!==null){var _=f.stateNode;try{Je(d,_)}catch(T){Pn(f,f.return,T)}}}function ns(f,d,_){_.props=Mo(f.type,f.memoizedProps),_.state=f.memoizedState;try{_.componentWillUnmount()}catch(T){Pn(f,d,T)}}function xa(f,d){try{var _=f.ref;if(_!==null){var T=f.stateNode;switch(f.tag){case 26:case 27:case 5:var D=wu(T);break;default:D=T}typeof _=="function"?f.refCleanup=_(D):_.current=D}}catch(P){Pn(f,d,P)}}function is(f,d){var _=f.ref,T=f.refCleanup;if(_!==null)if(typeof T=="function")try{T()}catch(D){Pn(f,d,D)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(D){Pn(f,d,D)}else _.current=null}function vm(f){var d=f.type,_=f.memoizedProps,T=f.stateNode;try{MS(T,d,_,f)}catch(D){Pn(f,f.return,D)}}function ym(f,d,_){try{qy(f.stateNode,f.type,_,d,f)}catch(T){Pn(f,f.return,T)}}function xm(f){return f.tag===5||f.tag===3||(As?f.tag===26:!1)||(Xn?f.tag===27:!1)||f.tag===4}function Jf(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||xm(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&(!Xn||f.tag!==27)&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function _m(f,d,_){var T=f.tag;if(T===5||T===6)f=f.stateNode,d?Jy(_,f,d):km(_,f);else if(!(T===4||Xn&&T===27)&&(f=f.child,f!==null))for(_m(f,d,_),f=f.sibling;f!==null;)_m(f,d,_),f=f.sibling}function wo(f,d,_){var T=f.tag;if(T===5||T===6)f=f.stateNode,d?Ky(_,f,d):Wy(_,f);else if(!(T===4||Xn&&T===27)&&(f=f.child,f!==null))for(wo(f,d,_),f=f.sibling;f!==null;)wo(f,d,_),f=f.sibling}function V0(f,d,_){f=f.containerInfo;try{Ou(f,_)}catch(T){Pn(d,d.return,T)}}function $f(f,d){for(id(f.containerInfo),Yt=d;Yt!==null;)if(f=Yt,d=f.child,(f.subtreeFlags&1028)!==0&&d!==null)d.return=f,Yt=d;else for(;Yt!==null;){f=Yt;var _=f.alternate;switch(d=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&_!==null){d=void 0;var T=f,D=_.memoizedProps;_=_.memoizedState;var P=T.stateNode;try{var Y=Mo(T.type,D,T.elementType===T.type);d=P.getSnapshotBeforeUpdate(Y,_),P.__reactInternalSnapshotBeforeUpdate=d}catch(se){Pn(T,T.return,se)}}break;case 3:(d&1024)!==0&&qi&&t1(f.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=f.sibling,d!==null){d.return=f.return,Yt=d;break}Yt=f.return}return Y=fn,fn=!1,Y}function k0(f,d,_){var T=_.flags;switch(_.tag){case 0:case 11:case 15:Do(f,_),T&4&&Kf(5,_);break;case 1:if(Do(f,_),T&4)if(f=_.stateNode,d===null)try{f.componentDidMount()}catch(se){Pn(_,_.return,se)}else{var D=Mo(_.type,d.memoizedProps);d=d.memoizedState;try{f.componentDidUpdate(D,d,f.__reactInternalSnapshotBeforeUpdate)}catch(se){Pn(_,_.return,se)}}T&64&&By(_),T&512&&xa(_,_.return);break;case 3:if(Do(f,_),T&64&&(T=_.updateQueue,T!==null)){if(f=null,_.child!==null)switch(_.child.tag){case 27:case 5:f=wu(_.child.stateNode);break;case 1:f=_.child.stateNode}try{Je(T,f)}catch(se){Pn(_,_.return,se)}}break;case 26:if(As){Do(f,_),T&512&&xa(_,_.return);break}case 27:case 5:Do(f,_),d===null&&T&4&&vm(_),T&512&&xa(_,_.return);break;case 12:Do(f,_);break;case 13:Do(f,_),T&4&&j0(f,_);break;case 22:if(D=_.memoizedState!==null||Za,!D){d=d!==null&&d.memoizedState!==null||xi;var P=Za,Y=xi;Za=D,(xi=d)&&!Y?Bo(f,_,(_.subtreeFlags&8772)!==0):Do(f,_),Za=P,xi=Y}T&512&&(_.memoizedProps.mode==="manual"?xa(_,_.return):is(_,_.return));break;default:Do(f,_)}}function bm(f){var d=f.alternate;d!==null&&(f.alternate=null,bm(d)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(d=f.stateNode,d!==null&&ES(d)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function vr(f,d,_){for(_=_.child;_!==null;)bl(f,d,_),_=_.sibling}function bl(f,d,_){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount(wi,_)}catch{}switch(_.tag){case 26:if(As){xi||is(_,d),vr(f,d,_),_.memoizedState?dc(_.memoizedState):_.stateNode&&Pu(_.stateNode);break}case 27:if(Xn){xi||is(_,d);var T=Ot,D=tn;Ot=_.stateNode,vr(f,d,_),Ul(_.stateNode),Ot=T,tn=D;break}case 5:xi||is(_,d);case 6:if(qi){if(T=Ot,D=tn,Ot=null,vr(f,d,_),Ot=T,tn=D,Ot!==null)if(tn)try{$y(Ot,_.stateNode)}catch(P){Pn(_,d,P)}else try{jm(Ot,_.stateNode)}catch(P){Pn(_,d,P)}}else vr(f,d,_);break;case 18:qi&&Ot!==null&&(tn?ph(Ot,_.stateNode):f1(Ot,_.stateNode));break;case 4:qi?(T=Ot,D=tn,Ot=_.stateNode.containerInfo,tn=!0,vr(f,d,_),Ot=T,tn=D):(Zs&&V0(_.stateNode,_,dh()),vr(f,d,_));break;case 0:case 11:case 14:case 15:xi||_l(2,_,d),xi||_l(4,_,d),vr(f,d,_);break;case 1:xi||(is(_,d),T=_.stateNode,typeof T.componentWillUnmount=="function"&&ns(_,d,T)),vr(f,d,_);break;case 21:vr(f,d,_);break;case 22:xi||is(_,d),xi=(T=xi)||_.memoizedState!==null,vr(f,d,_),xi=T;break;default:vr(f,d,_)}}function j0(f,d){if(_r&&d.memoizedState===null&&(f=d.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{RS(f)}catch(_){Pn(d,d.return,_)}}function Oy(f){switch(f.tag){case 13:case 19:var d=f.stateNode;return d===null&&(d=f.stateNode=new Un),d;case 22:return f=f.stateNode,d=f._retryCache,d===null&&(d=f._retryCache=new Un),d;default:throw Error(r(435,f.tag))}}function Ro(f,d){var _=Oy(f);d.forEach(function(T){var D=wl.bind(null,f,T);_.has(T)||(_.add(T),T.then(D,D))})}function Vr(f,d){var _=d.deletions;if(_!==null)for(var T=0;T<_.length;T++){var D=_[T],P=f,Y=d;if(qi){var se=Y;e:for(;se!==null;){switch(se.tag){case 27:case 5:Ot=se.stateNode,tn=!1;break e;case 3:Ot=se.stateNode.containerInfo,tn=!0;break e;case 4:Ot=se.stateNode.containerInfo,tn=!0;break e}se=se.return}if(Ot===null)throw Error(r(160));bl(P,Y,D),Ot=null,tn=!1}else bl(P,Y,D);P=D.alternate,P!==null&&(P.return=null),D.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)Sm(d,f),d=d.sibling}function Sm(f,d){var _=f.alternate,T=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:Vr(d,f),rs(f),T&4&&(_l(3,f,f.return),Kf(3,f),_l(5,f,f.return));break;case 1:Vr(d,f),rs(f),T&512&&(xi||_===null||is(_,_.return)),T&64&&Za&&(f=f.updateQueue,f!==null&&(T=f.callbacks,T!==null&&(_=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=_===null?T:_.concat(T))));break;case 26:if(As){var D=di;Vr(d,f),rs(f),T&512&&(xi||_===null||is(_,_.return)),T&4&&(T=_!==null?_.memoizedState:null,d=f.memoizedState,_===null?d===null?f.stateNode===null?f.stateNode=gh(D,f.type,f.memoizedProps,f):vh(D,f.type,f.stateNode):f.stateNode=d1(D,d,f.memoizedProps):T!==d?(T===null?_.stateNode!==null&&Pu(_.stateNode):dc(T),d===null?vh(D,f.type,f.stateNode):d1(D,d,f.memoizedProps)):d===null&&f.stateNode!==null&&ym(f,f.memoizedProps,_.memoizedProps));break}case 27:if(Xn&&T&4&&f.alternate===null){D=f.stateNode;var P=f.memoizedProps;try{Pl(D),v1(f.type,P,D,f)}catch(nt){Pn(f,f.return,nt)}}case 5:if(Vr(d,f),rs(f),T&512&&(xi||_===null||is(_,_.return)),qi){if(f.flags&32){d=f.stateNode;try{Xm(d)}catch(nt){Pn(f,f.return,nt)}}T&4&&f.stateNode!=null&&(d=f.memoizedProps,ym(f,d,_!==null?_.memoizedProps:d)),T&1024&&(ig=!0)}break;case 6:if(Vr(d,f),rs(f),T&4&&qi){if(f.stateNode===null)throw Error(r(162));T=f.memoizedProps,_=_!==null?_.memoizedProps:T,d=f.stateNode;try{Yy(d,_,T)}catch(nt){Pn(f,f.return,nt)}}break;case 3:if(As?(p1(),D=di,di=dd(d.containerInfo),Vr(d,f),di=D):Vr(d,f),rs(f),T&4){if(qi&&_r&&_!==null&&_.memoizedState.isDehydrated)try{wS(d.containerInfo)}catch(nt){Pn(f,f.return,nt)}if(Zs){T=d.containerInfo,_=d.pendingChildren;try{Ou(T,_)}catch(nt){Pn(f,f.return,nt)}}}ig&&(ig=!1,Py(f));break;case 4:As?(_=di,di=dd(f.stateNode.containerInfo),Vr(d,f),rs(f),di=_):(Vr(d,f),rs(f)),T&4&&Zs&&V0(f.stateNode,f,f.stateNode.pendingChildren);break;case 12:Vr(d,f),rs(f);break;case 13:Vr(d,f),rs(f),f.child.flags&8192&&f.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(qr=Qs()),T&4&&(T=f.updateQueue,T!==null&&(f.updateQueue=null,Ro(f,T)));break;case 22:T&512&&(xi||_===null||is(_,_.return)),D=f.memoizedState!==null;var Y=_!==null&&_.memoizedState!==null,se=Za,xe=xi;if(Za=se||D,xi=xe||Y,Vr(d,f),xi=xe,Za=se,rs(f),d=f.stateNode,d._current=f,d._visibility&=-3,d._visibility|=d._pendingVisibility&2,T&8192&&(d._visibility=D?d._visibility&-2:d._visibility|1,D&&(d=Za||xi,_===null||Y||d||vu(f)),qi&&(f.memoizedProps===null||f.memoizedProps.mode!=="manual"))){e:if(_=null,qi)for(d=f;;){if(d.tag===5||As&&d.tag===26||Xn&&d.tag===27){if(_===null){Y=_=d;try{P=Y.stateNode,D?Zy(P):e1(Y.stateNode,Y.memoizedProps)}catch(nt){Pn(Y,Y.return,nt)}}}else if(d.tag===6){if(_===null){Y=d;try{var Fe=Y.stateNode;D?Qy(Fe):TS(Fe,Y.memoizedProps)}catch(nt){Pn(Y,Y.return,nt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===f)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;_===d&&(_=null),d=d.return}_===d&&(_=null),d.sibling.return=d.return,d=d.sibling}}T&4&&(T=f.updateQueue,T!==null&&(_=T.retryQueue,_!==null&&(T.retryQueue=null,Ro(f,_))));break;case 19:Vr(d,f),rs(f),T&4&&(T=f.updateQueue,T!==null&&(f.updateQueue=null,Ro(f,T)));break;case 21:break;default:Vr(d,f),rs(f)}}function rs(f){var d=f.flags;if(d&2){try{if(qi&&(!Xn||f.tag!==27)){e:{for(var _=f.return;_!==null;){if(xm(_)){var T=_;break e}_=_.return}throw Error(r(160))}switch(T.tag){case 27:if(Xn){var D=T.stateNode,P=Jf(f);wo(f,P,D);break}case 5:var Y=T.stateNode;T.flags&32&&(Xm(Y),T.flags&=-33);var se=Jf(f);wo(f,se,Y);break;case 3:case 4:var xe=T.stateNode.containerInfo,Fe=Jf(f);_m(f,Fe,xe);break;default:throw Error(r(161))}}}catch(nt){Pn(f,f.return,nt)}f.flags&=-3}d&4096&&(f.flags&=-4097)}function Py(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var d=f;Py(d),d.tag===5&&d.flags&1024&&ad(d.stateNode),f=f.sibling}}function Do(f,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)k0(f,d.alternate,d),d=d.sibling}function vu(f){for(f=f.child;f!==null;){var d=f;switch(d.tag){case 0:case 11:case 14:case 15:_l(4,d,d.return),vu(d);break;case 1:is(d,d.return);var _=d.stateNode;typeof _.componentWillUnmount=="function"&&ns(d,d.return,_),vu(d);break;case 26:case 27:case 5:is(d,d.return),vu(d);break;case 22:is(d,d.return),d.memoizedState===null&&vu(d);break;default:vu(d)}f=f.sibling}}function Bo(f,d,_){for(_=_&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var T=d.alternate,D=f,P=d,Y=P.flags;switch(P.tag){case 0:case 11:case 15:Bo(D,P,_),Kf(4,P);break;case 1:if(Bo(D,P,_),T=P,D=T.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(Fe){Pn(T,T.return,Fe)}if(T=P,D=T.updateQueue,D!==null){var se=T.stateNode;try{var xe=D.shared.hiddenCallbacks;if(xe!==null)for(D.shared.hiddenCallbacks=null,D=0;D<xe.length;D++)le(xe[D],se)}catch(Fe){Pn(T,T.return,Fe)}}_&&Y&64&&By(P),xa(P,P.return);break;case 26:case 27:case 5:Bo(D,P,_),_&&T===null&&Y&4&&vm(P),xa(P,P.return);break;case 12:Bo(D,P,_);break;case 13:Bo(D,P,_),_&&Y&4&&j0(D,P);break;case 22:P.memoizedState===null&&Bo(D,P,_),xa(P,P.return);break;default:Bo(D,P,_)}d=d.sibling}}function X0(f,d){var _=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),f=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(f=d.memoizedState.cachePool.pool),f!==_&&(f!=null&&f.refCount++,_!=null&&Yf(_))}function Zf(f,d){f=null,d.alternate!==null&&(f=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==f&&(d.refCount++,f!=null&&Yf(f))}function rr(f,d,_,T){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Am(f,d,_,T),d=d.sibling}function Am(f,d,_,T){var D=d.flags;switch(d.tag){case 0:case 11:case 15:rr(f,d,_,T),D&2048&&Kf(9,d);break;case 3:rr(f,d,_,T),D&2048&&(f=null,d.alternate!==null&&(f=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==f&&(d.refCount++,f!=null&&Yf(f)));break;case 12:if(D&2048){rr(f,d,_,T),f=d.stateNode;try{var P=d.memoizedProps,Y=P.id,se=P.onPostCommit;typeof se=="function"&&se(Y,d.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(xe){Pn(d,d.return,xe)}}else rr(f,d,_,T);break;case 23:break;case 22:P=d.stateNode,d.memoizedState!==null?P._visibility&4?rr(f,d,_,T):Dr(f,d):P._visibility&4?rr(f,d,_,T):(P._visibility|=4,yr(f,d,_,T,(d.subtreeFlags&10256)!==0)),D&2048&&X0(d.alternate,d);break;case 24:rr(f,d,_,T),D&2048&&Zf(d.alternate,d);break;default:rr(f,d,_,T)}}function yr(f,d,_,T,D){for(D=D&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var P=f,Y=d,se=_,xe=T,Fe=Y.flags;switch(Y.tag){case 0:case 11:case 15:yr(P,Y,se,xe,D),Kf(8,Y);break;case 23:break;case 22:var nt=Y.stateNode;Y.memoizedState!==null?nt._visibility&4?yr(P,Y,se,xe,D):Dr(P,Y):(nt._visibility|=4,yr(P,Y,se,xe,D)),D&&Fe&2048&&X0(Y.alternate,Y);break;case 24:yr(P,Y,se,xe,D),D&&Fe&2048&&Zf(Y.alternate,Y);break;default:yr(P,Y,se,xe,D)}d=d.sibling}}function Dr(f,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var _=f,T=d,D=T.flags;switch(T.tag){case 22:Dr(_,T),D&2048&&X0(T.alternate,T);break;case 24:Dr(_,T),D&2048&&Zf(T.alternate,T);break;default:Dr(_,T)}d=d.sibling}}function Ys(f){if(f.subtreeFlags&Ds)for(f=f.child;f!==null;)W0(f),f=f.sibling}function W0(f){switch(f.tag){case 26:Ys(f),f.flags&Ds&&(f.memoizedState!==null?g1(di,f.memoizedState,f.memoizedProps):Xr(f.type,f.memoizedProps));break;case 5:Ys(f),f.flags&Ds&&Xr(f.type,f.memoizedProps);break;case 3:case 4:if(As){var d=di;di=dd(f.stateNode.containerInfo),Ys(f),di=d}else Ys(f);break;case 22:f.memoizedState===null&&(d=f.alternate,d!==null&&d.memoizedState!==null?(d=Ds,Ds=16777216,Ys(f),Ds=d):Ys(f));break;default:Ys(f)}}function Qf(f){var d=f.alternate;if(d!==null&&(f=d.child,f!==null)){d.child=null;do d=f.sibling,f.sibling=null,f=d;while(f!==null)}}function Sl(f){var d=f.deletions;if((f.flags&16)!==0){if(d!==null)for(var _=0;_<d.length;_++){var T=d[_];Yt=T,Em(T,f)}Qf(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Y0(f),f=f.sibling}function Y0(f){switch(f.tag){case 0:case 11:case 15:Sl(f),f.flags&2048&&_l(9,f,f.return);break;case 3:Sl(f);break;case 12:Sl(f);break;case 22:var d=f.stateNode;f.memoizedState!==null&&d._visibility&4&&(f.return===null||f.return.tag!==13)?(d._visibility&=-5,Oo(f)):Sl(f);break;default:Sl(f)}}function Oo(f){var d=f.deletions;if((f.flags&16)!==0){if(d!==null)for(var _=0;_<d.length;_++){var T=d[_];Yt=T,Em(T,f)}Qf(f)}for(f=f.child;f!==null;){switch(d=f,d.tag){case 0:case 11:case 15:_l(8,d,d.return),Oo(d);break;case 22:_=d.stateNode,_._visibility&4&&(_._visibility&=-5,Oo(d));break;default:Oo(d)}f=f.sibling}}function Em(f,d){for(;Yt!==null;){var _=Yt;switch(_.tag){case 0:case 11:case 15:_l(8,_,d);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var T=_.memoizedState.cachePool.pool;T!=null&&T.refCount++}break;case 24:Yf(_.memoizedState.cache)}if(T=_.child,T!==null)T.return=_,Yt=T;else e:for(_=f;Yt!==null;){T=Yt;var D=T.sibling,P=T.return;if(bm(T),T===_){Yt=null;break e}if(D!==null){D.return=P,Yt=D;break e}Yt=P}}}function yu(f){var d=zy(f);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(r(364));return d}if(f=Gm(f),f===null)throw Error(r(362));return f.stateNode.current}function Al(f,d){var _=f.tag;switch(d.$$typeof){case Vu:if(f.type===d.value)return!0;break;case ia:e:{for(d=d.value,f=[f,0],_=0;_<f.length;){var T=f[_++],D=T.tag,P=f[_++],Y=d[P];if(D!==5&&D!==26&&D!==27||!Du(T)){for(;Y!=null&&Al(T,Y);)P++,Y=d[P];if(P===d.length){d=!0;break e}else for(T=T.child;T!==null;)f.push(T,P),T=T.sibling}}d=!1}return d;case ii:if((_===5||_===26||_===27)&&ky(f.stateNode,d.value))return!0;break;case Qa:if((_===5||_===6||_===26||_===27)&&(f=Vy(f),f!==null&&0<=f.indexOf(d.value)))return!0;break;case Ra:if((_===5||_===26||_===27)&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function Mm(f){switch(f.$$typeof){case Vu:return"<"+(a(f.value)||"Unknown")+">";case ia:return":has("+(Mm(f)||"")+")";case ii:return'[role="'+f.value+'"]';case Qa:return'"'+f.value+'"';case Ra:return'[data-testname="'+f.value+'"]';default:throw Error(r(365))}}function ss(f,d){var _=[];f=[f,0];for(var T=0;T<f.length;){var D=f[T++],P=D.tag,Y=f[T++],se=d[Y];if(P!==5&&P!==26&&P!==27||!Du(D)){for(;se!=null&&Al(D,se);)Y++,se=d[Y];if(Y===d.length)_.push(D);else for(D=D.child;D!==null;)f.push(D,Y),D=D.sibling}}return _}function eh(f,d){if(!Ol)throw Error(r(363));f=yu(f),f=ss(f,d),d=[],f=Array.from(f);for(var _=0;_<f.length;){var T=f[_++],D=T.tag;if(D===5||D===26||D===27)Du(T)||d.push(T.stateNode);else for(T=T.child;T!==null;)f.push(T),T=T.sibling}return d}function Mi(){if((wn&2)!==0&&vn!==0)return vn&-vn;if(Vt.T!==null){var f=Ts;return f!==0?f:tt()}return Hy()}function Tm(){Ps===0&&(Ps=(vn&536870912)===0||En?z():536870912);var f=Cs.current;return f!==null&&(f.flags|=32),Ps}function sr(f,d,_){(f===Ln&&Vn===2||f.cancelPendingCommit!==null)&&(xr(f,0),as(f,vn,Ps,!1)),G(f,_),((wn&2)===0||f!==Ln)&&(f===Ln&&((wn&2)===0&&(Wo|=_),qn===4&&as(f,vn,Ps,!1)),Ge(f))}function El(f,d,_){if((wn&6)!==0)throw Error(r(327));var T=!_&&(d&60)===0&&(d&f.expiredLanes)===0||U(f,d),D=T?wm(f,d):K0(f,d,!0),P=T;do{if(D===0){Bs&&!T&&as(f,d,0,!1);break}else if(D===6)as(f,d,0,!sa);else{if(_=f.current.alternate,P&&!xu(_)){D=K0(f,d,!1),P=!1;continue}if(D===2){if(P=d,f.errorRecoveryDisabledLanes&P)var Y=0;else Y=f.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){d=Y;e:{var se=f;D=wc;var xe=_r&&se.current.memoizedState.isDehydrated;if(xe&&(xr(se,Y).flags|=256),Y=K0(se,Y,!1),Y!==2){if($i&&!xe){se.errorRecoveryDisabledLanes|=P,Wo|=P,D=4;break e}P=_i,_i=D,P!==null&&th(P)}D=Y}if(P=!1,D!==2)continue}}if(D===1){xr(f,0),as(f,d,0,!0);break}e:{switch(T=f,D){case 0:case 1:throw Error(r(345));case 4:if((d&4194176)===d){as(T,d,Ps,!sa);break e}break;case 2:_i=null;break;case 3:case 5:break;default:throw Error(r(329))}if(T.finishedWork=_,T.finishedLanes=d,(d&62914560)===d&&(P=qr+300-Qs(),10<P)){if(as(T,d,Ps,!sa),N(T,0)!==0)break e;T.timeoutHandle=Vi(q0.bind(null,T,_,_i,Eh,Ed,d,Ps,Wo,eo,sa,2,-0,0),P);break e}q0(T,_,_i,Eh,Ed,d,Ps,Wo,eo,sa,0,-0,0)}}break}while(!0);Ge(f)}function th(f){_i===null?_i=f:_i.push.apply(_i,f)}function q0(f,d,_,T,D,P,Y,se,xe,Fe,nt,dt,mt){var qt=d.subtreeFlags;if((qt&8192||(qt&16785408)===16785408)&&(zm(),W0(d),d=ki(),d!==null)){f.cancelPendingCommit=d(Tl.bind(null,f,_,T,D,Y,se,xe,1,dt,mt)),as(f,P,Y,!Fe);return}Tl(f,_,T,D,Y,se,xe,nt,dt,mt)}function xu(f){for(var d=f;;){var _=d.tag;if((_===0||_===11||_===15)&&d.flags&16384&&(_=d.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var T=0;T<_.length;T++){var D=_[T],P=D.getSnapshot;D=D.value;try{if(!ls(P(),D))return!1}catch{return!1}}if(_=d.child,d.subtreeFlags&16384&&_!==null)_.return=d,d=_;else{if(d===f)break;for(;d.sibling===null;){if(d.return===null||d.return===f)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function as(f,d,_,T){d&=~Ah,d&=~Wo,f.suspendedLanes|=d,f.pingedLanes&=~d,T&&(f.warmLanes|=d),T=f.expirationTimes;for(var D=d;0<D;){var P=31-Wr(D),Y=1<<P;T[P]=-1,D&=~Y}_!==0&&Q(f,_,d)}function nh(){return(wn&6)===0?(J(0),!1):!0}function _u(){if(Lt!==null){if(Vn===0)var f=Lt.return;else f=Lt,Rs=wa=null,ya(f),Fl=null,zl=0,f=Lt;for(;f!==null;)Dy(f.alternate,f),f=f.return;Lt=null}}function xr(f,d){f.finishedWork=null,f.finishedLanes=0;var _=f.timeoutHandle;_!==Dl&&(f.timeoutHandle=Dl,rd(_)),_=f.cancelPendingCommit,_!==null&&(f.cancelPendingCommit=null,_()),_u(),Ln=f,Lt=_=Ks(f.current,null),vn=d,Vn=0,Or=null,sa=!1,Bs=U(f,d),$i=!1,eo=Ps=Ah=Wo=Os=qn=0,_i=wc=null,Ed=!1,(d&8)!==0&&(d|=d&32);var T=f.entangledLanes;if(T!==0)for(f=f.entanglements,T&=d;0<T;){var D=31-Wr(T),P=1<<D;d|=f[D],T&=~P}return Pr=d,Z(),_}function _s(f,d){rn=null,Vt.H=yi,d===Fu?(d=wt(),Vn=3):d===bh?(d=wt(),Vn=4):Vn=d===Sd?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Or=d,Lt===null&&(qn=1,fu(f,me(d,f.current)))}function Ml(){var f=Cs.current;return f===null?!0:(vn&4194176)===vn?Wn===null:(vn&62914560)===vn||(vn&536870912)!==0?f===Wn:!1}function Ga(){var f=Vt.H;return Vt.H=yi,f===null?yi:f}function Va(){var f=Vt.A;return Vt.A=Gu,f}function Po(){qn=4,sa||(vn&4194176)!==vn&&Cs.current!==null||(Bs=!0),(Os&134217727)===0&&(Wo&134217727)===0||Ln===null||as(Ln,vn,Ps,!1)}function K0(f,d,_){var T=wn;wn|=2;var D=Ga(),P=Va();(Ln!==f||vn!==d)&&(Eh=null,xr(f,d)),d=!1;var Y=qn;e:do try{if(Vn!==0&&Lt!==null){var se=Lt,xe=Or;switch(Vn){case 8:_u(),Y=6;break e;case 3:case 2:case 6:Cs.current===null&&(d=!0);var Fe=Vn;if(Vn=0,Or=null,qs(f,se,xe,Fe),_&&Bs){Y=0;break e}break;default:Fe=Vn,Vn=0,Or=null,qs(f,se,xe,Fe)}}Cm(),Y=qn;break}catch(nt){_s(f,nt)}while(!0);return d&&f.shellSuspendCounter++,Rs=wa=null,wn=T,Vt.H=D,Vt.A=P,Lt===null&&(Ln=null,vn=0,Z()),Y}function Cm(){for(;Lt!==null;)hi(Lt)}function wm(f,d){var _=wn;wn|=2;var T=Ga(),D=Va();Ln!==f||vn!==d?(Eh=null,ku=Qs()+500,xr(f,d)):Bs=U(f,d);e:do try{if(Vn!==0&&Lt!==null){d=Lt;var P=Or;t:switch(Vn){case 1:Vn=0,Or=null,qs(f,d,P,1);break;case 2:if(Ie(P)){Vn=0,Or=null,Dn(d);break}d=function(){Vn===2&&Ln===f&&(Vn=7),Ge(f)},P.then(d,d);break e;case 3:Vn=7;break e;case 4:Vn=5;break e;case 7:Ie(P)?(Vn=0,Or=null,Dn(d)):(Vn=0,Or=null,qs(f,d,P,7));break;case 5:var Y=null;switch(Lt.tag){case 26:Y=Lt.memoizedState;case 5:case 27:var se=Lt,xe=se.type,Fe=se.pendingProps;if(Y?pc(Y):sd(xe,Fe)){Vn=0,Or=null;var nt=se.sibling;if(nt!==null)Lt=nt;else{var dt=se.return;dt!==null?(Lt=dt,bs(dt)):Lt=null}break t}}Vn=0,Or=null,qs(f,d,P,5);break;case 6:Vn=0,Or=null,qs(f,d,P,6);break;case 8:_u(),qn=6;break e;default:throw Error(r(462))}}kr();break}catch(mt){_s(f,mt)}while(!0);return Rs=wa=null,Vt.H=T,Vt.A=D,wn=_,Lt!==null?0:(Ln=null,vn=0,Z(),qn)}function kr(){for(;Lt!==null&&!_1();)hi(Lt)}function hi(f){var d=Cy(f.alternate,f,Pr);f.memoizedProps=f.pendingProps,d===null?bs(f):Lt=d}function Dn(f){var d=f,_=d.alternate;switch(d.tag){case 15:case 0:d=by(_,d,d.pendingProps,d.type,void 0,vn);break;case 11:d=by(_,d,d.pendingProps,d.type.render,d.ref,vn);break;case 5:ya(d);default:Dy(_,d),d=Lt=rh(d,Pr),d=Cy(_,d,Pr)}f.memoizedProps=f.pendingProps,d===null?bs(f):Lt=d}function qs(f,d,_,T){Rs=wa=null,ya(d),Fl=null,zl=0;var D=d.return;try{if(xS(f,D,d,_,vn)){qn=1,fu(f,me(_,f.current)),Lt=null;return}}catch(P){if(D!==null)throw Lt=D,P;qn=1,fu(f,me(_,f.current)),Lt=null;return}d.flags&32768?(En||T===1?f=!0:Bs||(vn&536870912)!==0?f=!1:(sa=f=!0,(T===2||T===3||T===6)&&(T=Cs.current,T!==null&&T.tag===13&&(T.flags|=16384))),J0(d,f)):bs(d)}function bs(f){var d=f;do{if((d.flags&32768)!==0){J0(d,sa);return}f=d.return;var _=Ry(d.alternate,d,Pr);if(_!==null){Lt=_;return}if(d=d.sibling,d!==null){Lt=d;return}Lt=d=f}while(d!==null);qn===0&&(qn=5)}function J0(f,d){do{var _=bS(f.alternate,f);if(_!==null){_.flags&=32767,Lt=_;return}if(_=f.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!d&&(f=f.sibling,f!==null)){Lt=f;return}Lt=f=_}while(f!==null);qn=6,Lt=null}function Tl(f,d,_,T,D,P,Y,se,xe,Fe){var nt=Vt.T,dt=zo();try{Br(2),Vt.T=null,Uy(f,d,_,T,dt,D,P,Y,se,xe,Fe)}finally{Vt.T=nt,Br(dt)}}function Uy(f,d,_,T,D,P,Y,se){do _a();while(to!==null);if((wn&6)!==0)throw Error(r(327));var xe=f.finishedWork;if(T=f.finishedLanes,xe===null)return null;if(f.finishedWork=null,f.finishedLanes=0,xe===f.current)throw Error(r(177));f.callbackNode=null,f.callbackPriority=0,f.cancelPendingCommit=null;var Fe=xe.lanes|xe.childLanes;if(Fe|=Ta,$(f,T,Fe,P,Y,se),f===Ln&&(Lt=Ln=null,vn=0),(xe.subtreeFlags&10256)===0&&(xe.flags&10256)===0||Da||(Da=!0,jl=Fe,Md=_,Lo(yd,function(){return _a(),null})),_=(xe.flags&15990)!==0,(xe.subtreeFlags&15990)!==0||_?(_=Vt.T,Vt.T=null,P=zo(),Br(2),Y=wn,wn|=4,$f(f,xe),Sm(xe,f),Fy(f.containerInfo),f.current=xe,k0(f,xe.alternate,xe),gd(),wn=Y,Br(P),Vt.T=_):f.current=xe,Da?(Da=!1,to=f,Rc=T):Rm(f,Fe),Fe=f.pendingLanes,Fe===0&&(kl=null),k(xe.stateNode),Ge(f),d!==null)for(D=f.onRecoverableError,xe=0;xe<d.length;xe++)Fe=d[xe],D(Fe.value,{componentStack:Fe.stack});return(Rc&3)!==0&&_a(),Fe=f.pendingLanes,(T&4194218)!==0&&(Fe&42)!==0?f===Td?ju++:(ju=0,Td=f):ju=0,J(0),null}function Rm(f,d){(f.pooledCacheLanes&=d)===0&&(d=f.pooledCache,d!=null&&(f.pooledCache=null,Yf(d)))}function _a(){if(to!==null){var f=to,d=jl;jl=0;var _=fe(Rc),T=32>_?32:_;_=Vt.T;var D=zo();try{if(Br(T),Vt.T=null,to===null)var P=!1;else{T=Md,Md=null;var Y=to,se=Rc;if(to=null,Rc=0,(wn&6)!==0)throw Error(r(331));var xe=wn;if(wn|=4,Y0(Y.current),Am(Y,Y.current,se,T),wn=xe,J(0,!1),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot(wi,Y)}catch{}P=!0}return P}finally{Br(D),Vt.T=_,Rm(f,d)}}return!1}function bu(f,d,_){d=me(_,d),d=du(f.stateNode,d,2),f=St(f,d,2),f!==null&&(G(f,2),Ge(f))}function Pn(f,d,_){if(f.tag===3)bu(f,f,_);else for(;d!==null;){if(d.tag===3){bu(d,f,_);break}else if(d.tag===1){var T=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(kl===null||!kl.has(T))){f=me(_,f),_=lm(2),T=St(d,_,2),T!==null&&(gy(_,T,d,f),G(T,2),Ge(T));break}}d=d.return}}function fc(f,d,_){var T=f.pingCache;if(T===null){T=f.pingCache=new ra;var D=new Set;T.set(d,D)}else D=T.get(d),D===void 0&&(D=new Set,T.set(d,D));D.has(_)||($i=!0,D.add(_),f=Dm.bind(null,f,d,_),d.then(f,f))}function Dm(f,d,_){var T=f.pingCache;T!==null&&T.delete(d),f.pingedLanes|=f.suspendedLanes&_,f.warmLanes&=~_,Ln===f&&(vn&_)===_&&(qn===4||qn===3&&(vn&62914560)===vn&&300>Qs()-qr?(wn&2)===0&&xr(f,0):Ah|=_,eo===vn&&(eo=0)),Ge(f)}function Cl(f,d){d===0&&(d=L()),f=je(f,d),f!==null&&(G(f,d),Ge(f))}function Uo(f){var d=f.memoizedState,_=0;d!==null&&(_=d.retryLane),Cl(f,_)}function wl(f,d){var _=0;switch(f.tag){case 13:var T=f.stateNode,D=f.memoizedState;D!==null&&(_=D.retryLane);break;case 19:T=f.stateNode;break;case 22:T=f.stateNode._retryCache;break;default:throw Error(r(314))}T!==null&&T.delete(d),Cl(f,_)}function Lo(f,d){return yh(f,d)}function Bm(f,d,_,T){this.tag=f,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ih(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Ks(f,d){var _=f.alternate;return _===null?(_=t(f.tag,d,f.key,f.mode),_.elementType=f.elementType,_.type=f.type,_.stateNode=f.stateNode,_.alternate=f,f.alternate=_):(_.pendingProps=d,_.type=f.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=f.flags&31457280,_.childLanes=f.childLanes,_.lanes=f.lanes,_.child=f.child,_.memoizedProps=f.memoizedProps,_.memoizedState=f.memoizedState,_.updateQueue=f.updateQueue,d=f.dependencies,_.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},_.sibling=f.sibling,_.index=f.index,_.ref=f.ref,_.refCleanup=f.refCleanup,_}function rh(f,d){f.flags&=31457282;var _=f.alternate;return _===null?(f.childLanes=0,f.lanes=d,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=_.childLanes,f.lanes=_.lanes,f.child=_.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=_.memoizedProps,f.memoizedState=_.memoizedState,f.updateQueue=_.updateQueue,f.type=_.type,d=_.dependencies,f.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),f}function ka(f,d,_,T,D,P){var Y=0;if(T=f,typeof f=="function")ih(f)&&(Y=1);else if(typeof f=="string")Y=As&&Xn?mh(f,_,Ki.current)?26:Xa(f)?27:5:As?mh(f,_,Ki.current)?26:5:Xn&&Xa(f)?27:5;else e:switch(f){case Rl:return vi(_.children,D,P,d);case lh:Y=8,D|=24;break;case ed:return f=t(12,_,d,D|2),f.elementType=ed,f.lanes=P,f;case td:return f=t(13,_,d,D),f.elementType=td,f.lanes=P,f;case Mu:return f=t(19,_,d,D),f.elementType=Mu,f.lanes=P,f;case Um:return sh(_,D,P,d);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case ch:case ba:Y=10;break e;case Pm:Y=9;break e;case uh:Y=11;break e;case nd:Y=14;break e;case $s:Y=16,T=null;break e}Y=29,_=Error(r(130,f===null?"null":typeof f,"")),T=null}return d=t(Y,_,d,D),d.elementType=f,d.type=T,d.lanes=P,d}function vi(f,d,_,T){return f=t(7,f,T,d),f.lanes=_,f}function sh(f,d,_,T){f=t(22,f,T,d),f.elementType=Um,f.lanes=_;var D={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var P=D._current;if(P===null)throw Error(r(456));if((D._pendingVisibility&2)===0){var Y=je(P,2);Y!==null&&(D._pendingVisibility|=2,sr(Y,P,2))}},attach:function(){var P=D._current;if(P===null)throw Error(r(456));if((D._pendingVisibility&2)!==0){var Y=je(P,2);Y!==null&&(D._pendingVisibility&=-3,sr(Y,P,2))}}};return f.stateNode=D,f}function $0(f,d,_){return f=t(6,f,null,d),f.lanes=_,f}function Om(f,d,_){return d=t(4,f.children!==null?f.children:[],f.key,d),d.lanes=_,d.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},d}function SS(f,d,_,T,D,P,Y,se){this.tag=1,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Dl,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=O(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O(0),this.hiddenUpdates=O(null),this.identifierPrefix=T,this.onUncaughtError=D,this.onCaughtError=P,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=se,this.incompleteTransitions=new Map}function Ly(f,d,_,T,D,P,Y,se,xe,Fe,nt,dt){return f=new SS(f,d,_,Y,se,xe,Fe,dt),d=1,P===!0&&(d|=24),P=t(3,null,null,d),f.current=P,P.stateNode=f,d=xl(),d.refCount++,f.pooledCache=d,d.refCount++,P.memoizedState={element:T,isDehydrated:_,cache:d},qe(P),f}function Gi(f){return f?(f=Ll,f):Ll}function Z0(f){var d=f._reactInternals;if(d===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=x(d),f=f!==null?b(f):null,f===null?null:wu(f.stateNode)}function Su(f,d,_,T,D,P){D=Gi(D),T.context===null?T.context=D:T.pendingContext=D,T=vt(d),T.payload={element:_},P=P===void 0?null:P,P!==null&&(T.callback=P),_=St(f,T,d),_!==null&&(sr(_,f,d),it(_,f,d))}function Au(f,d){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var _=f.retryLane;f.retryLane=_!==0&&_<d?_:d}}function ah(f,d){Au(f,d),(f=f.alternate)&&Au(f,d)}var Jt={},Eu=Up(),Ss=UO(),Q0=Object.assign,AS=Symbol.for("react.element"),oh=Symbol.for("react.transitional.element"),Js=Symbol.for("react.portal"),Rl=Symbol.for("react.fragment"),lh=Symbol.for("react.strict_mode"),ed=Symbol.for("react.profiler"),ch=Symbol.for("react.provider"),Pm=Symbol.for("react.consumer"),ba=Symbol.for("react.context"),uh=Symbol.for("react.forward_ref"),td=Symbol.for("react.suspense"),Mu=Symbol.for("react.suspense_list"),nd=Symbol.for("react.memo"),$s=Symbol.for("react.lazy"),Um=Symbol.for("react.offscreen"),Ny=Symbol.for("react.memo_cache_sentinel"),No=Symbol.iterator,Lm=Symbol.for("react.client.reference"),Vt=Eu.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ja,Io,hc=!1,Tu=Array.isArray,Nm=e.rendererVersion,fh=e.rendererPackageName,Cu=e.extraDevToolsConfig,wu=e.getPublicInstance,Iy=e.getRootHostContext,Ru=e.getChildHostContext,id=e.prepareForCommit,Fy=e.resetAfterCommit,Im=e.createInstance,hh=e.appendInitialChild,Fo=e.finalizeInitialChildren,$t=e.shouldSetTextContent,zn=e.createTextInstance,Vi=e.scheduleTimeout,rd=e.cancelTimeout,Dl=e.noTimeout,jr=e.isPrimaryRenderer;e.warnsIfNotActing;var qi=e.supportsMutation,Zs=e.supportsPersistence,_r=e.supportsHydration,zy=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Ti=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Br=e.setCurrentUpdatePriority,zo=e.getCurrentUpdatePriority,Hy=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Gy=e.shouldAttemptEagerTransition,ES=e.detachDeletedInstance;e.requestPostPaintCallback;var Fm=e.maySuspendCommit,sd=e.preloadInstance,zm=e.startSuspendingCommit,Xr=e.suspendInstance,ki=e.waitForCommitToBeReady,Bl=e.NotPendingTransition,Sa=e.HostTransitionContext,ad=e.resetFormInstance;e.bindToConsole;var Hm=e.supportsMicrotasks,Ho=e.scheduleMicrotask,Ol=e.supportsTestSelectors,Gm=e.findFiberRoot,Vm=e.getBoundingRect,Vy=e.getTextContent,Du=e.isHiddenSubtree,ky=e.matchAccessibilityRole,jy=e.setFocusIfFocusable,Xy=e.setupIntersectionObserver,Wy=e.appendChild,km=e.appendChildToContainer,Yy=e.commitTextUpdate,MS=e.commitMount,qy=e.commitUpdate,Ky=e.insertBefore,Jy=e.insertInContainerBefore,jm=e.removeChild,$y=e.removeChildFromContainer,Xm=e.resetTextContent,Zy=e.hideInstance,Qy=e.hideTextInstance,e1=e.unhideInstance,TS=e.unhideTextInstance,t1=e.clearContainer,Bu=e.cloneInstance,dh=e.createContainerChildSet,Wm=e.appendChildToContainerChildSet,od=e.finalizeContainerChildren,Ou=e.replaceContainerChildren,Ym=e.cloneHiddenInstance,qm=e.cloneHiddenTextInstance,ld=e.isSuspenseInstancePending,cd=e.isSuspenseInstanceFallback,n1=e.getSuspenseInstanceFallbackErrorDetails,i1=e.registerSuspenseInstanceRetry,Km=e.canHydrateFormStateMarker,r1=e.isFormStateMarkerMatching,Jm=e.getNextHydratableSibling,ud=e.getFirstHydratableChild,s1=e.getFirstHydratableChildWithinContainer,a1=e.getFirstHydratableChildWithinSuspenseInstance,CS=e.canHydrateInstance,$m=e.canHydrateTextInstance,o1=e.canHydrateSuspenseInstance,l1=e.hydrateInstance,Zm=e.hydrateTextInstance,c1=e.hydrateSuspenseInstance,u1=e.getNextHydratableInstanceAfterSuspenseInstance,wS=e.commitHydratedContainer,RS=e.commitHydratedSuspenseInstance,f1=e.clearSuspenseBoundary,ph=e.clearSuspenseBoundaryFromContainer,fd=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var hd=e.validateHydratableInstance,h1=e.validateHydratableTextInstance,As=e.supportsResources,mh=e.isHostHoistableType,dd=e.getHoistableRoot,Qm=e.getResource,d1=e.acquireResource,dc=e.releaseResource,gh=e.hydrateHoistable,vh=e.mountHoistable,Pu=e.unmountHoistable,pd=e.createHoistableInstance,p1=e.prepareToCommitHoistables,m1=e.mayResourceSuspendCommit,pc=e.preloadResource,g1=e.suspendResource,Xn=e.supportsSingletons,Aa=e.resolveSingletonInstance,Pl=e.clearSingleton,v1=e.acquireSingletonInstance,Ul=e.releaseSingletonInstance,Xa=e.isHostSingletonType,Ci=[],Go=-1,Ll={},Wr=Math.clz32?Math.clz32:R,y1=Math.log,x1=Math.LN2,Wa=128,mc=4194304,yh=Ss.unstable_scheduleCallback,md=Ss.unstable_cancelCallback,_1=Ss.unstable_shouldYield,gd=Ss.unstable_requestPaint,Qs=Ss.unstable_now,vd=Ss.unstable_ImmediatePriority,b1=Ss.unstable_UserBlockingPriority,yd=Ss.unstable_NormalPriority,DS=Ss.unstable_IdlePriority,S1=Ss.log,ar=Ss.unstable_setDisableYieldValue,wi=null,os=null,ls=typeof Object.is=="function"?Object.is:ee,eg=new WeakMap,gc=[],vc=0,yc=null,Uu=0,Es=[],Ms=0,Nl=null,Ea=1,Ma="",Ki=A(null),Lu=A(null),Ya=A(null),xc=A(null),br=null,Sr=null,En=!1,ea=null,or=!1,xh=Error(r(519)),ta=[],_c=0,Ta=0,_h=null,Vo=null,bc=!1,$n=!1,tg=!1,Nu=0,Iu=null,Sc=0,Ts=0,Ac=null,ko=!1,Ec=!1,qa=Object.prototype.hasOwnProperty,Fu=Error(r(460)),bh=Error(r(474)),Sh={then:function(){}},Il=null,Fl=null,zl=0,Hl=ai(!0),Ka=ai(!1),Zn=A(null),zu=A(0),Cs=A(null),Wn=null,Ji=A(0),jo=0,rn=null,Ut=null,Cn=null,na=!1,Mc=!1,Gl=!1,xd=0,Tc=0,lr=null,Ca=0,_d=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},yi={readContext:gr,use:Re,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useLayoutEffect:Hn,useInsertionEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useSyncExternalStore:Hn,useId:Hn};yi.useCacheRefresh=Hn,yi.useMemoCache=Hn,yi.useHostTransitionStatus=Hn,yi.useFormState=Hn,yi.useActionState=Hn,yi.useOptimistic=Hn;var Vl={readContext:gr,use:Re,useCallback:function(f,d){return X().memoizedState=[f,d===void 0?null:d],f},useContext:gr,useEffect:B0,useImperativeHandle:function(f,d,_){_=_!=null?_.concat([f]):null,Lf(4194308,4,O0.bind(null,d,f),_)},useLayoutEffect:function(f,d){return Lf(4194308,4,f,d)},useInsertionEffect:function(f,d){Lf(4,2,f,d)},useMemo:function(f,d){var _=X();d=d===void 0?null:d;var T=f();if(Gl){K(!0);try{f()}finally{K(!1)}}return _.memoizedState=[T,d],T},useReducer:function(f,d,_){var T=X();if(_!==void 0){var D=_(d);if(Gl){K(!0);try{_(d)}finally{K(!1)}}}else D=d;return T.memoizedState=T.baseState=D,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:D},T.queue=f,f=f.dispatch=U0.bind(null,rn,f),[T.memoizedState,f]},useRef:function(f){var d=X();return f={current:f},d.memoizedState=f},useState:function(f){f=dn(f);var d=f.queue,_=om.bind(null,rn,d);return d.dispatch=_,[f.memoizedState,_]},useDebugValue:pl,useDeferredValue:function(f,d){var _=X();return Ff(_,f,d)},useTransition:function(){var f=dn(!1);return f=au.bind(null,rn,f.queue,!0,!1),X().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,d,_){var T=rn,D=X();if(En){if(_===void 0)throw Error(r(407));_=_()}else{if(_=d(),Ln===null)throw Error(r(349));(vn&60)!==0||Dt(T,d,_)}D.memoizedState=_;var P={value:_,getSnapshot:d};return D.queue=P,B0(un.bind(null,T,P,f),[f]),T.flags|=2048,Hr(9,Tt.bind(null,T,P,_,d),{destroy:void 0},null),_},useId:function(){var f=X(),d=Ln.identifierPrefix;if(En){var _=Ma,T=Ea;_=(T&~(1<<32-Wr(T)-1)).toString(32)+_,d=":"+d+"R"+_,_=xd++,0<_&&(d+="H"+_.toString(32)),d+=":"}else _=Ca++,d=":"+d+"r"+_.toString(32)+":";return f.memoizedState=d},useCacheRefresh:function(){return X().memoizedState=am.bind(null,rn)}};Vl.useMemoCache=ye,Vl.useHostTransitionStatus=zf,Vl.useFormState=Gn,Vl.useActionState=Gn,Vl.useOptimistic=function(f){var d=X();d.memoizedState=d.baseState=f;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=_,d=lu.bind(null,rn,!0,_),_.dispatch=d,[f,d]};var Yr={readContext:gr,use:Re,useCallback:lc,useContext:gr,useEffect:im,useImperativeHandle:P0,useInsertionEffect:py,useLayoutEffect:If,useMemo:rm,useReducer:st,useRef:za,useState:function(){return st(Ke)},useDebugValue:pl,useDeferredValue:function(f,d){var _=pe();return sm(_,Ut.memoizedState,f,d)},useTransition:function(){var f=st(Ke)[0],d=pe().memoizedState;return[typeof f=="boolean"?f:we(f),d]},useSyncExternalStore:Ft,useId:ou};Yr.useCacheRefresh=Eo,Yr.useMemoCache=ye,Yr.useHostTransitionStatus=zf,Yr.useFormState=pr,Yr.useActionState=pr,Yr.useOptimistic=function(f,d){var _=pe();return gn(_,Ut,f,d)};var ws={readContext:gr,use:Re,useCallback:lc,useContext:gr,useEffect:im,useImperativeHandle:P0,useInsertionEffect:py,useLayoutEffect:If,useMemo:rm,useReducer:yt,useRef:za,useState:function(){return yt(Ke)},useDebugValue:pl,useDeferredValue:function(f,d){var _=pe();return Ut===null?Ff(_,f,d):sm(_,Ut.memoizedState,f,d)},useTransition:function(){var f=yt(Ke)[0],d=pe().memoizedState;return[typeof f=="boolean"?f:we(f),d]},useSyncExternalStore:Ft,useId:ou};ws.useCacheRefresh=Eo,ws.useMemoCache=ye,ws.useHostTransitionStatus=zf,ws.useFormState=ir,ws.useActionState=ir,ws.useOptimistic=function(f,d){var _=pe();return Ut!==null?gn(_,Ut,f,d):(_.baseState=f,[f,_.queue.dispatch])};var Ja={isMounted:function(f){return(f=f._reactInternals)?g(f)===f:!1},enqueueSetState:function(f,d,_){f=f._reactInternals;var T=Mi(),D=vt(T);D.payload=d,_!=null&&(D.callback=_),d=St(f,D,T),d!==null&&(sr(d,f,T),it(d,f,T))},enqueueReplaceState:function(f,d,_){f=f._reactInternals;var T=Mi(),D=vt(T);D.tag=1,D.payload=d,_!=null&&(D.callback=_),d=St(f,D,T),d!==null&&(sr(d,f,T),it(d,f,T))},enqueueForceUpdate:function(f,d){f=f._reactInternals;var _=Mi(),T=vt(_);T.tag=2,d!=null&&(T.callback=d),d=St(f,T,_),d!==null&&(sr(d,f,_),it(d,f,_))}},bd=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)},Sd=Error(r(461)),Yn=!1,Ad={dehydrated:null,treeContext:null,retryLane:0},Xo=A(null),wa=null,Rs=null,Hu=typeof AbortController<"u"?AbortController:function(){var f=[],d=this.signal={aborted:!1,addEventListener:function(_,T){f.push(T)}};this.abort=function(){d.aborted=!0,f.forEach(function(_){return _()})}},A1=Ss.unstable_scheduleCallback,E1=Ss.unstable_NormalPriority,Qn={$$typeof:ba,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},ng=Vt.S;Vt.S=function(f,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&$e(f,d),ng!==null&&ng(f,d)};var $a=A(null),Za=!1,xi=!1,ig=!1,Un=typeof WeakSet=="function"?WeakSet:Set,Yt=null,fn=!1,Ot=null,tn=!1,di=null,Ds=8192,Gu={getCacheForType:function(f){var d=gr(Qn),_=d.data.get(f);return _===void 0&&(_=f(),d.data.set(f,_)),_}},Vu=0,ia=1,ii=2,Ra=3,Qa=4;if(typeof Symbol=="function"&&Symbol.for){var Cc=Symbol.for;Vu=Cc("selector.component"),ia=Cc("selector.has_pseudo_class"),ii=Cc("selector.role"),Ra=Cc("selector.test_id"),Qa=Cc("selector.text")}var ra=typeof WeakMap=="function"?WeakMap:Map,wn=0,Ln=null,Lt=null,vn=0,Vn=0,Or=null,sa=!1,Bs=!1,$i=!1,Pr=0,qn=0,Os=0,Wo=0,Ah=0,Ps=0,eo=0,wc=null,_i=null,Ed=!1,qr=0,ku=1/0,Eh=null,kl=null,Da=!1,to=null,Rc=0,jl=0,Md=null,ju=0,Td=null;return Jt.attemptContinuousHydration=function(f){if(f.tag===13){var d=je(f,67108864);d!==null&&sr(d,f,67108864),ah(f,67108864)}},Jt.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var d=Mi(),_=je(f,d);_!==null&&sr(_,f,d),ah(f,d)}},Jt.attemptSynchronousHydration=function(f){switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var d=B(f.pendingLanes);if(d!==0){for(f.pendingLanes|=2,f.entangledLanes|=2;d;){var _=1<<31-Wr(d);f.entanglements[1]|=_,d&=~_}Ge(f),(wn&6)===0&&(ku=Qs()+500,J(0))}}break;case 13:d=je(f,2),d!==null&&sr(d,f,2),nh(),ah(f,2)}},Jt.batchedUpdates=function(f,d){return f(d)},Jt.createComponentSelector=function(f){return{$$typeof:Vu,value:f}},Jt.createContainer=function(f,d,_,T,D,P,Y,se,xe,Fe){return Ly(f,d,!1,null,_,T,P,Y,se,xe,Fe,null)},Jt.createHasPseudoClassSelector=function(f){return{$$typeof:ia,value:f}},Jt.createHydrationContainer=function(f,d,_,T,D,P,Y,se,xe,Fe,nt,dt,mt){return f=Ly(_,T,!0,f,D,P,se,xe,Fe,nt,dt,mt),f.context=Gi(null),_=f.current,T=Mi(),D=vt(T),D.callback=d??null,St(_,D,T),f.current.lanes=T,G(f,T),Ge(f),f},Jt.createPortal=function(f,d,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Js,key:T==null?null:""+T,children:f,containerInfo:d,implementation:_}},Jt.createRoleSelector=function(f){return{$$typeof:ii,value:f}},Jt.createTestNameSelector=function(f){return{$$typeof:Ra,value:f}},Jt.createTextSelector=function(f){return{$$typeof:Qa,value:f}},Jt.defaultOnCaughtError=function(f){console.error(f)},Jt.defaultOnRecoverableError=function(f){bd(f)},Jt.defaultOnUncaughtError=function(f){bd(f)},Jt.deferredUpdates=function(f){var d=Vt.T,_=zo();try{return Br(32),Vt.T=null,f()}finally{Br(_),Vt.T=d}},Jt.discreteUpdates=function(f,d,_,T,D){var P=Vt.T,Y=zo();try{return Br(2),Vt.T=null,f(d,_,T,D)}finally{Br(Y),Vt.T=P,wn===0&&(ku=Qs()+500)}},Jt.findAllNodes=eh,Jt.findBoundingRects=function(f,d){if(!Ol)throw Error(r(363));d=eh(f,d),f=[];for(var _=0;_<d.length;_++)f.push(Vm(d[_]));for(d=f.length-1;0<d;d--){_=f[d];for(var T=_.x,D=T+_.width,P=_.y,Y=P+_.height,se=d-1;0<=se;se--)if(d!==se){var xe=f[se],Fe=xe.x,nt=Fe+xe.width,dt=xe.y,mt=dt+xe.height;if(T>=Fe&&P>=dt&&D<=nt&&Y<=mt){f.splice(d,1);break}else if(T!==Fe||_.width!==xe.width||mt<P||dt>Y){if(!(P!==dt||_.height!==xe.height||nt<T||Fe>D)){Fe>T&&(xe.width+=Fe-T,xe.x=T),nt<D&&(xe.width=D-Fe),f.splice(d,1);break}}else{dt>P&&(xe.height+=dt-P,xe.y=P),mt<Y&&(xe.height=Y-dt),f.splice(d,1);break}}}return f},Jt.findHostInstance=Z0,Jt.findHostInstanceWithNoPortals=function(f){return f=x(f),f=f!==null?M(f):null,f===null?null:wu(f.stateNode)},Jt.findHostInstanceWithWarning=function(f){return Z0(f)},Jt.flushPassiveEffects=_a,Jt.flushSyncFromReconciler=function(f){var d=wn;wn|=1;var _=Vt.T,T=zo();try{if(Br(2),Vt.T=null,f)return f()}finally{Br(T),Vt.T=_,wn=d,(wn&6)===0&&J(0)}},Jt.flushSyncWork=nh,Jt.focusWithin=function(f,d){if(!Ol)throw Error(r(363));for(f=yu(f),d=ss(f,d),d=Array.from(d),f=0;f<d.length;){var _=d[f++],T=_.tag;if(!Du(_)){if((T===5||T===26||T===27)&&jy(_.stateNode))return!0;for(_=_.child;_!==null;)d.push(_),_=_.sibling}}return!1},Jt.getFindAllNodesFailureDescription=function(f,d){if(!Ol)throw Error(r(363));var _=0,T=[];f=[yu(f),0];for(var D=0;D<f.length;){var P=f[D++],Y=P.tag,se=f[D++],xe=d[se];if((Y!==5&&Y!==26&&Y!==27||!Du(P))&&(Al(P,xe)&&(T.push(Mm(xe)),se++,se>_&&(_=se)),se<d.length))for(P=P.child;P!==null;)f.push(P,se),P=P.sibling}if(_<d.length){for(f=[];_<d.length;_++)f.push(Mm(d[_]));return`findAllNodes was able to match part of the selector:
  `+(T.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},Jt.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 27:case 5:return wu(f.child.stateNode);default:return f.child.stateNode}},Jt.injectIntoDevTools=function(){var f={bundleType:0,version:Nm,rendererPackageName:fh,currentDispatcherRef:Vt,findFiberByHostInstance:zy,reconcilerVersion:"19.0.0"};if(Cu!==null&&(f.rendererConfig=Cu),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)f=!0;else{try{wi=d.inject(f),os=d}catch{}f=!!d.checkDCE}}return f},Jt.isAlreadyRendering=function(){return!1},Jt.observeVisibleRects=function(f,d,_,T){if(!Ol)throw Error(r(363));f=eh(f,d);var D=Xy(f,_,T).disconnect;return{disconnect:function(){D()}}},Jt.shouldError=function(){return null},Jt.shouldSuspend=function(){return!1},Jt.startHostTransition=function(f,d,_,T){if(f.tag!==5)throw Error(r(476));var D=Ha(f).queue;au(f,D,d,Bl,_===null?i:function(){var P=Ha(f).next.queue;return ml(f,P,{},Mi()),_(T)})},Jt.updateContainer=function(f,d,_,T){var D=d.current,P=Mi();return Su(D,P,f,d,_,T),P},Jt.updateContainerSync=function(f,d,_,T){return d.tag===0&&_a(),Su(d.current,2,f,d,_,T),2},Jt},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})}(QA)),QA.exports}var AR;function Ck(){return AR||(AR=1,ZA.exports=Tk()),ZA.exports}var wk=Ck();const Rk=A0(wk);var ER=UO();const Dk=n=>typeof n=="object"&&typeof n.then=="function",Qh=[];function LO(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function NO(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of Qh)if(LO(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=Qh.indexOf(r);s!==-1&&Qh.splice(s,1)},promise:(Dk(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(Qh.push(r),!t)throw r.promise}const IO=(n,e,t)=>NO(n,e,!1,t),FO=(n,e,t)=>void NO(n,e,!0,t),zO=n=>{if(n===void 0||n.length===0)Qh.splice(0,Qh.length);else{const e=Qh.find(t=>LO(n,t.keys,t.equal));e&&e.remove()}};function CT(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=CT(i,e,t);if(r)return r;i=e?null:i.sibling}}function HO(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const wT=HO(F.createContext(null));let GO=class extends F.Component{render(){return F.createElement(wT.Provider,{value:this._reactInternals},this.props.children)}};function VO(){const n=F.useContext(wT);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=F.useId();return F.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const i=CT(t,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}const Bk=Symbol.for("react.context"),Ok=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===Bk;function Pk(){const n=VO(),[e]=F.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;Ok(i)&&i!==wT&&!e.has(i)&&e.set(i,F.use(HO(i))),t=t.return}return e}function Uk(){const n=Pk();return F.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>F.createElement(e,null,F.createElement(t.Provider,{...i,value:n.get(t)})),e=>F.createElement(GO,{...e})),[n])}function kO(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const jO=n=>n&&n.isOrthographicCamera,Lk=n=>n&&n.hasOwnProperty("current"),Nk=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),ey=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?F.useLayoutEffect:F.useEffect;function XO(n){const e=F.useRef(n);return ey(()=>void(e.current=n),[n]),e}function Ik(){const n=VO(),e=Uk();return F.useMemo(()=>({children:t})=>{const r=!!CT(n,!0,s=>s.type===F.StrictMode)?F.StrictMode:F.Fragment;return re.jsx(r,{children:re.jsx(e,{children:t})})},[n,e])}function Fk({set:n}){return ey(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const zk=(n=>(n=class extends F.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function WO(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function Jd(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const bi={obj:n=>n===Object(n)&&!bi.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(bi.str(n)||bi.num(n)||bi.boo(n))return n===e;const s=bi.obj(n);if(s&&i==="reference")return n===e;const a=bi.arr(n);if(a&&t==="reference")return n===e;if((a||s)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(l in r?e:n)if(!bi.equ(n[l],e[l],{strict:r,objects:"reference"}))return!1}else for(l in r?e:n)if(n[l]!==e[l])return!1;if(bi.und(l)){if(a&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Hk(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function Gk(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const YO=["children","key","ref"];function Vk(n){const e={};for(const t in n)YO.includes(t)||(e[t]=n[t]);return e}function q_(n,e,t,i){const r=n;let s=r==null?void 0:r.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:Vk(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=s)),s}function Bv(n,e){let t=n[e];if(!e.includes("-"))return{root:n,key:e,target:t};t=n;for(const r of e.split("-")){var i;e=r,n=t,t=(i=t)==null?void 0:i[e]}return{root:n,key:e,target:t}}const MR=/-\d+$/;function K_(n,e){if(bi.str(e.props.attach)){if(MR.test(e.props.attach)){const r=e.props.attach.replace(MR,""),{root:s,key:a}=Bv(n.object,r);Array.isArray(s[a])||(s[a]=[])}const{root:t,key:i}=Bv(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else bi.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function J_(n,e){if(bi.str(e.props.attach)){const{root:t,key:i}=Bv(n.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[i]:t[i]=r}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const PE=[...YO,"args","dispose","attach","object","onUpdate","dispose"],TR=new Map;function kk(n){let e=TR.get(n.constructor);try{e||(e=new n.constructor,TR.set(n.constructor,e))}catch{}return e}function jk(n,e){const t={};for(const i in e)if(!PE.includes(i)&&!bi.equ(e[i],n.props[i])){t[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(t[r]=e[r])}for(const i in n.props){if(PE.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:s}=Bv(n.object,i);if(r.constructor&&r.constructor.length===0){const a=kk(r);bi.und(a)||(t[s]=a[s])}else t[s]=0}return t}const Xk=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Wk=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function df(n,e){var t;const i=n.__r3f,r=i&&kO(i).getState(),s=i==null?void 0:i.eventCount;for(const l in e){let u=e[l];if(PE.includes(l))continue;if(i&&Wk.test(l)){typeof u=="function"?i.handlers[l]=u:delete i.handlers[l],i.eventCount=Object.keys(i.handlers).length;continue}if(u===void 0)continue;let{root:h,key:m,target:g}=Bv(n,l);if(g instanceof Ep&&u instanceof Ep)g.mask=u.mask;else if(g instanceof Ze&&Nk(u))g.set(u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&u!=null&&u.constructor&&g.constructor===u.constructor)g.copy(u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(u))typeof g.fromArray=="function"?g.fromArray(u):g.set(...u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof u=="number")typeof g.setScalar=="function"?g.setScalar(u):g.set(u);else{var a;h[m]=u,r&&!r.linear&&Xk.includes(m)&&(a=h[m])!=null&&a.isTexture&&h[m].format===gs&&h[m].type===Mr&&(h[m].colorSpace=Fn)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(t=i.object)!=null&&t.isObject3D&&s!==i.eventCount){const l=i.object,u=r.internal.interaction.indexOf(l);u>-1&&r.internal.interaction.splice(u,1),i.eventCount&&l.raycast!==null&&r.internal.interaction.push(l)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&Xp(i),n}function Xp(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function Yk(n,e){n.manual||(jO(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const zs=n=>n==null?void 0:n.isObject3D;function Ox(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function qO(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function qk(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{qO(t.capturedMap,e,i,r)})}function Kk(n){function e(u){const{internal:h}=n.getState(),m=u.offsetX-h.initialClick[0],g=u.offsetY-h.initialClick[1];return Math.round(Math.sqrt(m*m+g*g))}function t(u){return u.filter(h=>["Move","Over","Enter","Out","Leave"].some(m=>{var g;return(g=h.__r3f)==null?void 0:g.handlers["onPointer"+m]}))}function i(u,h){const m=n.getState(),g=new Set,v=[],x=h?h(m.internal.interaction):m.internal.interaction;for(let S=0;S<x.length;S++){const C=Jd(x[S]);C&&(C.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(u,m);function b(S){const C=Jd(S);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var R;C.events.compute==null||C.events.compute(u,C,(R=C.previousRoot)==null?void 0:R.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(S,!0):[]}let M=x.flatMap(b).sort((S,C)=>{const R=Jd(S.object),B=Jd(C.object);return!R||!B?S.distance-C.distance:B.events.priority-R.events.priority||S.distance-C.distance}).filter(S=>{const C=Ox(S);return g.has(C)?!1:(g.add(C),!0)});m.events.filter&&(M=m.events.filter(M,m));for(const S of M){let C=S.object;for(;C;){var A;(A=C.__r3f)!=null&&A.eventCount&&v.push({...S,eventObject:C}),C=C.parent}}if("pointerId"in u&&m.internal.capturedMap.has(u.pointerId))for(let S of m.internal.capturedMap.get(u.pointerId).values())g.has(Ox(S.intersection))||v.push(S.intersection);return v}function r(u,h,m,g){if(u.length){const v={stopped:!1};for(const x of u){let b=Jd(x.object);if(b||x.object.traverseAncestors(M=>{const A=Jd(M);if(A)return b=A,!1}),b){const{raycaster:M,pointer:A,camera:S,internal:C}=b,R=new q(A.x,A.y,0).unproject(S),B=L=>{var O,G;return(O=(G=C.capturedMap.get(L))==null?void 0:G.has(x.eventObject))!=null?O:!1},N=L=>{const O={intersection:x,target:h.target};C.capturedMap.has(L)?C.capturedMap.get(L).set(x.eventObject,O):C.capturedMap.set(L,new Map([[x.eventObject,O]])),h.target.setPointerCapture(L)},U=L=>{const O=C.capturedMap.get(L);O&&qO(C.capturedMap,x.eventObject,O,L)};let I={};for(let L in h){let O=h[L];typeof O!="function"&&(I[L]=O)}let z={...x,...I,pointer:A,intersections:u,stopped:v.stopped,delta:m,unprojectedPoint:R,ray:M.ray,camera:S,stopPropagation(){const L="pointerId"in h&&C.capturedMap.get(h.pointerId);if((!L||L.has(x.eventObject))&&(z.stopped=v.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(O=>O.eventObject===x.eventObject))){const O=u.slice(0,u.indexOf(x));s([...O,x])}},target:{hasPointerCapture:B,setPointerCapture:N,releasePointerCapture:U},currentTarget:{hasPointerCapture:B,setPointerCapture:N,releasePointerCapture:U},nativeEvent:h};if(g(z),v.stopped===!0)break}}}return u}function s(u){const{internal:h}=n.getState();for(const m of h.hovered.values())if(!u.length||!u.find(g=>g.object===m.object&&g.index===m.index&&g.instanceId===m.instanceId)){const v=m.eventObject.__r3f;if(h.hovered.delete(Ox(m)),v!=null&&v.eventCount){const x=v.handlers,b={...m,intersections:u};x.onPointerOut==null||x.onPointerOut(b),x.onPointerLeave==null||x.onPointerLeave(b)}}}function a(u,h){for(let m=0;m<h.length;m++){const g=h[m].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(u)}}function l(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return h=>{const{internal:m}=n.getState();"pointerId"in h&&m.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(h.pointerId)&&(m.capturedMap.delete(h.pointerId),s([]))})}}return function(m){const{onPointerMissed:g,internal:v}=n.getState();v.lastEvent.current=m;const x=u==="onPointerMove",b=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",A=i(m,x?t:void 0),S=b?e(m):0;u==="onPointerDown"&&(v.initialClick=[m.offsetX,m.offsetY],v.initialHits=A.map(R=>R.eventObject)),b&&!A.length&&S<=2&&(a(m,v.interaction),g&&g(m)),x&&s(A);function C(R){const B=R.eventObject,N=B.__r3f;if(!(N!=null&&N.eventCount))return;const U=N.handlers;if(x){if(U.onPointerOver||U.onPointerEnter||U.onPointerOut||U.onPointerLeave){const I=Ox(R),z=v.hovered.get(I);z?z.stopped&&R.stopPropagation():(v.hovered.set(I,R),U.onPointerOver==null||U.onPointerOver(R),U.onPointerEnter==null||U.onPointerEnter(R))}U.onPointerMove==null||U.onPointerMove(R)}else{const I=U[u];I?(!b||v.initialHits.includes(B))&&(a(m,v.interaction.filter(z=>!v.initialHits.includes(z))),I(R)):b&&v.initialHits.includes(B)&&a(m,v.interaction.filter(z=>!v.initialHits.includes(z)))}}r(A,m,S,C)}}return{handlePointer:l}}const CR=n=>!!(n!=null&&n.render),$_=F.createContext(null),Jk=(n,e)=>{const t=Ek((l,u)=>{const h=new q,m=new q,g=new q;function v(S=u().camera,C=m,R=u().size){const{width:B,height:N,top:U,left:I}=R,z=B/N;C.isVector3?g.copy(C):g.set(...C);const L=S.getWorldPosition(h).distanceTo(g);if(jO(S))return{width:B/S.zoom,height:N/S.zoom,top:U,left:I,factor:1,distance:L,aspect:z};{const O=S.fov*Math.PI/180,G=2*Math.tan(O/2)*L,$=G*(B/N);return{width:$,height:G,top:U,left:I,factor:B/$,distance:L,aspect:z}}}let x;const b=S=>l(C=>({performance:{...C.performance,current:S}})),M=new Pe;return{set:l,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(S=1)=>n(u(),S),advance:(S,C)=>e(S,C,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new ST,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=u();x&&clearTimeout(x),S.performance.current!==S.performance.min&&b(S.performance.min),x=setTimeout(()=>b(u().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:S=>l(C=>({...C,events:{...C.events,...S}})),setSize:(S,C,R=0,B=0)=>{const N=u().camera,U={width:S,height:C,top:R,left:B};l(I=>({size:U,viewport:{...I.viewport,...v(N,m,U)}}))},setDpr:S=>l(C=>{const R=WO(S);return{viewport:{...C.viewport,dpr:R,initialDpr:C.viewport.initialDpr||R}}}),setFrameloop:(S="always")=>{const C=u().clock;C.stop(),C.elapsedTime=0,S!=="never"&&(C.start(),C.elapsedTime=0),l(()=>({frameloop:S}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:F.createRef(),active:!1,frames:0,priority:0,subscribe:(S,C,R)=>{const B=u().internal;return B.priority=B.priority+(C>0?1:0),B.subscribers.push({ref:S,priority:C,store:R}),B.subscribers=B.subscribers.sort((N,U)=>N.priority-U.priority),()=>{const N=u().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(C>0?1:0),N.subscribers=N.subscribers.filter(U=>U.ref!==S))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,a=i.camera;return t.subscribe(()=>{const{camera:l,size:u,viewport:h,gl:m,set:g}=t.getState();if(u.width!==r.width||u.height!==r.height||h.dpr!==s){r=u,s=h.dpr,Yk(l,u),h.dpr>0&&m.setPixelRatio(h.dpr);const v=typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(u.width,u.height,v)}l!==a&&(a=l,g(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>n(l)),t};function KO(){const n=F.useContext($_);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Ar(n=t=>t,e){return KO()(n,e)}function wr(n,e=0){const t=KO(),i=t.getState().internal.subscribe,r=XO(n);return ey(()=>i(r,e,t),[e,i,t]),null}const wR=new WeakMap,$k=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function JO(n,e){return function(t,...i){let r;return $k(t)?(r=wR.get(t),r||(r=new t,wR.set(t,r))):r=t,n&&n(r),Promise.all(i.map(s=>new Promise((a,l)=>r.load(s,u=>{zs(u==null?void 0:u.scene)&&Object.assign(u,Hk(u.scene)),a(u)},e,u=>l(new Error(`Could not load ${s}: ${u==null?void 0:u.message}`))))))}}function fl(n,e,t,i){const r=Array.isArray(e)?e:[e],s=IO(JO(t,i),[n,...r],{equal:bi.equ});return Array.isArray(e)?s:s[0]}fl.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return FO(JO(t),[n,...i])};fl.clear=function(n,e){const t=Array.isArray(e)?e:[e];return zO([n,...t])};function Zk(n){const e=Rk(n);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:F.version}),e}const $O=0,Rp={},Qk=/^three(?=[A-Z])/,sS=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let ej=0;const tj=n=>typeof n=="function";function w0(n){if(tj(n)){const e=`${ej++}`;return Rp[e]=n,e}else Object.assign(Rp,n)}function ZO(n,e){const t=sS(n),i=Rp[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function nj(n,e,t){var i;return n=sS(n)in Rp?n:n.replace(Qk,""),ZO(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,q_(e.object,t,n,e)}function ij(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?J_(n.parent,n):zs(n.object)&&(n.object.visible=!1),n.isHidden=!0,Xp(n)}}function QO(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?K_(n.parent,n):zs(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,Xp(n)}}function RT(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var r,s;const a=Rp[sS(e.type)];e.object=(r=e.props.object)!=null?r:new a(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(df(e.object,e.props),e.props.attach)K_(n,e);else if(zs(e.object)&&zs(n.object)){const a=n.object.children.indexOf(t==null?void 0:t.object);if(t&&a!==-1){const l=n.object.children.indexOf(e.object);if(l!==-1){n.object.children.splice(l,1);const u=l<a?a-1:a;n.object.children.splice(u,0,e.object)}else e.object.parent=n.object,n.object.children.splice(a,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const a of e.children)RT(e,a);Xp(e)}}function n2(n,e){e&&(e.parent=n,n.children.push(e),RT(n,e))}function RR(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),RT(n,e,t)}function e9(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():ER.unstable_scheduleCallback(ER.unstable_IdlePriority,e)}}function UE(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?J_(n,e):zs(e.object)&&zs(n.object)&&(n.object.remove(e.object),qk(kO(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const a=e.children[s];UE(e,a,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&e9(e.object),t===void 0&&Xp(e)}function rj(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const n_=[];function sj(){for(const[t]of n_){const i=t.parent;if(i){t.props.attach?J_(i,t):zs(t.object)&&zs(i.object)&&i.object.remove(t.object);for(const r of t.children)r.props.attach?J_(t,r):zs(r.object)&&zs(t.object)&&t.object.remove(r.object)}t.isHidden&&QO(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&e9(t.object)}for(const[t,i,r]of n_){t.props=i;const s=t.parent;if(s){var n,e;const a=Rp[sS(t.type)];t.object=(n=t.props.object)!=null?n:new a(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,rj(r,t.object),df(t.object,t.props),t.props.attach?K_(s,t):zs(t.object)&&zs(s.object)&&s.object.add(t.object);for(const l of t.children)l.props.attach?K_(t,l):zs(l.object)&&zs(t.object)&&t.object.add(l.object);Xp(t)}}n_.length=0}const i2=()=>{},DR={};let Px=$O;const aj=0,oj=4,LE=Zk({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:nj,removeChild:UE,appendChild:n2,appendInitialChild:n2,insertBefore:RR,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||n2(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||UE(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||RR(i,e,t)},getRootHostContext:()=>DR,getChildHostContext:()=>DR,commitUpdate(n,e,t,i,r){var s,a,l;ZO(e,i);let u=!1;if((n.type==="primitive"&&t.object!==i.object||((s=i.args)==null?void 0:s.length)!==((a=t.args)==null?void 0:a.length)||(l=i.args)!=null&&l.some((m,g)=>{var v;return m!==((v=t.args)==null?void 0:v[g])}))&&(u=!0),u)n_.push([n,{...i},r]);else{const m=jk(n,i);Object.keys(m).length&&(Object.assign(n.props,m),df(n.object,m))}(r.sibling===null||(r.flags&oj)===aj)&&sj()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>q_(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:ij,unhideInstance:QO,createTextInstance:i2,hideTextInstance:i2,unhideTextInstance:i2,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:F.createContext(null),setCurrentUpdatePriority(n){Px=n},getCurrentUpdatePriority(){return Px},resolveUpdatePriority(){var n;if(Px!==$O)return Px;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return t_.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return t_.ContinuousEventPriority;default:return t_.DefaultEventPriority}},resetFormInstance(){}}),_0=new Map,$d={objects:"shallow",strict:!1};function lj(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function cj(n){const e=_0.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||Jk(FE,OR),a=t||LE.createContainer(s,t_.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||_0.set(n,{fiber:a,store:s});let l,u,h=!1,m=null;return{async configure(g={}){let v;m=new Promise(ae=>v=ae);let{gl:x,size:b,scene:M,events:A,onCreated:S,shadows:C=!1,linear:R=!1,flat:B=!1,legacy:N=!1,orthographic:U=!1,frameloop:I="always",dpr:z=[1,2],performance:L,raycaster:O,camera:G,onPointerMissed:$}=g,Q=s.getState(),ce=Q.gl;if(!Q.gl){const ae={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},Se=typeof x=="function"?await x(ae):x;CR(Se)?ce=Se:ce=new PO({...ae,...x}),Q.set({gl:ce})}let fe=Q.raycaster;fe||Q.set({raycaster:fe=new EO});const{params:k,...K}=O||{};if(bi.equ(K,fe,$d)||df(fe,{...K}),bi.equ(k,fe.params,$d)||df(fe,{params:{...fe.params,...k}}),!Q.camera||Q.camera===u&&!bi.equ(u,G,$d)){u=G;const ae=G==null?void 0:G.isCamera,Se=ae?G:U?new Zl(0,0,0,0,.1,1e3):new pi(75,0,.1,1e3);ae||(Se.position.z=5,G&&(df(Se,G),Se.manual||("aspect"in G||"left"in G||"right"in G||"bottom"in G||"top"in G)&&(Se.manual=!0,Se.updateProjectionMatrix())),!Q.camera&&!(G!=null&&G.rotation)&&Se.lookAt(0,0,0)),Q.set({camera:Se}),fe.camera=Se}if(!Q.scene){let ae;M!=null&&M.isScene?(ae=M,q_(ae,s,"",{})):(ae=new Tp,q_(ae,s,"",{}),M&&df(ae,M)),Q.set({scene:ae})}A&&!Q.events.handlers&&Q.set({events:A(s)});const ee=lj(n,b);if(bi.equ(ee,Q.size,$d)||Q.setSize(ee.width,ee.height,ee.top,ee.left),z&&Q.viewport.dpr!==WO(z)&&Q.setDpr(z),Q.frameloop!==I&&Q.setFrameloop(I),Q.onPointerMissed||Q.set({onPointerMissed:$}),L&&!bi.equ(L,Q.performance,$d)&&Q.set(ae=>({performance:{...ae.performance,...L}})),!Q.xr){var me;const ae=(ie,_e)=>{const Ue=s.getState();Ue.frameloop!=="never"&&OR(ie,!0,Ue,_e)},Se=()=>{const ie=s.getState();ie.gl.xr.enabled=ie.gl.xr.isPresenting,ie.gl.xr.setAnimationLoop(ie.gl.xr.isPresenting?ae:null),ie.gl.xr.isPresenting||FE(ie)},Ae={connect(){const ie=s.getState().gl;ie.xr.addEventListener("sessionstart",Se),ie.xr.addEventListener("sessionend",Se)},disconnect(){const ie=s.getState().gl;ie.xr.removeEventListener("sessionstart",Se),ie.xr.removeEventListener("sessionend",Se)}};typeof((me=ce.xr)==null?void 0:me.addEventListener)=="function"&&Ae.connect(),Q.set({xr:Ae})}if(ce.shadowMap){const ae=ce.shadowMap.enabled,Se=ce.shadowMap.type;if(ce.shadowMap.enabled=!!C,bi.boo(C))ce.shadowMap.type=Jg;else if(bi.str(C)){var W;const Ae={basic:q5,percentage:Ab,soft:Jg,variance:el};ce.shadowMap.type=(W=Ae[C])!=null?W:Jg}else bi.obj(C)&&Object.assign(ce.shadowMap,C);(ae!==ce.shadowMap.enabled||Se!==ce.shadowMap.type)&&(ce.shadowMap.needsUpdate=!0)}return Rn.enabled=!N,h||(ce.outputColorSpace=R?rc:Fn,ce.toneMapping=B?al:zM),Q.legacy!==N&&Q.set(()=>({legacy:N})),Q.linear!==R&&Q.set(()=>({linear:R})),Q.flat!==B&&Q.set(()=>({flat:B})),x&&!bi.fun(x)&&!CR(x)&&!bi.equ(x,ce,$d)&&df(ce,x),l=S,h=!0,v(),this},render(g){return!h&&!m&&this.configure(),m.then(()=>{LE.updateContainer(re.jsx(uj,{store:s,children:g,onCreated:l,rootElement:n}),a,null,()=>{})}),s},unmount(){t9(n)}}}function uj({store:n,children:e,onCreated:t,rootElement:i}){return ey(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),re.jsx($_.Provider,{value:n,children:e})}function t9(n,e){const t=_0.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),LE.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,a,l,u;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(u=r.gl)!=null&&u.xr&&r.xr.disconnect(),Gk(r.scene),_0.delete(n)}catch{}},500)})}}const fj=new Set,hj=new Set,dj=new Set;function r2(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function av(n,e){switch(n){case"before":return r2(fj,e);case"after":return r2(hj,e);case"tail":return r2(dj,e)}}let s2,a2;function NE(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),s2=e.internal.subscribers;for(let r=0;r<s2.length;r++)a2=s2[r],a2.ref.current(a2.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let Z_=!1,IE=!1,o2,BR,Zd;function n9(n){BR=requestAnimationFrame(n9),Z_=!0,o2=0,av("before",n),IE=!0;for(const t of _0.values()){var e;Zd=t.store.getState(),Zd.internal.active&&(Zd.frameloop==="always"||Zd.internal.frames>0)&&!((e=Zd.gl.xr)!=null&&e.isPresenting)&&(o2+=NE(n,Zd))}if(IE=!1,av("after",n),o2===0)return av("tail",n),Z_=!1,cancelAnimationFrame(BR)}function FE(n,e=1){var t;if(!n)return _0.forEach(i=>FE(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):IE?n.internal.frames=2:n.internal.frames=1,Z_||(Z_=!0,requestAnimationFrame(n9)))}function OR(n,e=!0,t,i){if(e&&av("before",n),t)NE(n,t,i);else for(const r of _0.values())NE(n,r.store.getState());e&&av("after",n)}const l2={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function pj(n){const{handlePointer:e}=Kk(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(l2).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(s=>({events:{...s.events,connected:t}})),r.handlers)for(const s in r.handlers){const a=r.handlers[s],[l,u]=l2[s];t.addEventListener(l,a,{passive:u})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const s=i.handlers[r],[a]=l2[r];i.connected.removeEventListener(a,s)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function PR(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function mj({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=F.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=F.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),u=n?typeof n=="number"?n:n.scroll:null,h=n?typeof n=="number"?n:n.resize:null,m=F.useRef(!1);F.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[g,v,x]=F.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:C,top:R,width:B,height:N,bottom:U,right:I,x:z,y:L}=l.current.element.getBoundingClientRect(),O={left:C,top:R,width:B,height:N,bottom:U,right:I,x:z,y:L};l.current.element instanceof HTMLElement&&i&&(O.height=l.current.element.offsetHeight,O.width=l.current.element.offsetWidth),Object.freeze(O),m.current&&!xj(l.current.lastBounds,O)&&a(l.current.lastBounds=O)};return[S,h?PR(S,h):S,u?PR(S,u):S]},[a,i,u,h]);function b(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",x,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function M(){l.current.element&&(l.current.resizeObserver=new r(x),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",x,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const A=S=>{!S||S===l.current.element||(b(),l.current.element=S,l.current.scrollContainers=i9(S),M())};return vj(x,!!e),gj(v),F.useEffect(()=>{b(),M()},[e,x,v]),F.useEffect(()=>b,[]),[A,s,g]}function gj(n){F.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function vj(n,e){F.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function i9(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...i9(n.parentElement)]}const yj=["x","y","top","bottom","left","right","width","height"],xj=(n,e)=>yj.every(t=>n[t]===e[t]);function _j({ref:n,children:e,fallback:t,resize:i,style:r,gl:s,events:a=pj,eventSource:l,eventPrefix:u,shadows:h,linear:m,flat:g,legacy:v,orthographic:x,frameloop:b,dpr:M,performance:A,raycaster:S,camera:C,scene:R,onPointerMissed:B,onCreated:N,...U}){F.useMemo(()=>w0(fk),[]);const I=Ik(),[z,L]=mj({scroll:!0,debounce:{scroll:50,resize:0},...i}),O=F.useRef(null),G=F.useRef(null);F.useImperativeHandle(n,()=>O.current);const $=XO(B),[Q,ce]=F.useState(!1),[fe,k]=F.useState(!1);if(Q)throw Q;if(fe)throw fe;const K=F.useRef(null);ey(()=>{const me=O.current;if(L.width>0&&L.height>0&&me){K.current||(K.current=cj(me));async function W(){await K.current.configure({gl:s,scene:R,events:a,shadows:h,linear:m,flat:g,legacy:v,orthographic:x,frameloop:b,dpr:M,performance:A,raycaster:S,camera:C,size:L,onPointerMissed:(...ae)=>$.current==null?void 0:$.current(...ae),onCreated:ae=>{ae.events.connect==null||ae.events.connect(l?Lk(l)?l.current:l:G.current),u&&ae.setEvents({compute:(Se,Ae)=>{const ie=Se[u+"X"],_e=Se[u+"Y"];Ae.pointer.set(ie/Ae.size.width*2-1,-(_e/Ae.size.height)*2+1),Ae.raycaster.setFromCamera(Ae.pointer,Ae.camera)}}),N==null||N(ae)}}),K.current.render(re.jsx(I,{children:re.jsx(zk,{set:k,children:re.jsx(F.Suspense,{fallback:re.jsx(Fk,{set:ce}),children:e??null})})}))}W()}}),F.useEffect(()=>{const me=O.current;if(me)return()=>t9(me)},[]);const ee=l?"none":"auto";return re.jsx("div",{ref:G,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ee,...r},...U,children:re.jsx("div",{ref:z,style:{width:"100%",height:"100%"},children:re.jsx("canvas",{ref:O,style:{display:"block"},children:t})})})}function bj(n){return re.jsx(GO,{children:re.jsx(_j,{...n})})}function Sj(n,e,t){return Math.max(e,Math.min(n,t))}const vs={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function UR(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function LR(n,e,t,i=.15){return i===0?Sj(n,e,t):n<e?-UR(e-n,t-e,i)+e:n>t?+UR(n-t,t-e,i)+t:n}function Aj(n,[e,t],[i,r]){const[[s,a],[l,u]]=n;return[LR(e,s,a,i),LR(t,l,u,r)]}function Ej(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Mj(n){var e=Ej(n,"string");return typeof e=="symbol"?e:String(e)}function ca(n,e,t){return e=Mj(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Ui(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NR(Object(t),!0).forEach(function(i){ca(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):NR(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const r9={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function IR(n){return n?n[0].toUpperCase()+n.slice(1):""}const Tj=["enter","leave"];function Cj(n=!1,e){return n&&!Tj.includes(e)}function wj(n,e="",t=!1){const i=r9[n],r=i&&i[e]||e;return"on"+IR(n)+IR(r)+(Cj(t,r)?"Capture":"")}const Rj=["gotpointercapture","lostpointercapture"];function Dj(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=Rj.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function Bj(n,e=""){const t=r9[n],i=t&&t[e]||e;return n+i}function aS(n){return"touches"in n}function s9(n){return aS(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function Oj(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function Pj(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function a9(n){return aS(n)?Pj(n)[0]:n}function Uj(n){return Oj(n).map(e=>e.identifier)}function c2(n){const e=a9(n);return aS(n)?e.identifier:e.pointerId}function FR(n){const e=a9(n);return[e.clientX,e.clientY]}function Lj(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function Q_(n,...e){return typeof n=="function"?n(...e):n}function Nj(){}function Ij(...n){return n.length===0?Nj:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function zR(n,e){return Object.assign({},e,n||{})}const Fj=32;class zj{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?Q_(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,Lj(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const U=t._delta.map(Math.abs);vs.addTo(t._distance,U)}this.axisIntent&&this.axisIntent(e);const[a,l]=t._movement,[u,h]=i.threshold,{_step:m,values:g}=t;if(i.hasCustomTransform?(m[0]===!1&&(m[0]=Math.abs(a)>=u&&g[0]),m[1]===!1&&(m[1]=Math.abs(l)>=h&&g[1])):(m[0]===!1&&(m[0]=Math.abs(a)>=u&&Math.sign(a)*u),m[1]===!1&&(m[1]=Math.abs(l)>=h&&Math.sign(l)*h)),t.intentional=m[0]!==!1||m[1]!==!1,!t.intentional)return;const v=[0,0];if(i.hasCustomTransform){const[U,I]=g;v[0]=m[0]!==!1?U-m[0]:0,v[1]=m[1]!==!1?I-m[1]:0}else v[0]=m[0]!==!1?a-m[0]:0,v[1]=m[1]!==!1?l-m[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(v);const x=t.offset,b=t._active&&!t._blocked||t.active;b&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=Q_(i.bounds,t)),this.setup&&this.setup()),t.movement=v,this.computeOffset()));const[M,A]=t.offset,[[S,C],[R,B]]=t._bounds;t.overflow=[M<S?-1:M>C?1:0,A<R?-1:A>B?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const N=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=Aj(t._bounds,t.offset,N),t.delta=vs.sub(t.offset,x),this.computeMovement(),b&&(!t.last||s>Fj)){t.delta=vs.sub(t.offset,x);const U=t.delta.map(Math.abs);vs.addTo(t.distance,U),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[U[0]/s,U[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(Ui(Ui(Ui({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Hj([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class Gj extends zj{constructor(...e){super(...e),ca(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=vs.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=vs.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[s9(e)]:i.axisThreshold;t.axis=Hj(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Vj=n=>n,HR=.15,o9={enabled(n=!0){return n},eventOptions(n,e,t){return Ui(Ui({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[HR,HR];case!1:return[0,0];default:return vs.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return vs.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||Vj},threshold(n){return vs.toVector(n,0)}},kj=0,ty=Ui(Ui({},o9),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=kj){return n},bounds(n={}){if(typeof n=="function")return s=>ty.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),GR={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class jj extends Gj{constructor(...e){super(...e),ca(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=ty.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=c2(e),i._pointerActive=!0,this.computeValues(FR(e)),this.computeInitial(),t.preventScrollAxis&&s9(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=c2(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=FR(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=vs.sub(s,t._values),this.computeValues(s)),vs.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=c2(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,a]=t._distance;if(t.tap=s<=i.tapsThreshold&&a<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[l,u]=t._delta,[h,m]=t._movement,[g,v]=i.swipe.velocity,[x,b]=i.swipe.distance,M=i.swipe.duration;if(t.elapsedTime<M){const A=Math.abs(l/t.timeDelta),S=Math.abs(u/t.timeDelta);A>g&&Math.abs(h)>x&&(t.swipe[0]=Math.sign(l)),S>v&&Math.abs(m)>b&&(t.swipe[1]=Math.sign(u))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,Xj(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=GR[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,vs.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in GR&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Xj(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const ny=typeof window<"u"&&window.document&&window.document.createElement;function l9(){return ny&&"ontouchstart"in window}function Wj(){return l9()||ny&&window.navigator.maxTouchPoints>1}function Yj(){return ny&&"onpointerdown"in window}function qj(){return ny&&"exitPointerLock"in window.document}function Kj(){try{return"constructor"in GestureEvent}catch{return!1}}const fo={isBrowser:ny,gesture:Kj(),touch:l9(),touchscreen:Wj(),pointer:Yj(),pointerLock:qj()},Jj=250,$j=180,Zj=.5,Qj=50,eX=250,tX=10,VR={mouse:0,touch:0,pen:8},nX=Ui(Ui({},ty),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&fo.pointerLock,fo.touch&&t?"touch":this.pointerLock?"mouse":fo.pointer&&!r?"pointer":fo.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?Jj:void 0,!(!fo.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const s=vs.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=Zj,distance:e=Qj,duration:t=eX}={}){return{velocity:this.transform(vs.toVector(n)),distance:this.transform(vs.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return $j;case!1:return 0;default:return n}},axisThreshold(n){return n?Ui(Ui({},VR),n):VR},keyboardDisplacement(n=tX){return n}});Ui(Ui({},o9),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!fo.touch&&fo.gesture)return"gesture";if(fo.touch&&i)return"touch";if(fo.touchscreen){if(fo.pointer)return"pointer";if(fo.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=a=>{const l=zR(Q_(t,a),{min:-1/0,max:1/0});return[l.min,l.max]},s=a=>{const l=zR(Q_(i,a),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:a=>[r(a),s(a)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",vs.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});Ui(Ui({},ty),{},{mouseOnly:(n=!0)=>n});Ui(Ui({},ty),{},{mouseOnly:(n=!0)=>n});const c9=new Map,zE=new Map;function iX(n){c9.set(n.key,n.engine),zE.set(n.key,n.resolver)}const rX={key:"drag",engine:jj,resolver:nX};function sX(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function aX(n,e){if(n==null)return{};var t=sX(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const oX={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=fo.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},lX=["target","eventOptions","window","enabled","transform"];function i_(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=i_(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function cX(n,e,t={}){const i=n,{target:r,eventOptions:s,window:a,enabled:l,transform:u}=i,h=aX(i,lX);if(t.shared=i_({target:r,eventOptions:s,window:a,enabled:l,transform:u},oX),e){const m=zE.get(e);t[e]=i_(Ui({shared:t.shared},h),m)}else for(const m in h){const g=zE.get(m);g&&(t[m]=i_(Ui({shared:t.shared},h[m]),g))}return t}class u9{constructor(e,t){ca(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,s){const a=this._listeners,l=Bj(t,i),u=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},h=Ui(Ui({},u),s);e.addEventListener(l,r,h);const m=()=>{e.removeEventListener(l,r,h),a.delete(m)};return a.add(m),m}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class uX{constructor(){ca(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class fX{constructor(e){ca(this,"gestures",new Set),ca(this,"_targetEventStore",new u9(this)),ca(this,"gestureEventStores",{}),ca(this,"gestureTimeoutStores",{}),ca(this,"handlers",{}),ca(this,"config",{}),ca(this,"pointerIds",new Set),ca(this,"touchIds",new Set),ca(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),hX(this,e)}setEventIds(e){if(aS(e))return this.touchIds=new Set(Uj(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=cX(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const a of this.gestures){const l=this.config[a],u=kR(i,l.eventOptions,!!r);if(l.enabled){const h=c9.get(a);new h(this,e,a).bind(u)}}const s=kR(i,t.eventOptions,!!r);for(const a in this.nativeHandlers)s(a,"",l=>this.nativeHandlers[a](Ui(Ui({},this.state.shared),{},{event:l,args:e})),void 0,!0)}for(const s in i)i[s]=Ij(...i[s]);if(!r)return i;for(const s in i){const{device:a,capture:l,passive:u}=Dj(s);this._targetEventStore.add(r,a,"",i[s],{capture:l,passive:u})}}}}function Qd(n,e){n.gestures.add(e),n.gestureEventStores[e]=new u9(n,e),n.gestureTimeoutStores[e]=new uX}function hX(n,e){e.drag&&Qd(n,"drag"),e.wheel&&Qd(n,"wheel"),e.scroll&&Qd(n,"scroll"),e.move&&Qd(n,"move"),e.pinch&&Qd(n,"pinch"),e.hover&&Qd(n,"hover")}const kR=(n,e,t)=>(i,r,s,a={},l=!1)=>{var u,h;const m=(u=a.capture)!==null&&u!==void 0?u:e.capture,g=(h=a.passive)!==null&&h!==void 0?h:e.passive;let v=l?i:wj(i,r,m);t&&g&&(v+="Passive"),n[v]=n[v]||[],n[v].push(s)};function dX(n,e={},t,i){const r=oe.useMemo(()=>new fX(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),oe.useEffect(r.effect.bind(r)),oe.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function pX(n,e){return iX(rX),dX({drag:n},e||{},"drag")}function ov(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HE(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function mX(n,e){if(n){if(typeof n=="string")return HE(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return HE(n,e)}}function gX(n){if(Array.isArray(n))return HE(n)}function vX(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function yX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xX(n){return gX(n)||vX(n)||mX(n)||yX()}new Pe;new Pe;function _X(n,e,t){return Math.max(e,Math.min(t,n))}function bX(n,e){return _X(n-Math.floor(n/e)*e,0,e)}function SX(n,e){var t=bX(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function f9(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var so=function n(e,t,i){var r=this;f9(this,n),ov(this,"dot2",function(s,a){return r.x*s+r.y*a}),ov(this,"dot3",function(s,a,l){return r.x*s+r.y*a+r.z*l}),this.x=e,this.y=t,this.z=i},AX=[new so(1,1,0),new so(-1,1,0),new so(1,-1,0),new so(-1,-1,0),new so(1,0,1),new so(-1,0,1),new so(1,0,-1),new so(-1,0,-1),new so(0,1,1),new so(0,-1,1),new so(0,1,-1),new so(0,-1,-1)],jR=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],XR=new Array(512),WR=new Array(512),EX=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=jR[t]^e&255:i=jR[t]^e>>8&255,XR[t]=XR[t+256]=i,WR[t]=WR[t+256]=AX[i%12]}};EX(0);function MX(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function YR(n){var e=MX(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var TX=function n(e){var t=this;f9(this,n),ov(this,"seed",0),ov(this,"init",function(i){t.seed=i,t.value=YR(i)}),ov(this,"value",YR(this.seed)),this.init(e)};new TX(Math.random());var CX=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},h9=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},wX=function(e){return e},RX={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},DX={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},BX={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},OX={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},PX={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},UX={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function Er(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:h9,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,u="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[u]===void 0&&(n.__damp[u]=0),Math.abs(n[e]-t)<=l)return n[e]=t,!1;i=Math.max(1e-4,i);var h=2/i,m=a(h*r),g=n[e]-t,v=t,x=s*i;g=Math.min(Math.max(g,-x),x),t=n[e]-g;var b=(n.__damp[u]+h*g)*r;n.__damp[u]=(n.__damp[u]-h*b)*m;var M=t+(g+b)*m;return v-n[e]>0==M>v&&(M=v,n.__damp[u]=(M-v)/r),n[e]=M,!0}var LX=function(e){return e&&e.isCamera},NX=function(e){return e&&e.isLight},Dg=new q,qR=new si,KR=new si,Bg=new ft,u2=new q;function IX(n,e,t,i,r,s,a){typeof e=="number"?Dg.setScalar(e):Array.isArray(e)?Dg.set(e[0],e[1],e[2]):Dg.copy(e);var l=n.parent;n.updateWorldMatrix(!0,!1),u2.setFromMatrixPosition(n.matrixWorld),LX(n)||NX(n)?Bg.lookAt(u2,Dg,n.up):Bg.lookAt(Dg,u2,n.up),eb(n.quaternion,KR.setFromRotationMatrix(Bg),t,i,r,s,a),l&&(Bg.extractRotation(l.matrixWorld),qR.setFromRotationMatrix(Bg),eb(n.quaternion,KR.copy(n.quaternion).premultiply(qR.invert()),t,i,r,s,a))}function gp(n,e,t,i,r,s,a,l){return Er(n,e,n[e]+SX(n[e],t),i,r,s,a,l)}var Og=new Pe,JR,$R;function FX(n,e,t,i,r,s,a){return typeof e=="number"?Og.setScalar(e):Array.isArray(e)?Og.set(e[0],e[1]):Og.copy(e),JR=Er(n,"x",Og.x,t,i,r,s,a),$R=Er(n,"y",Og.y,t,i,r,s,a),JR||$R}var ep=new q,ZR,QR,e4;function GE(n,e,t,i,r,s,a){return typeof e=="number"?ep.setScalar(e):Array.isArray(e)?ep.set(e[0],e[1],e[2]):ep.copy(e),ZR=Er(n,"x",ep.x,t,i,r,s,a),QR=Er(n,"y",ep.y,t,i,r,s,a),e4=Er(n,"z",ep.z,t,i,r,s,a),ZR||QR||e4}var zh=new Kt,t4,n4,i4,r4;function zX(n,e,t,i,r,s,a){return typeof e=="number"?zh.setScalar(e):Array.isArray(e)?zh.set(e[0],e[1],e[2],e[3]):zh.copy(e),t4=Er(n,"x",zh.x,t,i,r,s,a),n4=Er(n,"y",zh.y,t,i,r,s,a),i4=Er(n,"z",zh.z,t,i,r,s,a),r4=Er(n,"w",zh.w,t,i,r,s,a),t4||n4||i4||r4}var Pg=new fr,s4,a4,o4;function HX(n,e,t,i,r,s,a){return Array.isArray(e)?Pg.set(e[0],e[1],e[2],e[3]):Pg.copy(e),s4=gp(n,"x",Pg.x,t,i,r,s,a),a4=gp(n,"y",Pg.y,t,i,r,s,a),o4=gp(n,"z",Pg.z,t,i,r,s,a),s4||a4||o4}var tp=new Ze,l4,c4,u4;function GX(n,e,t,i,r,s,a){return e instanceof Ze?tp.copy(e):Array.isArray(e)?tp.setRGB(e[0],e[1],e[2]):tp.set(e),l4=Er(n,"r",tp.r,t,i,r,s,a),c4=Er(n,"g",tp.g,t,i,r,s,a),u4=Er(n,"b",tp.b,t,i,r,s,a),l4||c4||u4}var $o=new si,Fc=new Kt,f4=new Kt,Ug=new Kt,h4,d4,p4,m4;function eb(n,e,t,i,r,s,a){var l=n;Array.isArray(e)?$o.set(e[0],e[1],e[2],e[3]):$o.copy(e);var u=n.dot($o)>0?1:-1;return $o.x*=u,$o.y*=u,$o.z*=u,$o.w*=u,h4=Er(n,"x",$o.x,t,i,r,s,a),d4=Er(n,"y",$o.y,t,i,r,s,a),p4=Er(n,"z",$o.z,t,i,r,s,a),m4=Er(n,"w",$o.w,t,i,r,s,a),Fc.set(n.x,n.y,n.z,n.w).normalize(),f4.set(l.__damp.velocity_x,l.__damp.velocity_y,l.__damp.velocity_z,l.__damp.velocity_w),Ug.copy(Fc).multiplyScalar(f4.dot(Fc)/Fc.dot(Fc)),l.__damp.velocity_x-=Ug.x,l.__damp.velocity_y-=Ug.y,l.__damp.velocity_z-=Ug.z,l.__damp.velocity_w-=Ug.w,n.set(Fc.x,Fc.y,Fc.z,Fc.w),h4||d4||p4||m4}var Lg=new Y_,g4,v4,y4;function VX(n,e,t,i,r,s,a){return Array.isArray(e)?Lg.set(e[0],e[1],e[2]):Lg.copy(e),g4=Er(n,"radius",Lg.radius,t,i,r,s,a),v4=gp(n,"phi",Lg.phi,t,i,r,s,a),y4=gp(n,"theta",Lg.theta,t,i,r,s,a),g4||v4||y4}var Ux=new ft,x4=new q,_4=new si,b4=new q,S4,A4,E4;function kX(n,e,t,i,r,s,a){var l=n;return l.__damp===void 0&&(l.__damp={position:new q,rotation:new si,scale:new q},n.decompose(l.__damp.position,l.__damp.rotation,l.__damp.scale)),Array.isArray(e)?Ux.set.apply(Ux,xX(e)):Ux.copy(e),Ux.decompose(x4,_4,b4),S4=GE(l.__damp.position,x4,t,i,r,s,a),A4=eb(l.__damp.rotation,_4,t,i,r,s,a),E4=GE(l.__damp.scale,b4,t,i,r,s,a),n.compose(l.__damp.position,l.__damp.rotation,l.__damp.scale),S4||A4||E4}var M4=Object.freeze({__proto__:null,rsqw:CX,exp:h9,linear:wX,sine:RX,cubic:DX,quint:BX,circ:OX,quart:PX,expo:UX,damp:Er,dampLookAt:IX,dampAngle:gp,damp2:FX,damp3:GE,damp4:zX,dampE:HX,dampC:GX,dampQ:eb,dampS:VX,dampM:kX});const DT=F.createContext(null);function iy(){return F.useContext(DT)}function jX({eps:n=1e-5,enabled:e=!0,infinite:t,horizontal:i,pages:r=1,distance:s=1,damping:a=.25,maxSpeed:l=1/0,prepend:u=!1,style:h={},children:m}){const{get:g,setEvents:v,gl:x,size:b,invalidate:M,events:A}=Ar(),[S]=F.useState(()=>document.createElement("div")),[C]=F.useState(()=>document.createElement("div")),[R]=F.useState(()=>document.createElement("div")),B=x.domElement.parentNode,N=F.useRef(0),U=F.useMemo(()=>({el:S,eps:n,fill:C,fixed:R,horizontal:i,damping:a,offset:0,delta:0,scroll:N,pages:r,range(L,O,G=0){const $=L-G,Q=$+O+G*2;return this.offset<$?0:this.offset>Q?1:(this.offset-$)/(Q-$)},curve(L,O,G=0){return Math.sin(this.range(L,O,G)*Math.PI)},visible(L,O,G=0){const $=L-G,Q=$+O+G*2;return this.offset>=$&&this.offset<=Q}}),[n,a,i,r]);F.useEffect(()=>{S.style.position="absolute",S.style.width="100%",S.style.height="100%",S.style[i?"overflowX":"overflowY"]="auto",S.style[i?"overflowY":"overflowX"]="hidden",S.style.top="0px",S.style.left="0px";for(const O in h)S.style[O]=h[O];R.style.position="sticky",R.style.top="0px",R.style.left="0px",R.style.width="100%",R.style.height="100%",R.style.overflow="hidden",S.appendChild(R),C.style.height=i?"100%":`${r*s*100}%`,C.style.width=i?`${r*s*100}%`:"100%",C.style.pointerEvents="none",S.appendChild(C),u?B.prepend(S):B.appendChild(S),S[i?"scrollLeft":"scrollTop"]=1;const z=A.connected||x.domElement;requestAnimationFrame(()=>A.connect==null?void 0:A.connect(S));const L=g().events.compute;return v({compute(O,G){const{left:$,top:Q}=B.getBoundingClientRect(),ce=O.clientX-$,fe=O.clientY-Q;G.pointer.set(ce/G.size.width*2-1,-(fe/G.size.height)*2+1),G.raycaster.setFromCamera(G.pointer,G.camera)}}),()=>{B.removeChild(S),v({compute:L}),A.connect==null||A.connect(z)}},[r,s,i,S,C,R,B]),F.useEffect(()=>{if(A.connected===S){const z=b[i?"width":"height"],L=S[i?"scrollWidth":"scrollHeight"],O=L-z;let G=0,$=!0,Q=!0;const ce=()=>{if(!(!e||Q)&&(M(),G=S[i?"scrollLeft":"scrollTop"],N.current=G/O,t)){if(!$){if(G>=O){const k=1-U.offset;S[i?"scrollLeft":"scrollTop"]=1,N.current=U.offset=-k,$=!0}else if(G<=0){const k=1+U.offset;S[i?"scrollLeft":"scrollTop"]=L,N.current=U.offset=k,$=!0}}$&&setTimeout(()=>$=!1,40)}};S.addEventListener("scroll",ce,{passive:!0}),requestAnimationFrame(()=>Q=!1);const fe=k=>S.scrollLeft+=k.deltaY/2;return i&&S.addEventListener("wheel",fe,{passive:!0}),()=>{S.removeEventListener("scroll",ce),i&&S.removeEventListener("wheel",fe)}}},[S,A,b,t,U,M,i,e]);let I=0;return wr((z,L)=>{I=U.offset,M4.damp(U,"offset",N.current,a,L,l,void 0,n),M4.damp(U,"delta",Math.abs(I-U.offset),a,L,l,void 0,n),U.delta>n&&M()}),F.createElement(DT.Provider,{value:U},m)}const XX=F.forwardRef(({children:n},e)=>{const t=F.useRef(null);F.useImperativeHandle(e,()=>t.current,[]);const i=iy(),{width:r,height:s}=Ar(a=>a.viewport);return wr(()=>{t.current.position.x=i.horizontal?-r*(i.pages-1)*i.offset:0,t.current.position.y=i.horizontal?0:s*(i.pages-1)*i.offset}),F.createElement("group",{ref:t},n)}),WX=F.forwardRef(({children:n,style:e,...t},i)=>{const r=iy(),s=F.useRef(null);F.useImperativeHandle(i,()=>s.current,[]);const{width:a,height:l}=Ar(m=>m.size),u=F.useContext($_),h=F.useMemo(()=>X5.createRoot(r.fixed),[r.fixed]);return wr(()=>{r.delta>r.eps&&(s.current.style.transform=`translate3d(${r.horizontal?-a*(r.pages-1)*r.offset:0}px,${r.horizontal?0:l*(r.pages-1)*-r.offset}px,0)`)}),h.render(F.createElement("div",gi({ref:s,style:{...e,position:"absolute",top:0,left:0,willChange:"transform"}},t),F.createElement(DT.Provider,{value:r},F.createElement($_.Provider,{value:u},n)))),null}),YX=F.forwardRef(({html:n,...e},t)=>{const i=n?WX:XX;return F.createElement(i,gi({ref:t},e))}),d9=parseInt(wf.replace(/\D+/g,"")),qX=d9>=125?"uv1":"uv2";function KX(n,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},i=n.getIndex(),r=n.getAttribute("position"),s=i?i.count:r.count;let a=0;const l=Object.keys(n.attributes),u={},h={},m=[],g=["getX","getY","getZ","getW"];for(let M=0,A=l.length;M<A;M++){const S=l[M];u[S]=[];const C=n.morphAttributes[S];C&&(h[S]=new Array(C.length).fill(0).map(()=>[]))}const v=Math.log10(1/e),x=Math.pow(10,v);for(let M=0;M<s;M++){const A=i?i.getX(M):M;let S="";for(let C=0,R=l.length;C<R;C++){const B=l[C],N=n.getAttribute(B),U=N.itemSize;for(let I=0;I<U;I++)S+=`${~~(N[g[I]](A)*x)},`}if(S in t)m.push(t[S]);else{for(let C=0,R=l.length;C<R;C++){const B=l[C],N=n.getAttribute(B),U=n.morphAttributes[B],I=N.itemSize,z=u[B],L=h[B];for(let O=0;O<I;O++){const G=g[O];if(z.push(N[G](A)),U)for(let $=0,Q=U.length;$<Q;$++)L[$].push(U[$][G](A))}}t[S]=a,m.push(a),a++}}const b=n.clone();for(let M=0,A=l.length;M<A;M++){const S=l[M],C=n.getAttribute(S),R=new C.array.constructor(u[S]),B=new mn(R,C.itemSize,C.normalized);if(b.setAttribute(S,B),S in h)for(let N=0;N<h[S].length;N++){const U=n.morphAttributes[S][N],I=new U.array.constructor(h[S][N]),z=new mn(I,U.itemSize,U.normalized);b.morphAttributes[S][N]=z}}return b.setIndex(m),b}function T4(n,e){if(e===E6)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===V_||e===KM){let t=n.getIndex();if(t===null){const a=[],l=n.getAttribute("position");if(l!==void 0){for(let u=0;u<l.count;u++)a.push(u);n.setIndex(a),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===V_)for(let a=1;a<=i;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<i;a++)a%2===0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var ho=Uint8Array,mf=Uint16Array,VE=Uint32Array,p9=new ho([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),m9=new ho([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),JX=new ho([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),g9=function(n,e){for(var t=new mf(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new VE(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},v9=g9(p9,2),y9=v9[0],$X=v9[1];y9[28]=258,$X[258]=28;var ZX=g9(m9,0),QX=ZX[0],kE=new mf(32768);for(var mi=0;mi<32768;++mi){var sf=(mi&43690)>>>1|(mi&21845)<<1;sf=(sf&52428)>>>2|(sf&13107)<<2,sf=(sf&61680)>>>4|(sf&3855)<<4,kE[mi]=((sf&65280)>>>8|(sf&255)<<8)>>>1}var lv=function(n,e,t){for(var i=n.length,r=0,s=new mf(e);r<i;++r)++s[n[r]-1];var a=new mf(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var l;if(t){l=new mf(1<<e);var u=15-e;for(r=0;r<i;++r)if(n[r])for(var h=r<<4|n[r],m=e-n[r],g=a[n[r]-1]++<<m,v=g|(1<<m)-1;g<=v;++g)l[kE[g]>>>u]=h}else for(l=new mf(i),r=0;r<i;++r)n[r]&&(l[r]=kE[a[n[r]-1]++]>>>15-n[r]);return l},ry=new ho(288);for(var mi=0;mi<144;++mi)ry[mi]=8;for(var mi=144;mi<256;++mi)ry[mi]=9;for(var mi=256;mi<280;++mi)ry[mi]=7;for(var mi=280;mi<288;++mi)ry[mi]=8;var x9=new ho(32);for(var mi=0;mi<32;++mi)x9[mi]=5;var eW=lv(ry,9,1),tW=lv(x9,5,1),f2=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Zo=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},h2=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},nW=function(n){return(n/8|0)+(n&7&&1)},iW=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof mf?mf:n instanceof VE?VE:ho)(t-e);return i.set(n.subarray(e,t)),i},rW=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new ho(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new ho(i*3));var a=function(Ue){var ke=e.length;if(Ue>ke){var Ye=new ho(Math.max(ke*2,Ue));Ye.set(e),e=Ye}},l=t.f||0,u=t.p||0,h=t.b||0,m=t.l,g=t.d,v=t.m,x=t.n,b=i*8;do{if(!m){t.f=l=Zo(n,u,1);var M=Zo(n,u+1,3);if(u+=3,M)if(M==1)m=eW,g=tW,v=9,x=5;else if(M==2){var R=Zo(n,u,31)+257,B=Zo(n,u+10,15)+4,N=R+Zo(n,u+5,31)+1;u+=14;for(var U=new ho(N),I=new ho(19),z=0;z<B;++z)I[JX[z]]=Zo(n,u+z*3,7);u+=B*3;for(var L=f2(I),O=(1<<L)-1,G=lv(I,L,1),z=0;z<N;){var $=G[Zo(n,u,O)];u+=$&15;var A=$>>>4;if(A<16)U[z++]=A;else{var Q=0,ce=0;for(A==16?(ce=3+Zo(n,u,3),u+=2,Q=U[z-1]):A==17?(ce=3+Zo(n,u,7),u+=3):A==18&&(ce=11+Zo(n,u,127),u+=7);ce--;)U[z++]=Q}}var fe=U.subarray(0,R),k=U.subarray(R);v=f2(fe),x=f2(k),m=lv(fe,v,1),g=lv(k,x,1)}else throw"invalid block type";else{var A=nW(u)+4,S=n[A-4]|n[A-3]<<8,C=A+S;if(C>i){if(s)throw"unexpected EOF";break}r&&a(h+S),e.set(n.subarray(A,C),h),t.b=h+=S,t.p=u=C*8;continue}if(u>b){if(s)throw"unexpected EOF";break}}r&&a(h+131072);for(var K=(1<<v)-1,ee=(1<<x)-1,me=u;;me=u){var Q=m[h2(n,u)&K],W=Q>>>4;if(u+=Q&15,u>b){if(s)throw"unexpected EOF";break}if(!Q)throw"invalid length/literal";if(W<256)e[h++]=W;else if(W==256){me=u,m=null;break}else{var ae=W-254;if(W>264){var z=W-257,Se=p9[z];ae=Zo(n,u,(1<<Se)-1)+y9[z],u+=Se}var Ae=g[h2(n,u)&ee],ie=Ae>>>4;if(!Ae)throw"invalid distance";u+=Ae&15;var k=QX[ie];if(ie>3){var Se=m9[ie];k+=h2(n,u)&(1<<Se)-1,u+=Se}if(u>b){if(s)throw"unexpected EOF";break}r&&a(h+131072);for(var _e=h+ae;h<_e;h+=4)e[h]=e[h-k],e[h+1]=e[h+1-k],e[h+2]=e[h+2-k],e[h+3]=e[h+3-k];h=_e}}t.l=m,t.p=me,t.b=h,m&&(l=1,t.m=v,t.d=g,t.n=x)}while(!l);return h==e.length?e:iW(e,0,h)},sW=new ho(0),aW=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function oW(n,e){return rW((aW(n),n.subarray(2,-4)),e)}var lW=typeof TextDecoder<"u"&&new TextDecoder,cW=0;try{lW.decode(sW,{stream:!0}),cW=1}catch{}var uW=Object.defineProperty,fW=(n,e,t)=>e in n?uW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hW=(n,e,t)=>(fW(n,e+"",t),t);class dW{constructor(){hW(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}var pW=Object.defineProperty,mW=(n,e,t)=>e in n?pW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Nt=(n,e,t)=>(mW(n,typeof e!="symbol"?e+"":e,t),t);const Lx=new E0,C4=new tl,gW=Math.cos(70*(Math.PI/180)),w4=(n,e)=>(n%e+e)%e;let vW=class extends dW{constructor(e,t){super(),Nt(this,"object"),Nt(this,"domElement"),Nt(this,"enabled",!0),Nt(this,"target",new q),Nt(this,"minDistance",0),Nt(this,"maxDistance",1/0),Nt(this,"minZoom",0),Nt(this,"maxZoom",1/0),Nt(this,"minPolarAngle",0),Nt(this,"maxPolarAngle",Math.PI),Nt(this,"minAzimuthAngle",-1/0),Nt(this,"maxAzimuthAngle",1/0),Nt(this,"enableDamping",!1),Nt(this,"dampingFactor",.05),Nt(this,"enableZoom",!0),Nt(this,"zoomSpeed",1),Nt(this,"enableRotate",!0),Nt(this,"rotateSpeed",1),Nt(this,"enablePan",!0),Nt(this,"panSpeed",1),Nt(this,"screenSpacePanning",!0),Nt(this,"keyPanSpeed",7),Nt(this,"zoomToCursor",!1),Nt(this,"autoRotate",!1),Nt(this,"autoRotateSpeed",2),Nt(this,"reverseOrbit",!1),Nt(this,"reverseHorizontalOrbit",!1),Nt(this,"reverseVerticalOrbit",!1),Nt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Nt(this,"mouseButtons",{LEFT:Vh.ROTATE,MIDDLE:Vh.DOLLY,RIGHT:Vh.PAN}),Nt(this,"touches",{ONE:kh.ROTATE,TWO:kh.DOLLY_PAN}),Nt(this,"target0"),Nt(this,"position0"),Nt(this,"zoom0"),Nt(this,"_domElementKeyEvents",null),Nt(this,"getPolarAngle"),Nt(this,"getAzimuthalAngle"),Nt(this,"setPolarAngle"),Nt(this,"setAzimuthalAngle"),Nt(this,"getDistance"),Nt(this,"getZoomScale"),Nt(this,"listenToKeyEvents"),Nt(this,"stopListenToKeyEvents"),Nt(this,"saveState"),Nt(this,"reset"),Nt(this,"update"),Nt(this,"connect"),Nt(this,"dispose"),Nt(this,"dollyIn"),Nt(this,"dollyOut"),Nt(this,"getScale"),Nt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>m.phi,this.getAzimuthalAngle=()=>m.theta,this.setPolarAngle=ue=>{let Le=w4(ue,2*Math.PI),rt=m.phi;rt<0&&(rt+=2*Math.PI),Le<0&&(Le+=2*Math.PI);let le=Math.abs(Le-rt);2*Math.PI-le<le&&(Le<rt?Le+=2*Math.PI:rt+=2*Math.PI),g.phi=Le-rt,i.update()},this.setAzimuthalAngle=ue=>{let Le=w4(ue,2*Math.PI),rt=m.theta;rt<0&&(rt+=2*Math.PI),Le<0&&(Le+=2*Math.PI);let le=Math.abs(Le-rt);2*Math.PI-le<le&&(Le<rt?Le+=2*Math.PI:rt+=2*Math.PI),g.theta=Le-rt,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=ue=>{ue.addEventListener("keydown",$e),this._domElementKeyEvents=ue},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",$e),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),u=l.NONE},this.update=(()=>{const ue=new q,Le=new q(0,1,0),rt=new si().setFromUnitVectors(e.up,Le),le=rt.clone().invert(),Je=new q,Oe=new si,Ie=2*Math.PI;return function(){const at=i.object.position;rt.setFromUnitVectors(e.up,Le),le.copy(rt).invert(),ue.copy(at).sub(i.target),ue.applyQuaternion(rt),m.setFromVector3(ue),i.autoRotate&&u===l.NONE&&ce($()),i.enableDamping?(m.theta+=g.theta*i.dampingFactor,m.phi+=g.phi*i.dampingFactor):(m.theta+=g.theta,m.phi+=g.phi);let wt=i.minAzimuthAngle,on=i.maxAzimuthAngle;isFinite(wt)&&isFinite(on)&&(wt<-Math.PI?wt+=Ie:wt>Math.PI&&(wt-=Ie),on<-Math.PI?on+=Ie:on>Math.PI&&(on-=Ie),wt<=on?m.theta=Math.max(wt,Math.min(on,m.theta)):m.theta=m.theta>(wt+on)/2?Math.max(wt,m.theta):Math.min(on,m.theta)),m.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,m.phi)),m.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(x,i.dampingFactor):i.target.add(x),i.zoomToCursor&&L||i.object.isOrthographicCamera?m.radius=Ae(m.radius):m.radius=Ae(m.radius*v),ue.setFromSpherical(m),ue.applyQuaternion(le),at.copy(i.target).add(ue),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(g.theta*=1-i.dampingFactor,g.phi*=1-i.dampingFactor,x.multiplyScalar(1-i.dampingFactor)):(g.set(0,0,0),x.set(0,0,0));let On=!1;if(i.zoomToCursor&&L){let en=null;if(i.object instanceof pi&&i.object.isPerspectiveCamera){const Ii=ue.length();en=Ae(Ii*v);const ai=Ii-en;i.object.position.addScaledVector(I,ai),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Ii=new q(z.x,z.y,0);Ii.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/v)),i.object.updateProjectionMatrix(),On=!0;const ai=new q(z.x,z.y,0);ai.unproject(i.object),i.object.position.sub(ai).add(Ii),i.object.updateMatrixWorld(),en=ue.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;en!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(en).add(i.object.position):(Lx.origin.copy(i.object.position),Lx.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Lx.direction))<gW?e.lookAt(i.target):(C4.setFromNormalAndCoplanarPoint(i.object.up,i.target),Lx.intersectPlane(C4,i.target))))}else i.object instanceof Zl&&i.object.isOrthographicCamera&&(On=v!==1,On&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/v)),i.object.updateProjectionMatrix()));return v=1,L=!1,On||Je.distanceToSquared(i.object.position)>h||8*(1-Oe.dot(i.object.quaternion))>h?(i.dispatchEvent(r),Je.copy(i.object.position),Oe.copy(i.object.quaternion),On=!1,!0):!1}})(),this.connect=ue=>{i.domElement=ue,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",qe),i.domElement.addEventListener("pointerdown",V),i.domElement.addEventListener("pointercancel",ge),i.domElement.addEventListener("wheel",tt)},this.dispose=()=>{var ue,Le,rt,le,Je,Oe;i.domElement&&(i.domElement.style.touchAction="auto"),(ue=i.domElement)==null||ue.removeEventListener("contextmenu",qe),(Le=i.domElement)==null||Le.removeEventListener("pointerdown",V),(rt=i.domElement)==null||rt.removeEventListener("pointercancel",ge),(le=i.domElement)==null||le.removeEventListener("wheel",tt),(Je=i.domElement)==null||Je.ownerDocument.removeEventListener("pointermove",te),(Oe=i.domElement)==null||Oe.ownerDocument.removeEventListener("pointerup",ge),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",$e)};const i=this,r={type:"change"},s={type:"start"},a={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=l.NONE;const h=1e-6,m=new Y_,g=new Y_;let v=1;const x=new q,b=new Pe,M=new Pe,A=new Pe,S=new Pe,C=new Pe,R=new Pe,B=new Pe,N=new Pe,U=new Pe,I=new q,z=new Pe;let L=!1;const O=[],G={};function $(){return 2*Math.PI/60/60*i.autoRotateSpeed}function Q(){return Math.pow(.95,i.zoomSpeed)}function ce(ue){i.reverseOrbit||i.reverseHorizontalOrbit?g.theta+=ue:g.theta-=ue}function fe(ue){i.reverseOrbit||i.reverseVerticalOrbit?g.phi+=ue:g.phi-=ue}const k=(()=>{const ue=new q;return function(rt,le){ue.setFromMatrixColumn(le,0),ue.multiplyScalar(-rt),x.add(ue)}})(),K=(()=>{const ue=new q;return function(rt,le){i.screenSpacePanning===!0?ue.setFromMatrixColumn(le,1):(ue.setFromMatrixColumn(le,0),ue.crossVectors(i.object.up,ue)),ue.multiplyScalar(rt),x.add(ue)}})(),ee=(()=>{const ue=new q;return function(rt,le){const Je=i.domElement;if(Je&&i.object instanceof pi&&i.object.isPerspectiveCamera){const Oe=i.object.position;ue.copy(Oe).sub(i.target);let Ie=ue.length();Ie*=Math.tan(i.object.fov/2*Math.PI/180),k(2*rt*Ie/Je.clientHeight,i.object.matrix),K(2*le*Ie/Je.clientHeight,i.object.matrix)}else Je&&i.object instanceof Zl&&i.object.isOrthographicCamera?(k(rt*(i.object.right-i.object.left)/i.object.zoom/Je.clientWidth,i.object.matrix),K(le*(i.object.top-i.object.bottom)/i.object.zoom/Je.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function me(ue){i.object instanceof pi&&i.object.isPerspectiveCamera||i.object instanceof Zl&&i.object.isOrthographicCamera?v=ue:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function W(ue){me(v/ue)}function ae(ue){me(v*ue)}function Se(ue){if(!i.zoomToCursor||!i.domElement)return;L=!0;const Le=i.domElement.getBoundingClientRect(),rt=ue.clientX-Le.left,le=ue.clientY-Le.top,Je=Le.width,Oe=Le.height;z.x=rt/Je*2-1,z.y=-(le/Oe)*2+1,I.set(z.x,z.y,1).unproject(i.object).sub(i.object.position).normalize()}function Ae(ue){return Math.max(i.minDistance,Math.min(i.maxDistance,ue))}function ie(ue){b.set(ue.clientX,ue.clientY)}function _e(ue){Se(ue),B.set(ue.clientX,ue.clientY)}function Ue(ue){S.set(ue.clientX,ue.clientY)}function ke(ue){M.set(ue.clientX,ue.clientY),A.subVectors(M,b).multiplyScalar(i.rotateSpeed);const Le=i.domElement;Le&&(ce(2*Math.PI*A.x/Le.clientHeight),fe(2*Math.PI*A.y/Le.clientHeight)),b.copy(M),i.update()}function Ye(ue){N.set(ue.clientX,ue.clientY),U.subVectors(N,B),U.y>0?W(Q()):U.y<0&&ae(Q()),B.copy(N),i.update()}function gt(ue){C.set(ue.clientX,ue.clientY),R.subVectors(C,S).multiplyScalar(i.panSpeed),ee(R.x,R.y),S.copy(C),i.update()}function _t(ue){Se(ue),ue.deltaY<0?ae(Q()):ue.deltaY>0&&W(Q()),i.update()}function an(ue){let Le=!1;switch(ue.code){case i.keys.UP:ee(0,i.keyPanSpeed),Le=!0;break;case i.keys.BOTTOM:ee(0,-i.keyPanSpeed),Le=!0;break;case i.keys.LEFT:ee(i.keyPanSpeed,0),Le=!0;break;case i.keys.RIGHT:ee(-i.keyPanSpeed,0),Le=!0;break}Le&&(ue.preventDefault(),i.update())}function Pt(){if(O.length==1)b.set(O[0].pageX,O[0].pageY);else{const ue=.5*(O[0].pageX+O[1].pageX),Le=.5*(O[0].pageY+O[1].pageY);b.set(ue,Le)}}function bt(){if(O.length==1)S.set(O[0].pageX,O[0].pageY);else{const ue=.5*(O[0].pageX+O[1].pageX),Le=.5*(O[0].pageY+O[1].pageY);S.set(ue,Le)}}function Z(){const ue=O[0].pageX-O[1].pageX,Le=O[0].pageY-O[1].pageY,rt=Math.sqrt(ue*ue+Le*Le);B.set(0,rt)}function Qe(){i.enableZoom&&Z(),i.enablePan&&bt()}function Xe(){i.enableZoom&&Z(),i.enableRotate&&Pt()}function je(ue){if(O.length==1)M.set(ue.pageX,ue.pageY);else{const rt=it(ue),le=.5*(ue.pageX+rt.x),Je=.5*(ue.pageY+rt.y);M.set(le,Je)}A.subVectors(M,b).multiplyScalar(i.rotateSpeed);const Le=i.domElement;Le&&(ce(2*Math.PI*A.x/Le.clientHeight),fe(2*Math.PI*A.y/Le.clientHeight)),b.copy(M)}function He(ue){if(O.length==1)C.set(ue.pageX,ue.pageY);else{const Le=it(ue),rt=.5*(ue.pageX+Le.x),le=.5*(ue.pageY+Le.y);C.set(rt,le)}R.subVectors(C,S).multiplyScalar(i.panSpeed),ee(R.x,R.y),S.copy(C)}function lt(ue){const Le=it(ue),rt=ue.pageX-Le.x,le=ue.pageY-Le.y,Je=Math.sqrt(rt*rt+le*le);N.set(0,Je),U.set(0,Math.pow(N.y/B.y,i.zoomSpeed)),W(U.y),B.copy(N)}function Ge(ue){i.enableZoom&&lt(ue),i.enablePan&&He(ue)}function J(ue){i.enableZoom&&lt(ue),i.enableRotate&&je(ue)}function V(ue){var Le,rt;i.enabled!==!1&&(O.length===0&&((Le=i.domElement)==null||Le.ownerDocument.addEventListener("pointermove",te),(rt=i.domElement)==null||rt.ownerDocument.addEventListener("pointerup",ge)),ut(ue),ue.pointerType==="touch"?ct(ue):Ne(ue))}function te(ue){i.enabled!==!1&&(ue.pointerType==="touch"?Mt(ue):Te(ue))}function ge(ue){var Le,rt,le;vt(ue),O.length===0&&((Le=i.domElement)==null||Le.releasePointerCapture(ue.pointerId),(rt=i.domElement)==null||rt.ownerDocument.removeEventListener("pointermove",te),(le=i.domElement)==null||le.ownerDocument.removeEventListener("pointerup",ge)),i.dispatchEvent(a),u=l.NONE}function Ne(ue){let Le;switch(ue.button){case 0:Le=i.mouseButtons.LEFT;break;case 1:Le=i.mouseButtons.MIDDLE;break;case 2:Le=i.mouseButtons.RIGHT;break;default:Le=-1}switch(Le){case Vh.DOLLY:if(i.enableZoom===!1)return;_e(ue),u=l.DOLLY;break;case Vh.ROTATE:if(ue.ctrlKey||ue.metaKey||ue.shiftKey){if(i.enablePan===!1)return;Ue(ue),u=l.PAN}else{if(i.enableRotate===!1)return;ie(ue),u=l.ROTATE}break;case Vh.PAN:if(ue.ctrlKey||ue.metaKey||ue.shiftKey){if(i.enableRotate===!1)return;ie(ue),u=l.ROTATE}else{if(i.enablePan===!1)return;Ue(ue),u=l.PAN}break;default:u=l.NONE}u!==l.NONE&&i.dispatchEvent(s)}function Te(ue){if(i.enabled!==!1)switch(u){case l.ROTATE:if(i.enableRotate===!1)return;ke(ue);break;case l.DOLLY:if(i.enableZoom===!1)return;Ye(ue);break;case l.PAN:if(i.enablePan===!1)return;gt(ue);break}}function tt(ue){i.enabled===!1||i.enableZoom===!1||u!==l.NONE&&u!==l.ROTATE||(ue.preventDefault(),i.dispatchEvent(s),_t(ue),i.dispatchEvent(a))}function $e(ue){i.enabled===!1||i.enablePan===!1||an(ue)}function ct(ue){switch(St(ue),O.length){case 1:switch(i.touches.ONE){case kh.ROTATE:if(i.enableRotate===!1)return;Pt(),u=l.TOUCH_ROTATE;break;case kh.PAN:if(i.enablePan===!1)return;bt(),u=l.TOUCH_PAN;break;default:u=l.NONE}break;case 2:switch(i.touches.TWO){case kh.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Qe(),u=l.TOUCH_DOLLY_PAN;break;case kh.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Xe(),u=l.TOUCH_DOLLY_ROTATE;break;default:u=l.NONE}break;default:u=l.NONE}u!==l.NONE&&i.dispatchEvent(s)}function Mt(ue){switch(St(ue),u){case l.TOUCH_ROTATE:if(i.enableRotate===!1)return;je(ue),i.update();break;case l.TOUCH_PAN:if(i.enablePan===!1)return;He(ue),i.update();break;case l.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ge(ue),i.update();break;case l.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;J(ue),i.update();break;default:u=l.NONE}}function qe(ue){i.enabled!==!1&&ue.preventDefault()}function ut(ue){O.push(ue)}function vt(ue){delete G[ue.pointerId];for(let Le=0;Le<O.length;Le++)if(O[Le].pointerId==ue.pointerId){O.splice(Le,1);return}}function St(ue){let Le=G[ue.pointerId];Le===void 0&&(Le=new Pe,G[ue.pointerId]=Le),Le.set(ue.pageX,ue.pageY)}function it(ue){const Le=ue.pointerId===O[0].pointerId?O[1]:O[0];return G[Le.pointerId]}this.dollyIn=(ue=Q())=>{ae(ue),i.update()},this.dollyOut=(ue=Q())=>{W(ue),i.update()},this.getScale=()=>v,this.setScale=ue=>{me(ue),i.update()},this.getZoomScale=()=>Q(),t!==void 0&&this.connect(t),this.update()}};function Dp(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const e0="srgb",Yc="srgb-linear",R4=3001,yW=3e3;class BT extends Fr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new AW(t)}),this.register(function(t){return new EW(t)}),this.register(function(t){return new PW(t)}),this.register(function(t){return new UW(t)}),this.register(function(t){return new LW(t)}),this.register(function(t){return new TW(t)}),this.register(function(t){return new CW(t)}),this.register(function(t){return new wW(t)}),this.register(function(t){return new RW(t)}),this.register(function(t){return new SW(t)}),this.register(function(t){return new DW(t)}),this.register(function(t){return new MW(t)}),this.register(function(t){return new OW(t)}),this.register(function(t){return new BW(t)}),this.register(function(t){return new _W(t)}),this.register(function(t){return new NW(t)}),this.register(function(t){return new IW(t)})}load(e,t,i,r){const s=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const h=Wc.extractUrlBase(e);a=Wc.resolveURL(h,this.path)}else a=Wc.extractUrlBase(e);this.manager.itemStart(e);const l=function(h){r?r(h):console.error(h),s.manager.itemError(e),s.manager.itemEnd(e)},u=new Ws(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){try{s.parse(h,a,function(m){t(m),s.manager.itemEnd(e)},l)}catch(m){l(m)}},i,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const a={},l={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Dp(new Uint8Array(e.slice(0,4)))===_9){try{a[Sn.KHR_BINARY_GLTF]=new FW(e)}catch(m){r&&r(m);return}s=JSON.parse(a[Sn.KHR_BINARY_GLTF].content)}else s=JSON.parse(Dp(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new $W(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const m=this.pluginCallbacks[h](u);m.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[m.name]=m,a[m.name]=!0}if(s.extensionsUsed)for(let h=0;h<s.extensionsUsed.length;++h){const m=s.extensionsUsed[h],g=s.extensionsRequired||[];switch(m){case Sn.KHR_MATERIALS_UNLIT:a[m]=new bW;break;case Sn.KHR_DRACO_MESH_COMPRESSION:a[m]=new zW(s,this.dracoLoader);break;case Sn.KHR_TEXTURE_TRANSFORM:a[m]=new HW;break;case Sn.KHR_MESH_QUANTIZATION:a[m]=new GW;break;default:g.indexOf(m)>=0&&l[m]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+m+'".')}}u.setExtensions(a),u.setPlugins(l),u.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function xW(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Sn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class _W{constructor(e){this.parser=e,this.name=Sn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,u=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let h;const m=new Ze(16777215);u.color!==void 0&&m.setRGB(u.color[0],u.color[1],u.color[2],Yc);const g=u.range!==void 0?u.range:0;switch(u.type){case"directional":h=new nS(m),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new Dv(m),h.distance=g;break;case"spot":h=new tS(m),h.distance=g,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,h.angle=u.spot.outerConeAngle,h.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return h.position.set(0,0,0),h.decay=2,Hc(h,u),u.intensity!==void 0&&(h.intensity=u.intensity),h.name=t.createUniqueName(u.name||"light_"+e),r=Promise.resolve(h),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],l=(s.extensions&&s.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(u){return i._getNodeRef(t.cache,l,u)})}}class bW{constructor(){this.name=Sn.KHR_MATERIALS_UNLIT}getMaterialType(){return Pa}extendParams(e,t,i){const r=[];e.color=new Ze(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],Yc),e.opacity=a[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,e0))}return Promise.all(r)}}class SW{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class AW{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_o}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const l=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Pe(l,l)}return Promise.all(s)}}class EW{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_o}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class MW{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_o}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class TW{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_o}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ze(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];if(a.sheenColorFactor!==void 0){const l=a.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],Yc)}return a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",a.sheenColorTexture,e0)),a.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class CW{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_o}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class wW{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_o}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const l=a.attenuationColor||[1,1,1];return t.attenuationColor=new Ze().setRGB(l[0],l[1],l[2],Yc),Promise.all(s)}}class RW{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_o}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class DW{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_o}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",a.specularTexture));const l=a.specularColorFactor||[1,1,1];return t.specularColor=new Ze().setRGB(l[0],l[1],l[2],Yc),a.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",a.specularColorTexture,e0)),Promise.all(s)}}class BW{constructor(e){this.parser=e,this.name=Sn.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_o}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return t.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(s)}}class OW{constructor(e){this.parser=e,this.name=Sn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_o}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class PW{constructor(e){this.parser=e,this.name=Sn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class UW{constructor(e){this.parser=e,this.name=Sn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],l=r.images[a.source];let u=i.textureLoader;if(l.uri){const h=i.options.manager.getHandler(l.uri);h!==null&&(u=h)}return this.detectSupport().then(function(h){if(h)return i.loadTextureImage(e,a.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class LW{constructor(e){this.parser=e,this.name=Sn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],l=r.images[a.source];let u=i.textureLoader;if(l.uri){const h=i.options.manager.getHandler(l.uri);h!==null&&(u=h)}return this.detectSupport().then(function(h){if(h)return i.loadTextureImage(e,a.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class NW{constructor(e){this.name=Sn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(l){const u=r.byteOffset||0,h=r.byteLength||0,m=r.count,g=r.byteStride,v=new Uint8Array(l,u,h);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(m,g,v,r.mode,r.filter).then(function(x){return x.buffer}):a.ready.then(function(){const x=new ArrayBuffer(m*g);return a.decodeGltfBuffer(new Uint8Array(x),m,g,v,r.mode,r.filter),x})})}else return null}}class IW{constructor(e){this.name=Sn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const h of r.primitives)if(h.mode!==uo.TRIANGLES&&h.mode!==uo.TRIANGLE_STRIP&&h.mode!==uo.TRIANGLE_FAN&&h.mode!==void 0)return null;const a=i.extensions[this.name].attributes,l=[],u={};for(const h in a)l.push(this.parser.getDependency("accessor",a[h]).then(m=>(u[h]=m,u[h])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(h=>{const m=h.pop(),g=m.isGroup?m.children:[m],v=h[0].count,x=[];for(const b of g){const M=new ft,A=new q,S=new si,C=new q(1,1,1),R=new tT(b.geometry,b.material,v);for(let B=0;B<v;B++)u.TRANSLATION&&A.fromBufferAttribute(u.TRANSLATION,B),u.ROTATION&&S.fromBufferAttribute(u.ROTATION,B),u.SCALE&&C.fromBufferAttribute(u.SCALE,B),R.setMatrixAt(B,M.compose(A,S,C));for(const B in u)if(B==="_COLOR_0"){const N=u[B];R.instanceColor=new v0(N.array,N.itemSize,N.normalized)}else B!=="TRANSLATION"&&B!=="ROTATION"&&B!=="SCALE"&&b.geometry.setAttribute(B,u[B]);hn.prototype.copy.call(R,b),this.parser.assignFinalMaterial(R),x.push(R)}return m.isGroup?(m.clear(),m.add(...x),m):x[0]}))}}const _9="glTF",Ng=12,D4={JSON:1313821514,BIN:5130562};class FW{constructor(e){this.name=Sn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Ng);if(this.header={magic:Dp(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==_9)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Ng,r=new DataView(e,Ng);let s=0;for(;s<i;){const a=r.getUint32(s,!0);s+=4;const l=r.getUint32(s,!0);if(s+=4,l===D4.JSON){const u=new Uint8Array(e,Ng+s,a);this.content=Dp(u)}else if(l===D4.BIN){const u=Ng+s;this.body=e.slice(u,u+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class zW{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Sn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,l={},u={},h={};for(const m in a){const g=jE[m]||m.toLowerCase();l[g]=a[m]}for(const m in e.attributes){const g=jE[m]||m.toLowerCase();if(a[m]!==void 0){const v=i.accessors[e.attributes[m]],x=vp[v.componentType];h[g]=x.name,u[g]=v.normalized===!0}}return t.getDependency("bufferView",s).then(function(m){return new Promise(function(g,v){r.decodeDracoFile(m,function(x){for(const b in x.attributes){const M=x.attributes[b],A=u[b];A!==void 0&&(M.normalized=A)}g(x)},l,h,Yc,v)})})}}class HW{constructor(){this.name=Sn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class GW{constructor(){this.name=Sn.KHR_MESH_QUANTIZATION}}class b9 extends Vp{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)t[a]=i[s+a];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=l*2,h=l*3,m=r-t,g=(i-t)/m,v=g*g,x=v*g,b=e*h,M=b-h,A=-2*x+3*v,S=x-v,C=1-A,R=S-v+g;for(let B=0;B!==l;B++){const N=a[M+B+l],U=a[M+B+u]*m,I=a[b+B+l],z=a[b+B]*m;s[B]=C*N+R*U+A*I+S*z}return s}}const VW=new si;class kW extends b9{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return VW.fromArray(s).normalize().toArray(s),s}}const uo={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},vp={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},B4={9728:Wi,9729:Jn,9984:Mb,9985:pp,9986:Kh,9987:mo},O4={33071:Vs,33648:_p,10497:nc},d2={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},jE={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...d9>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},af={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},jW={CUBICSPLINE:void 0,LINEAR:Sp,STEP:bp},p2={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function XW(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Gp({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ll})),n.DefaultMaterial}function Hh(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Hc(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function WW(n,e,t){let i=!1,r=!1,s=!1;for(let h=0,m=e.length;h<m;h++){const g=e[h];if(g.POSITION!==void 0&&(i=!0),g.NORMAL!==void 0&&(r=!0),g.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const a=[],l=[],u=[];for(let h=0,m=e.length;h<m;h++){const g=e[h];if(i){const v=g.POSITION!==void 0?t.getDependency("accessor",g.POSITION):n.attributes.position;a.push(v)}if(r){const v=g.NORMAL!==void 0?t.getDependency("accessor",g.NORMAL):n.attributes.normal;l.push(v)}if(s){const v=g.COLOR_0!==void 0?t.getDependency("accessor",g.COLOR_0):n.attributes.color;u.push(v)}}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(u)]).then(function(h){const m=h[0],g=h[1],v=h[2];return i&&(n.morphAttributes.position=m),r&&(n.morphAttributes.normal=g),s&&(n.morphAttributes.color=v),n.morphTargetsRelative=!0,n})}function YW(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function qW(n){let e;const t=n.extensions&&n.extensions[Sn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+m2(t.attributes):e=n.indices+":"+m2(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+m2(n.targets[i]);return e}function m2(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function XE(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function KW(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const JW=new ft;class $W{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new xW,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new kp(this.options.manager):this.textureLoader=new yO(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ws(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const l={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:i,userData:{}};return Hh(s,l,r),Hc(l,r),Promise.all(i._invokeAll(function(u){return u.afterRoot&&u.afterRoot(l)})).then(function(){for(const u of l.scenes)u.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const a=t[r].joints;for(let l=0,u=a.length;l<u;l++)e[a[l]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(i[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(a,l)=>{const u=this.associations.get(a);u!=null&&this.associations.set(l,u);for(const[h,m]of a.children.entries())s(m,l.children[h])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,a){return i.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Sn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){i.load(Wc.resolveURL(t.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const a=d2[r.type],l=vp[r.componentType],u=r.normalized===!0,h=new l(r.count*a);return Promise.resolve(new mn(h,a,u))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const l=a[0],u=d2[r.type],h=vp[r.componentType],m=h.BYTES_PER_ELEMENT,g=m*u,v=r.byteOffset||0,x=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,b=r.normalized===!0;let M,A;if(x&&x!==g){const S=Math.floor(v/x),C="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+S+":"+r.count;let R=t.cache.get(C);R||(M=new h(l,S*x,r.count*x/m),R=new qv(M,x/m),t.cache.add(C,R)),A=new xf(R,u,v%x/m,b)}else l===null?M=new h(r.count*u):M=new h(l,v,r.count*u),A=new mn(M,u,b);if(r.sparse!==void 0){const S=d2.SCALAR,C=vp[r.sparse.indices.componentType],R=r.sparse.indices.byteOffset||0,B=r.sparse.values.byteOffset||0,N=new C(a[1],R,r.sparse.count*S),U=new h(a[2],B,r.sparse.count*u);l!==null&&(A=new mn(A.array.slice(),A.itemSize,A.normalized));for(let I=0,z=N.length;I<z;I++){const L=N[I];if(A.setX(L,U[I*u]),u>=2&&A.setY(L,U[I*u+1]),u>=3&&A.setZ(L,U[I*u+2]),u>=4&&A.setW(L,U[I*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return A})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,a=t.images[s];let l=this.textureLoader;if(a.uri){const u=i.manager.getHandler(a.uri);u!==null&&(l=u)}return this.loadTextureImage(e,s,l)}loadTextureImage(e,t,i){const r=this,s=this.json,a=s.textures[e],l=s.images[t],u=(l.uri||l.bufferView)+":"+a.sampler;if(this.textureCache[u])return this.textureCache[u];const h=this.loadImageSource(t,i).then(function(m){m.flipY=!1,m.name=a.name||l.name||"",m.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(m.name=l.uri);const v=(s.samplers||{})[a.sampler]||{};return m.magFilter=B4[v.magFilter]||Jn,m.minFilter=B4[v.minFilter]||mo,m.wrapS=O4[v.wrapS]||nc,m.wrapT=O4[v.wrapT]||nc,r.associations.set(m,{textures:e}),m}).catch(function(){return null});return this.textureCache[u]=h,h}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(g=>g.clone());const a=r.images[e],l=self.URL||self.webkitURL;let u=a.uri||"",h=!1;if(a.bufferView!==void 0)u=i.getDependency("bufferView",a.bufferView).then(function(g){h=!0;const v=new Blob([g],{type:a.mimeType});return u=l.createObjectURL(v),u});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(u).then(function(g){return new Promise(function(v,x){let b=v;t.isImageBitmapLoader===!0&&(b=function(M){const A=new kn(M);A.needsUpdate=!0,v(A)}),t.load(Wc.resolveURL(g,s.path),b,void 0,x)})}).then(function(g){return h===!0&&l.revokeObjectURL(u),Hc(g,a),g.userData.mimeType=a.mimeType||KW(a.uri),g}).catch(function(g){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),g});return this.sourceCache[e]=m,m}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(a){if(!a)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(a=a.clone(),a.channel=i.texCoord),s.extensions[Sn.KHR_TEXTURE_TRANSFORM]){const l=i.extensions!==void 0?i.extensions[Sn.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const u=s.associations.get(a);a=s.extensions[Sn.KHR_TEXTURE_TRANSFORM].extendTexture(a,l),s.associations.set(a,u)}}return r!==void 0&&(typeof r=="number"&&(r=r===R4?e0:Yc),"colorSpace"in a?a.colorSpace=r:a.encoding=r===e0?R4:yW),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+i.uuid;let u=this.cache.get(l);u||(u=new Hb,er.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,u.sizeAttenuation=!1,this.cache.add(l,u)),i=u}else if(e.isLine){const l="LineBasicMaterial:"+i.uuid;let u=this.cache.get(l);u||(u=new Qr,er.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,this.cache.add(l,u)),i=u}if(r||s||a){let l="ClonedMaterial:"+i.uuid+":";r&&(l+="derivative-tangents:"),s&&(l+="vertex-colors:"),a&&(l+="flat-shading:");let u=this.cache.get(l);u||(u=i.clone(),s&&(u.vertexColors=!0),a&&(u.flatShading=!0),r&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(l,u),this.associations.set(u,this.associations.get(i))),i=u}e.material=i}getMaterialType(){return Gp}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let a;const l={},u=s.extensions||{},h=[];if(u[Sn.KHR_MATERIALS_UNLIT]){const g=r[Sn.KHR_MATERIALS_UNLIT];a=g.getMaterialType(),h.push(g.extendParams(l,s,t))}else{const g=s.pbrMetallicRoughness||{};if(l.color=new Ze(1,1,1),l.opacity=1,Array.isArray(g.baseColorFactor)){const v=g.baseColorFactor;l.color.setRGB(v[0],v[1],v[2],Yc),l.opacity=v[3]}g.baseColorTexture!==void 0&&h.push(t.assignTexture(l,"map",g.baseColorTexture,e0)),l.metalness=g.metallicFactor!==void 0?g.metallicFactor:1,l.roughness=g.roughnessFactor!==void 0?g.roughnessFactor:1,g.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(l,"metalnessMap",g.metallicRoughnessTexture)),h.push(t.assignTexture(l,"roughnessMap",g.metallicRoughnessTexture))),a=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(e,l)})))}s.doubleSided===!0&&(l.side=ps);const m=s.alphaMode||p2.OPAQUE;if(m===p2.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,m===p2.MASK&&(l.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==Pa&&(h.push(t.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new Pe(1,1),s.normalTexture.scale!==void 0)){const g=s.normalTexture.scale;l.normalScale.set(g,g)}if(s.occlusionTexture!==void 0&&a!==Pa&&(h.push(t.assignTexture(l,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==Pa){const g=s.emissiveFactor;l.emissive=new Ze().setRGB(g[0],g[1],g[2],Yc)}return s.emissiveTexture!==void 0&&a!==Pa&&h.push(t.assignTexture(l,"emissiveMap",s.emissiveTexture,e0)),Promise.all(h).then(function(){const g=new a(l);return s.name&&(g.name=s.name),Hc(g,s),t.associations.set(g,{materials:e}),s.extensions&&Hh(r,g,s),g})}createUniqueName(e){const t=xn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(l){return i[Sn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(u){return P4(u,l,t)})}const a=[];for(let l=0,u=e.length;l<u;l++){const h=e[l],m=qW(h),g=r[m];if(g)a.push(g.promise);else{let v;h.extensions&&h.extensions[Sn.KHR_DRACO_MESH_COMPRESSION]?v=s(h):v=P4(new Gt,h,t),r[m]={primitive:h,promise:v},a.push(v)}}return Promise.all(a)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],a=s.primitives,l=[];for(let u=0,h=a.length;u<h;u++){const m=a[u].material===void 0?XW(this.cache):this.getDependency("material",a[u].material);l.push(m)}return l.push(t.loadGeometries(a)),Promise.all(l).then(function(u){const h=u.slice(0,u.length-1),m=u[u.length-1],g=[];for(let x=0,b=m.length;x<b;x++){const M=m[x],A=a[x];let S;const C=h[x];if(A.mode===uo.TRIANGLES||A.mode===uo.TRIANGLE_STRIP||A.mode===uo.TRIANGLE_FAN||A.mode===void 0)S=s.isSkinnedMesh===!0?new Fb(M,C):new Ai(M,C),S.isSkinnedMesh===!0&&S.normalizeSkinWeights(),A.mode===uo.TRIANGLE_STRIP?S.geometry=T4(S.geometry,KM):A.mode===uo.TRIANGLE_FAN&&(S.geometry=T4(S.geometry,V_));else if(A.mode===uo.LINES)S=new ul(M,C);else if(A.mode===uo.LINE_STRIP)S=new sc(M,C);else if(A.mode===uo.LINE_LOOP)S=new nT(M,C);else if(A.mode===uo.POINTS)S=new iT(M,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);Object.keys(S.geometry.morphAttributes).length>0&&YW(S,s),S.name=t.createUniqueName(s.name||"mesh_"+e),Hc(S,s),A.extensions&&Hh(r,S,A),t.assignFinalMaterial(S),g.push(S)}for(let x=0,b=g.length;x<b;x++)t.associations.set(g[x],{meshes:e,primitives:x});if(g.length===1)return s.extensions&&Hh(r,g[0],s),g[0];const v=new rl;s.extensions&&Hh(r,v,s),t.associations.set(v,{meshes:e});for(let x=0,b=g.length;x<b;x++)v.add(g[x]);return v})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new pi(ms.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Zl(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Hc(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),a=r,l=[],u=[];for(let h=0,m=a.length;h<m;h++){const g=a[h];if(g){l.push(g);const v=new ft;s!==null&&v.fromArray(s.array,h*16),u.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[h])}return new Ip(l,u)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,a=[],l=[],u=[],h=[],m=[];for(let g=0,v=r.channels.length;g<v;g++){const x=r.channels[g],b=r.samplers[x.sampler],M=x.target,A=M.node,S=r.parameters!==void 0?r.parameters[b.input]:b.input,C=r.parameters!==void 0?r.parameters[b.output]:b.output;M.node!==void 0&&(a.push(this.getDependency("node",A)),l.push(this.getDependency("accessor",S)),u.push(this.getDependency("accessor",C)),h.push(b),m.push(M))}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(h),Promise.all(m)]).then(function(g){const v=g[0],x=g[1],b=g[2],M=g[3],A=g[4],S=[];for(let C=0,R=v.length;C<R;C++){const B=v[C],N=x[C],U=b[C],I=M[C],z=A[C];if(B===void 0)continue;B.updateMatrix&&B.updateMatrix();const L=i._createAnimationTracks(B,N,U,I,z);if(L)for(let O=0;O<L.length;O++)S.push(L[O])}return new x0(s,void 0,S)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const a=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&a.traverse(function(l){if(l.isMesh)for(let u=0,h=r.weights.length;u<h;u++)l.morphTargetInfluences[u]=r.weights[u]}),a})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),a=[],l=r.children||[];for(let h=0,m=l.length;h<m;h++)a.push(i.getDependency("node",l[h]));const u=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(a),u]).then(function(h){const m=h[0],g=h[1],v=h[2];v!==null&&m.traverse(function(x){x.isSkinnedMesh&&x.bind(v,JW)});for(let x=0,b=g.length;x<b;x++)m.add(g[x]);return m})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],a=s.name?r.createUniqueName(s.name):"",l=[],u=r._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return u&&l.push(u),s.camera!==void 0&&l.push(r.getDependency("camera",s.camera).then(function(h){return r._getNodeRef(r.cameraCache,s.camera,h)})),r._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){l.push(h)}),this.nodeCache[e]=Promise.all(l).then(function(h){let m;if(s.isBone===!0?m=new Cp:h.length>1?m=new rl:h.length===1?m=h[0]:m=new hn,m!==h[0])for(let g=0,v=h.length;g<v;g++)m.add(h[g]);if(s.name&&(m.userData.name=s.name,m.name=a),Hc(m,s),s.extensions&&Hh(i,m,s),s.matrix!==void 0){const g=new ft;g.fromArray(s.matrix),m.applyMatrix4(g)}else s.translation!==void 0&&m.position.fromArray(s.translation),s.rotation!==void 0&&m.quaternion.fromArray(s.rotation),s.scale!==void 0&&m.scale.fromArray(s.scale);return r.associations.has(m)||r.associations.set(m,{}),r.associations.get(m).nodes=e,m}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new rl;i.name&&(s.name=r.createUniqueName(i.name)),Hc(s,i),i.extensions&&Hh(t,s,i);const a=i.nodes||[],l=[];for(let u=0,h=a.length;u<h;u++)l.push(r.getDependency("node",a[u]));return Promise.all(l).then(function(u){for(let m=0,g=u.length;m<g;m++)s.add(u[m]);const h=m=>{const g=new Map;for(const[v,x]of r.associations)(v instanceof er||v instanceof kn)&&g.set(v,x);return m.traverse(v=>{const x=r.associations.get(v);x!=null&&g.set(v,x)}),g};return r.associations=h(s),s})}_createAnimationTracks(e,t,i,r,s){const a=[],l=e.name?e.name:e.uuid,u=[];af[s.path]===af.weights?e.traverse(function(v){v.morphTargetInfluences&&u.push(v.name?v.name:v.uuid)}):u.push(l);let h;switch(af[s.path]){case af.weights:h=_f;break;case af.rotation:h=bf;break;case af.position:case af.scale:h=Sf;break;default:switch(i.itemSize){case 1:h=_f;break;case 2:case 3:default:h=Sf;break}break}const m=r.interpolation!==void 0?jW[r.interpolation]:Sp,g=this._getArrayFromAccessor(i);for(let v=0,x=u.length;v<x;v++){const b=new h(u[v]+"."+af[s.path],t.array,g,m);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(b),a.push(b)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=XE(t.constructor),r=new Float32Array(t.length);for(let s=0,a=t.length;s<a;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof bf?kW:b9;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function ZW(n,e,t){const i=e.attributes,r=new Zr;if(i.POSITION!==void 0){const l=t.json.accessors[i.POSITION],u=l.min,h=l.max;if(u!==void 0&&h!==void 0){if(r.set(new q(u[0],u[1],u[2]),new q(h[0],h[1],h[2])),l.normalized){const m=XE(vp[l.componentType]);r.min.multiplyScalar(m),r.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const l=new q,u=new q;for(let h=0,m=s.length;h<m;h++){const g=s[h];if(g.POSITION!==void 0){const v=t.json.accessors[g.POSITION],x=v.min,b=v.max;if(x!==void 0&&b!==void 0){if(u.setX(Math.max(Math.abs(x[0]),Math.abs(b[0]))),u.setY(Math.max(Math.abs(x[1]),Math.abs(b[1]))),u.setZ(Math.max(Math.abs(x[2]),Math.abs(b[2]))),v.normalized){const M=XE(vp[v.componentType]);u.multiplyScalar(M)}l.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(l)}n.boundingBox=r;const a=new Ir;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=a}function P4(n,e,t){const i=e.attributes,r=[];function s(a,l){return t.getDependency("accessor",a).then(function(u){n.setAttribute(l,u)})}for(const a in i){const l=jE[a]||a.toLowerCase();l in n.attributes||r.push(s(i[a],l))}if(e.indices!==void 0&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(l){n.setIndex(l)});r.push(a)}return Hc(n,e),ZW(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?WW(n,e.targets,t):n})}class QW extends $v{constructor(e,t={}){const{bevelEnabled:i=!1,bevelSize:r=8,bevelThickness:s=10,font:a,height:l=50,size:u=100,lineHeight:h=1,letterSpacing:m=0,...g}=t;if(a===void 0)super();else{const v=a.generateShapes(e,u,{lineHeight:h,letterSpacing:m});super(v,{...g,bevelEnabled:i,bevelSize:r,bevelThickness:s,depth:l})}this.type="TextGeometry"}}function S9(n,e,t){const i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let r=n,s=i,a=Math.floor((r+s)/2);for(;e<t[a]||e>=t[a+1];)e<t[a]?s=a:r=a,a=Math.floor((r+s)/2);return a}function eY(n,e,t,i){const r=[],s=[],a=[];r[0]=1;for(let l=1;l<=t;++l){s[l]=e-i[n+1-l],a[l]=i[n+l]-e;let u=0;for(let h=0;h<l;++h){const m=a[h+1],g=s[l-h],v=r[h]/(m+g);r[h]=u+m*v,u=g*v}r[l]=u}return r}function tY(n,e,t,i){const r=S9(n,i,e),s=eY(r,i,n,e),a=new Kt(0,0,0,0);for(let l=0;l<=n;++l){const u=t[r-n+l],h=s[l],m=u.w*h;a.x+=u.x*m,a.y+=u.y*m,a.z+=u.z*m,a.w+=u.w*h}return a}function nY(n,e,t,i,r){const s=[];for(let g=0;g<=t;++g)s[g]=0;const a=[];for(let g=0;g<=i;++g)a[g]=s.slice(0);const l=[];for(let g=0;g<=t;++g)l[g]=s.slice(0);l[0][0]=1;const u=s.slice(0),h=s.slice(0);for(let g=1;g<=t;++g){u[g]=e-r[n+1-g],h[g]=r[n+g]-e;let v=0;for(let x=0;x<g;++x){const b=h[x+1],M=u[g-x];l[g][x]=b+M;const A=l[x][g-1]/l[g][x];l[x][g]=v+b*A,v=M*A}l[g][g]=v}for(let g=0;g<=t;++g)a[0][g]=l[g][t];for(let g=0;g<=t;++g){let v=0,x=1;const b=[];for(let M=0;M<=t;++M)b[M]=s.slice(0);b[0][0]=1;for(let M=1;M<=i;++M){let A=0;const S=g-M,C=t-M;g>=M&&(b[x][0]=b[v][0]/l[C+1][S],A=b[x][0]*l[S][C]);const R=S>=-1?1:-S,B=g-1<=C?M-1:t-g;for(let U=R;U<=B;++U)b[x][U]=(b[v][U]-b[v][U-1])/l[C+1][S+U],A+=b[x][U]*l[S+U][C];g<=C&&(b[x][M]=-b[v][M-1]/l[C+1][g],A+=b[x][M]*l[g][C]),a[M][g]=A;const N=v;v=x,x=N}}let m=t;for(let g=1;g<=i;++g){for(let v=0;v<=t;++v)a[g][v]*=m;m*=t-g}return a}function iY(n,e,t,i,r){const s=r<n?r:n,a=[],l=S9(n,i,e),u=nY(l,i,n,s,e),h=[];for(let m=0;m<t.length;++m){const g=t[m].clone(),v=g.w;g.x*=v,g.y*=v,g.z*=v,h[m]=g}for(let m=0;m<=s;++m){const g=h[l-n].clone().multiplyScalar(u[m][0]);for(let v=1;v<=n;++v)g.add(h[l-n+v].clone().multiplyScalar(u[m][v]));a[m]=g}for(let m=s+1;m<=r+1;++m)a[m]=new Kt(0,0,0);return a}function rY(n,e){let t=1;for(let r=2;r<=n;++r)t*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=n-e;++r)i*=r;return t/i}function sY(n){const e=n.length,t=[],i=[];for(let s=0;s<e;++s){const a=n[s];t[s]=new q(a.x,a.y,a.z),i[s]=a.w}const r=[];for(let s=0;s<e;++s){const a=t[s].clone();for(let l=1;l<=s;++l)a.sub(r[s-l].clone().multiplyScalar(rY(s,l)*i[l]));r[s]=a.divideScalar(i[0])}return r}function aY(n,e,t,i,r){const s=iY(n,e,t,i,r);return sY(s)}class U4 extends xo{constructor(e,t,i,r,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let a=0;a<i.length;++a){const l=i[a];this.controlPoints[a]=new Kt(l.x,l.y,l.z,l.w)}}getPoint(e,t){const i=t||new q,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=tY(this.degree,this.knots,this.controlPoints,r);return s.w!=1&&s.divideScalar(s.w),i.set(s.x,s.y,s.z)}getTangent(e,t){const i=t||new q,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=aY(this.degree,this.knots,this.controlPoints,r,1);return i.copy(s[1]).normalize(),i}}let bn,Qi,la;class OT extends Fr{constructor(e){super(e)}load(e,t,i,r){const s=this,a=s.path===""?Wc.extractUrlBase(e):s.path,l=new Ws(this.manager);l.setPath(s.path),l.setResponseType("arraybuffer"),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(u){try{t(s.parse(u,a))}catch(h){r?r(h):console.error(h),s.manager.itemError(e)}},i,r)}parse(e,t){if(hY(e))bn=new fY().parse(e);else{const r=T9(e);if(!dY(r))throw new Error("THREE.FBXLoader: Unknown format.");if(N4(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+N4(r));bn=new uY().parse(r)}const i=new kp(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new oY(i,this.manager).parse(bn)}}class oY{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Qi=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),r=this.parseDeformers(),s=new lY().parse(r);return this.parseScene(r,s,i),la}parseConnections(){const e=new Map;return"Connections"in bn&&bn.Connections.connections.forEach(function(i){const r=i[0],s=i[1],a=i[2];e.has(r)||e.set(r,{parents:[],children:[]});const l={ID:s,relationship:a};e.get(r).parents.push(l),e.has(s)||e.set(s,{parents:[],children:[]});const u={ID:r,relationship:a};e.get(s).children.push(u)}),e}parseImages(){const e={},t={};if("Video"in bn.Objects){const i=bn.Objects.Video;for(const r in i){const s=i[r],a=parseInt(r);if(e[a]=s.RelativeFilename||s.Filename,"Content"in s){const l=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,u=typeof s.Content=="string"&&s.Content!=="";if(l||u){const h=this.parseImage(i[r]);t[s.RelativeFilename||s.Filename]=h}}}}for(const i in e){const r=e[i];t[r]!==void 0?e[i]=t[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const a=new Uint8Array(t);return window.URL.createObjectURL(new Blob([a],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in bn.Objects){const i=bn.Objects.Texture;for(const r in i){const s=this.parseTexture(i[r],e);t.set(parseInt(r),s)}}return t}parseTexture(e,t){const i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,a=r!==void 0?r.value:0,l=s!==void 0?s.value:0;if(i.wrapS=a===0?nc:Vs,i.wrapT=l===0?nc:Vs,"Scaling"in e){const u=e.Scaling.value;i.repeat.x=u[0],i.repeat.y=u[1]}return i}loadTexture(e,t){let i;const r=this.textureLoader.path,s=Qi.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(i=t[s[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let a;const l=e.FileName.slice(-3).toLowerCase();if(l==="tga"){const u=this.manager.getHandler(".tga");u===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),a=new kn):(u.setPath(this.textureLoader.path),a=u.load(i))}else l==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),a=new kn):a=this.textureLoader.load(i);return this.textureLoader.setPath(r),a}parseMaterials(e){const t=new Map;if("Material"in bn.Objects){const i=bn.Objects.Material;for(const r in i){const s=this.parseMaterial(i[r],e);s!==null&&t.set(parseInt(r),s)}}return t}parseMaterial(e,t){const i=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Qi.has(i))return null;const a=this.parseParameters(e,t,i);let l;switch(s.toLowerCase()){case"phong":l=new sv;break;case"lambert":l=new hT;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),l=new sv;break}return l.setValues(a),l.name=r,l}parseParameters(e,t,i){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new Ze().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new Ze().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new Ze().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new Ze().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new Ze().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new Ze().fromArray(e.SpecularColor.value));const s=this;return Qi.get(i).children.forEach(function(a){const l=a.relationship;switch(l){case"Bump":r.bumpMap=s.getTexture(t,a.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(t,a.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(t,a.ID),r.map!==void 0&&("colorSpace"in r.map?r.map.colorSpace="srgb":r.map.encoding=3001);break;case"DisplacementColor":r.displacementMap=s.getTexture(t,a.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(t,a.ID),r.emissiveMap!==void 0&&("colorSpace"in r.emissiveMap?r.emissiveMap.colorSpace="srgb":r.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(t,a.ID);break;case"ReflectionColor":r.envMap=s.getTexture(t,a.ID),r.envMap!==void 0&&(r.envMap.mapping=xp,"colorSpace"in r.envMap?r.envMap.colorSpace="srgb":r.envMap.encoding=3001);break;case"SpecularColor":r.specularMap=s.getTexture(t,a.ID),r.specularMap!==void 0&&("colorSpace"in r.specularMap?r.specularMap.colorSpace="srgb":r.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(t,a.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",l);break}}),r}getTexture(e,t){return"LayeredTexture"in bn.Objects&&t in bn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Qi.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in bn.Objects){const i=bn.Objects.Deformer;for(const r in i){const s=i[r],a=Qi.get(parseInt(r));if(s.attrType==="Skin"){const l=this.parseSkeleton(a,i);l.ID=r,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),l.geometryID=a.parents[0].ID,e[r]=l}else if(s.attrType==="BlendShape"){const l={id:r};l.rawTargets=this.parseMorphTargets(a,i),l.id=r,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=l}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const i=[];return e.children.forEach(function(r){const s=t[r.ID];if(s.attrType!=="Cluster")return;const a={ID:r.ID,indices:[],weights:[],transformLink:new ft().fromArray(s.TransformLink.a)};"Indexes"in s&&(a.indices=s.Indexes.a,a.weights=s.Weights.a),i.push(a)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){const i=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],a=t[s.ID],l={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if(a.attrType!=="BlendShapeChannel")return;l.geoID=Qi.get(parseInt(s.ID)).children.filter(function(u){return u.relationship===void 0})[0].ID,i.push(l)}return i}parseScene(e,t,i){la=new rl;const r=this.parseModels(e.skeletons,t,i),s=bn.Objects.Model,a=this;r.forEach(function(u){const h=s[u.ID];a.setLookAtProperties(u,h),Qi.get(u.ID).parents.forEach(function(g){const v=r.get(g.ID);v!==void 0&&v.add(u)}),u.parent===null&&la.add(u)}),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),la.traverse(function(u){if(u.userData.transformData){u.parent&&(u.userData.transformData.parentMatrix=u.parent.matrix,u.userData.transformData.parentMatrixWorld=u.parent.matrixWorld);const h=E9(u.userData.transformData);u.applyMatrix4(h),u.updateWorldMatrix()}});const l=new cY().parse();la.children.length===1&&la.children[0].isGroup&&(la.children[0].animations=l,la=la.children[0]),la.animations=l}parseModels(e,t,i){const r=new Map,s=bn.Objects.Model;for(const a in s){const l=parseInt(a),u=s[a],h=Qi.get(l);let m=this.buildSkeleton(h,e,l,u.attrName);if(!m){switch(u.attrType){case"Camera":m=this.createCamera(h);break;case"Light":m=this.createLight(h);break;case"Mesh":m=this.createMesh(h,t,i);break;case"NurbsCurve":m=this.createCurve(h,t);break;case"LimbNode":case"Root":m=new Cp;break;case"Null":default:m=new rl;break}m.name=u.attrName?xn.sanitizeNodeName(u.attrName):"",m.ID=l}this.getTransformData(m,u),r.set(l,m)}return r}buildSkeleton(e,t,i,r){let s=null;return e.parents.forEach(function(a){for(const l in t){const u=t[l];u.rawBones.forEach(function(h,m){if(h.ID===a.ID){const g=s;s=new Cp,s.matrixWorld.copy(h.transformLink),s.name=r?xn.sanitizeNodeName(r):"",s.ID=i,u.bones[m]=s,g!==null&&s.add(g)}})}}),s}createCamera(e){let t,i;if(e.children.forEach(function(r){const s=bn.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new hn;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let s=1;i.NearPlane!==void 0&&(s=i.NearPlane.value/1e3);let a=1e3;i.FarPlane!==void 0&&(a=i.FarPlane.value/1e3);let l=window.innerWidth,u=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(l=i.AspectWidth.value,u=i.AspectHeight.value);const h=l/u;let m=45;i.FieldOfView!==void 0&&(m=i.FieldOfView.value);const g=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:t=new pi(m,h,s,a),g!==null&&t.setFocalLength(g);break;case 1:t=new Zl(-l/2,l/2,u/2,-u/2,s,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new hn;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(r){const s=bn.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new hn;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let s=16777215;i.Color!==void 0&&(s=new Ze().fromArray(i.Color.value));let a=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(a=0);let l=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?l=0:l=i.FarAttenuationEnd.value);const u=1;switch(r){case 0:t=new Dv(s,a,l,u);break;case 1:t=new nS(s,a);break;case 2:let h=Math.PI/3;i.InnerAngle!==void 0&&(h=ms.degToRad(i.InnerAngle.value));let m=0;i.OuterAngle!==void 0&&(m=ms.degToRad(i.OuterAngle.value),m=Math.max(m,1)),t=new tS(s,a,l,h,m,u);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new Dv(s,a);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let r,s=null,a=null;const l=[];return e.children.forEach(function(u){t.has(u.ID)&&(s=t.get(u.ID)),i.has(u.ID)&&l.push(i.get(u.ID))}),l.length>1?a=l:l.length>0?a=l[0]:(a=new sv({color:13421772}),l.push(a)),"color"in s.attributes&&l.forEach(function(u){u.vertexColors=!0}),s.FBX_Deformer?(r=new Fb(s,a),r.normalizeSkinWeights()):r=new Ai(s,a),r}createCurve(e,t){const i=e.children.reduce(function(s,a){return t.has(a.ID)&&(s=t.get(a.ID)),s},null),r=new Qr({color:3342591,linewidth:1});return new sc(i,r)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=M9(t.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&Qi.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const s=bn.Objects.Model[r.ID];if("Lcl_Translation"in s){const a=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(a),la.add(e.target)):e.lookAt(new q().fromArray(a))}}})}bindSkeleton(e,t,i){const r=this.parsePoseNodes();for(const s in e){const a=e[s];Qi.get(parseInt(a.ID)).parents.forEach(function(u){if(t.has(u.ID)){const h=u.ID;Qi.get(h).parents.forEach(function(g){i.has(g.ID)&&i.get(g.ID).bind(new Ip(a.bones),r[g.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in bn.Objects){const t=bn.Objects.Pose;for(const i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){const r=t[i].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new ft().fromArray(s.Matrix.a)}):e[r.Node]=new ft().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in bn&&"AmbientColor"in bn.GlobalSettings){const e=bn.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],r=e[2];if(t!==0||i!==0||r!==0){const s=new Ze(t,i,r);la.add(new _T(s,1))}}}}class lY{parse(e){const t=new Map;if("Geometry"in bn.Objects){const i=bn.Objects.Geometry;for(const r in i){const s=Qi.get(parseInt(r)),a=this.parseGeometry(s,i[r],e);t.set(parseInt(r),a)}}return t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const r=i.skeletons,s=[],a=e.parents.map(function(g){return bn.Objects.Model[g.ID]});if(a.length===0)return;const l=e.children.reduce(function(g,v){return r[v.ID]!==void 0&&(g=r[v.ID]),g},null);e.children.forEach(function(g){i.morphTargets[g.ID]!==void 0&&s.push(i.morphTargets[g.ID])});const u=a[0],h={};"RotationOrder"in u&&(h.eulerOrder=M9(u.RotationOrder.value)),"InheritType"in u&&(h.inheritType=parseInt(u.InheritType.value)),"GeometricTranslation"in u&&(h.translation=u.GeometricTranslation.value),"GeometricRotation"in u&&(h.rotation=u.GeometricRotation.value),"GeometricScaling"in u&&(h.scale=u.GeometricScaling.value);const m=E9(h);return this.genGeometry(t,l,s,m)}genGeometry(e,t,i,r){const s=new Gt;e.attrName&&(s.name=e.attrName);const a=this.parseGeoNode(e,t),l=this.genBuffers(a),u=new xt(l.vertex,3);if(u.applyMatrix4(r),s.setAttribute("position",u),l.colors.length>0&&s.setAttribute("color",new xt(l.colors,3)),t&&(s.setAttribute("skinIndex",new Lb(l.weightsIndices,4)),s.setAttribute("skinWeight",new xt(l.vertexWeights,4)),s.FBX_Deformer=t),l.normal.length>0){const h=new Zt().getNormalMatrix(r),m=new xt(l.normal,3);m.applyNormalMatrix(h),s.setAttribute("normal",m)}if(l.uvs.forEach(function(h,m){qX==="uv2"&&m++;const g=m===0?"uv":`uv${m}`;s.setAttribute(g,new xt(l.uvs[m],2))}),a.material&&a.material.mappingType!=="AllSame"){let h=l.materialIndex[0],m=0;if(l.materialIndex.forEach(function(g,v){g!==h&&(s.addGroup(m,v-m,h),h=g,m=v)}),s.groups.length>0){const g=s.groups[s.groups.length-1],v=g.start+g.count;v!==l.materialIndex.length&&s.addGroup(v,l.materialIndex.length-v,h)}s.groups.length===0&&s.addGroup(0,l.materialIndex.length,l.materialIndex[0])}return this.addMorphTargets(s,e,i,r),s}parseGeoNode(e,t){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(r,s){r.indices.forEach(function(a,l){i.weightTable[a]===void 0&&(i.weightTable[a]=[]),i.weightTable[a].push({id:s,weight:r.weights[l]})})})),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,r=0,s=!1,a=[],l=[],u=[],h=[],m=[],g=[];const v=this;return e.vertexIndices.forEach(function(x,b){let M,A=!1;x<0&&(x=x^-1,A=!0);let S=[],C=[];if(a.push(x*3,x*3+1,x*3+2),e.color){const R=Nx(b,i,x,e.color);u.push(R[0],R[1],R[2])}if(e.skeleton){if(e.weightTable[x]!==void 0&&e.weightTable[x].forEach(function(R){C.push(R.weight),S.push(R.id)}),C.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const R=[0,0,0,0],B=[0,0,0,0];C.forEach(function(N,U){let I=N,z=S[U];B.forEach(function(L,O,G){if(I>L){G[O]=I,I=L;const $=R[O];R[O]=z,z=$}})}),S=R,C=B}for(;C.length<4;)C.push(0),S.push(0);for(let R=0;R<4;++R)m.push(C[R]),g.push(S[R])}if(e.normal){const R=Nx(b,i,x,e.normal);l.push(R[0],R[1],R[2])}e.material&&e.material.mappingType!=="AllSame"&&(M=Nx(b,i,x,e.material)[0]),e.uv&&e.uv.forEach(function(R,B){const N=Nx(b,i,x,R);h[B]===void 0&&(h[B]=[]),h[B].push(N[0]),h[B].push(N[1])}),r++,A&&(v.genFace(t,e,a,M,l,u,h,m,g,r),i++,r=0,a=[],l=[],u=[],h=[],m=[],g=[])}),t}genFace(e,t,i,r,s,a,l,u,h,m){for(let g=2;g<m;g++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[(g-1)*3]]),e.vertex.push(t.vertexPositions[i[(g-1)*3+1]]),e.vertex.push(t.vertexPositions[i[(g-1)*3+2]]),e.vertex.push(t.vertexPositions[i[g*3]]),e.vertex.push(t.vertexPositions[i[g*3+1]]),e.vertex.push(t.vertexPositions[i[g*3+2]]),t.skeleton&&(e.vertexWeights.push(u[0]),e.vertexWeights.push(u[1]),e.vertexWeights.push(u[2]),e.vertexWeights.push(u[3]),e.vertexWeights.push(u[(g-1)*4]),e.vertexWeights.push(u[(g-1)*4+1]),e.vertexWeights.push(u[(g-1)*4+2]),e.vertexWeights.push(u[(g-1)*4+3]),e.vertexWeights.push(u[g*4]),e.vertexWeights.push(u[g*4+1]),e.vertexWeights.push(u[g*4+2]),e.vertexWeights.push(u[g*4+3]),e.weightsIndices.push(h[0]),e.weightsIndices.push(h[1]),e.weightsIndices.push(h[2]),e.weightsIndices.push(h[3]),e.weightsIndices.push(h[(g-1)*4]),e.weightsIndices.push(h[(g-1)*4+1]),e.weightsIndices.push(h[(g-1)*4+2]),e.weightsIndices.push(h[(g-1)*4+3]),e.weightsIndices.push(h[g*4]),e.weightsIndices.push(h[g*4+1]),e.weightsIndices.push(h[g*4+2]),e.weightsIndices.push(h[g*4+3])),t.color&&(e.colors.push(a[0]),e.colors.push(a[1]),e.colors.push(a[2]),e.colors.push(a[(g-1)*3]),e.colors.push(a[(g-1)*3+1]),e.colors.push(a[(g-1)*3+2]),e.colors.push(a[g*3]),e.colors.push(a[g*3+1]),e.colors.push(a[g*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(g-1)*3]),e.normal.push(s[(g-1)*3+1]),e.normal.push(s[(g-1)*3+2]),e.normal.push(s[g*3]),e.normal.push(s[g*3+1]),e.normal.push(s[g*3+2])),t.uv&&t.uv.forEach(function(v,x){e.uvs[x]===void 0&&(e.uvs[x]=[]),e.uvs[x].push(l[x][0]),e.uvs[x].push(l[x][1]),e.uvs[x].push(l[x][(g-1)*2]),e.uvs[x].push(l[x][(g-1)*2+1]),e.uvs[x].push(l[x][g*2]),e.uvs[x].push(l[x][g*2+1])})}addMorphTargets(e,t,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;i.forEach(function(a){a.rawTargets.forEach(function(l){const u=bn.Objects.Geometry[l.geoID];u!==void 0&&s.genMorphGeometry(e,t,u,r,l.name)})})}genMorphGeometry(e,t,i,r,s){const a=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],l=i.Vertices!==void 0?i.Vertices.a:[],u=i.Indexes!==void 0?i.Indexes.a:[],h=e.attributes.position.count*3,m=new Float32Array(h);for(let b=0;b<u.length;b++){const M=u[b]*3;m[M]=l[b*3],m[M+1]=l[b*3+1],m[M+2]=l[b*3+2]}const g={vertexIndices:a,vertexPositions:m},v=this.genBuffers(g),x=new xt(v.vertex,3);x.name=s||i.attrName,x.applyMatrix4(r),e.morphAttributes.position.push(x)}parseNormals(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a;let s=[];return i==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:t,referenceType:i}}parseUVs(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a;let s=[];return i==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:t,referenceType:i}}parseVertexColors(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a;let s=[];return i==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:t,referenceType:i}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const r=e.Materials.a,s=[];for(let a=0;a<r.length;++a)s.push(a);return{dataSize:1,buffer:r,indices:s,mappingType:t,referenceType:i}}parseNurbsGeometry(e){if(U4===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new Gt;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Gt;const i=t-1,r=e.KnotVector.a,s=[],a=e.Points.a;for(let g=0,v=a.length;g<v;g+=4)s.push(new Kt().fromArray(a,g));let l,u;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){l=i,u=r.length-1-l;for(let g=0;g<i;++g)s.push(s[g])}const m=new U4(i,r,s,l,u).getPoints(s.length*12);return new Gt().setFromPoints(m)}}class cY{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const i in t){const r=t[i],s=this.addClip(r);e.push(s)}return e}parseClips(){if(bn.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=bn.Objects.AnimationCurveNode,t=new Map;for(const i in e){const r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=bn.Objects.AnimationCurve;for(const i in t){const r={id:t[i].id,times:t[i].KeyTime.a.map(pY),values:t[i].KeyValueFloat.a},s=Qi.get(r.id);if(s!==void 0){const a=s.parents[0].ID,l=s.parents[0].relationship;l.match(/X/)?e.get(a).curves.x=r:l.match(/Y/)?e.get(a).curves.y=r:l.match(/Z/)?e.get(a).curves.z=r:l.match(/d|DeformPercent/)&&e.has(a)&&(e.get(a).curves.morph=r)}}}parseAnimationLayers(e){const t=bn.Objects.AnimationLayer,i=new Map;for(const r in t){const s=[],a=Qi.get(parseInt(r));a!==void 0&&(a.children.forEach(function(u,h){if(e.has(u.ID)){const m=e.get(u.ID);if(m.curves.x!==void 0||m.curves.y!==void 0||m.curves.z!==void 0){if(s[h]===void 0){const g=Qi.get(u.ID).parents.filter(function(v){return v.relationship!==void 0})[0].ID;if(g!==void 0){const v=bn.Objects.Model[g.toString()];if(v===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",u);return}const x={modelName:v.attrName?xn.sanitizeNodeName(v.attrName):"",ID:v.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};la.traverse(function(b){b.ID===v.id&&(x.transform=b.matrix,b.userData.transformData&&(x.eulerOrder=b.userData.transformData.eulerOrder))}),x.transform||(x.transform=new ft),"PreRotation"in v&&(x.preRotation=v.PreRotation.value),"PostRotation"in v&&(x.postRotation=v.PostRotation.value),s[h]=x}}s[h]&&(s[h][m.attr]=m)}else if(m.curves.morph!==void 0){if(s[h]===void 0){const g=Qi.get(u.ID).parents.filter(function(S){return S.relationship!==void 0})[0].ID,v=Qi.get(g).parents[0].ID,x=Qi.get(v).parents[0].ID,b=Qi.get(x).parents[0].ID,M=bn.Objects.Model[b],A={modelName:M.attrName?xn.sanitizeNodeName(M.attrName):"",morphName:bn.Objects.Deformer[g].attrName};s[h]=A}s[h][m.attr]=m}}}),i.set(parseInt(r),s))}return i}parseAnimStacks(e){const t=bn.Objects.AnimationStack,i={};for(const r in t){const s=Qi.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const a=e.get(s[0].ID);i[r]={name:t[r].attrName,layer:a}}return i}addClip(e){let t=[];const i=this;return e.layer.forEach(function(r){t=t.concat(i.generateTracks(r))}),new x0(e.name,-1,t)}generateTracks(e){const t=[];let i=new q,r=new si,s=new q;if(e.transform&&e.transform.decompose(i,r,s),i=i.toArray(),r=new fr().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");a!==void 0&&t.push(a)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const a=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);a!==void 0&&t.push(a)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");a!==void 0&&t.push(a)}if(e.DeformPercent!==void 0){const a=this.generateMorphTrack(e);a!==void 0&&t.push(a)}return t}generateVectorTrack(e,t,i,r){const s=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(s,t,i);return new Sf(e+"."+r,s,a)}generateRotationTrack(e,t,i,r,s,a){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(ms.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(ms.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(ms.degToRad));const l=this.getTimesForAllAxes(t),u=this.getKeyframeTrackValues(l,t,i);r!==void 0&&(r=r.map(ms.degToRad),r.push(a),r=new fr().fromArray(r),r=new si().setFromEuler(r)),s!==void 0&&(s=s.map(ms.degToRad),s.push(a),s=new fr().fromArray(s),s=new si().setFromEuler(s).invert());const h=new si,m=new fr,g=[];for(let v=0;v<u.length;v+=3)m.set(u[v],u[v+1],u[v+2],a),h.setFromEuler(m),r!==void 0&&h.premultiply(r),s!==void 0&&h.multiply(s),h.toArray(g,v/3*4);return new bf(e+".quaternion",l,g)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,i=t.values.map(function(s){return s/100}),r=la.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new _f(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,r){return i-r}),t.length>1){let i=1,r=t[0];for(let s=1;s<t.length;s++){const a=t[s];a!==r&&(t[i]=a,r=a,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){const r=i,s=[];let a=-1,l=-1,u=-1;return e.forEach(function(h){if(t.x&&(a=t.x.times.indexOf(h)),t.y&&(l=t.y.times.indexOf(h)),t.z&&(u=t.z.times.indexOf(h)),a!==-1){const m=t.x.values[a];s.push(m),r[0]=m}else s.push(r[0]);if(l!==-1){const m=t.y.values[l];s.push(m),r[1]=m}else s.push(r[1]);if(u!==-1){const m=t.z.values[u];s.push(m),r[2]=m}else s.push(r[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const i=e.values[t-1],r=e.values[t]-i,s=Math.abs(r);if(s>=180){const a=s/180,l=r/a;let u=i+l;const h=e.times[t-1],g=(e.times[t]-h)/a;let v=h+g;const x=[],b=[];for(;v<e.times[t];)x.push(v),v+=g,b.push(u),u+=l;e.times=I4(e.times,t,x),e.values=I4(e.values,t,b)}}}}class uY{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new A9,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,s){const a=r.match(/^[\s\t]*;/),l=r.match(/^[\s\t]*$/);if(a||l)return;const u=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),h=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),m=r.match("^\\t{"+(t.currentIndent-1)+"}}");u?t.parseNodeBegin(r,u):h?t.parseNodeProperty(r,h,i[++s]):m?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(u){return u.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:i},a=this.parseNodeAttr(r),l=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,s):i in l?(i==="PoseNode"?l.PoseNode.push(s):l[i].id!==void 0&&(l[i]={},l[i][l[i].id]=l[i]),a.id!==""&&(l[i][a.id]=s)):typeof a.id=="number"?(l[i]={},l[i][a.id]=s):i!=="Properties70"&&(i==="PoseNode"?l[i]=[s]:l[i]=s),typeof a.id=="number"&&(s.id=a.id),a.name!==""&&(s.attrName=a.name),a.type!==""&&(s.attrType=a.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}}parseNodeProperty(e,t,i){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const a=this.getCurrentNode();if(a.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const u=s.split(",").slice(1),h=parseInt(u[0]),m=parseInt(u[1]);let g=s.split(",").slice(3);g=g.map(function(v){return v.trim().replace(/^"/,"")}),r="connections",s=[h,m],gY(s,g),a[r]===void 0&&(a[r]=[])}r==="Node"&&(a.id=s),r in a&&Array.isArray(a[r])?a[r].push(s):r!=="a"?a[r]=s:a.a=s,this.setCurrentProp(a,r),r==="a"&&s.slice(-1)!==","&&(a.a=v2(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=v2(t.a))}parseNodeSpecialProperty(e,t,i){const r=i.split('",').map(function(m){return m.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],a=r[1],l=r[2],u=r[3];let h=r[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":h=parseFloat(h);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":h=v2(h);break}this.getPrevNode()[s]={type:a,type2:l,flag:u,value:h},this.setCurrentProp(this.getPrevNode(),s)}}class fY{parse(e){const t=new L4(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const r=new A9;for(;!this.endOfContent(t);){const s=this.parseNode(t,i);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},r=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const a=e.getUint8(),l=e.getString(a);if(r===0)return null;const u=[];for(let v=0;v<s;v++)u.push(this.parseProperty(e));const h=u.length>0?u[0]:"",m=u.length>1?u[1]:"",g=u.length>2?u[2]:"";for(i.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const v=this.parseNode(e,t);v!==null&&this.parseSubNode(l,i,v)}return i.propertyList=u,typeof h=="number"&&(i.id=h),m!==""&&(i.attrName=m),g!==""&&(i.attrType=g),l!==""&&(i.name=l),i}parseSubNode(e,t,i){if(i.singleProperty===!0){const r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if(e==="Connections"&&i.name==="C"){const r=[];i.propertyList.forEach(function(s,a){a!==0&&r.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(s){t[s]=i[s]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],s=i.propertyList[1];const a=i.propertyList[2],l=i.propertyList[3];let u;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?u=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:u=i.propertyList[4],t[r]={type:s,type2:a,flag:l,value:u}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),a=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const l=oW(new Uint8Array(e.getArrayBuffer(a))),u=new L4(l.buffer);switch(t){case"b":case"c":return u.getBooleanArray(r);case"d":return u.getFloat64Array(r);case"f":return u.getFloat32Array(r);case"i":return u.getInt32Array(r);case"l":return u.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class L4{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let r=0;r<e;r++)t[r]=this.getUint8();const i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),Dp(new Uint8Array(t))}}class A9{add(e,t){this[e]=t}}function hY(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===T9(n,0,e.length)}function dY(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function i(r){const s=n[r-1];return n=n.slice(t+r),t++,s}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function N4(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function pY(n){return n/46186158e3}const mY=[];function Nx(n,e,t,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);const s=r*i.dataSize,a=s+i.dataSize;return vY(mY,i.buffer,s,a)}const g2=new fr,np=new q;function E9(n){const e=new ft,t=new ft,i=new ft,r=new ft,s=new ft,a=new ft,l=new ft,u=new ft,h=new ft,m=new ft,g=new ft,v=new ft,x=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(np.fromArray(n.translation)),n.preRotation){const O=n.preRotation.map(ms.degToRad);O.push(n.eulerOrder),t.makeRotationFromEuler(g2.fromArray(O))}if(n.rotation){const O=n.rotation.map(ms.degToRad);O.push(n.eulerOrder),i.makeRotationFromEuler(g2.fromArray(O))}if(n.postRotation){const O=n.postRotation.map(ms.degToRad);O.push(n.eulerOrder),r.makeRotationFromEuler(g2.fromArray(O)),r.invert()}n.scale&&s.scale(np.fromArray(n.scale)),n.scalingOffset&&l.setPosition(np.fromArray(n.scalingOffset)),n.scalingPivot&&a.setPosition(np.fromArray(n.scalingPivot)),n.rotationOffset&&u.setPosition(np.fromArray(n.rotationOffset)),n.rotationPivot&&h.setPosition(np.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(g.copy(n.parentMatrix),m.copy(n.parentMatrixWorld));const b=t.clone().multiply(i).multiply(r),M=new ft;M.extractRotation(m);const A=new ft;A.copyPosition(m);const S=A.clone().invert().multiply(m),C=M.clone().invert().multiply(S),R=s,B=new ft;if(x===0)B.copy(M).multiply(b).multiply(C).multiply(R);else if(x===1)B.copy(M).multiply(C).multiply(b).multiply(R);else{const G=new ft().scale(new q().setFromMatrixScale(g)).clone().invert(),$=C.clone().multiply(G);B.copy(M).multiply(b).multiply($).multiply(R)}const N=h.clone().invert(),U=a.clone().invert();let I=e.clone().multiply(u).multiply(h).multiply(t).multiply(i).multiply(r).multiply(N).multiply(l).multiply(a).multiply(s).multiply(U);const z=new ft().copyPosition(I),L=m.clone().multiply(z);return v.copyPosition(L),I=v.clone().multiply(B),I.premultiply(m.invert()),I}function M9(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function v2(n){return n.split(",").map(function(t){return parseFloat(t)})}function T9(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),Dp(new Uint8Array(n,e,t))}function gY(n,e){for(let t=0,i=n.length,r=e.length;t<r;t++,i++)n[i]=e[t]}function vY(n,e,t,i){for(let r=t,s=0;r<i;r++,s++)n[s]=e[r];return n}function I4(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}var yY=Object.defineProperty,xY=(n,e,t)=>e in n?yY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,y2=(n,e,t)=>(xY(n,typeof e!="symbol"?e+"":e,t),t);class _Y extends Fr{constructor(e){super(e)}load(e,t,i,r){const s=new Ws(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{if(typeof a!="string")throw new Error("unsupported data type");const l=JSON.parse(a),u=this.parse(l);t&&t(u)},i,r)}loadAsync(e,t){return super.loadAsync(e,t)}parse(e){return new bY(e)}}class bY{constructor(e){y2(this,"data"),y2(this,"isFont",!0),y2(this,"type","Font"),this.data=e}generateShapes(e,t=100,i){const r=[],s={letterSpacing:0,lineHeight:1,...i},a=SY(e,t,this.data,s);for(let l=0,u=a.length;l<u;l++)Array.prototype.push.apply(r,a[l].toShapes(!1));return r}}function SY(n,e,t,i){const r=Array.from(n),s=e/t.resolution,a=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*s,l=[];let u=0,h=0;for(let m=0;m<r.length;m++){const g=r[m];if(g===`
`)u=0,h-=a*i.lineHeight;else{const v=AY(g,s,u,h,t);v&&(u+=v.offsetX+i.letterSpacing,l.push(v.path))}}return l}function AY(n,e,t,i,r){const s=r.glyphs[n]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+n+'" does not exists in font family '+r.familyName+".");return}const a=new TO;let l,u,h,m,g,v,x,b;if(s.o){const M=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let A=0,S=M.length;A<S;)switch(M[A++]){case"m":l=parseInt(M[A++])*e+t,u=parseInt(M[A++])*e+i,a.moveTo(l,u);break;case"l":l=parseInt(M[A++])*e+t,u=parseInt(M[A++])*e+i,a.lineTo(l,u);break;case"q":h=parseInt(M[A++])*e+t,m=parseInt(M[A++])*e+i,g=parseInt(M[A++])*e+t,v=parseInt(M[A++])*e+i,a.quadraticCurveTo(g,v,h,m);break;case"b":h=parseInt(M[A++])*e+t,m=parseInt(M[A++])*e+i,g=parseInt(M[A++])*e+t,v=parseInt(M[A++])*e+i,x=parseInt(M[A++])*e+t,b=parseInt(M[A++])*e+i,a.bezierCurveTo(g,v,x,b,h,m);break}}return{offsetX:s.ha*e,path:a}}const x2=new WeakMap;class EY extends Fr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new Ws(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,l).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const u in t.attributeTypes){const h=t.attributeTypes[u];h.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[u]=h.name)}const i=JSON.stringify(t);if(x2.has(e)){const u=x2.get(e);if(u.key===i)return u.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,a=e.byteLength,l=this._getWorker(s,a).then(u=>(r=u,new Promise((h,m)=>{r._callbacks[s]={resolve:h,reject:m},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(u=>this._createGeometry(u.geometry));return l.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),x2.set(e,{key:i,promise:l}),l}_createGeometry(e){const t=new Gt;e.index&&t.setIndex(new mn(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,a=r.array,l=r.itemSize;t.setAttribute(s,new mn(a,l))}return t}_loadLibrary(e,t){const i=new Ws(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=MY.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function MY(){let n,e;onmessage=function(a){const l=a.data;switch(l.type){case"init":n=l.decoderConfig,e=new Promise(function(m){n.onModuleLoaded=function(g){m({draco:g})},DracoDecoderModule(n)});break;case"decode":const u=l.buffer,h=l.taskConfig;e.then(m=>{const g=m.draco,v=new g.Decoder,x=new g.DecoderBuffer;x.Init(new Int8Array(u),u.byteLength);try{const b=t(g,v,x,h),M=b.attributes.map(A=>A.array.buffer);b.index&&M.push(b.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:b},M)}catch(b){console.error(b),self.postMessage({type:"error",id:l.id,error:b.message})}finally{g.destroy(x),g.destroy(v)}});break}};function t(a,l,u,h){const m=h.attributeIDs,g=h.attributeTypes;let v,x;const b=l.GetEncodedGeometryType(u);if(b===a.TRIANGULAR_MESH)v=new a.Mesh,x=l.DecodeBufferToMesh(u,v);else if(b===a.POINT_CLOUD)v=new a.PointCloud,x=l.DecodeBufferToPointCloud(u,v);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!x.ok()||v.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+x.error_msg());const M={index:null,attributes:[]};for(const A in m){const S=self[g[A]];let C,R;if(h.useUniqueIDs)R=m[A],C=l.GetAttributeByUniqueId(v,R);else{if(R=l.GetAttributeId(v,a[m[A]]),R===-1)continue;C=l.GetAttribute(v,R)}M.attributes.push(r(a,l,v,A,S,C))}return b===a.TRIANGULAR_MESH&&(M.index=i(a,l,v)),a.destroy(v),M}function i(a,l,u){const m=u.num_faces()*3,g=m*4,v=a._malloc(g);l.GetTrianglesUInt32Array(u,g,v);const x=new Uint32Array(a.HEAPF32.buffer,v,m).slice();return a._free(v),{array:x,itemSize:1}}function r(a,l,u,h,m,g){const v=g.num_components(),b=u.num_points()*v,M=b*m.BYTES_PER_ELEMENT,A=s(a,m),S=a._malloc(M);l.GetAttributeDataArrayForAllPoints(u,g,A,M,S);const C=new m(a.HEAPF32.buffer,S,b).slice();return a._free(S),{name:h,array:C,itemSize:v}}function s(a,l){switch(l){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let Ix;const _2=()=>{if(Ix)return Ix;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const a=WebAssembly.instantiate(l(r),{}).then(g=>{s=g.instance,s.exports.__wasm_call_ctors()});function l(g){const v=new Uint8Array(g.length);for(let b=0;b<g.length;++b){const M=g.charCodeAt(b);v[b]=M>96?M-71:M>64?M-65:M>47?M+4:M>46?63:62}let x=0;for(let b=0;b<g.length;++b)v[x++]=v[b]<60?i[v[b]]:(v[b]-60)*64+v[++b];return v.buffer.slice(0,x)}function u(g,v,x,b,M,A){const S=s.exports.sbrk,C=x+3&-4,R=S(C*b),B=S(M.length),N=new Uint8Array(s.exports.memory.buffer);N.set(M,B);const U=g(R,x,b,B,M.length);if(U===0&&A&&A(R,C,b),v.set(N.subarray(R,R+x*b)),S(R-S(0)),U!==0)throw new Error(`Malformed buffer data: ${U}`)}const h={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},m={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Ix={ready:a,supported:!0,decodeVertexBuffer(g,v,x,b,M){u(s.exports.meshopt_decodeVertexBuffer,g,v,x,b,s.exports[h[M]])},decodeIndexBuffer(g,v,x,b){u(s.exports.meshopt_decodeIndexBuffer,g,v,x,b)},decodeIndexSequence(g,v,x,b){u(s.exports.meshopt_decodeIndexSequence,g,v,x,b)},decodeGltfBuffer(g,v,x,b,M,A){u(s.exports[m[M]],g,v,x,b,s.exports[h[A]])}},Ix};let b2=null;async function TY(n){return typeof n=="string"?await(await fetch(n)).json():n}function CY(n){return b2||(b2=new _Y),b2.parse(n)}async function C9(n){const e=await TY(n);return CY(e)}function PT(n){return IO(C9,[n])}PT.preload=n=>FO(C9,[n]);PT.clear=n=>zO([n]);const wY=["string","number"],RY=n=>{let e="";const t=[];return F.Children.forEach(n,i=>{wY.includes(typeof i)?e+=i+"":t.push(i)}),[e,...t]},S2=F.forwardRef(({font:n,letterSpacing:e=0,lineHeight:t=1,size:i=1,height:r=.2,bevelThickness:s=.1,bevelSize:a=.01,bevelEnabled:l=!1,bevelOffset:u=0,bevelSegments:h=4,curveSegments:m=8,smooth:g,children:v,...x},b)=>{F.useMemo(()=>w0({RenamedTextGeometry:QW}),[]);const M=F.useRef(null),A=PT(n),S=F.useMemo(()=>({font:A,size:i,height:r,bevelThickness:s,bevelSize:a,bevelEnabled:l,bevelSegments:h,bevelOffset:u,curveSegments:m,letterSpacing:e,lineHeight:t}),[A,i,r,s,a,l,h,u,m,e,t]),[C,...R]=F.useMemo(()=>RY(v),[v]),B=F.useMemo(()=>[C,S],[C,S]);return F.useLayoutEffect(()=>{g&&(M.current.geometry=KX(M.current.geometry,g),M.current.geometry.computeVertexNormals())},[B,g]),F.useImperativeHandle(b,()=>M.current,[]),F.createElement("mesh",gi({},x,{ref:M}),F.createElement("renamedTextGeometry",{args:B}),R)});function UT(n,e,t,i){var r;return r=class extends tr{constructor(s){super({vertexShader:e,fragmentShader:t,...s});for(const a in n)this.uniforms[a]=new Wt(n[a]),Object.defineProperty(this,a,{get(){return this.uniforms[a].value},set(l){this.uniforms[a].value=l}});this.uniforms=QM.clone(this.uniforms)}},r.key=ms.generateUUID(),r}const A2=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function R0(n,e){const t=Ar(s=>s.gl),i=fl(kp,A2(n)?Object.values(n):n);return F.useLayoutEffect(()=>{e==null||e(i)},[e]),F.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(i)?s=i:i instanceof kn?s=[i]:A2(i)&&(s=Object.values(i)),s.forEach(a=>{a instanceof kn&&t.initTexture(a)})}},[t,i]),F.useMemo(()=>{if(A2(n)){const s={};let a=0;for(const l in n)s[l]=i[a++];return s}else return i},[n,i])}R0.preload=n=>fl.preload(kp,n);R0.clear=n=>fl.clear(kp,n);const DY=()=>parseInt(wf.replace(/\D+/g,"")),w9=DY();let Fx=null,R9="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function D9(n=!0,e=!0,t){return i=>{t&&t(i),n&&(Fx||(Fx=new EY),Fx.setDecoderPath(typeof n=="string"?n:R9),i.setDRACOLoader(Fx)),e&&i.setMeshoptDecoder(typeof _2=="function"?_2():_2)}}const Na=(n,e,t,i)=>fl(BT,n,D9(e,t,i));Na.preload=(n,e,t,i)=>fl.preload(BT,n,D9(e,t,i));Na.clear=n=>fl.clear(BT,n);Na.setDecoderPath=n=>{R9=n};const BY=F.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:a,onStart:l,onEnd:u,...h},m)=>{const g=Ar(U=>U.invalidate),v=Ar(U=>U.camera),x=Ar(U=>U.gl),b=Ar(U=>U.events),M=Ar(U=>U.setEvents),A=Ar(U=>U.set),S=Ar(U=>U.get),C=Ar(U=>U.performance),R=e||v,B=i||b.connected||x.domElement,N=F.useMemo(()=>new vW(R),[R]);return wr(()=>{N.enabled&&N.update()},-1),F.useEffect(()=>(s&&N.connect(s===!0?B:s),N.connect(B),()=>void N.dispose()),[s,B,t,N,g]),F.useEffect(()=>{const U=L=>{g(),t&&C.regress(),a&&a(L)},I=L=>{l&&l(L)},z=L=>{u&&u(L)};return N.addEventListener("change",U),N.addEventListener("start",I),N.addEventListener("end",z),()=>{N.removeEventListener("start",I),N.removeEventListener("end",z),N.removeEventListener("change",U)}},[a,l,u,N,g,M]),F.useEffect(()=>{if(n){const U=S().controls;return A({controls:N}),()=>A({controls:U})}},[n,N]),F.createElement("primitive",gi({ref:m,object:N,enableDamping:r},h))}),OY=UT({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new Ze,sectionColor:new Ze,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new q,worldPlanePosition:new q},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${w9>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),PY=F.forwardRef(({args:n,cellColor:e="#000000",sectionColor:t="#2080ff",cellSize:i=.5,sectionSize:r=1,followCamera:s=!1,infiniteGrid:a=!1,fadeDistance:l=100,fadeStrength:u=1,fadeFrom:h=1,cellThickness:m=.5,sectionThickness:g=1,side:v=ur,...x},b)=>{w0({GridMaterial:OY});const M=F.useRef(null);F.useImperativeHandle(b,()=>M.current,[]);const A=new tl,S=new q(0,1,0),C=new q(0,0,0);wr(N=>{A.setFromNormalAndCoplanarPoint(S,C).applyMatrix4(M.current.matrixWorld);const U=M.current.material,I=U.uniforms.worldCamProjPosition,z=U.uniforms.worldPlanePosition;A.projectPoint(N.camera.position,I.value),z.value.set(0,0,0).applyMatrix4(M.current.matrixWorld)});const R={cellSize:i,sectionSize:r,cellColor:e,sectionColor:t,cellThickness:m,sectionThickness:g},B={fadeDistance:l,fadeStrength:u,fadeFrom:h,infiniteGrid:a,followCamera:s};return F.createElement("mesh",gi({ref:M,frustumCulled:!1},x),F.createElement("gridMaterial",gi({transparent:!0,"extensions-derivatives":!0,side:v},R,B)),F.createElement("planeGeometry",{args:n}))});function po(n){return fl(OT,n)}po.preload=n=>fl.preload(OT,n);po.clear=n=>fl.clear(OT,n);function UY(n,e){const t=F.useRef(null),[i]=F.useState(()=>e?e instanceof hn?{current:e}:e:t),[r]=F.useState(()=>new AO(void 0));F.useLayoutEffect(()=>{e&&(i.current=e instanceof hn?e:e.current),r._root=i.current});const s=F.useRef({}),a=F.useMemo(()=>{const l={};return n.forEach(u=>Object.defineProperty(l,u.name,{enumerable:!0,get(){if(i.current)return s.current[u.name]||(s.current[u.name]=r.clipAction(u,i.current))},configurable:!0})),{ref:i,clips:n,actions:l,names:n.map(u=>u.name),mixer:r}},[n]);return wr((l,u)=>r.update(u)),F.useEffect(()=>{const l=i.current;return()=>{s.current={},r.stopAllAction(),Object.values(a.actions).forEach(u=>{l&&r.uncacheAction(u,l)})}},[n]),a}class LY extends tr{constructor(e=new Pe){super({uniforms:{inputBuffer:new Wt(null),depthBuffer:new Wt(null),resolution:new Wt(new Pe),texelSize:new Wt(new Pe),halfTexelSize:new Wt(new Pe),kernel:new Wt(0),scale:new Wt(1),cameraNear:new Wt(0),cameraFar:new Wt(1),minDepthThreshold:new Wt(0),maxDepthThreshold:new Wt(1),depthScale:new Wt(0),depthToBlurRatioBias:new Wt(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <${w9>=154?"colorspace_fragment":"encodings_fragment"}>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:$r,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setResolution(e){this.uniforms.resolution.value.copy(e)}}class NY{constructor({gl:e,resolution:t,width:i=500,height:r=500,minDepthThreshold:s=0,maxDepthThreshold:a=1,depthScale:l=0,depthToBlurRatioBias:u=.25}){this.renderToScreen=!1,this.renderTargetA=new Ni(t,t,{minFilter:Jn,magFilter:Jn,stencilBuffer:!1,depthBuffer:!1,type:tu}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new LY,this.convolutionMaterial.setTexelSize(1/i,1/r),this.convolutionMaterial.setResolution(new Pe(i,r)),this.scene=new Tp,this.camera=new Np,this.convolutionMaterial.uniforms.minDepthThreshold.value=s,this.convolutionMaterial.uniforms.maxDepthThreshold.value=a,this.convolutionMaterial.uniforms.depthScale.value=l,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=u,this.convolutionMaterial.defines.USE_DEPTH=l>0;const h=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),m=new Float32Array([0,0,2,0,0,2]),g=new Gt;g.setAttribute("position",new mn(h,3)),g.setAttribute("uv",new mn(m,2)),this.screen=new Ai(g,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(e,t,i){const r=this.scene,s=this.camera,a=this.renderTargetA,l=this.renderTargetB;let u=this.convolutionMaterial,h=u.uniforms;h.depthBuffer.value=t.depthTexture;const m=u.kernel;let g=t,v,x,b;for(x=0,b=m.length-1;x<b;++x)v=(x&1)===0?a:l,h.kernel.value=m[x],h.inputBuffer.value=g.texture,e.setRenderTarget(v),e.render(r,s),g=v;h.kernel.value=m[x],h.inputBuffer.value=g.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(r,s)}}let IY=class extends Gp{constructor(e={}){super(e),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(e)}onBeforeCompile(e){var t;(t=e.defines)!=null&&t.USE_UV||(e.defines.USE_UV=""),e.uniforms.hasBlur=this._hasBlur,e.uniforms.tDiffuse=this._tDiffuse,e.uniforms.tDepth=this._tDepth,e.uniforms.distortionMap=this._distortionMap,e.uniforms.tDiffuseBlur=this._tDiffuseBlur,e.uniforms.textureMatrix=this._textureMatrix,e.uniforms.mirror=this._mirror,e.uniforms.mixBlur=this._mixBlur,e.uniforms.mixStrength=this._blurStrength,e.uniforms.minDepthThreshold=this._minDepthThreshold,e.uniforms.maxDepthThreshold=this._maxDepthThreshold,e.uniforms.depthScale=this._depthScale,e.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,e.uniforms.distortion=this._distortion,e.uniforms.mixContrast=this._mixContrast,e.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;
      ${e.vertexShader}`,e.vertexShader=e.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),e.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;
        ${e.fragmentShader}`,e.fragmentShader=e.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>

      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);

      vec4 merge = base;

      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif

      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif

      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(e){this._tDiffuse.value=e}get tDepth(){return this._tDepth.value}set tDepth(e){this._tDepth.value=e}get distortionMap(){return this._distortionMap.value}set distortionMap(e){this._distortionMap.value=e}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(e){this._tDiffuseBlur.value=e}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(e){this._textureMatrix.value=e}get hasBlur(){return this._hasBlur.value}set hasBlur(e){this._hasBlur.value=e}get mirror(){return this._mirror.value}set mirror(e){this._mirror.value=e}get mixBlur(){return this._mixBlur.value}set mixBlur(e){this._mixBlur.value=e}get mixStrength(){return this._blurStrength.value}set mixStrength(e){this._blurStrength.value=e}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(e){this._minDepthThreshold.value=e}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(e){this._maxDepthThreshold.value=e}get depthScale(){return this._depthScale.value}set depthScale(e){this._depthScale.value=e}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(e){this._depthToBlurRatioBias.value=e}get distortion(){return this._distortion.value}set distortion(e){this._distortion.value=e}get mixContrast(){return this._mixContrast.value}set mixContrast(e){this._mixContrast.value=e}};const FY=F.forwardRef(({mixBlur:n=0,mixStrength:e=1,resolution:t=256,blur:i=[0,0],minDepthThreshold:r=.9,maxDepthThreshold:s=1,depthScale:a=0,depthToBlurRatioBias:l=.25,mirror:u=0,distortion:h=1,mixContrast:m=1,distortionMap:g,reflectorOffset:v=0,...x},b)=>{w0({MeshReflectorMaterialImpl:IY});const M=Ar(({gl:Ae})=>Ae),A=Ar(({camera:Ae})=>Ae),S=Ar(({scene:Ae})=>Ae);i=Array.isArray(i)?i:[i,i];const C=i[0]+i[1]>0,R=i[0],B=i[1],N=F.useRef(null);F.useImperativeHandle(b,()=>N.current,[]);const[U]=F.useState(()=>new tl),[I]=F.useState(()=>new q),[z]=F.useState(()=>new q),[L]=F.useState(()=>new q),[O]=F.useState(()=>new ft),[G]=F.useState(()=>new q(0,0,-1)),[$]=F.useState(()=>new Kt),[Q]=F.useState(()=>new q),[ce]=F.useState(()=>new q),[fe]=F.useState(()=>new Kt),[k]=F.useState(()=>new ft),[K]=F.useState(()=>new pi),ee=F.useCallback(()=>{var Ae;const ie=N.current.parent||((Ae=N.current)==null||(Ae=Ae.__r3f.parent)==null?void 0:Ae.object);if(!ie||(z.setFromMatrixPosition(ie.matrixWorld),L.setFromMatrixPosition(A.matrixWorld),O.extractRotation(ie.matrixWorld),I.set(0,0,1),I.applyMatrix4(O),z.addScaledVector(I,v),Q.subVectors(z,L),Q.dot(I)>0))return;Q.reflect(I).negate(),Q.add(z),O.extractRotation(A.matrixWorld),G.set(0,0,-1),G.applyMatrix4(O),G.add(L),ce.subVectors(z,G),ce.reflect(I).negate(),ce.add(z),K.position.copy(Q),K.up.set(0,1,0),K.up.applyMatrix4(O),K.up.reflect(I),K.lookAt(ce),K.far=A.far,K.updateMatrixWorld(),K.projectionMatrix.copy(A.projectionMatrix),k.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k.multiply(K.projectionMatrix),k.multiply(K.matrixWorldInverse),k.multiply(ie.matrixWorld),U.setFromNormalAndCoplanarPoint(I,z),U.applyMatrix4(K.matrixWorldInverse),$.set(U.normal.x,U.normal.y,U.normal.z,U.constant);const _e=K.projectionMatrix;fe.x=(Math.sign($.x)+_e.elements[8])/_e.elements[0],fe.y=(Math.sign($.y)+_e.elements[9])/_e.elements[5],fe.z=-1,fe.w=(1+_e.elements[10])/_e.elements[14],$.multiplyScalar(2/$.dot(fe)),_e.elements[2]=$.x,_e.elements[6]=$.y,_e.elements[10]=$.z+1,_e.elements[14]=$.w},[A,v]),[me,W,ae,Se]=F.useMemo(()=>{const Ae={minFilter:Jn,magFilter:Jn,type:tu},ie=new Ni(t,t,Ae);ie.depthBuffer=!0,ie.depthTexture=new zp(t,t),ie.depthTexture.format=m0,ie.depthTexture.type=d0;const _e=new Ni(t,t,Ae),Ue=new NY({gl:M,resolution:t,width:R,height:B,minDepthThreshold:r,maxDepthThreshold:s,depthScale:a,depthToBlurRatioBias:l}),ke={mirror:u,textureMatrix:k,mixBlur:n,tDiffuse:ie.texture,tDepth:ie.depthTexture,tDiffuseBlur:_e.texture,hasBlur:C,mixStrength:e,minDepthThreshold:r,maxDepthThreshold:s,depthScale:a,depthToBlurRatioBias:l,distortion:h,distortionMap:g,mixContrast:m,"defines-USE_BLUR":C?"":void 0,"defines-USE_DEPTH":a>0?"":void 0,"defines-USE_DISTORTION":g?"":void 0};return[ie,_e,Ue,ke]},[M,R,B,k,t,u,C,n,e,r,s,a,l,h,g,m]);return wr(()=>{var Ae;const ie=N.current.parent||((Ae=N.current)==null||(Ae=Ae.__r3f.parent)==null?void 0:Ae.object);if(!ie)return;ie.visible=!1;const _e=M.xr.enabled,Ue=M.shadowMap.autoUpdate;ee(),M.xr.enabled=!1,M.shadowMap.autoUpdate=!1,M.setRenderTarget(me),M.state.buffers.depth.setMask(!0),M.autoClear||M.clear(),M.render(S,K),C&&ae.render(M,me,W),M.xr.enabled=_e,M.shadowMap.autoUpdate=Ue,ie.visible=!0,M.setRenderTarget(null)}),F.createElement("meshReflectorMaterialImpl",gi({attach:"material",key:"key"+Se["defines-USE_BLUR"]+Se["defines-USE_DEPTH"]+Se["defines-USE_DISTORTION"],ref:N},Se,x))}),oS=F.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],autoInvalidate:a=!1,...l},u)=>{const h=F.useRef(null);F.useImperativeHandle(u,()=>h.current,[]);const m=F.useRef(Math.random()*1e4);return wr(g=>{var v,x;if(!e||t===0)return;a&&g.invalidate();const b=m.current+g.clock.elapsedTime;h.current.rotation.x=Math.cos(b/4*t)/8*i,h.current.rotation.y=Math.sin(b/4*t)/8*i,h.current.rotation.z=Math.sin(b/4*t)/20*i;let M=Math.sin(b/4*t)/10;M=ms.mapLinear(M,-.1,.1,(v=s==null?void 0:s[0])!==null&&v!==void 0?v:-.1,(x=s==null?void 0:s[1])!==null&&x!==void 0?x:.1),h.current.position.y=M*r,h.current.updateMatrix()}),F.createElement("group",l,F.createElement("group",{ref:h,matrixAutoUpdate:!1},n))});function zY(n){const{nodes:e,materials:t}=Na("/reactportfolio/models/PortfolioAvatar.glb"),{animations:i}=po("/reactportfolio/animations/enteringfall.fbx"),{animations:r}=po("/reactportfolio/animations/stand.fbx"),{animations:s}=po("/reactportfolio/animations/idle.fbx"),{animations:a}=po("/reactportfolio/animations/wave.fbx"),{animations:l}=po("/reactportfolio/animations/walking.fbx"),u=F.useRef();i[0].name="Entering Fall",r[0].name="Standing",s[0].name="Neutral",a[0].name="Waving",l[0].name="Walking";const{actions:h}=UY([i[0],r[0],s[0],a[0],l[0]],u),[m,g]=F.useState(!1),[v,x]=F.useState(!1),[b,M]=F.useState(null),A=F.useRef(null),S=F.useRef(!1),C=F.useRef(0),R=F.useRef(["Standing","Neutral"]);F.useEffect(()=>{h["Entering Fall"]&&h.Standing&&h.Neutral&&g(!0)},[h]),F.useEffect(()=>{m&&M("Entering Fall")},[m]),F.useEffect(()=>{if(!b||!h[b])return;const O=h[b];return A.current=O,S.current=!1,O.reset().play(),b!=="Neutral"&&(O.setLoop(YM,1),O.clampWhenFinished=!0),b==="Standing"&&O.setEffectiveTimeScale(4),()=>{O.stop()}},[b,h]),wr(()=>{const O=A.current;if(!(!O||S.current||!O.isRunning())&&O.time>=O._clip.duration-.1)if(S.current=!0,C.current<R.current.length){const G=R.current[C.current++];M(G)}else x(!0)});const[B,N]=F.useState("Neutral"),[U,I]=F.useState(!1);F.useEffect(()=>{const O=v?B:b;if(!(!h||!h[O]))return h[O].reset().play(),()=>{h[O]&&h[O].reset().stop()}},[B,b,h,v]);const z=iy(),L=F.useRef(0);return wr(()=>{var G;const O=z.offset-L.current;if(!v&&Math.abs(O)>1e-4){x(!0),M(null),N("Walking"),(G=A.current)==null||G.stop();return}v&&(Math.abs(O)>1e-4?(N("Walking"),u.current.rotation.y=ms.lerp(u.current.rotation.y,O>0?0:Math.PI,.1)):N(U?"Waving":"Neutral"),L.current=z.offset)}),re.jsxs("group",{...n,dispose:null,ref:u,onPointerEnter:()=>I(!0),onPointerLeave:()=>I(!1),children:[re.jsx("primitive",{object:e.Hips}),re.jsx("skinnedMesh",{geometry:e.Wolf3D_Glasses.geometry,material:t.Wolf3D_Glasses,skeleton:e.Wolf3D_Glasses.skeleton}),re.jsx("skinnedMesh",{geometry:e.Wolf3D_Outfit_Top.geometry,material:t.Wolf3D_Outfit_Top,skeleton:e.Wolf3D_Outfit_Top.skeleton}),re.jsx("skinnedMesh",{geometry:e.Wolf3D_Outfit_Bottom.geometry,material:t.Wolf3D_Outfit_Bottom,skeleton:e.Wolf3D_Outfit_Bottom.skeleton}),re.jsx("skinnedMesh",{geometry:e.Wolf3D_Outfit_Footwear.geometry,material:t.Wolf3D_Outfit_Footwear,skeleton:e.Wolf3D_Outfit_Footwear.skeleton}),re.jsx("skinnedMesh",{geometry:e.Wolf3D_Body.geometry,material:t.Wolf3D_Body,skeleton:e.Wolf3D_Body.skeleton}),re.jsx("skinnedMesh",{name:"EyeLeft",geometry:e.EyeLeft.geometry,material:t.Wolf3D_Eye,skeleton:e.EyeLeft.skeleton,morphTargetDictionary:e.EyeLeft.morphTargetDictionary,morphTargetInfluences:e.EyeLeft.morphTargetInfluences}),re.jsx("skinnedMesh",{name:"EyeRight",geometry:e.EyeRight.geometry,material:t.Wolf3D_Eye,skeleton:e.EyeRight.skeleton,morphTargetDictionary:e.EyeRight.morphTargetDictionary,morphTargetInfluences:e.EyeRight.morphTargetInfluences}),re.jsx("skinnedMesh",{name:"Wolf3D_Head",geometry:e.Wolf3D_Head.geometry,material:t.Wolf3D_Skin,skeleton:e.Wolf3D_Head.skeleton,morphTargetDictionary:e.Wolf3D_Head.morphTargetDictionary,morphTargetInfluences:e.Wolf3D_Head.morphTargetInfluences}),re.jsx("skinnedMesh",{name:"Wolf3D_Teeth",geometry:e.Wolf3D_Teeth.geometry,material:t.Wolf3D_Teeth,skeleton:e.Wolf3D_Teeth.skeleton,morphTargetDictionary:e.Wolf3D_Teeth.morphTargetDictionary,morphTargetInfluences:e.Wolf3D_Teeth.morphTargetInfluences})]})}Na.preload("/reactportfolio/models/PortfolioAvatar.glb");po.preload("/reactportfolio/animations/enteringfall.fbx");po.preload("/reactportfolio/animations/stand.fbx");po.preload("/reactportfolio/animations/neutral.fbx");po.preload("/reactportfolio/animations/walking.fbx");po.preload("/reactportfolio/animations/wave.fbx");var lS=j5();const HY=A0(lS);function GY(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function B9(...n){return e=>n.forEach(t=>GY(t,e))}function Wp(...n){return F.useCallback(B9(...n),n)}const O9=F.forwardRef((n,e)=>{const{children:t,...i}=n,r=F.Children.toArray(t),s=r.find(VY);if(s){const a=s.props.children,l=r.map(u=>u===s?F.Children.count(a)>1?F.Children.only(null):F.isValidElement(a)?a.props.children:null:u);return F.createElement(WE,gi({},i,{ref:e}),F.isValidElement(a)?F.cloneElement(a,void 0,l):null)}return F.createElement(WE,gi({},i,{ref:e}),t)});O9.displayName="Slot";const WE=F.forwardRef((n,e)=>{const{children:t,...i}=n;return F.isValidElement(t)?F.cloneElement(t,{...kY(i,t.props),ref:B9(e,t.ref)}):F.Children.count(t)>1?F.Children.only(null):null});WE.displayName="SlotClone";const P9=({children:n})=>F.createElement(F.Fragment,null,n);function VY(n){return F.isValidElement(n)&&n.type===P9}function kY(n,e){const t={...e};for(const i in e){const r=n[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?t[i]=(...l)=>{s(...l),r(...l)}:r&&(t[i]=r):i==="style"?t[i]={...r,...s}:i==="className"&&(t[i]=[r,s].filter(Boolean).join(" "))}return{...n,...t}}const jY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Af=jY.reduce((n,e)=>{const t=F.forwardRef((i,r)=>{const{asChild:s,...a}=i,l=s?O9:e;return F.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),F.createElement(l,gi({},a,{ref:r}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function XY(n,e){n&&lS.flushSync(()=>n.dispatchEvent(e))}const WY=F.forwardRef((n,e)=>{var t;const{container:i=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...r}=n;return i?HY.createPortal(F.createElement(Af.div,gi({},r,{ref:e})),i):null}),YY=WY;var F4=Object.prototype.hasOwnProperty;function tb(n,e){var t,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&tb(n[i],e[i]););return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(F4.call(n,t)&&++i&&!F4.call(e,t)||!(t in e)||!tb(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}function U9(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}var cS=function(e,t,i,r){this.name=e,this.fn=t,this.args=i,this.modifiers=r};cS.prototype._test=function(e){var t=this.fn;try{yp(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return yp(this.modifiers.slice(),t,this)(e)}catch{return!1}};cS.prototype._check=function(e){try{yp(this.modifiers.slice(),this.fn,this)(e)}catch{if(yp(this.modifiers.slice(),function(i){return i},this)(!1))return}if(!yp(this.modifiers.slice(),this.fn,this)(e))throw null};cS.prototype._testAsync=function(e){var t=this;return new Promise(function(i,r){N9(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?i(e):r(null)}).catch(function(s){return r(s)})})};function L9(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function yp(n,e,t){if(n.length){var i=n.shift(),r=yp(n,e,t);return i.perform(r,t)}else return L9(e)}function N9(n,e,t){if(n.length){var i=n.shift(),r=N9(n,e,t);return i.performAsync(r,t)}else return function(s){return Promise.resolve(L9(e,"async")(s))}}var qY=function(e,t,i){this.name=e,this.perform=t,this.performAsync=i},LT=function(n){function e(t,i,r,s){for(var a=[],l=arguments.length-4;l-- >0;)a[l]=arguments[l+4];n.call(this,a),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=i,this.cause=r,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),ac=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};ac.prototype._applyRule=function(e,t){var i=this;return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return i.chain.push(new cS(t,e.apply(i,r),r,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}};ac.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new qY(t,e.simple,e.async)),this};ac.prototype._clone=function(){return new ac(this.chain.slice(),this.nextRuleModifiers.slice())};ac.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};ac.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(i){try{i._check(e)}catch(r){t.push(new LT(i,e,r))}}),t};ac.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(i){throw new LT(t,e,i)}})};ac.prototype.testAsync=function(e){var t=this;return new Promise(function(i,r){I9(e,t.chain.slice(),i,r)})};function I9(n,e,t,i){if(e.length){var r=e.shift();r._testAsync(n).then(function(){I9(n,e,t,i)},function(s){i(new LT(r,n,s))})}else t(n)}var z4=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function KY(n,e){return e===void 0&&(e=!1),{simple:function(t){return z4(t,e)||n.check(t)===void 0},async:function(t){return z4(t,e)||n.testAsync(t)}}}function fa(){return typeof Proxy<"u"?F9(new ac):YE(new ac)}var Ov={};fa.extend=function(n){Object.assign(Ov,n)};fa.clearCustomRules=function(){Ov={}};function F9(n){return new Proxy(n,{get:function(t,i){if(i in t)return t[i];var r=F9(n._clone());if(i in nb)return r._applyModifier(nb[i],i);if(i in Ov)return r._applyRule(Ov[i],i);if(i in qE)return r._applyRule(qE[i],i)}})}function YE(n){var e=function(r,s){return Object.keys(r).forEach(function(a){s[a]=function(){for(var l=[],u=arguments.length;u--;)l[u]=arguments[u];var h=YE(s._clone()),m=h._applyRule(r[a],a).apply(void 0,l);return m}}),s},t=e(qE,n),i=e(Ov,t);return Object.keys(nb).forEach(function(r){Object.defineProperty(i,r,{get:function(){var s=YE(i._clone());return s._applyModifier(nb[r],r)}})}),i}var nb={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return zx(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(zx(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&zx(e).every(n)}},async:function(n){return function(e){return Promise.all(zx(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return H4(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(i){return H4(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&i:i}).catch(function(){return!1})}}}};function H4(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function zx(n){return typeof n=="string"?n.split(""):n}var qE={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||JY;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return ip("string")},boolean:function(){return ip("boolean")},undefined:function(){return ip("undefined")},null:function(){return ip("null")},array:function(){return ip("array")},object:function(){return ip("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return $Y(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(i){return i.test(t)})}},optional:KY};function ip(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function JY(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function $Y(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(i){var r=n[i];try{r.check((e||{})[i])}catch(s){s.target=i,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],i=Object.keys(n).map(function(r){var s=n[r];return s.testAsync((e||{})[r]).catch(function(a){a.target=r,t.push(a)})});return Promise.all(i).then(function(){if(t.length>0)throw t;return!0})}}}var ni="colors",Ns="sizes",At="space",ZY={gap:At,gridGap:At,columnGap:At,gridColumnGap:At,rowGap:At,gridRowGap:At,inset:At,insetBlock:At,insetBlockEnd:At,insetBlockStart:At,insetInline:At,insetInlineEnd:At,insetInlineStart:At,margin:At,marginTop:At,marginRight:At,marginBottom:At,marginLeft:At,marginBlock:At,marginBlockEnd:At,marginBlockStart:At,marginInline:At,marginInlineEnd:At,marginInlineStart:At,padding:At,paddingTop:At,paddingRight:At,paddingBottom:At,paddingLeft:At,paddingBlock:At,paddingBlockEnd:At,paddingBlockStart:At,paddingInline:At,paddingInlineEnd:At,paddingInlineStart:At,top:At,right:At,bottom:At,left:At,scrollMargin:At,scrollMarginTop:At,scrollMarginRight:At,scrollMarginBottom:At,scrollMarginLeft:At,scrollMarginX:At,scrollMarginY:At,scrollMarginBlock:At,scrollMarginBlockEnd:At,scrollMarginBlockStart:At,scrollMarginInline:At,scrollMarginInlineEnd:At,scrollMarginInlineStart:At,scrollPadding:At,scrollPaddingTop:At,scrollPaddingRight:At,scrollPaddingBottom:At,scrollPaddingLeft:At,scrollPaddingX:At,scrollPaddingY:At,scrollPaddingBlock:At,scrollPaddingBlockEnd:At,scrollPaddingBlockStart:At,scrollPaddingInline:At,scrollPaddingInlineEnd:At,scrollPaddingInlineStart:At,fontSize:"fontSizes",background:ni,backgroundColor:ni,backgroundImage:ni,borderImage:ni,border:ni,borderBlock:ni,borderBlockEnd:ni,borderBlockStart:ni,borderBottom:ni,borderBottomColor:ni,borderColor:ni,borderInline:ni,borderInlineEnd:ni,borderInlineStart:ni,borderLeft:ni,borderLeftColor:ni,borderRight:ni,borderRightColor:ni,borderTop:ni,borderTopColor:ni,caretColor:ni,color:ni,columnRuleColor:ni,fill:ni,outline:ni,outlineColor:ni,stroke:ni,textDecorationColor:ni,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Ns,minBlockSize:Ns,maxBlockSize:Ns,inlineSize:Ns,minInlineSize:Ns,maxInlineSize:Ns,width:Ns,minWidth:Ns,maxWidth:Ns,height:Ns,minHeight:Ns,maxHeight:Ns,flexBasis:Ns,gridTemplateColumns:Ns,gridTemplateRows:Ns,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},QY=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Yp=()=>{const n=Object.create(null);return(e,t,...i)=>{const r=(s=>JSON.stringify(s,QY))(e);return r in n?n[r]:n[r]=t(e,...i)}},a0=Symbol.for("sxs.internal"),NT=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),G4=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:eq}=Object.prototype,KE=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),tq=/\s+(?![^()]*\))/,rp=n=>e=>n(...typeof e=="string"?String(e).split(tq):[e]),V4={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:rp((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:rp((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:rp((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:rp((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:rp((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:rp((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},E2=/([\d.]+)([^]*)/,nq=(n,e)=>n.length?n.reduce((t,i)=>(t.push(...e.map(r=>r.includes("&")?r.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(r)?`:is(${i})`:i):i+" "+r)),t),[]):e,iq=(n,e)=>n in rq&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,i,r,s)=>i+(r==="stretch"?`-moz-available${s};${KE(n)}:${i}-webkit-fill-available`:`-moz-fit-content${s};${KE(n)}:${i}fit-content`)+s):String(e),rq={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Zc=n=>n?n+"-":"",z9=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(i,r,s,a,l)=>a=="$"==!!s?i:(r||a=="--"?"calc(":"")+"var(--"+(a==="$"?Zc(e)+(l.includes("$")?"":Zc(t))+l.replace(/\$/g,"-"):l)+")"+(r||a=="--"?"*"+(r||"")+(s||"1")+")":"")),sq=/\s*,\s*(?![^()]*\))/,aq=Object.prototype.toString,lp=(n,e,t,i,r)=>{let s,a,l;const u=(h,m,g)=>{let v,x;const b=M=>{for(v in M){const C=v.charCodeAt(0)===64,R=C&&Array.isArray(M[v])?M[v]:[M[v]];for(x of R){const B=/[A-Z]/.test(S=v)?S:S.replace(/-[^]/g,U=>U[1].toUpperCase()),N=typeof x=="object"&&x&&x.toString===aq&&(!i.utils[B]||!m.length);if(B in i.utils&&!N){const U=i.utils[B];if(U!==a){a=U,b(U(x)),a=null;continue}}else if(B in V4){const U=V4[B];if(U!==l){l=U,b(U(x)),l=null;continue}}if(C&&(A=v.slice(1)in i.media?"@media "+i.media[v.slice(1)]:v,v=A.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(U,I,z,L,O,G)=>{const $=E2.test(I),Q=.0625*($?-1:1),[ce,fe]=$?[L,I]:[I,L];return"("+(z[0]==="="?"":z[0]===">"===$?"max-":"min-")+ce+":"+(z[0]!=="="&&z.length===1?fe.replace(E2,(k,K,ee)=>Number(K)+Q*(z===">"?1:-1)+ee):fe)+(O?") and ("+(O[0]===">"?"min-":"max-")+ce+":"+(O.length===1?G.replace(E2,(k,K,ee)=>Number(K)+Q*(O===">"?-1:1)+ee):G):"")+")"})),N){const U=C?g.concat(v):[...g],I=C?[...m]:nq(m,v.split(sq));s!==void 0&&r(k4(...s)),s=void 0,u(x,I,U)}else s===void 0&&(s=[[],m,g]),v=C||v.charCodeAt(0)!==36?v:`--${Zc(i.prefix)}${v.slice(1).replace(/\$/g,"-")}`,x=N?x:typeof x=="number"?x&&B in oq?String(x)+"px":String(x):z9(iq(B,x??""),i.prefix,i.themeMap[B]),s[0].push(`${C?`${v} `:`${KE(v)}:`}${x}`)}}var A,S};b(h),s!==void 0&&r(k4(...s)),s=void 0};u(n,e,t)},k4=(n,e,t)=>`${t.map(i=>`${i}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,oq={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},j4=n=>String.fromCharCode(n+(n>25?39:97)),o0=n=>(e=>{let t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=j4(t%52)+i;return j4(t%52)+i})(((e,t)=>{let i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return e})(5381,JSON.stringify(n))>>>0),Wg=["themed","global","styled","onevar","resonevar","allvar","inline"],lq=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},cq=n=>{let e;const t=()=>{const{cssRules:r}=e.sheet;return[].map.call(r,(s,a)=>{const{cssText:l}=s;let u="";if(l.startsWith("--sxs"))return"";if(r[a-1]&&(u=r[a-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const h in e.rules)if(e.rules[h].group===s)return`--sxs{--sxs:${[...e.rules[h].cache].join(" ")}}${l}`;return s.cssRules.length?`${u}${l}`:""}return l}).join("")},i=()=>{if(e){const{rules:l,sheet:u}=e;if(!u.deleteRule){for(;Object(Object(u.cssRules)[0]).type===3;)u.cssRules.splice(0,1);u.cssRules=[]}for(const h in l)delete l[h]}const r=Object(n).styleSheets||[];for(const l of r)if(lq(l)){for(let u=0,h=l.cssRules;h[u];++u){const m=Object(h[u]);if(m.type!==1)continue;const g=Object(h[u+1]);if(g.type!==4)continue;++u;const{cssText:v}=m;if(!v.startsWith("--sxs"))continue;const x=v.slice(14,-3).trim().split(/\s+/),b=Wg[x[0]];b&&(e||(e={sheet:l,reset:i,rules:{},toString:t}),e.rules[b]={group:g,index:u,cache:new Set(x)})}if(e)break}if(!e){const l=(u,h)=>({type:h,cssRules:[],insertRule(m,g){this.cssRules.splice(g,0,l(m,{import:3,undefined:1}[(m.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return u==="@media{}"?`@media{${[].map.call(this.cssRules,m=>m.cssText).join("")}}`:u}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:l("","text/css"),rules:{},reset:i,toString:t}}const{sheet:s,rules:a}=e;for(let l=Wg.length-1;l>=0;--l){const u=Wg[l];if(!a[u]){const h=Wg[l+1],m=a[h]?a[h].index:s.cssRules.length;s.insertRule("@media{}",m),s.insertRule(`--sxs{--sxs:${l}}`,m),a[u]={group:s.cssRules[m+1],index:m,cache:new Set([l])}}uq(a[u])}};return i(),e},uq=n=>{const e=n.group;let t=e.cssRules.length;n.apply=i=>{try{e.insertRule(i,t),++t}catch{}}},Ig=Symbol(),fq=Yp(),X4=(n,e)=>fq(n,()=>(...t)=>{let i={type:null,composers:new Set};for(const r of t)if(r!=null)if(r[a0]){i.type==null&&(i.type=r[a0].type);for(const s of r[a0].composers)i.composers.add(s)}else r.constructor!==Object||r.$$typeof?i.type==null&&(i.type=r):i.composers.add(hq(r,n));return i.type==null&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),dq(n,i,e)}),hq=({variants:n,compoundVariants:e,defaultVariants:t,...i},r)=>{const s=`${Zc(r.prefix)}c-${o0(i)}`,a=[],l=[],u=Object.create(null),h=[];for(const v in t)u[v]=String(t[v]);if(typeof n=="object"&&n)for(const v in n){m=u,g=v,eq.call(m,g)||(u[v]="undefined");const x=n[v];for(const b in x){const M={[v]:String(b)};String(b)==="undefined"&&h.push(v);const A=x[b],S=[M,A,!G4(A)];a.push(S)}}var m,g;if(typeof e=="object"&&e)for(const v of e){let{css:x,...b}=v;x=typeof x=="object"&&x||{};for(const A in b)b[A]=String(b[A]);const M=[b,x,!G4(x)];l.push(M)}return[s,i,a,l,u,h]},dq=(n,e,t)=>{const[i,r,s,a]=pq(e.composers),l=typeof e.type=="function"||e.type.$$typeof?(g=>{function v(){for(let x=0;x<v[Ig].length;x++){const[b,M]=v[Ig][x];g.rules[b].apply(M)}return v[Ig]=[],null}return v[Ig]=[],v.rules={},Wg.forEach(x=>v.rules[x]={apply:b=>v[Ig].push([x,b])}),v})(t):null,u=(l||t).rules,h=`.${i}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,m=g=>{g=typeof g=="object"&&g||mq;const{css:v,...x}=g,b={};for(const S in s)if(delete x[S],S in g){let C=g[S];typeof C=="object"&&C?b[S]={"@initial":s[S],...C}:(C=String(C),b[S]=C!=="undefined"||a.has(S)?C:s[S])}else b[S]=s[S];const M=new Set([...r]);for(const[S,C,R,B]of e.composers){t.rules.styled.cache.has(S)||(t.rules.styled.cache.add(S),lp(C,[`.${S}`],[],n,I=>{u.styled.apply(I)}));const N=W4(R,b,n.media),U=W4(B,b,n.media,!0);for(const I of N)if(I!==void 0)for(const[z,L,O]of I){const G=`${S}-${o0(L)}-${z}`;M.add(G);const $=(O?t.rules.resonevar:t.rules.onevar).cache,Q=O?u.resonevar:u.onevar;$.has(G)||($.add(G),lp(L,[`.${G}`],[],n,ce=>{Q.apply(ce)}))}for(const I of U)if(I!==void 0)for(const[z,L]of I){const O=`${S}-${o0(L)}-${z}`;M.add(O),t.rules.allvar.cache.has(O)||(t.rules.allvar.cache.add(O),lp(L,[`.${O}`],[],n,G=>{u.allvar.apply(G)}))}}if(typeof v=="object"&&v){const S=`${i}-i${o0(v)}-css`;M.add(S),t.rules.inline.cache.has(S)||(t.rules.inline.cache.add(S),lp(v,[`.${S}`],[],n,C=>{u.inline.apply(C)}))}for(const S of String(g.className||"").trim().split(/\s+/))S&&M.add(S);const A=x.className=[...M].join(" ");return{type:e.type,className:A,selector:h,props:x,toString:()=>A,deferredInjector:l}};return NT(m,{className:i,selector:h,[a0]:e,toString:()=>(t.rules.styled.cache.has(i)||m(),i)})},pq=n=>{let e="";const t=[],i={},r=[];for(const[s,,,,a,l]of n){e===""&&(e=s),t.push(s),r.push(...l);for(const u in a){const h=a[u];(i[u]===void 0||h!=="undefined"||l.includes(h))&&(i[u]=h)}}return[e,t,i,new Set(r)]},W4=(n,e,t,i)=>{const r=[];e:for(let[s,a,l]of n){if(l)continue;let u,h=0,m=!1;for(u in s){const g=s[u];let v=e[u];if(v!==g){if(typeof v!="object"||!v)continue e;{let x,b,M=0;for(const A in v){if(g===String(v[A])){if(A!=="@initial"){const S=A.slice(1);(b=b||[]).push(S in t?t[S]:A.replace(/^@media ?/,"")),m=!0}h+=M,x=!0}++M}if(b&&b.length&&(a={["@media "+b.join(", ")]:a}),!x)continue e}}}(r[h]=r[h]||[]).push([i?"cv":`${u}-${s[u]}`,a,m])}return r},mq={},gq=Yp(),vq=(n,e)=>gq(n,()=>(...t)=>{const i=()=>{for(let r of t){r=typeof r=="object"&&r||{};let s=o0(r);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in r){let a=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let l of[].concat(r["@import"]))l=l.includes('"')||l.includes("'")?l:`"${l}"`,e.sheet.insertRule(`@import ${l};`,a++);delete r["@import"]}lp(r,[],[],n,a=>{e.rules.global.apply(a)})}}return""};return NT(i,{toString:i})}),yq=Yp(),xq=(n,e)=>yq(n,()=>t=>{const i=`${Zc(n.prefix)}k-${o0(t)}`,r=()=>{if(!e.rules.global.cache.has(i)){e.rules.global.cache.add(i);const s=[];lp(t,[],[],n,l=>s.push(l));const a=`@keyframes ${i}{${s.join("")}}`;e.rules.global.apply(a)}return i};return NT(r,{get name(){return r()},toString:r})}),_q=class{constructor(n,e,t,i){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=i==null?"":String(i)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Zc(this.prefix)+Zc(this.scale)+this.token}toString(){return this.computedValue}},bq=Yp(),Sq=(n,e)=>bq(n,()=>(t,i)=>{i=typeof t=="object"&&t||Object(i);const r=`.${t=(t=typeof t=="string"?t:"")||`${Zc(n.prefix)}t-${o0(i)}`}`,s={},a=[];for(const u in i){s[u]={};for(const h in i[u]){const m=`--${Zc(n.prefix)}${u}-${h}`,g=z9(String(i[u][h]),n.prefix,u);s[u][h]=new _q(h,g,u,n.prefix),a.push(`${m}:${g}`)}}const l=()=>{if(a.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const u=`${i===n.theme?":root,":""}.${t}{${a.join(";")}}`;e.rules.themed.apply(u)}return t};return{...s,get className(){return l()},selector:r,toString:l}}),Aq=Yp(),Eq=Yp(),Mq=n=>{const e=(t=>{let i=!1;const r=Aq(t,s=>{i=!0;const a="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",l=typeof s.media=="object"&&s.media||{},u=typeof s.root=="object"?s.root||null:globalThis.document||null,h=typeof s.theme=="object"&&s.theme||{},m={prefix:a,media:l,theme:h,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...ZY},utils:typeof s.utils=="object"&&s.utils||{}},g=cq(u),v={css:X4(m,g),globalCss:vq(m,g),keyframes:xq(m,g),createTheme:Sq(m,g),reset(){g.reset(),v.theme.toString()},theme:{},sheet:g,config:m,prefix:a,getCssText:g.toString,toString:g.toString};return String(v.theme=v.createTheme(h)),v});return i||r.reset(),r})(n);return e.styled=(({config:t,sheet:i})=>Eq(t,()=>{const r=X4(t,i);return(...s)=>{const a=r(...s),l=a[a0].type,u=oe.forwardRef((h,m)=>{const g=h&&h.as||l,{props:v,deferredInjector:x}=a(h);return delete v.as,v.ref=m,x?oe.createElement(oe.Fragment,null,oe.createElement(g,v),oe.createElement(x,null)):oe.createElement(g,v)});return u.className=a.className,u.displayName=`Styled.${l.displayName||l.name||l}`,u.selector=a.selector,u.toString=()=>a.selector,u[a0]=a[a0],u}}))(e),e};function Gc(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function H9(n,e=[]){let t=[];function i(s,a){const l=F.createContext(a),u=t.length;t=[...t,a];function h(g){const{scope:v,children:x,...b}=g,M=(v==null?void 0:v[n][u])||l,A=F.useMemo(()=>b,Object.values(b));return F.createElement(M.Provider,{value:A},x)}function m(g,v){const x=(v==null?void 0:v[n][u])||l,b=F.useContext(x);if(b)return b;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${s}\``)}return h.displayName=s+"Provider",[h,m]}const r=()=>{const s=t.map(a=>F.createContext(a));return function(l){const u=(l==null?void 0:l[n])||s;return F.useMemo(()=>({[`__scope${n}`]:{...l,[n]:u}}),[l,u])}};return r.scopeName=n,[i,Tq(r,...e)]}function Tq(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const a=i.reduce((l,{useScope:u,scopeName:h})=>{const g=u(s)[`__scope${h}`];return{...l,...g}},{});return F.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function qp(n){const e=F.useRef(n);return F.useEffect(()=>{e.current=n}),F.useMemo(()=>(...t)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...t)},[])}function Cq(n,e=globalThis==null?void 0:globalThis.document){const t=qp(n);F.useEffect(()=>{const i=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)},[t,e])}const JE="dismissableLayer.update",wq="dismissableLayer.pointerDownOutside",Rq="dismissableLayer.focusOutside";let Y4;const Dq=F.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Bq=F.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:l,onDismiss:u,...h}=n,m=F.useContext(Dq),[g,v]=F.useState(null),x=(t=g==null?void 0:g.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,b]=F.useState({}),M=Wp(e,z=>v(z)),A=Array.from(m.layers),[S]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),C=A.indexOf(S),R=g?A.indexOf(g):-1,B=m.layersWithOutsidePointerEventsDisabled.size>0,N=R>=C,U=Oq(z=>{const L=z.target,O=[...m.branches].some(G=>G.contains(L));!N||O||(s==null||s(z),l==null||l(z),z.defaultPrevented||u==null||u())},x),I=Pq(z=>{const L=z.target;[...m.branches].some(G=>G.contains(L))||(a==null||a(z),l==null||l(z),z.defaultPrevented||u==null||u())},x);return Cq(z=>{R===m.layers.size-1&&(r==null||r(z),!z.defaultPrevented&&u&&(z.preventDefault(),u()))},x),F.useEffect(()=>{if(g)return i&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(Y4=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),q4(),()=>{i&&m.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=Y4)}},[g,x,i,m]),F.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),q4())},[g,m]),F.useEffect(()=>{const z=()=>b({});return document.addEventListener(JE,z),()=>document.removeEventListener(JE,z)},[]),F.createElement(Af.div,gi({},h,{ref:M,style:{pointerEvents:B?N?"auto":"none":void 0,...n.style},onFocusCapture:Gc(n.onFocusCapture,I.onFocusCapture),onBlurCapture:Gc(n.onBlurCapture,I.onBlurCapture),onPointerDownCapture:Gc(n.onPointerDownCapture,U.onPointerDownCapture)}))});function Oq(n,e=globalThis==null?void 0:globalThis.document){const t=qp(n),i=F.useRef(!1),r=F.useRef(()=>{});return F.useEffect(()=>{const s=l=>{if(l.target&&!i.current){let m=function(){G9(wq,t,h,{discrete:!0})};var u=m;const h={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=m,e.addEventListener("click",r.current,{once:!0})):m()}i.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function Pq(n,e=globalThis==null?void 0:globalThis.document){const t=qp(n),i=F.useRef(!1);return F.useEffect(()=>{const r=s=>{s.target&&!i.current&&G9(Rq,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function q4(){const n=new CustomEvent(JE);document.dispatchEvent(n)}function G9(n,e,t,{discrete:i}){const r=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),i?XY(r,s):r.dispatchEvent(s)}const gf=globalThis!=null&&globalThis.document?F.useLayoutEffect:()=>{},Uq=$L.useId||(()=>{});let Lq=0;function Nq(n){const[e,t]=F.useState(Uq());return gf(()=>{t(i=>i??String(Lq++))},[n]),e?`radix-${e}`:""}function D0(n){return n.split("-")[0]}function sy(n){return n.split("-")[1]}function Kp(n){return["top","bottom"].includes(D0(n))?"x":"y"}function IT(n){return n==="y"?"height":"width"}function K4(n,e,t){let{reference:i,floating:r}=n;const s=i.x+i.width/2-r.width/2,a=i.y+i.height/2-r.height/2,l=Kp(e),u=IT(l),h=i[u]/2-r[u]/2,m=l==="x";let g;switch(D0(e)){case"top":g={x:s,y:i.y-r.height};break;case"bottom":g={x:s,y:i.y+i.height};break;case"right":g={x:i.x+i.width,y:a};break;case"left":g={x:i.x-r.width,y:a};break;default:g={x:i.x,y:i.y}}switch(sy(e)){case"start":g[l]-=h*(t&&m?-1:1);break;case"end":g[l]+=h*(t&&m?-1:1)}return g}const Iq=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:a}=t,l=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:n,floating:e,strategy:r}),{x:h,y:m}=K4(u,i,l),g=i,v={},x=0;for(let b=0;b<s.length;b++){const{name:M,fn:A}=s[b],{x:S,y:C,data:R,reset:B}=await A({x:h,y:m,initialPlacement:i,placement:g,strategy:r,middlewareData:v,rects:u,platform:a,elements:{reference:n,floating:e}});h=S??h,m=C??m,v={...v,[M]:{...v[M],...R}},B&&x<=50&&(x++,typeof B=="object"&&(B.placement&&(g=B.placement),B.rects&&(u=B.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:r}):B.rects),{x:h,y:m}=K4(u,g,l)),b=-1)}return{x:h,y:m,placement:g,strategy:r,middlewareData:v}};function V9(n){return typeof n!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(n):{top:n,right:n,bottom:n,left:n}}function ib(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}async function Pv(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:a,elements:l,strategy:u}=n,{boundary:h="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:v=!1,padding:x=0}=e,b=V9(x),M=l[v?g==="floating"?"reference":"floating":g],A=ib(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(M)))==null||t?M:M.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:h,rootBoundary:m,strategy:u})),S=ib(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:g==="floating"?{...a.floating,x:i,y:r}:a.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),strategy:u}):a[g]);return{top:A.top-S.top+b.top,bottom:S.bottom-A.bottom+b.bottom,left:A.left-S.left+b.left,right:S.right-A.right+b.right}}const Fq=Math.min,Wh=Math.max;function $E(n,e,t){return Wh(n,Fq(e,t))}const J4=n=>({name:"arrow",options:n,async fn(e){const{element:t,padding:i=0}=n??{},{x:r,y:s,placement:a,rects:l,platform:u}=e;if(t==null)return{};const h=V9(i),m={x:r,y:s},g=Kp(a),v=sy(a),x=IT(g),b=await u.getDimensions(t),M=g==="y"?"top":"left",A=g==="y"?"bottom":"right",S=l.reference[x]+l.reference[g]-m[g]-l.floating[x],C=m[g]-l.reference[g],R=await(u.getOffsetParent==null?void 0:u.getOffsetParent(t));let B=R?g==="y"?R.clientHeight||0:R.clientWidth||0:0;B===0&&(B=l.floating[x]);const N=S/2-C/2,U=h[M],I=B-b[x]-h[A],z=B/2-b[x]/2+N,L=$E(U,z,I),O=(v==="start"?h[M]:h[A])>0&&z!==L&&l.reference[x]<=l.floating[x];return{[g]:m[g]-(O?z<U?U-z:I-z:0),data:{[g]:L,centerOffset:z-L}}}}),zq={left:"right",right:"left",bottom:"top",top:"bottom"};function rb(n){return n.replace(/left|right|bottom|top/g,e=>zq[e])}function Hq(n,e,t){t===void 0&&(t=!1);const i=sy(n),r=Kp(n),s=IT(r);let a=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=rb(a)),{main:a,cross:rb(a)}}const Gq={start:"end",end:"start"};function $4(n){return n.replace(/start|end/g,e=>Gq[e])}const k9=["top","right","bottom","left"];k9.reduce((n,e)=>n.concat(e,e+"-start",e+"-end"),[]);const Vq=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t;const{placement:i,middlewareData:r,rects:s,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:v="bestFit",flipAlignment:x=!0,...b}=n,M=D0(i),A=g||(M===a||!x?[rb(a)]:function(z){const L=rb(z);return[$4(z),L,$4(L)]}(a)),S=[a,...A],C=await Pv(e,b),R=[];let B=((t=r.flip)==null?void 0:t.overflows)||[];if(h&&R.push(C[M]),m){const{main:z,cross:L}=Hq(i,s,await(l.isRTL==null?void 0:l.isRTL(u.floating)));R.push(C[z],C[L])}if(B=[...B,{placement:i,overflows:R}],!R.every(z=>z<=0)){var N,U;const z=((N=(U=r.flip)==null?void 0:U.index)!=null?N:0)+1,L=S[z];if(L)return{data:{index:z,overflows:B},reset:{placement:L}};let O="bottom";switch(v){case"bestFit":{var I;const G=(I=B.map($=>[$,$.overflows.filter(Q=>Q>0).reduce((Q,ce)=>Q+ce,0)]).sort(($,Q)=>$[1]-Q[1])[0])==null?void 0:I[0].placement;G&&(O=G);break}case"initialPlacement":O=a}if(i!==O)return{reset:{placement:O}}}return{}}}};function Z4(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function Q4(n){return k9.some(e=>n[e]>=0)}const kq=function(n){let{strategy:e="referenceHidden",...t}=n===void 0?{}:n;return{name:"hide",async fn(i){const{rects:r}=i;switch(e){case"referenceHidden":{const s=Z4(await Pv(i,{...t,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:Q4(s)}}}case"escaped":{const s=Z4(await Pv(i,{...t,altBoundary:!0}),r.floating);return{data:{escapedOffsets:s,escaped:Q4(s)}}}default:return{}}}}},jq=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:i}=e,r=await async function(s,a){const{placement:l,platform:u,elements:h}=s,m=await(u.isRTL==null?void 0:u.isRTL(h.floating)),g=D0(l),v=sy(l),x=Kp(l)==="x",b=["left","top"].includes(g)?-1:1,M=m&&x?-1:1,A=typeof a=="function"?a(s):a;let{mainAxis:S,crossAxis:C,alignmentAxis:R}=typeof A=="number"?{mainAxis:A,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...A};return v&&typeof R=="number"&&(C=v==="end"?-1*R:R),x?{x:C*M,y:S*b}:{x:S*b,y:C*M}}(e,n);return{x:t+r.x,y:i+r.y,data:r}}}};function j9(n){return n==="x"?"y":"x"}const Xq=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:l={fn:A=>{let{x:S,y:C}=A;return{x:S,y:C}}},...u}=n,h={x:t,y:i},m=await Pv(e,u),g=Kp(D0(r)),v=j9(g);let x=h[g],b=h[v];if(s){const A=g==="y"?"bottom":"right";x=$E(x+m[g==="y"?"top":"left"],x,x-m[A])}if(a){const A=v==="y"?"bottom":"right";b=$E(b+m[v==="y"?"top":"left"],b,b-m[A])}const M=l.fn({...e,[g]:x,[v]:b});return{...M,data:{x:M.x-t,y:M.y-i}}}}},Wq=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:r,rects:s,middlewareData:a}=e,{offset:l=0,mainAxis:u=!0,crossAxis:h=!0}=n,m={x:t,y:i},g=Kp(r),v=j9(g);let x=m[g],b=m[v];const M=typeof l=="function"?l({...s,placement:r}):l,A=typeof M=="number"?{mainAxis:M,crossAxis:0}:{mainAxis:0,crossAxis:0,...M};if(u){const N=g==="y"?"height":"width",U=s.reference[g]-s.floating[N]+A.mainAxis,I=s.reference[g]+s.reference[N]-A.mainAxis;x<U?x=U:x>I&&(x=I)}if(h){var S,C,R,B;const N=g==="y"?"width":"height",U=["top","left"].includes(D0(r)),I=s.reference[v]-s.floating[N]+(U&&(S=(C=a.offset)==null?void 0:C[v])!=null?S:0)+(U?0:A.crossAxis),z=s.reference[v]+s.reference[N]+(U?0:(R=(B=a.offset)==null?void 0:B[v])!=null?R:0)-(U?A.crossAxis:0);b<I?b=I:b>z&&(b=z)}return{[g]:x,[v]:b}}}},Yq=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:i,platform:r,elements:s}=e,{apply:a,...l}=n,u=await Pv(e,l),h=D0(t),m=sy(t);let g,v;h==="top"||h==="bottom"?(g=h,v=m===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(v=h,g=m==="end"?"top":"bottom");const x=Wh(u.left,0),b=Wh(u.right,0),M=Wh(u.top,0),A=Wh(u.bottom,0),S={availableHeight:i.floating.height-(["left","right"].includes(t)?2*(M!==0||A!==0?M+A:Wh(u.top,u.bottom)):u[g]),availableWidth:i.floating.width-(["top","bottom"].includes(t)?2*(x!==0||b!==0?x+b:Wh(u.left,u.right)):u[v])},C=await r.getDimensions(s.floating);a==null||a({...e,...S});const R=await r.getDimensions(s.floating);return C.width!==R.width||C.height!==R.height?{reset:{rects:!0}}:{}}}};function X9(n){return n&&n.document&&n.location&&n.alert&&n.setInterval}function nu(n){if(n==null)return window;if(!X9(n)){const e=n.ownerDocument;return e&&e.defaultView||window}return n}function ay(n){return nu(n).getComputedStyle(n)}function qc(n){return X9(n)?"":n?(n.nodeName||"").toLowerCase():""}function W9(){const n=navigator.userAgentData;return n!=null&&n.brands?n.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function oc(n){return n instanceof nu(n).HTMLElement}function Ef(n){return n instanceof nu(n).Element}function FT(n){return typeof ShadowRoot>"u"?!1:n instanceof nu(n).ShadowRoot||n instanceof ShadowRoot}function uS(n){const{overflow:e,overflowX:t,overflowY:i}=ay(n);return/auto|scroll|overlay|hidden/.test(e+i+t)}function qq(n){return["table","td","th"].includes(qc(n))}function eD(n){const e=/firefox/i.test(W9()),t=ay(n);return t.transform!=="none"||t.perspective!=="none"||t.contain==="paint"||["transform","perspective"].includes(t.willChange)||e&&t.willChange==="filter"||e&&!!t.filter&&t.filter!=="none"}function Y9(){return!/^((?!chrome|android).)*safari/i.test(W9())}const tD=Math.min,cv=Math.max,sb=Math.round;function Kc(n,e,t){var i,r,s,a;e===void 0&&(e=!1),t===void 0&&(t=!1);const l=n.getBoundingClientRect();let u=1,h=1;e&&oc(n)&&(u=n.offsetWidth>0&&sb(l.width)/n.offsetWidth||1,h=n.offsetHeight>0&&sb(l.height)/n.offsetHeight||1);const m=Ef(n)?nu(n):window,g=!Y9()&&t,v=(l.left+(g&&(i=(r=m.visualViewport)==null?void 0:r.offsetLeft)!=null?i:0))/u,x=(l.top+(g&&(s=(a=m.visualViewport)==null?void 0:a.offsetTop)!=null?s:0))/h,b=l.width/u,M=l.height/h;return{width:b,height:M,top:x,right:v+b,bottom:x+M,left:v,x:v,y:x}}function vf(n){return(e=n,(e instanceof nu(e).Node?n.ownerDocument:n.document)||window.document).documentElement;var e}function fS(n){return Ef(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function q9(n){return Kc(vf(n)).left+fS(n).scrollLeft}function Kq(n,e,t){const i=oc(e),r=vf(e),s=Kc(n,i&&function(u){const h=Kc(u);return sb(h.width)!==u.offsetWidth||sb(h.height)!==u.offsetHeight}(e),t==="fixed");let a={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(i||!i&&t!=="fixed")if((qc(e)!=="body"||uS(r))&&(a=fS(e)),oc(e)){const u=Kc(e,!0);l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}else r&&(l.x=q9(r));return{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function K9(n){return qc(n)==="html"?n:n.assignedSlot||n.parentNode||(FT(n)?n.host:null)||vf(n)}function nD(n){return oc(n)&&getComputedStyle(n).position!=="fixed"?n.offsetParent:null}function ZE(n){const e=nu(n);let t=nD(n);for(;t&&qq(t)&&getComputedStyle(t).position==="static";)t=nD(t);return t&&(qc(t)==="html"||qc(t)==="body"&&getComputedStyle(t).position==="static"&&!eD(t))?e:t||function(i){let r=K9(i);for(FT(r)&&(r=r.host);oc(r)&&!["html","body"].includes(qc(r));){if(eD(r))return r;r=r.parentNode}return null}(n)||e}function iD(n){if(oc(n))return{width:n.offsetWidth,height:n.offsetHeight};const e=Kc(n);return{width:e.width,height:e.height}}function J9(n){const e=K9(n);return["html","body","#document"].includes(qc(e))?n.ownerDocument.body:oc(e)&&uS(e)?e:J9(e)}function ab(n,e){var t;e===void 0&&(e=[]);const i=J9(n),r=i===((t=n.ownerDocument)==null?void 0:t.body),s=nu(i),a=r?[s].concat(s.visualViewport||[],uS(i)?i:[]):i,l=e.concat(a);return r?l:l.concat(ab(a))}function rD(n,e,t){return e==="viewport"?ib(function(i,r){const s=nu(i),a=vf(i),l=s.visualViewport;let u=a.clientWidth,h=a.clientHeight,m=0,g=0;if(l){u=l.width,h=l.height;const v=Y9();(v||!v&&r==="fixed")&&(m=l.offsetLeft,g=l.offsetTop)}return{width:u,height:h,x:m,y:g}}(n,t)):Ef(e)?function(i,r){const s=Kc(i,!1,r==="fixed"),a=s.top+i.clientTop,l=s.left+i.clientLeft;return{top:a,left:l,x:l,y:a,right:l+i.clientWidth,bottom:a+i.clientHeight,width:i.clientWidth,height:i.clientHeight}}(e,t):ib(function(i){var r;const s=vf(i),a=fS(i),l=(r=i.ownerDocument)==null?void 0:r.body,u=cv(s.scrollWidth,s.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),h=cv(s.scrollHeight,s.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0);let m=-a.scrollLeft+q9(i);const g=-a.scrollTop;return ay(l||s).direction==="rtl"&&(m+=cv(s.clientWidth,l?l.clientWidth:0)-u),{width:u,height:h,x:m,y:g}}(vf(n)))}function Jq(n){const e=ab(n),t=["absolute","fixed"].includes(ay(n).position)&&oc(n)?ZE(n):n;return Ef(t)?e.filter(i=>Ef(i)&&function(r,s){const a=s.getRootNode==null?void 0:s.getRootNode();if(r.contains(s))return!0;if(a&&FT(a)){let l=s;do{if(l&&r===l)return!0;l=l.parentNode||l.host}while(l)}return!1}(i,t)&&qc(i)!=="body"):[]}const $q={getClippingRect:function(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const s=[...t==="clippingAncestors"?Jq(e):[].concat(t),i],a=s[0],l=s.reduce((u,h)=>{const m=rD(e,h,r);return u.top=cv(m.top,u.top),u.right=tD(m.right,u.right),u.bottom=tD(m.bottom,u.bottom),u.left=cv(m.left,u.left),u},rD(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(n){let{rect:e,offsetParent:t,strategy:i}=n;const r=oc(t),s=vf(t);if(t===s)return e;let a={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if((r||!r&&i!=="fixed")&&((qc(t)!=="body"||uS(s))&&(a=fS(t)),oc(t))){const u=Kc(t,!0);l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}return{...e,x:e.x-a.scrollLeft+l.x,y:e.y-a.scrollTop+l.y}},isElement:Ef,getDimensions:iD,getOffsetParent:ZE,getDocumentElement:vf,getElementRects:n=>{let{reference:e,floating:t,strategy:i}=n;return{reference:Kq(e,ZE(t),i),floating:{...iD(t),x:0,y:0}}},getClientRects:n=>Array.from(n.getClientRects()),isRTL:n=>ay(n).direction==="rtl"};function Zq(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:a=!0,animationFrame:l=!1}=i,u=r&&!l,h=s&&!l,m=u||h?[...Ef(n)?ab(n):[],...ab(e)]:[];m.forEach(b=>{u&&b.addEventListener("scroll",t,{passive:!0}),h&&b.addEventListener("resize",t)});let g,v=null;if(a){let b=!0;v=new ResizeObserver(()=>{b||t(),b=!1}),Ef(n)&&!l&&v.observe(n),v.observe(e)}let x=l?Kc(n):null;return l&&function b(){const M=Kc(n);!x||M.x===x.x&&M.y===x.y&&M.width===x.width&&M.height===x.height||t(),x=M,g=requestAnimationFrame(b)}(),t(),()=>{var b;m.forEach(M=>{u&&M.removeEventListener("scroll",t),h&&M.removeEventListener("resize",t)}),(b=v)==null||b.disconnect(),v=null,l&&cancelAnimationFrame(g)}}const Qq=(n,e,t)=>Iq(n,e,{platform:$q,...t});var QE=typeof document<"u"?F.useLayoutEffect:F.useEffect;function eM(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(i=t;i--!==0;)if(!eM(n[i],e[i]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){const s=r[i];if(!(s==="_owner"&&n.$$typeof)&&!eM(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function eK(n){const e=F.useRef(n);return QE(()=>{e.current=n}),e}function tK(n){let{middleware:e,placement:t="bottom",strategy:i="absolute",whileElementsMounted:r}=n===void 0?{}:n;const s=F.useRef(null),a=F.useRef(null),l=eK(r),u=F.useRef(null),[h,m]=F.useState({x:null,y:null,strategy:i,placement:t,middlewareData:{}}),[g,v]=F.useState(e);eM(g==null?void 0:g.map(R=>{let{options:B}=R;return B}),e==null?void 0:e.map(R=>{let{options:B}=R;return B}))||v(e);const x=F.useCallback(()=>{!s.current||!a.current||Qq(s.current,a.current,{middleware:g,placement:t,strategy:i}).then(R=>{b.current&&lS.flushSync(()=>{m(R)})})},[g,t,i]);QE(()=>{b.current&&x()},[x]);const b=F.useRef(!1);QE(()=>(b.current=!0,()=>{b.current=!1}),[]);const M=F.useCallback(()=>{if(typeof u.current=="function"&&(u.current(),u.current=null),s.current&&a.current)if(l.current){const R=l.current(s.current,a.current,x);u.current=R}else x()},[x,l]),A=F.useCallback(R=>{s.current=R,M()},[M]),S=F.useCallback(R=>{a.current=R,M()},[M]),C=F.useMemo(()=>({reference:s,floating:a}),[]);return F.useMemo(()=>({...h,update:x,refs:C,reference:A,floating:S}),[h,x,C,A,S])}const nK=n=>{const{element:e,padding:t}=n;function i(r){return Object.prototype.hasOwnProperty.call(r,"current")}return{name:"arrow",options:n,fn(r){return i(e)?e.current!=null?J4({element:e.current,padding:t}).fn(r):{}:e?J4({element:e,padding:t}).fn(r):{}}}},iK=F.forwardRef((n,e)=>{const{children:t,width:i=10,height:r=5,...s}=n;return F.createElement(Af.svg,gi({},s,{ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:F.createElement("polygon",{points:"0,0 30,0 15,10"}))}),rK=iK;function sK(n){const[e,t]=F.useState(void 0);return gf(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let a,l;if("borderBoxSize"in s){const u=s.borderBoxSize,h=Array.isArray(u)?u[0]:u;a=h.inlineSize,l=h.blockSize}else a=n.offsetWidth,l=n.offsetHeight;t({width:a,height:l})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}const $9="Popper",[zT,Z9]=H9($9),[aK,Q9]=zT($9),oK=n=>{const{__scopePopper:e,children:t}=n,[i,r]=F.useState(null);return F.createElement(aK,{scope:e,anchor:i,onAnchorChange:r},t)},lK="PopperAnchor",cK=F.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...r}=n,s=Q9(lK,t),a=F.useRef(null),l=Wp(e,a);return F.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||a.current)}),i?null:F.createElement(Af.div,gi({},r,{ref:l}))}),ob="PopperContent",[uK,fK]=zT(ob),[hK,dK]=zT(ob,{hasParent:!1,positionUpdateFns:new Set}),pK=F.forwardRef((n,e)=>{var t,i,r,s,a,l,u,h;const{__scopePopper:m,side:g="bottom",sideOffset:v=0,align:x="center",alignOffset:b=0,arrowPadding:M=0,collisionBoundary:A=[],collisionPadding:S=0,sticky:C="partial",hideWhenDetached:R=!1,avoidCollisions:B=!0,onPlaced:N,...U}=n,I=Q9(ob,m),[z,L]=F.useState(null),O=Wp(e,V=>L(V)),[G,$]=F.useState(null),Q=sK(G),ce=(t=Q==null?void 0:Q.width)!==null&&t!==void 0?t:0,fe=(i=Q==null?void 0:Q.height)!==null&&i!==void 0?i:0,k=g+(x!=="center"?"-"+x:""),K=typeof S=="number"?S:{top:0,right:0,bottom:0,left:0,...S},ee=Array.isArray(A)?A:[A],me=ee.length>0,W={padding:K,boundary:ee.filter(xK),altBoundary:me},{reference:ae,floating:Se,strategy:Ae,x:ie,y:_e,placement:Ue,middlewareData:ke,update:Ye}=tK({strategy:"fixed",placement:k,whileElementsMounted:Zq,middleware:[_K(),jq({mainAxis:v+fe,alignmentAxis:b}),B?Xq({mainAxis:!0,crossAxis:!1,limiter:C==="partial"?Wq():void 0,...W}):void 0,G?nK({element:G,padding:M}):void 0,B?Vq({...W}):void 0,Yq({...W,apply:({elements:V,availableWidth:te,availableHeight:ge})=>{V.floating.style.setProperty("--radix-popper-available-width",`${te}px`),V.floating.style.setProperty("--radix-popper-available-height",`${ge}px`)}}),bK({arrowWidth:ce,arrowHeight:fe}),R?kq({strategy:"referenceHidden"}):void 0].filter(yK)});gf(()=>{ae(I.anchor)},[ae,I.anchor]);const gt=ie!==null&&_e!==null,[_t,an]=eP(Ue),Pt=qp(N);gf(()=>{gt&&(Pt==null||Pt())},[gt,Pt]);const bt=(r=ke.arrow)===null||r===void 0?void 0:r.x,Z=(s=ke.arrow)===null||s===void 0?void 0:s.y,Qe=((a=ke.arrow)===null||a===void 0?void 0:a.centerOffset)!==0,[Xe,je]=F.useState();gf(()=>{z&&je(window.getComputedStyle(z).zIndex)},[z]);const{hasParent:He,positionUpdateFns:lt}=dK(ob,m),Ge=!He;F.useLayoutEffect(()=>{if(!Ge)return lt.add(Ye),()=>{lt.delete(Ye)}},[Ge,lt,Ye]),gf(()=>{Ge&&gt&&Array.from(lt).reverse().forEach(V=>requestAnimationFrame(V))},[Ge,gt,lt]);const J={"data-side":_t,"data-align":an,...U,ref:O,style:{...U.style,animation:gt?void 0:"none",opacity:(l=ke.hide)!==null&&l!==void 0&&l.referenceHidden?0:void 0}};return F.createElement("div",{ref:Se,"data-radix-popper-content-wrapper":"",style:{position:Ae,left:0,top:0,transform:gt?`translate3d(${Math.round(ie)}px, ${Math.round(_e)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Xe,"--radix-popper-transform-origin":[(u=ke.transformOrigin)===null||u===void 0?void 0:u.x,(h=ke.transformOrigin)===null||h===void 0?void 0:h.y].join(" ")},dir:n.dir},F.createElement(uK,{scope:m,placedSide:_t,onArrowChange:$,arrowX:bt,arrowY:Z,shouldHideArrow:Qe},Ge?F.createElement(hK,{scope:m,hasParent:!0,positionUpdateFns:lt},F.createElement(Af.div,J)):F.createElement(Af.div,J)))}),mK="PopperArrow",gK={top:"bottom",right:"left",bottom:"top",left:"right"},vK=F.forwardRef(function(e,t){const{__scopePopper:i,...r}=e,s=fK(mK,i),a=gK[s.placedSide];return F.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},F.createElement(rK,gi({},r,{ref:t,style:{...r.style,display:"block"}})))});function yK(n){return n!==void 0}function xK(n){return n!==null}const _K=()=>({name:"anchorCssProperties",fn(n){const{rects:e,elements:t}=n,{width:i,height:r}=e.reference;return t.floating.style.setProperty("--radix-popper-anchor-width",`${i}px`),t.floating.style.setProperty("--radix-popper-anchor-height",`${r}px`),{}}}),bK=n=>({name:"transformOrigin",options:n,fn(e){var t,i,r,s,a;const{placement:l,rects:u,middlewareData:h}=e,g=((t=h.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,v=g?0:n.arrowWidth,x=g?0:n.arrowHeight,[b,M]=eP(l),A={start:"0%",center:"50%",end:"100%"}[M],S=((i=(r=h.arrow)===null||r===void 0?void 0:r.x)!==null&&i!==void 0?i:0)+v/2,C=((s=(a=h.arrow)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0)+x/2;let R="",B="";return b==="bottom"?(R=g?A:`${S}px`,B=`${-x}px`):b==="top"?(R=g?A:`${S}px`,B=`${u.floating.height+x}px`):b==="right"?(R=`${-x}px`,B=g?A:`${C}px`):b==="left"&&(R=`${u.floating.width+x}px`,B=g?A:`${C}px`),{data:{x:R,y:B}}}});function eP(n){const[e,t="center"]=n.split("-");return[e,t]}const SK=oK,AK=cK,EK=pK,MK=vK;function TK(n,e){return F.useReducer((t,i)=>{const r=e[t][i];return r??t},n)}const tP=n=>{const{present:e,children:t}=n,i=CK(e),r=typeof t=="function"?t({present:i.isPresent}):F.Children.only(t),s=Wp(i.ref,r.ref);return typeof t=="function"||i.isPresent?F.cloneElement(r,{ref:s}):null};tP.displayName="Presence";function CK(n){const[e,t]=F.useState(),i=F.useRef({}),r=F.useRef(n),s=F.useRef("none"),a=n?"mounted":"unmounted",[l,u]=TK(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return F.useEffect(()=>{const h=Hx(i.current);s.current=l==="mounted"?h:"none"},[l]),gf(()=>{const h=i.current,m=r.current;if(m!==n){const v=s.current,x=Hx(h);n?u("MOUNT"):x==="none"||(h==null?void 0:h.display)==="none"?u("UNMOUNT"):u(m&&v!==x?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,u]),gf(()=>{if(e){const h=g=>{const x=Hx(i.current).includes(g.animationName);g.target===e&&x&&lS.flushSync(()=>u("ANIMATION_END"))},m=g=>{g.target===e&&(s.current=Hx(i.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:F.useCallback(h=>{h&&(i.current=getComputedStyle(h)),t(h)},[])}}function Hx(n){return(n==null?void 0:n.animationName)||"none"}function wK({prop:n,defaultProp:e,onChange:t=()=>{}}){const[i,r]=RK({defaultProp:e,onChange:t}),s=n!==void 0,a=s?n:i,l=qp(t),u=F.useCallback(h=>{if(s){const g=typeof h=="function"?h(n):h;g!==n&&l(g)}else r(h)},[s,n,r,l]);return[a,u]}function RK({defaultProp:n,onChange:e}){const t=F.useState(n),[i]=t,r=F.useRef(i),s=qp(e);return F.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),t}const DK=F.forwardRef((n,e)=>F.createElement(Af.span,gi({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),BK=DK,[hS,$oe]=H9("Tooltip",[Z9]),dS=Z9(),OK="TooltipProvider",tM="tooltip.open",[Zoe,HT]=hS(OK),GT="Tooltip",[PK,pS]=hS(GT),UK=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:r=!1,onOpenChange:s,disableHoverableContent:a,delayDuration:l}=n,u=HT(GT,n.__scopeTooltip),h=dS(e),[m,g]=F.useState(null),v=Nq(),x=F.useRef(0),b=a??u.disableHoverableContent,M=l??u.delayDuration,A=F.useRef(!1),[S=!1,C]=wK({prop:i,defaultProp:r,onChange:I=>{I?(u.onOpen(),document.dispatchEvent(new CustomEvent(tM))):u.onClose(),s==null||s(I)}}),R=F.useMemo(()=>S?A.current?"delayed-open":"instant-open":"closed",[S]),B=F.useCallback(()=>{window.clearTimeout(x.current),A.current=!1,C(!0)},[C]),N=F.useCallback(()=>{window.clearTimeout(x.current),C(!1)},[C]),U=F.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{A.current=!0,C(!0)},M)},[M,C]);return F.useEffect(()=>()=>window.clearTimeout(x.current),[]),F.createElement(SK,h,F.createElement(PK,{scope:e,contentId:v,open:S,stateAttribute:R,trigger:m,onTriggerChange:g,onTriggerEnter:F.useCallback(()=>{u.isOpenDelayed?U():B()},[u.isOpenDelayed,U,B]),onTriggerLeave:F.useCallback(()=>{b?N():window.clearTimeout(x.current)},[N,b]),onOpen:B,onClose:N,disableHoverableContent:b},t))},sD="TooltipTrigger",LK=F.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=pS(sD,t),s=HT(sD,t),a=dS(t),l=F.useRef(null),u=Wp(e,l,r.onTriggerChange),h=F.useRef(!1),m=F.useRef(!1),g=F.useCallback(()=>h.current=!1,[]);return F.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),F.createElement(AK,gi({asChild:!0},a),F.createElement(Af.button,gi({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},i,{ref:u,onPointerMove:Gc(n.onPointerMove,v=>{v.pointerType!=="touch"&&!m.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),m.current=!0)}),onPointerLeave:Gc(n.onPointerLeave,()=>{r.onTriggerLeave(),m.current=!1}),onPointerDown:Gc(n.onPointerDown,()=>{h.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:Gc(n.onFocus,()=>{h.current||r.onOpen()}),onBlur:Gc(n.onBlur,r.onClose),onClick:Gc(n.onClick,r.onClose)})))}),NK="TooltipPortal",[Qoe,IK]=hS(NK,{forceMount:void 0}),Uv="TooltipContent",FK=F.forwardRef((n,e)=>{const t=IK(Uv,n.__scopeTooltip),{forceMount:i=t.forceMount,side:r="top",...s}=n,a=pS(Uv,n.__scopeTooltip);return F.createElement(tP,{present:i||a.open},a.disableHoverableContent?F.createElement(nP,gi({side:r},s,{ref:e})):F.createElement(zK,gi({side:r},s,{ref:e})))}),zK=F.forwardRef((n,e)=>{const t=pS(Uv,n.__scopeTooltip),i=HT(Uv,n.__scopeTooltip),r=F.useRef(null),s=Wp(e,r),[a,l]=F.useState(null),{trigger:u,onClose:h}=t,m=r.current,{onPointerInTransitChange:g}=i,v=F.useCallback(()=>{l(null),g(!1)},[g]),x=F.useCallback((b,M)=>{const A=b.currentTarget,S={x:b.clientX,y:b.clientY},C=jK(S,A.getBoundingClientRect()),R=C==="right"||C==="bottom"?-5:5,N=C==="right"||C==="left"?{x:b.clientX+R,y:b.clientY}:{x:b.clientX,y:b.clientY+R},U=XK(M.getBoundingClientRect()),I=YK([N,...U]);l(I),g(!0)},[g]);return F.useEffect(()=>()=>v(),[v]),F.useEffect(()=>{if(u&&m){const b=A=>x(A,m),M=A=>x(A,u);return u.addEventListener("pointerleave",b),m.addEventListener("pointerleave",M),()=>{u.removeEventListener("pointerleave",b),m.removeEventListener("pointerleave",M)}}},[u,m,x,v]),F.useEffect(()=>{if(a){const b=M=>{const A=M.target,S={x:M.clientX,y:M.clientY},C=(u==null?void 0:u.contains(A))||(m==null?void 0:m.contains(A)),R=!WK(S,a);C?v():R&&(v(),h())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[u,m,a,h,v]),F.createElement(nP,gi({},n,{ref:s}))}),[HK,GK]=hS(GT,{isInside:!1}),nP=F.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:a,...l}=n,u=pS(Uv,t),h=dS(t),{onClose:m}=u;return F.useEffect(()=>(document.addEventListener(tM,m),()=>document.removeEventListener(tM,m)),[m]),F.useEffect(()=>{if(u.trigger){const g=v=>{const x=v.target;x!=null&&x.contains(u.trigger)&&m()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[u.trigger,m]),F.createElement(Bq,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:g=>g.preventDefault(),onDismiss:m},F.createElement(EK,gi({"data-state":u.stateAttribute},h,l,{ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),F.createElement(P9,null,i),F.createElement(HK,{scope:t,isInside:!0},F.createElement(BK,{id:u.contentId,role:"tooltip"},r||i))))}),VK="TooltipArrow",kK=F.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=dS(t);return GK(VK,t).isInside?null:F.createElement(MK,gi({},r,i,{ref:e}))});function jK(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),r=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,i,r,s)){case s:return"left";case r:return"right";case t:return"top";case i:return"bottom";default:return null}}function XK(n){const{top:e,right:t,bottom:i,left:r}=n;return[{x:r,y:e},{x:t,y:e},{x:t,y:i},{x:r,y:i}]}function WK(n,e){const{x:t,y:i}=n;let r=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const l=e[s].x,u=e[s].y,h=e[a].x,m=e[a].y;u>i!=m>i&&t<(h-l)*(i-u)/(m-u)+l&&(r=!r)}return r}function YK(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),qK(e)}function qK(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const r=n[i];for(;e.length>=2;){const s=e[e.length-1],a=e[e.length-2];if((s.x-a.x)*(r.y-a.y)>=(s.y-a.y)*(r.x-a.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const r=n[i];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(r.y-a.y)>=(s.y-a.y)*(r.x-a.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const KK=UK,JK=LK,$K=FK,ZK=kK;function QK(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function ui(n,e){if(n==null)return{};var t=QK(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}let Oi;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(Oi||(Oi={}));const eJ={[Oi.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[Oi.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Oi.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[Oi.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[Oi.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[Oi.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[Oi.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[Oi.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[Oi.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[Oi.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[Oi.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function iP(n,e,...t){const[i,...r]=eJ[e](...t);console[n]("LEVA: "+i,...r)}const kc=iP.bind(null,"warn"),tJ=iP.bind(null,"log"),nJ=["value"],iJ=["schema"],rJ=["value"],rP=[],b0={};function aD(n){let{value:e}=n,t=ui(n,nJ);for(let i of rP){const r=i(e,t);if(r)return r}}function iu(n,e){let{schema:t}=e,i=ui(e,iJ);if(n in b0){kc(Oi.ALREADY_REGISTERED_TYPE,n);return}rP.push((r,s)=>t(r,s)&&n),b0[n]=i}function M2(n,e,t,i){const{normalize:r}=b0[n];if(r)return r(e,t,i);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,a=ui(e,rJ);return{value:s,settings:a}}function sJ(n,e,t,i,r,s){const{sanitize:a}=b0[n];return a?a(e,t,i,r,s):e}function oD(n,e,t){const{format:i}=b0[n];return i?i(e,t):e}function aJ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function nn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lD(Object(t),!0).forEach(function(i){aJ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):lD(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const Mf=(n,e,t)=>n>t?t:n<e?e:n,oJ=n=>{if(n===""||typeof n=="number")return n;try{const e=cf(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},lJ=Math.log(10);function cD(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/lJ)+1,i=Math.floor(Math.log10(Math.abs(n))),r=Math.pow(10,i-t);return Math.max(r,.001)}const lb=(n,e,t)=>t===e?0:(Mf(n,e,t)-e)/(t-e),cb=(n,e,t)=>n*(t-e)+e,cJ=()=>"_"+Math.random().toString(36).substr(2,9),uD=/\(([0-9+\-*/^ .]+)\)/,fD=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,hD=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,dD=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,pD=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,mD=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function cf(n){if(isNaN(Number(n)))if(uD.test(n)){const e=n.replace(uD,(t,i)=>String(cf(i)));return cf(e)}else if(fD.test(n)){const e=n.replace(fD,(t,i,r)=>String(Math.pow(Number(i),Number(r))));return cf(e)}else if(hD.test(n)){const e=n.replace(hD,(t,i,r)=>String(Number(i)*Number(r)));return cf(e)}else if(dD.test(n)){const e=n.replace(dD,(t,i,r)=>{if(r!=0)return String(Number(i)/Number(r));throw new Error("Division by zero")});return cf(e)}else if(pD.test(n)){const e=n.replace(pD,(t,i,r)=>String(Number(i)+Number(r)));return cf(e)}else if(mD.test(n)){const e=n.replace(mD,(t,i,r)=>String(Number(i)-Number(r)));return cf(e)}else return Number(n);return Number(n)}function uJ(n,e){const t=nn({},n);return e.forEach(i=>i in n&&delete t[i]),t}function fJ(n,e){return n.reduce((t,i,r)=>Object.assign(t,{[e[r]]:i}),{})}function sP(n){return Object.prototype.toString.call(n)==="[object Object]"}const hJ=n=>sP(n)&&Object.keys(n).length===0;let Ql;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(Ql||(Ql={}));let cl;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(cl||(cl={}));const dJ=["type","__customInput"],pJ=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],mJ=["type"];function aP(n,e,t={},i){var r,s;if(typeof n!="object"||Array.isArray(n))return{type:i,input:n,options:nn({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:N,__customInput:U}=n,I=ui(n,dJ);return aP(U,e,I,N)}const{render:a,label:l,optional:u,order:h=0,disabled:m,hint:g,onChange:v,onEditStart:x,onEditEnd:b,transient:M}=n,A=ui(n,pJ),S=nn({render:a,key:e,label:l??e,hint:g,transient:M??!!v,onEditStart:x,onEditEnd:b,disabled:m,optional:u,order:h},t);let{type:C}=A,R=ui(A,mJ);if(C=i??C,C in Ql)return{type:C,input:R,options:S};let B;return i&&sP(R)&&"value"in R?B=R.value:B=hJ(R)?void 0:R,{type:C,input:B,options:nn(nn({},S),{},{onChange:v,optional:(r=S.optional)!==null&&r!==void 0?r:!1,disabled:(s=S.disabled)!==null&&s!==void 0?s:!1})}}function gJ(n,e,t,i){const r=aP(n,e),{type:s,input:a,options:l}=r;if(s)return s in Ql?r:{type:s,input:M2(s,a,t,i),options:l};let u=aD(a);return u?{type:u,input:M2(u,a,t,i),options:l}:(u=aD({value:a}),u?{type:u,input:M2(u,{value:a},t,i),options:l}:!1)}function gD(n,e,t,i,r){const{value:s,type:a,settings:l}=n;n.value=oP({type:a,value:s,settings:l},e,t,i),n.fromPanel=r}const vJ=function(e,t,i){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=i};function oP({type:n,value:e,settings:t},i,r,s){const a=n!=="SELECT"&&typeof i=="function"?i(e):i;let l;try{l=sJ(n,a,t,e,r,s)}catch(u){throw new vJ(`The value \`${i}\` did not result in a correct value.`,e,u)}return tb(l,e)?e:l}const lP=(n,e,t=!1)=>{let i=0;return function(){const r=arguments,s=t&&!i,a=()=>n.apply(this,r);window.clearTimeout(i),i=window.setTimeout(a,e),s&&a()}},cP=n=>n.shiftKey?5:n.altKey?1/5:1,yJ=["value"],xJ=["min","max"],_J=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},uP=(n,{min:e=-1/0,max:t=1/0,suffix:i})=>{const r=parseFloat(n);if(n===""||isNaN(r))throw Error("Invalid number");const s=Mf(r,e,t);return i?s+i:s},bJ=(n,{pad:e=0,suffix:t})=>{const i=parseFloat(n).toFixed(e);return t?i+t:i},fP=n=>{let{value:e}=n,t=ui(n,yJ);const{min:i=-1/0,max:r=1/0}=t,s=ui(t,xJ);let a=parseFloat(e);const l=typeof e=="string"?e.substring((""+a).length):void 0;a=Mf(a,i,r);let u=t.step;u||(Number.isFinite(i)?Number.isFinite(r)?u=+(Math.abs(r-i)/100).toPrecision(1):u=+(Math.abs(a-i)/100).toPrecision(1):Number.isFinite(r)&&(u=+(Math.abs(r-a)/100).toPrecision(1)));const h=u?cD(u)*10:cD(a);u=u||h/10;const m=Math.round(Mf(Math.log10(1/h),0,2));return{value:l?a+l:a,settings:nn({initialValue:a,step:u,pad:m,min:i,max:r,suffix:l},s)}},hP=(n,{step:e,initialValue:t})=>{const i=Math.round((n-t)/e);return t+i*e};var dP=Object.freeze({__proto__:null,schema:_J,sanitize:uP,format:bJ,normalize:fP,sanitizeStep:hP});function hr(){return hr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hr.apply(this,arguments)}const pP=F.createContext({});function xs(){return F.useContext(pP)}const mP=F.createContext(null),gP=F.createContext(null),vP=F.createContext(null);function oy(){return F.useContext(gP)}function SJ(){return F.useContext(vP)}const AJ=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function Gx(n,e){const[t,i]=n.split(" "),r={};return t!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),i&&(r.backgroundColor=i),r}const Fg={$inputStyle:()=>n=>Gx(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>Gx(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>Gx(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>Gx(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:It,css:ele,createTheme:tle,globalCss:EJ,keyframes:nle}=Mq({prefix:"leva",theme:AJ(),utils:nn(nn({},Fg),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":Fg.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":Fg.$focusStyle()(n)}),$hover:n=>({"&:hover":Fg.$hoverStyle()(n)}),$active:n=>({"&:active":Fg.$activeStyle()(n)})})}),MJ=EJ({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function Jc(n,e){const{theme:t}=F.useContext(mP);if(!(n in t)||!(e in t[n]))return kc(Oi.THEME_ERROR,n,e),"";let i=e;for(;;){let r=t[n][i];if(typeof r=="string"&&r.charAt(0)==="$")i=r.substr(1);else return r}}const yP=It("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),xP=It("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${yP}`]:{paddingLeft:0}}),TJ=It(xP,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),CJ=It("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),wJ=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],RJ=["onUpdate"];function VT(n){let{innerLabel:e,value:t,onUpdate:i,onChange:r,onKeyDown:s,type:a,id:l,inputType:u="text",rows:h=0}=n,m=ui(n,wJ);const{id:g,emitOnEditStart:v,emitOnEditEnd:x,disabled:b}=xs(),M=l||g,A=F.useRef(null),S=h>0,C=S?"textarea":"input",R=F.useCallback(U=>I=>{const z=I.currentTarget.value;U(z)},[]);oe.useEffect(()=>{const U=A.current,I=R(z=>{i(z),x()});return U==null||U.addEventListener("blur",I),()=>U==null?void 0:U.removeEventListener("blur",I)},[R,i,x]);const B=F.useCallback(U=>{U.key==="Enter"&&R(i)(U)},[R,i]),N=Object.assign({as:C},S?{rows:h}:{},m);return oe.createElement(CJ,{textArea:S},e&&typeof e=="string"?oe.createElement(xP,null,e):e,oe.createElement(yP,hr({levaType:a,ref:A,id:M,type:u,autoComplete:"off",spellCheck:"false",value:t,onChange:R(r),onFocus:()=>v(),onKeyPress:B,onKeyDown:s,disabled:b},N)))}function DJ(n){let{onUpdate:e}=n,t=ui(n,RJ);const i=F.useCallback(s=>e(oJ(s)),[e]),r=F.useCallback(s=>{const a=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(a){s.preventDefault();const l=s.altKey?.1:s.shiftKey?10:1;e(u=>parseFloat(u)+a*l)}},[e]);return oe.createElement(VT,hr({},t,{onUpdate:i,onKeyDown:r,type:"number"}))}const ub=It("div",{}),nM=It("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),BJ=It("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${nM}::after`]:{opacity:.6},[`${ub}:hover > & + ${nM}::after`]:{opacity:.6},[`${ub}:hover > & > svg`]:{opacity:1}}),_P=It("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${ub}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),bP=It("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${_P} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),SP=It(bP,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),OJ=It("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),PJ=It("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),iM=It("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),UJ=It("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${iM}`]:{pointerEvents:"auto"}}}}}),AP=It("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),LJ=It("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),NJ=It(ZK,{fill:"$toolTipBackground"});function kT({children:n}){const{className:e}=F.useContext(mP);return oe.createElement(YY,{className:e},n)}const IJ=["align"];function FJ(){const{id:n,disable:e,disabled:t}=xs();return oe.createElement(oe.Fragment,null,oe.createElement(PJ,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),oe.createElement("label",{htmlFor:n+"__disable"}))}function zJ(n){const{id:e,optional:t,hint:i}=xs(),r=n.htmlFor||(e?{htmlFor:e}:null),s=!i&&typeof n.children=="string"?{title:n.children}:null;return oe.createElement(oe.Fragment,null,t&&oe.createElement(FJ,null),i!==void 0?oe.createElement(KK,null,oe.createElement(JK,{asChild:!0},oe.createElement(iM,hr({},r,n))),oe.createElement($K,{side:"top",sideOffset:2},oe.createElement(LJ,null,i,oe.createElement(NJ,null)))):oe.createElement(iM,hr({},r,s,n)))}function hl(n){let{align:e}=n,t=ui(n,IJ);const{value:i,label:r,key:s,disabled:a}=xs(),{hideCopyButton:l}=SJ(),u=!l&&s!==void 0,[h,m]=F.useState(!1),g=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:i??""})),m(!0)}catch{kc(Oi.CLIPBOARD_ERROR,{[s]:i})}};return oe.createElement(OJ,{align:e,onPointerLeave:()=>m(!1)},oe.createElement(zJ,t),u&&!a&&oe.createElement("div",{title:`Click to copy ${typeof r=="string"?r:s} value`},h?oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},oe.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),oe.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):oe.createElement("svg",{onClick:g,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},oe.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),oe.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const HJ=["toggled"],GJ=It("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function jT(n){let{toggled:e}=n,t=ui(n,HJ);return oe.createElement(GJ,hr({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),oe.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const VJ=["input"];function So(n){let{input:e}=n,t=ui(n,VJ);return e?oe.createElement(SP,t):oe.createElement(bP,t)}function EP({value:n,type:e,settings:t,setValue:i}){const[r,s]=F.useState(oD(e,n,t)),a=F.useRef(n),l=F.useRef(t);l.current=t;const u=F.useCallback(m=>s(oD(e,m,l.current)),[e]),h=F.useCallback(m=>{try{i(m)}catch(g){const{type:v,previousValue:x}=g;if(v!=="LEVA_ERROR")throw g;u(x)}},[u,i]);return F.useEffect(()=>{tb(n,a.current)||u(n),a.current=n},[n,u]),{displayValue:r,onChange:s,onUpdate:h}}function ly(n,e){const{emitOnEditStart:t,emitOnEditEnd:i}=xs();return pX(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),i==null||i()),s},e)}function kJ(n){const e=F.useRef(null),t=F.useRef(null),i=F.useRef(!1);return F.useEffect(()=>{const r=lP(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",r),i.current||(r(),i.current=!0),()=>window.removeEventListener("resize",r)},[n]),F.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function MP(){const n=F.useRef(null),e=F.useRef({x:0,y:0}),t=F.useCallback(i=>{Object.assign(e.current,i),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const jJ=["__refCount"],T2=(n,e)=>{if(!n[e])return null;const t=n[e];return ui(t,jJ)};function XJ(n){const e=oy(),[t,i]=F.useState(T2(e.getData(),n)),r=F.useCallback(h=>e.setValueAtPath(n,h,!0),[n,e]),s=F.useCallback(h=>e.setSettingsAtPath(n,h),[n,e]),a=F.useCallback(h=>e.disableInputAtPath(n,h),[n,e]),l=F.useCallback(()=>e.emitOnEditStart(n),[n,e]),u=F.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return F.useEffect(()=>{i(T2(e.getData(),n));const h=e.useStore.subscribe(m=>T2(m.data,n),i,{equalityFn:U9});return()=>h()},[e,n]),[t,{set:r,setSettings:s,disable:a,storeId:e.storeId,emitOnEditStart:l,emitOnEditEnd:u}]}const WJ=It("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),TP=It("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),rM=It("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),CP=It("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),wP=It("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function YJ({value:n,min:e,max:t,onDrag:i,step:r,initialValue:s}){const a=F.useRef(null),l=F.useRef(null),u=F.useRef(0),h=Jc("sizes","scrubberWidth"),m=ly(({event:v,first:x,xy:[b],movement:[M],memo:A})=>{if(x){const{width:C,left:R}=a.current.getBoundingClientRect();u.current=C-parseFloat(h),A=(v==null?void 0:v.target)===l.current?n:cb((b-R)/C,e,t)}const S=A+cb(M/u.current,0,t-e);return i(hP(S,{step:r,initialValue:s})),A}),g=lb(n,e,t);return oe.createElement(CP,hr({ref:a},m()),oe.createElement(TP,null,oe.createElement(wP,{style:{left:0,right:`${(1-g)*100}%`}})),oe.createElement(rM,{ref:l,style:{left:`calc(${g} * (100% - ${h}))`}}))}const qJ=oe.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:i})=>{const[r,s]=F.useState(!1),a=ly(({active:l,delta:[u],event:h,memo:m=0,first:g,last:v,target:x})=>(g&&x.requestPointerLock(),v&&document.exitPointerLock(),s(l),m+=u/2,Math.abs(m)>=1&&(e(b=>parseFloat(b)+Math.floor(m)*t*cP(h)),m=0),m));return oe.createElement(TJ,hr({dragging:r,title:n.length>1?n:""},a()),n.slice(0,i))});function RP({label:n,id:e,displayValue:t,onUpdate:i,onChange:r,settings:s,innerLabelTrim:a=1}){const l=a>0&&oe.createElement(qJ,{label:n,step:s.step,onUpdate:i,innerLabelTrim:a});return oe.createElement(DJ,{id:e,value:String(t),onUpdate:i,onChange:r,innerLabel:l})}function KJ(){const n=xs(),{label:e,value:t,onUpdate:i,settings:r,id:s}=n,{min:a,max:l}=r,u=l!==1/0&&a!==-1/0;return oe.createElement(So,{input:!0},oe.createElement(hl,null,e),oe.createElement(WJ,{hasRange:u},u&&oe.createElement(YJ,hr({value:parseFloat(t),onDrag:i},r)),oe.createElement(RP,hr({},n,{id:s,label:"value",innerLabelTrim:u?0:1}))))}const{sanitizeStep:JJ}=dP,$J=ui(dP,["sanitizeStep"]);var ZJ=nn({component:KJ},$J);const QJ=(n,e)=>fa().schema({options:fa().passesAnyOf(fa().object(),fa().array())}).test(e),e$=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},t$=(n,{values:e})=>e.indexOf(n),n$=n=>{let{value:e,options:t}=n,i,r;return Array.isArray(t)?(r=t,i=t.map(s=>String(s))):(r=Object.values(t),i=Object.keys(t)),"value"in n?r.includes(e)||(i.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:i,values:r}}};var i$=Object.freeze({__proto__:null,schema:QJ,sanitize:e$,format:t$,normalize:n$});const r$=It("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),sM=It("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),s$=It("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${sM}:focus + &`]:{$focusStyle:""},[`${sM}:hover + &`]:{$hoverStyle:""}});function a$({displayValue:n,value:e,onUpdate:t,id:i,settings:r,disabled:s}){const{keys:a,values:l}=r,u=F.useRef();return e===l[n]&&(u.current=a[n]),oe.createElement(r$,null,oe.createElement(sM,{id:i,value:n,onChange:h=>t(l[Number(h.currentTarget.value)]),disabled:s},a.map((h,m)=>oe.createElement("option",{key:h,value:m},h))),oe.createElement(s$,null,u.current),oe.createElement(jT,{toggled:!0}))}function o$(){const{label:n,value:e,displayValue:t,onUpdate:i,id:r,disabled:s,settings:a}=xs();return oe.createElement(So,{input:!0},oe.createElement(hl,null,n),oe.createElement(a$,{id:r,value:e,displayValue:t,onUpdate:i,settings:a,disabled:s}))}var l$=nn({component:o$},i$);const c$=n=>fa().string().test(n),u$=n=>{if(typeof n!="string")throw Error("Invalid string");return n},f$=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var h$=Object.freeze({__proto__:null,schema:c$,sanitize:u$,normalize:f$});const d$=["displayValue","onUpdate","onChange","editable"],p$=It("div",{whiteSpace:"pre-wrap"});function m$(n){let{displayValue:e,onUpdate:t,onChange:i,editable:r=!0}=n,s=ui(n,d$);return r?oe.createElement(VT,hr({value:e,onUpdate:t,onChange:i},s)):oe.createElement(p$,null,e)}function g$(){const{label:n,settings:e,displayValue:t,onUpdate:i,onChange:r}=xs();return oe.createElement(So,{input:!0},oe.createElement(hl,null,n),oe.createElement(m$,hr({displayValue:t,onUpdate:i,onChange:r},e)))}var v$=nn({component:g$},h$);const y$=n=>fa().boolean().test(n),x$=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var _$=Object.freeze({__proto__:null,schema:y$,sanitize:x$});const b$=It("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function S$({value:n,onUpdate:e,id:t,disabled:i}){return oe.createElement(b$,null,oe.createElement("input",{id:t,type:"checkbox",checked:n,onChange:r=>e(r.currentTarget.checked),disabled:i}),oe.createElement("label",{htmlFor:t},oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function A$(){const{label:n,value:e,onUpdate:t,disabled:i,id:r}=xs();return oe.createElement(So,{input:!0},oe.createElement(hl,null,n),oe.createElement(S$,{value:e,onUpdate:t,id:r,disabled:i}))}var E$=nn({component:A$},_$);const M$=["locked"];function T$({value:n,id:e,valueKey:t,settings:i,onUpdate:r,innerLabelTrim:s}){const a=F.useRef(n[t]);a.current=n[t];const l=F.useCallback(h=>r({[t]:oP({type:"NUMBER",value:a.current,settings:i},h)}),[r,i,t]),u=EP({type:"NUMBER",value:n[t],settings:i,setValue:l});return oe.createElement(RP,{id:e,label:t,value:n[t],displayValue:u.displayValue,onUpdate:u.onUpdate,onChange:u.onChange,settings:i,innerLabelTrim:s})}const C$=It("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function w$(n){let{locked:e}=n,t=ui(n,M$);return oe.createElement("svg",hr({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?oe.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):oe.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function XT({value:n,onUpdate:e,settings:t,innerLabelTrim:i}){const{id:r,setSettings:s}=xs(),{lock:a,locked:l}=t;return oe.createElement(C$,{withLock:a},a&&oe.createElement(w$,{locked:l,onClick:()=>s({locked:!l})}),Object.keys(n).map((u,h)=>oe.createElement(T$,{id:h===0?r:`${r}.${u}`,key:u,valueKey:u,value:n,settings:t[u],onUpdate:e,innerLabelTrim:i})))}const DP=(n,e)=>{const t={};let i=0,r=1/0;Object.entries(n).forEach(([s,a])=>{t[s]=fP(nn({value:a},e[s])).settings,i=Math.max(i,t[s].step),r=Math.min(r,t[s].pad)});for(let s in t){const{step:a,min:l,max:u}=e[s]||{};!isFinite(a)&&(!isFinite(l)||!isFinite(u))&&(t[s].step=i,t[s].pad=r)}return t},R$=["lock"],D$=["value"];function B$(n){const e=fa().array().length(n).every.number(),t=i=>{if(!i||typeof i!="object")return!1;const r=Object.values(i);return r.length===n&&r.every(s=>isFinite(s))};return i=>e.test(i)||t(i)}function O$(n){return Array.isArray(n)?"array":"object"}function uv(n,e,t){return O$(n)===e?n:e==="array"?Object.values(n):fJ(n,t)}const P$=(n,e,t)=>{const i=uv(n,"object",e.keys);for(let a in i)i[a]=uP(i[a],e[a]);const r=Object.keys(i);let s={};if(r.length===e.keys.length)s=i;else{const a=uv(t,"object",e.keys);if(r.length===1&&e.locked){const l=r[0],u=i[l],h=a[l],m=h!==0?u/h:1;for(let g in a)g===l?s[l]=u:s[g]=a[g]*m}else s=nn(nn({},a),i)}return uv(s,e.format,e.keys)},U$=(n,e)=>uv(n,"object",e.keys),L$=n=>!!n&&("step"in n||"min"in n||"max"in n);function N$(n,e,t=[]){const{lock:i=!1}=e,r=ui(e,R$),s=Array.isArray(n)?"array":"object",a=s==="object"?Object.keys(n):t,l=uv(n,"object",a),u=L$(r)?a.reduce((m,g)=>Object.assign(m,{[g]:r}),{}):r,h=DP(l,u);return{value:s==="array"?n:l,settings:nn(nn({},h),{},{format:s,keys:a,lock:i,locked:!1})}}function BP(n){return{schema:B$(n.length),normalize:e=>{let{value:t}=e,i=ui(e,D$);return N$(t,i,n)},format:(e,t)=>U$(e,t),sanitize:(e,t,i)=>P$(e,t,i)}}var I$={grad:.9,turn:360,rad:360/(2*Math.PI)},zc=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Nr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},vo=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},OP=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},vD=function(n){return{r:vo(n.r,0,255),g:vo(n.g,0,255),b:vo(n.b,0,255),a:vo(n.a)}},C2=function(n){return{r:Nr(n.r),g:Nr(n.g),b:Nr(n.b),a:Nr(n.a,3)}},F$=/^#([0-9a-f]{3,8})$/i,Vx=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},PP=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),a=s-Math.min(e,t,i),l=a?s===e?(t-i)/a:s===t?2+(i-e)/a:4+(e-t)/a:0;return{h:60*(l<0?l+6:l),s:s?a/s*100:0,v:s/255*100,a:r}},UP=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),a=i*(1-t),l=i*(1-(e-s)*t),u=i*(1-(1-e+s)*t),h=s%6;return{r:255*[i,l,a,a,u,i][h],g:255*[u,i,i,l,a,a][h],b:255*[a,a,u,i,i,l][h],a:r}},yD=function(n){return{h:OP(n.h),s:vo(n.s,0,100),l:vo(n.l,0,100),a:vo(n.a)}},xD=function(n){return{h:Nr(n.h),s:Nr(n.s),l:Nr(n.l),a:Nr(n.a,3)}},_D=function(n){return UP((t=(e=n).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},fv=function(n){return{h:(e=PP(n)).h,s:(r=(200-(t=e.s))*(i=e.v)/100)>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,i,r},z$=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,H$=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,G$=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,V$=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,aM={string:[[function(n){var e=F$.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Nr(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Nr(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=G$.exec(n)||V$.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:vD({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=z$.exec(n)||H$.exec(n);if(!e)return null;var t,i,r=yD({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(I$[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return _D(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=r===void 0?1:r;return zc(e)&&zc(t)&&zc(i)?vD({r:Number(e),g:Number(t),b:Number(i),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,i=n.l,r=n.a,s=r===void 0?1:r;if(!zc(e)||!zc(t)||!zc(i))return null;var a=yD({h:Number(e),s:Number(t),l:Number(i),a:Number(s)});return _D(a)},"hsl"],[function(n){var e=n.h,t=n.s,i=n.v,r=n.a,s=r===void 0?1:r;if(!zc(e)||!zc(t)||!zc(i))return null;var a=function(l){return{h:OP(l.h),s:vo(l.s,0,100),v:vo(l.v,0,100),a:vo(l.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(s)});return UP(a)},"hsv"]]},bD=function(n,e){for(var t=0;t<e.length;t++){var i=e[t][0](n);if(i)return[i,e[t][1]]}return[null,void 0]},LP=function(n){return typeof n=="string"?bD(n.trim(),aM.string):typeof n=="object"&&n!==null?bD(n,aM.object):[null,void 0]},k$=function(n){return LP(n)[1]},w2=function(n,e){var t=fv(n);return{h:t.h,s:vo(t.s+100*e,0,100),l:t.l,a:t.a}},R2=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},SD=function(n,e){var t=fv(n);return{h:t.h,s:t.s,l:vo(t.l+100*e,0,100),a:t.a}},oM=function(){function n(e){this.parsed=LP(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Nr(R2(this.rgba),2)},n.prototype.isDark=function(){return R2(this.rgba)<.5},n.prototype.isLight=function(){return R2(this.rgba)>=.5},n.prototype.toHex=function(){return e=C2(this.rgba),t=e.r,i=e.g,r=e.b,a=(s=e.a)<1?Vx(Nr(255*s)):"","#"+Vx(t)+Vx(i)+Vx(r)+a;var e,t,i,r,s,a},n.prototype.toRgb=function(){return C2(this.rgba)},n.prototype.toRgbString=function(){return e=C2(this.rgba),t=e.r,i=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+r+", "+s+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,s},n.prototype.toHsl=function(){return xD(fv(this.rgba))},n.prototype.toHslString=function(){return e=xD(fv(this.rgba)),t=e.h,i=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+s+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,s},n.prototype.toHsv=function(){return e=PP(this.rgba),{h:Nr(e.h),s:Nr(e.s),v:Nr(e.v),a:Nr(e.a,3)};var e},n.prototype.invert=function(){return Fs({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Fs(w2(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Fs(w2(this.rgba,-e))},n.prototype.grayscale=function(){return Fs(w2(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Fs(SD(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Fs(SD(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Fs({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Nr(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=fv(this.rgba);return typeof e=="number"?Fs({h:e,s:t.s,l:t.l,a:t.a}):Nr(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Fs(e).toHex()},n}(),Fs=function(n){return n instanceof oM?n:new oM(n)},AD=[],j$=function(n){n.forEach(function(e){AD.indexOf(e)<0&&(e(oM,aM),AD.push(e))})};function X$(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in t)i[t[r]]=r;var s={};n.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var l,u,h=i[this.toHex()];if(h)return h;if(a!=null&&a.closest){var m=this.toRgb(),g=1/0,v="black";if(!s.length)for(var x in t)s[x]=new n(t[x]).toRgb();for(var b in t){var M=(l=m,u=s[b],Math.pow(l.r-u.r,2)+Math.pow(l.g-u.g,2)+Math.pow(l.b-u.b,2));M<g&&(g=M,v=b)}return v}},e.string.push([function(a){var l=a.toLowerCase(),u=l==="transparent"?"#0000":t[l];return u?new n(u).toRgb():null},"name"])}function Jp(){return(Jp=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}function WT(n,e){if(n==null)return{};var t,i,r={},s=Object.keys(n);for(i=0;i<s.length;i++)e.indexOf(t=s[i])>=0||(r[t]=n[t]);return r}function lM(n){var e=F.useRef(n),t=F.useRef(function(i){e.current&&e.current(i)});return e.current=n,t.current}var Bp=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},hv=function(n){return"touches"in n},cM=function(n){return n&&n.ownerDocument.defaultView||self},ED=function(n,e,t){var i=n.getBoundingClientRect(),r=hv(e)?function(s,a){for(var l=0;l<s.length;l++)if(s[l].identifier===a)return s[l];return s[0]}(e.touches,t):e;return{left:Bp((r.pageX-(i.left+cM(n).pageXOffset))/i.width),top:Bp((r.pageY-(i.top+cM(n).pageYOffset))/i.height)}},MD=function(n){!hv(n)&&n.preventDefault()},YT=oe.memo(function(n){var e=n.onMove,t=n.onKey,i=WT(n,["onMove","onKey"]),r=F.useRef(null),s=lM(e),a=lM(t),l=F.useRef(null),u=F.useRef(!1),h=F.useMemo(function(){var x=function(A){MD(A),(hv(A)?A.touches.length>0:A.buttons>0)&&r.current?s(ED(r.current,A,l.current)):M(!1)},b=function(){return M(!1)};function M(A){var S=u.current,C=cM(r.current),R=A?C.addEventListener:C.removeEventListener;R(S?"touchmove":"mousemove",x),R(S?"touchend":"mouseup",b)}return[function(A){var S=A.nativeEvent,C=r.current;if(C&&(MD(S),!function(B,N){return N&&!hv(B)}(S,u.current)&&C)){if(hv(S)){u.current=!0;var R=S.changedTouches||[];R.length&&(l.current=R[0].identifier)}C.focus(),s(ED(C,S,l.current)),M(!0)}},function(A){var S=A.which||A.keyCode;S<37||S>40||(A.preventDefault(),a({left:S===39?.05:S===37?-.05:0,top:S===40?.05:S===38?-.05:0}))},M]},[a,s]),m=h[0],g=h[1],v=h[2];return F.useEffect(function(){return v},[v]),oe.createElement("div",Jp({},i,{onTouchStart:m,onMouseDown:m,className:"react-colorful__interactive",ref:r,onKeyDown:g,tabIndex:0,role:"slider"}))}),cy=function(n){return n.filter(Boolean).join(" ")},qT=function(n){var e=n.color,t=n.left,i=n.top,r=i===void 0?.5:i,s=cy(["react-colorful__pointer",n.className]);return oe.createElement("div",{className:s,style:{top:100*r+"%",left:100*t+"%"}},oe.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},js=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},NP=function(n){var e=n.s,t=n.v,i=n.a,r=(200-e)*t/100;return{h:js(n.h),s:js(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:js(r/2),a:js(i,2)}},uM=function(n){var e=NP(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},D2=function(n){var e=NP(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},IP=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),a=i*(1-t),l=i*(1-(e-s)*t),u=i*(1-(1-e+s)*t),h=s%6;return{r:js(255*[i,l,a,a,u,i][h]),g:js(255*[u,i,i,l,a,a][h]),b:js(255*[a,a,u,i,i,l][h]),a:js(r,2)}},FP=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),a=s-Math.min(e,t,i),l=a?s===e?(t-i)/a:s===t?2+(i-e)/a:4+(e-t)/a:0;return{h:js(60*(l<0?l+6:l)),s:js(s?a/s*100:0),v:js(s/255*100),a:r}},zP=oe.memo(function(n){var e=n.hue,t=n.onChange,i=cy(["react-colorful__hue",n.className]);return oe.createElement("div",{className:i},oe.createElement(YT,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:Bp(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":js(e),"aria-valuemax":"360","aria-valuemin":"0"},oe.createElement(qT,{className:"react-colorful__hue-pointer",left:e/360,color:uM({h:e,s:100,v:100,a:1})})))}),HP=oe.memo(function(n){var e=n.hsva,t=n.onChange,i={backgroundColor:uM({h:e.h,s:100,v:100,a:1})};return oe.createElement("div",{className:"react-colorful__saturation",style:i},oe.createElement(YT,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:Bp(e.s+100*r.left,0,100),v:Bp(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+js(e.s)+"%, Brightness "+js(e.v)+"%"},oe.createElement(qT,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:uM(e)})))}),KT=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function GP(n,e,t){var i=lM(t),r=F.useState(function(){return n.toHsva(e)}),s=r[0],a=r[1],l=F.useRef({color:e,hsva:s});F.useEffect(function(){if(!n.equal(e,l.current.color)){var h=n.toHsva(e);l.current={hsva:h,color:e},a(h)}},[e,n]),F.useEffect(function(){var h;KT(s,l.current.hsva)||n.equal(h=n.fromHsva(s),l.current.color)||(l.current={hsva:s,color:h},i(h))},[s,n,i]);var u=F.useCallback(function(h){a(function(m){return Object.assign({},m,h)})},[]);return[s,u]}var W$=typeof window<"u"?F.useLayoutEffect:F.useEffect,Y$=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},TD=new Map,VP=function(n){W$(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!TD.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,TD.set(e,t);var i=Y$();i&&t.setAttribute("nonce",i),e.head.appendChild(t)}},[])},q$=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,a=WT(n,["className","colorModel","color","onChange"]),l=F.useRef(null);VP(l);var u=GP(t,r,s),h=u[0],m=u[1],g=cy(["react-colorful",e]);return oe.createElement("div",Jp({},a,{ref:l,className:g}),oe.createElement(HP,{hsva:h,onChange:m}),oe.createElement(zP,{hue:h.h,onChange:m,className:"react-colorful__last-control"}))},K$=function(n){var e=n.className,t=n.hsva,i=n.onChange,r={backgroundImage:"linear-gradient(90deg, "+D2(Object.assign({},t,{a:0}))+", "+D2(Object.assign({},t,{a:1}))+")"},s=cy(["react-colorful__alpha",e]),a=js(100*t.a);return oe.createElement("div",{className:s},oe.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),oe.createElement(YT,{onMove:function(l){i({a:l.left})},onKey:function(l){i({a:Bp(t.a+l.left)})},"aria-label":"Alpha","aria-valuetext":a+"%","aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100"},oe.createElement(qT,{className:"react-colorful__alpha-pointer",left:t.a,color:D2(t)})))},J$=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,a=WT(n,["className","colorModel","color","onChange"]),l=F.useRef(null);VP(l);var u=GP(t,r,s),h=u[0],m=u[1],g=cy(["react-colorful",e]);return oe.createElement("div",Jp({},a,{ref:l,className:g}),oe.createElement(HP,{hsva:h,onChange:m}),oe.createElement(zP,{hue:h.h,onChange:m}),oe.createElement(K$,{hsva:h,onChange:m,className:"react-colorful__last-control"}))},$$={defaultColor:{r:0,g:0,b:0,a:1},toHsva:FP,fromHsva:IP,equal:KT},Z$=function(n){return oe.createElement(J$,Jp({},n,{colorModel:$$}))},Q$={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return FP({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=IP(n)).r,g:e.g,b:e.b};var e},equal:KT},eZ=function(n){return oe.createElement(q$,Jp({},n,{colorModel:Q$}))},B2={exports:{}},O2,CD;function tZ(){if(CD)return O2;CD=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return O2=n,O2}var P2,wD;function nZ(){if(wD)return P2;wD=1;var n=tZ();function e(){}function t(){}return t.resetWarningCache=e,P2=function(){function i(a,l,u,h,m,g){if(g!==n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},P2}var RD;function iZ(){return RD||(RD=1,B2.exports=nZ()()),B2.exports}var rZ=iZ();const ci=A0(rZ);function $p(n,e,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function l(m){try{h(i.next(m))}catch(g){a(g)}}function u(m){try{h(i.throw(m))}catch(g){a(g)}}function h(m){m.done?s(m.value):r(m.value).then(l,u)}h((i=i.apply(n,e||[])).next())})}function Zp(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(h){return function(m){return u([h,m])}}function u(h){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(t=0)),t;)try{if(i=1,r&&(s=h[0]&2?r.return:h[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,h[1])).done)return s;switch(r=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){t.label=h[1];break}if(h[0]===6&&t.label<s[1]){t.label=s[1],s=h;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(h);break}s[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(m){h=[6,m],r=0}finally{i=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function sZ(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],a;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return s}function aZ(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(sZ(arguments[e]));return n}var oZ=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function uy(n,e){var t=lZ(n);if(typeof t.path!="string"){var i=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof i=="string"&&i.length>0?i:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function lZ(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var i=e.split(".").pop().toLowerCase(),r=oZ.get(i);r&&Object.defineProperty(n,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return n}var cZ=[".DS_Store","Thumbs.db"];function uZ(n){return $p(this,void 0,void 0,function(){return Zp(this,function(e){return fb(n)&&fZ(n)?[2,mZ(n.dataTransfer,n.type)]:hZ(n)?[2,dZ(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,pZ(n)]:[2,[]]})})}function fZ(n){return fb(n.dataTransfer)}function hZ(n){return fb(n)&&fb(n.target)}function fb(n){return typeof n=="object"&&n!==null}function dZ(n){return fM(n.target.files).map(function(e){return uy(e)})}function pZ(n){return $p(this,void 0,void 0,function(){var e;return Zp(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(i){return i.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(i){return uy(i)})]}})})}function mZ(n,e){return $p(this,void 0,void 0,function(){var t,i;return Zp(this,function(r){switch(r.label){case 0:return n===null?[2,[]]:n.items?(t=fM(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(gZ))]):[3,2];case 1:return i=r.sent(),[2,DD(kP(i))];case 2:return[2,DD(fM(n.files).map(function(s){return uy(s)}))]}})})}function DD(n){return n.filter(function(e){return cZ.indexOf(e.name)===-1})}function fM(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var i=n[t];e.push(i)}return e}function gZ(n){if(typeof n.webkitGetAsEntry!="function")return BD(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?jP(e):BD(n)}function kP(n){return n.reduce(function(e,t){return aZ(e,Array.isArray(t)?kP(t):[t])},[])}function BD(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=uy(e);return Promise.resolve(t)}function vZ(n){return $p(this,void 0,void 0,function(){return Zp(this,function(e){return[2,n.isDirectory?jP(n):yZ(n)]})})}function jP(n){var e=n.createReader();return new Promise(function(t,i){var r=[];function s(){var a=this;e.readEntries(function(l){return $p(a,void 0,void 0,function(){var u,h,m;return Zp(this,function(g){switch(g.label){case 0:if(l.length)return[3,5];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return u=g.sent(),t(u),[3,4];case 3:return h=g.sent(),i(h),[3,4];case 4:return[3,6];case 5:m=Promise.all(l.map(vZ)),r.push(m),s(),g.label=6;case 6:return[2]}})})},function(l){i(l)})}s()})}function yZ(n){return $p(this,void 0,void 0,function(){return Zp(this,function(e){return[2,new Promise(function(t,i){n.file(function(r){var s=uy(r,n.fullPath);t(s)},function(r){i(r)})})]})})}var kx={},OD;function xZ(){return OD||(OD=1,kx.__esModule=!0,kx.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var i=n.name||"",r=(n.type||"").toLowerCase(),s=r.replace(/\/.*$/,"");return t.some(function(a){var l=a.trim().toLowerCase();return l.charAt(0)==="."?i.toLowerCase().endsWith(l):l.endsWith("/*")?s===l.replace(/\/.*$/,""):r===l})}return!0}),kx}var _Z=xZ();const bZ=A0(_Z);function PD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function UD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PD(Object(t),!0).forEach(function(i){XP(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PD(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function XP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LD(n,e){return MZ(n)||EZ(n,e)||AZ(n,e)||SZ()}function SZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AZ(n,e){if(n){if(typeof n=="string")return ND(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ND(n,e)}}function ND(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function EZ(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,a,l;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw l}}return i}}function MZ(n){if(Array.isArray(n))return n}var TZ="file-invalid-type",CZ="file-too-large",wZ="file-too-small",RZ="too-many-files",DZ=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:TZ,message:"File type must be ".concat(t)}},ID=function(e){return{code:CZ,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},FD=function(e){return{code:wZ,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},BZ={code:RZ,message:"Too many files"};function WP(n,e){var t=n.type==="application/x-moz-file"||bZ(n,e);return[t,t?null:DZ(e)]}function YP(n,e,t){if(zg(n.size))if(zg(e)&&zg(t)){if(n.size>t)return[!1,ID(t)];if(n.size<e)return[!1,FD(e)]}else{if(zg(e)&&n.size<e)return[!1,FD(e)];if(zg(t)&&n.size>t)return[!1,ID(t)]}return[!0,null]}function zg(n){return n!=null}function OZ(n){var e=n.files,t=n.accept,i=n.minSize,r=n.maxSize,s=n.multiple,a=n.maxFiles;return!s&&e.length>1||s&&a>=1&&e.length>a?!1:e.every(function(l){var u=WP(l,t),h=LD(u,1),m=h[0],g=YP(l,i,r),v=LD(g,1),x=v[0];return m&&x})}function hb(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function jx(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function zD(n){n.preventDefault()}function PZ(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function UZ(n){return n.indexOf("Edge/")!==-1}function LZ(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return PZ(n)||UZ(n)}function Jl(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return e.some(function(l){return!hb(i)&&l&&l.apply(void 0,[i].concat(s)),hb(i)})}}function NZ(){return"showOpenFilePicker"in window}function IZ(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return UD(UD({},e),{},XP({},t,[]))},{}):{}}]}function FZ(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function zZ(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var HZ=["children"],GZ=["open"],VZ=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],kZ=["refKey","onChange","onClick"];function jZ(n){return YZ(n)||WZ(n)||qP(n)||XZ()}function XZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WZ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function YZ(n){if(Array.isArray(n))return hM(n)}function U2(n,e){return JZ(n)||KZ(n,e)||qP(n,e)||qZ()}function qZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qP(n,e){if(n){if(typeof n=="string")return hM(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return hM(n,e)}}function hM(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function KZ(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,a,l;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw l}}return i}}function JZ(n){if(Array.isArray(n))return n}function HD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Bi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HD(Object(t),!0).forEach(function(i){dM(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):HD(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function dM(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function db(n,e){if(n==null)return{};var t=$Z(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function $Z(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var JT=F.forwardRef(function(n,e){var t=n.children,i=db(n,HZ),r=JP(i),s=r.open,a=db(r,GZ);return F.useImperativeHandle(e,function(){return{open:s}},[s]),oe.createElement(F.Fragment,null,t(Bi(Bi({},a),{},{open:s})))});JT.displayName="Dropzone";var KP={disabled:!1,getFilesFromEvent:uZ,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};JT.defaultProps=KP;JT.propTypes={children:ci.func,accept:ci.oneOfType([ci.string,ci.arrayOf(ci.string)]),multiple:ci.bool,preventDropOnDocument:ci.bool,noClick:ci.bool,noKeyboard:ci.bool,noDrag:ci.bool,noDragEventsBubbling:ci.bool,minSize:ci.number,maxSize:ci.number,maxFiles:ci.number,disabled:ci.bool,getFilesFromEvent:ci.func,onFileDialogCancel:ci.func,onFileDialogOpen:ci.func,useFsAccessApi:ci.bool,onDragEnter:ci.func,onDragLeave:ci.func,onDragOver:ci.func,onDrop:ci.func,onDropAccepted:ci.func,onDropRejected:ci.func,validator:ci.func};var pM={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function JP(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Bi(Bi({},KP),n),t=e.accept,i=e.disabled,r=e.getFilesFromEvent,s=e.maxSize,a=e.minSize,l=e.multiple,u=e.maxFiles,h=e.onDragEnter,m=e.onDragLeave,g=e.onDragOver,v=e.onDrop,x=e.onDropAccepted,b=e.onDropRejected,M=e.onFileDialogCancel,A=e.onFileDialogOpen,S=e.useFsAccessApi,C=e.preventDropOnDocument,R=e.noClick,B=e.noKeyboard,N=e.noDrag,U=e.noDragEventsBubbling,I=e.validator,z=F.useMemo(function(){return typeof A=="function"?A:GD},[A]),L=F.useMemo(function(){return typeof M=="function"?M:GD},[M]),O=F.useRef(null),G=F.useRef(null),$=F.useReducer(ZZ,pM),Q=U2($,2),ce=Q[0],fe=Q[1],k=ce.isFocused,K=ce.isFileDialogActive,ee=ce.draggedFiles,me=F.useRef(typeof window<"u"&&window.isSecureContext&&S&&NZ()),W=function(){!me.current&&K&&setTimeout(function(){if(G.current){var ge=G.current.files;ge.length||(fe({type:"closeDialog"}),L())}},300)};F.useEffect(function(){return window.addEventListener("focus",W,!1),function(){window.removeEventListener("focus",W,!1)}},[G,K,L,me]);var ae=F.useRef([]),Se=function(ge){O.current&&O.current.contains(ge.target)||(ge.preventDefault(),ae.current=[])};F.useEffect(function(){return C&&(document.addEventListener("dragover",zD,!1),document.addEventListener("drop",Se,!1)),function(){C&&(document.removeEventListener("dragover",zD),document.removeEventListener("drop",Se))}},[O,C]);var Ae=F.useCallback(function(te){te.preventDefault(),te.persist(),Xe(te),ae.current=[].concat(jZ(ae.current),[te.target]),jx(te)&&Promise.resolve(r(te)).then(function(ge){hb(te)&&!U||(fe({draggedFiles:ge,isDragActive:!0,type:"setDraggedFiles"}),h&&h(te))})},[r,h,U]),ie=F.useCallback(function(te){te.preventDefault(),te.persist(),Xe(te);var ge=jx(te);if(ge&&te.dataTransfer)try{te.dataTransfer.dropEffect="copy"}catch{}return ge&&g&&g(te),!1},[g,U]),_e=F.useCallback(function(te){te.preventDefault(),te.persist(),Xe(te);var ge=ae.current.filter(function(Te){return O.current&&O.current.contains(Te)}),Ne=ge.indexOf(te.target);Ne!==-1&&ge.splice(Ne,1),ae.current=ge,!(ge.length>0)&&(fe({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),jx(te)&&m&&m(te))},[O,m,U]),Ue=F.useCallback(function(te,ge){var Ne=[],Te=[];te.forEach(function(tt){var $e=WP(tt,t),ct=U2($e,2),Mt=ct[0],qe=ct[1],ut=YP(tt,a,s),vt=U2(ut,2),St=vt[0],it=vt[1],ue=I?I(tt):null;if(Mt&&St&&!ue)Ne.push(tt);else{var Le=[qe,it];ue&&(Le=Le.concat(ue)),Te.push({file:tt,errors:Le.filter(function(rt){return rt})})}}),(!l&&Ne.length>1||l&&u>=1&&Ne.length>u)&&(Ne.forEach(function(tt){Te.push({file:tt,errors:[BZ]})}),Ne.splice(0)),fe({acceptedFiles:Ne,fileRejections:Te,type:"setFiles"}),v&&v(Ne,Te,ge),Te.length>0&&b&&b(Te,ge),Ne.length>0&&x&&x(Ne,ge)},[fe,l,t,a,s,u,v,x,b,I]),ke=F.useCallback(function(te){te.preventDefault(),te.persist(),Xe(te),ae.current=[],jx(te)&&Promise.resolve(r(te)).then(function(ge){hb(te)&&!U||Ue(ge,te)}),fe({type:"reset"})},[r,Ue,U]),Ye=F.useCallback(function(){if(me.current){fe({type:"openDialog"}),z();var te={multiple:l,types:IZ(t)};window.showOpenFilePicker(te).then(function(ge){return r(ge)}).then(function(ge){Ue(ge,null),fe({type:"closeDialog"})}).catch(function(ge){FZ(ge)?(L(ge),fe({type:"closeDialog"})):zZ(ge)&&(me.current=!1,G.current&&(G.current.value=null,G.current.click()))});return}G.current&&(fe({type:"openDialog"}),z(),G.current.value=null,G.current.click())},[fe,z,L,S,Ue,t,l]),gt=F.useCallback(function(te){!O.current||!O.current.isEqualNode(te.target)||(te.key===" "||te.key==="Enter"||te.keyCode===32||te.keyCode===13)&&(te.preventDefault(),Ye())},[O,Ye]),_t=F.useCallback(function(){fe({type:"focus"})},[]),an=F.useCallback(function(){fe({type:"blur"})},[]),Pt=F.useCallback(function(){R||(LZ()?setTimeout(Ye,0):Ye())},[R,Ye]),bt=function(ge){return i?null:ge},Z=function(ge){return B?null:bt(ge)},Qe=function(ge){return N?null:bt(ge)},Xe=function(ge){U&&ge.stopPropagation()},je=F.useMemo(function(){return function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ge=te.refKey,Ne=ge===void 0?"ref":ge,Te=te.role,tt=te.onKeyDown,$e=te.onFocus,ct=te.onBlur,Mt=te.onClick,qe=te.onDragEnter,ut=te.onDragOver,vt=te.onDragLeave,St=te.onDrop,it=db(te,VZ);return Bi(Bi(dM({onKeyDown:Z(Jl(tt,gt)),onFocus:Z(Jl($e,_t)),onBlur:Z(Jl(ct,an)),onClick:bt(Jl(Mt,Pt)),onDragEnter:Qe(Jl(qe,Ae)),onDragOver:Qe(Jl(ut,ie)),onDragLeave:Qe(Jl(vt,_e)),onDrop:Qe(Jl(St,ke)),role:typeof Te=="string"&&Te!==""?Te:"button"},Ne,O),!i&&!B?{tabIndex:0}:{}),it)}},[O,gt,_t,an,Pt,Ae,ie,_e,ke,B,N,i]),He=F.useCallback(function(te){te.stopPropagation()},[]),lt=F.useMemo(function(){return function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ge=te.refKey,Ne=ge===void 0?"ref":ge,Te=te.onChange,tt=te.onClick,$e=db(te,kZ),ct=dM({accept:t,multiple:l,type:"file",style:{display:"none"},onChange:bt(Jl(Te,ke)),onClick:bt(Jl(tt,He)),tabIndex:-1},Ne,G);return Bi(Bi({},ct),$e)}},[G,t,l,ke,i]),Ge=ee.length,J=Ge>0&&OZ({files:ee,accept:t,minSize:a,maxSize:s,multiple:l,maxFiles:u}),V=Ge>0&&!J;return Bi(Bi({},ce),{},{isDragAccept:J,isDragReject:V,isFocused:k&&!i,getRootProps:je,getInputProps:lt,rootRef:O,inputRef:G,open:bt(Ye)})}function ZZ(n,e){switch(e.type){case"focus":return Bi(Bi({},n),{},{isFocused:!0});case"blur":return Bi(Bi({},n),{},{isFocused:!1});case"openDialog":return Bi(Bi({},pM),{},{isFileDialogActive:!0});case"closeDialog":return Bi(Bi({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,i=e.draggedFiles;return Bi(Bi({},n),{},{draggedFiles:i,isDragActive:t});case"setFiles":return Bi(Bi({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Bi({},pM);default:return n}}function GD(){}function QZ(n){let e;const t=new Set,i=(h,m)=>{const g=typeof h=="function"?h(e):h;if(g!==e){const v=e;e=m?g:Object.assign({},e,g),t.forEach(x=>x(e,v))}},r=()=>e,s=(h,m=r,g=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let v=m(e);function x(){const b=m(e);if(!g(v,b)){const M=v;h(v=b,M)}}return t.add(x),()=>t.delete(x)},u={setState:i,getState:r,subscribe:(h,m,g)=>m||g?s(h,m,g):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=n(i,r,u),u}const eQ=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),VD=eQ?F.useEffect:F.useLayoutEffect;function tQ(n){const e=typeof n=="function"?QZ(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=F.useReducer(A=>A+1,0),a=e.getState(),l=F.useRef(a),u=F.useRef(i),h=F.useRef(r),m=F.useRef(!1),g=F.useRef();g.current===void 0&&(g.current=i(a));let v,x=!1;(l.current!==a||u.current!==i||h.current!==r||m.current)&&(v=i(a),x=!r(g.current,v)),VD(()=>{x&&(g.current=v),l.current=a,u.current=i,h.current=r,m.current=!1});const b=F.useRef(a);VD(()=>{const A=()=>{try{const C=e.getState(),R=u.current(C);h.current(g.current,R)||(l.current=C,g.current=R,s())}catch{m.current=!0,s()}},S=e.subscribe(A);return e.getState()!==b.current&&A(),S},[]);const M=x?v:g.current;return F.useDebugValue(M),M};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const nQ=n=>(e,t,i)=>{const r=i.subscribe;return i.subscribe=(a,l,u)=>{let h=a;if(l){const m=(u==null?void 0:u.equalityFn)||Object.is;let g=a(i.getState());h=v=>{const x=a(v);if(!m(g,x)){const b=g;l(g=x,b)}},u!=null&&u.fireImmediately&&l(g,g)}return r(h)},n(e,t,i)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var L2,kD;function iQ(){return kD||(kD=1,L2=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),L2}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var N2,jD;function $P(){if(jD)return N2;jD=1;var n=iQ();function e(t){return n(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}return N2=function(i){var r,s;return!(e(i)===!1||(r=i.constructor,typeof r!="function")||(s=r.prototype,e(s)===!1)||s.hasOwnProperty("isPrototypeOf")===!1)},N2}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var I2,XD;function $T(){if(XD)return I2;XD=1;var n=$P();return I2=function(t){return n(t)||typeof t=="function"||Array.isArray(t)},I2}/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var F2,WD;function rQ(){return WD||(WD=1,F2=function(e,t,i){for(var r in e)if(t.call(i,e[r],r,e)===!1)break}),F2}var z2,YD;function sQ(){if(YD)return z2;YD=1;var n=$T(),e=rQ();function t(a,l){for(var u=arguments.length,h=0;++h<u;){var m=arguments[h];r(m)&&e(m,i,a)}return a}function i(a,l){if(s(l)){var u=this[l];r(a)&&r(u)?t(u,a):this[l]=a}}function r(a){return n(a)&&!Array.isArray(a)}function s(a){return a!=="__proto__"&&a!=="constructor"&&a!=="prototype"}return z2=t,z2}/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var H2,qD;function aQ(){if(qD)return H2;qD=1,H2=function(t,i,r,s,a){if(!n(t)||!i)return t;if(i=e(i),r&&(i+="."+e(r)),s&&(i+="."+e(s)),a&&(i+="."+e(a)),i in t)return t[i];for(var l=i.split("."),u=l.length,h=-1;t&&++h<u;){for(var m=l[h];m[m.length-1]==="\\";)m=m.slice(0,-1)+"."+l[++h];t=t[m]}return t};function n(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function e(t){return t?Array.isArray(t)?t.join("."):t:""}return H2}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var G2,KD;function oQ(){return KD||(KD=1,G2=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,i=Object(n),r=arguments.length,s=0;++s<r;)for(var a=Object(arguments[s]),l=Object.getOwnPropertySymbols(a),u=0;u<l.length;u++){var h=l[u];t.call(a,h)&&(i[h]=a[h])}return i}),G2}var V2,JD;function lQ(){if(JD)return V2;JD=1;var n=$T(),e=oQ();V2=Object.assign||function(l){if(l===null||typeof l>"u")throw new TypeError("Cannot convert undefined or null to object");s(l)||(l={});for(var u=1;u<arguments.length;u++){var h=arguments[u];i(h)&&(h=r(h)),s(h)&&(t(l,h),e(l,h))}return l};function t(l,u){for(var h in u)a(u,h)&&(l[h]=u[h])}function i(l){return l&&typeof l=="string"}function r(l){var u={};for(var h in l)u[h]=l[h];return u}function s(l){return l&&typeof l=="object"||n(l)}function a(l,u){return Object.prototype.hasOwnProperty.call(l,u)}return V2}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var k2,$D;function cQ(){if($D)return k2;$D=1;var n=lQ();k2=function(r,s,a){if(typeof r!="string")throw new TypeError("expected a string");typeof s=="function"&&(a=s,s=null),typeof s=="string"&&(s={sep:s});var l=n({sep:"."},s),u=l.quotes||['"',"'","`"],h;l.brackets===!0?h={"<":">","(":")","[":"]","{":"}"}:l.brackets&&(h=l.brackets);var m=[],g=[],v=[""],x=l.sep,b=r.length,M=-1,A;function S(){if(h&&g.length)return h[g[g.length-1]]}for(;++M<b;){var C=r[M],R=r[M+1],B={val:C,idx:M,arr:v,str:r};if(m.push(B),C==="\\"){B.val=i(l,r,M)===!0?C+R:R,B.escaped=!0,typeof a=="function"&&a(B),v[v.length-1]+=B.val,M++;continue}if(h&&h[C]){g.push(C);var N=S(),U=M+1;if(r.indexOf(N,U+1)!==-1)for(;g.length&&U<b;){var I=r[++U];if(I==="\\"){I++;continue}if(u.indexOf(I)!==-1){U=e(r,I,U+1);continue}if(N=S(),g.length&&r.indexOf(N,U+1)===-1)break;if(h[I]){g.push(I);continue}N===I&&g.pop()}if(A=U,A===-1){v[v.length-1]+=C;continue}C=r.slice(M,A+1),B.val=C,B.idx=M=A}if(u.indexOf(C)!==-1){if(A=e(r,C,M+1),A===-1){v[v.length-1]+=C;continue}t(C,l)===!0?C=r.slice(M,A+1):C=r.slice(M+1,A),B.val=C,B.idx=M=A}if(typeof a=="function"&&(a(B,m),C=B.val,M=B.idx),B.val===x&&B.split!==!1){v.push("");continue}v[v.length-1]+=B.val}return v};function e(r,s,a,l){var u=r.indexOf(s,a);return r.charAt(u-1)==="\\"?e(r,s,u+1):u}function t(r,s){return s.keepDoubleQuotes===!0&&r==='"'||s.keepSingleQuotes===!0&&r==="'"?!0:s.keepQuotes}function i(r,s,a){return typeof r.keepEscaping=="function"?r.keepEscaping(s,a):r.keepEscaping===!0||s[a+1]==="\\"}return k2}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var j2,ZD;function uQ(){return ZD||(ZD=1,j2=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),j2}var X2,QD;function fQ(){if(QD)return X2;QD=1;var n=uQ();X2=function(r){n(r)||(r={});for(var s=arguments.length,a=1;a<s;a++){var l=arguments[a];n(l)&&e(r,l)}return r};function e(i,r){for(var s in r)t(r,s)&&(i[s]=r[s])}function t(i,r){return Object.prototype.hasOwnProperty.call(i,r)}return X2}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var W2,eB;function hQ(){return eB||(eB=1,W2=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),W2}/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Y2,tB;function dQ(){if(tB)return Y2;tB=1;var n=cQ(),e=fQ(),t=$P(),i=hQ();Y2=function(s,a,l){if(!i(s)||(Array.isArray(a)&&(a=[].concat.apply([],a).join(".")),typeof a!="string"))return s;for(var u=n(a,{sep:".",brackets:!0}).filter(r),h=u.length,m=-1,g=s;++m<h;){var v=u[m];if(m!==h-1){i(g[v])||(g[v]={}),g=g[v];continue}t(g[v])&&t(l)?g[v]=e({},g[v],l):g[v]=l}return s};function r(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"}return Y2}var q2,nB;function pQ(){if(nB)return q2;nB=1;var n=$T(),e=sQ(),t=aQ(),i=dQ();return q2=function(s,a,l){if(!n(s))throw new TypeError("expected an object");if(typeof a!="string"||l==null)return e.apply(null,arguments);if(typeof l=="string")return i(s,a,l),s;var u=t(s,a);return n(l)&&n(u)&&(l=e({},u,l)),i(s,a,l),s},q2}var mQ=pQ();const gQ=A0(mQ),ZT=(...n)=>n.filter(Boolean).join(".");function vQ(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function yQ(n){const e=F.useRef(null),t=F.useRef(null),i=F.useRef(!0);return F.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),F.useEffect(()=>{if(i.current){i.current=!1;return}let r;const s=e.current,a=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",a,{once:!0});const{height:l}=t.current.getBoundingClientRect();return s.style.height=l+"px",n||(s.style.overflow="hidden",r=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",a),clearTimeout(r)}},[n]),{wrapperRef:e,contentRef:t}}const xQ=n=>{const[e,t]=F.useState(n.getVisiblePaths());return F.useEffect(()=>{t(n.getVisiblePaths());const i=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:U9});return()=>i()},[n]),e};function ZP(n=3){const e=F.useRef(null),t=F.useRef(null),[i,r]=F.useState(!1),s=F.useCallback(()=>r(!0),[]),a=F.useCallback(()=>r(!1),[]);return F.useLayoutEffect(()=>{if(i){const{bottom:l,top:u,left:h}=e.current.getBoundingClientRect(),{height:m}=t.current.getBoundingClientRect(),g=l+m>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=h+"px",g==="down"?t.current.style.top=l+n+"px":t.current.style.bottom=window.innerHeight-u+n+"px"}},[n,i]),{popinRef:e,wrapperRef:t,shown:i,show:s,hide:a}}j$([X$]);const _Q={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};fa.extend({color:()=>n=>Fs(n).isValid()});const bQ=n=>fa().color().test(n);function QP(n,{format:e,hasAlpha:t,isString:i}){const r=_Q[e]+(i&&e!=="hex"?"String":""),s=n[r]();return typeof s=="object"&&!t?uJ(s,["a"]):s}const eU=(n,e)=>{const t=Fs(n);if(!t.isValid())throw Error("Invalid color");return QP(t,e)},SQ=(n,e)=>QP(Fs(n),nn(nn({},e),{},{isString:!0,format:"hex"})),AQ=({value:n})=>{const e=k$(n),t=e==="name"?"hex":e,i=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),r={format:t,hasAlpha:i,isString:typeof n=="string"};return{value:eU(n,r),settings:r}};var EQ=Object.freeze({__proto__:null,schema:bQ,sanitize:eU,format:SQ,normalize:AQ});const MQ=It("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),TQ=It("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),CQ=It("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function iB(n,e){return e!=="rgb"?Fs(n).toRgb():n}function wQ({value:n,displayValue:e,settings:t,onUpdate:i}){const{emitOnEditStart:r,emitOnEditEnd:s}=xs(),{format:a,hasAlpha:l}=t,{popinRef:u,wrapperRef:h,shown:m,show:g,hide:v}=ZP(),x=F.useRef(0),[b,M]=F.useState(()=>iB(n,a)),A=l?Z$:eZ,S=()=>{M(iB(n,a)),g(),r()},C=()=>{v(),s(),window.clearTimeout(x.current)},R=()=>{x.current=window.setTimeout(C,500)};return F.useEffect(()=>()=>window.clearTimeout(x.current),[]),oe.createElement(oe.Fragment,null,oe.createElement(MQ,{ref:u,active:m,onClick:()=>S(),style:{color:e}}),m&&oe.createElement(kT,null,oe.createElement(AP,{onPointerUp:C}),oe.createElement(CQ,{ref:h,onMouseEnter:()=>window.clearTimeout(x.current),onMouseLeave:B=>B.buttons===0&&R()},oe.createElement(A,{color:b,onChange:i}))))}function RQ(){const{value:n,displayValue:e,label:t,onChange:i,onUpdate:r,settings:s}=xs();return oe.createElement(So,{input:!0},oe.createElement(hl,null,t),oe.createElement(TQ,null,oe.createElement(wQ,{value:n,displayValue:e,onChange:i,onUpdate:r,settings:s}),oe.createElement(VT,{value:e,onChange:i,onUpdate:r})))}var DQ=nn({component:RQ},EQ);function BQ(){const{label:n,displayValue:e,onUpdate:t,settings:i}=xs();return oe.createElement(So,{input:!0},oe.createElement(hl,null,n),oe.createElement(XT,{value:e,settings:i,onUpdate:t}))}var OQ=nn({component:BQ},BP(["x","y","z"]));const PQ=It("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),UQ=It("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function LQ({value:n,settings:e,onUpdate:t}){const i=F.useRef(),r=F.useRef(0),s=F.useRef(0),a=F.useRef(1),[l,u]=F.useState(!1),[h,m]=F.useState(!1),[g,v]=MP(),x=F.useRef(null),b=F.useRef(null);F.useLayoutEffect(()=>{if(l){const{top:$,left:Q,width:ce,height:fe}=x.current.getBoundingClientRect();b.current.style.left=Q+ce/2+"px",b.current.style.top=$+fe/2+"px"}},[l]);const{keys:[M,A],joystick:S}=e,C=S==="invertY"?1:-1,{[M]:{step:R},[A]:{step:B}}=e,N=Jc("sizes","joystickWidth"),U=Jc("sizes","joystickHeight"),I=parseFloat(N)*.8/2,z=parseFloat(U)*.8/2,L=F.useCallback(()=>{i.current||(m(!0),r.current&&v({x:r.current*I}),s.current&&v({y:s.current*-z}),i.current=window.setInterval(()=>{t($=>{const Q=R*r.current*a.current,ce=C*B*s.current*a.current;return Array.isArray($)?{[M]:$[0]+Q,[A]:$[1]+ce}:{[M]:$[M]+Q,[A]:$[A]+ce}})},16))},[I,z,t,v,R,B,M,A,C]),O=F.useCallback(()=>{window.clearTimeout(i.current),i.current=void 0,m(!1)},[]);F.useEffect(()=>{function $(Q){a.current=cP(Q)}return window.addEventListener("keydown",$),window.addEventListener("keyup",$),()=>{window.clearTimeout(i.current),window.removeEventListener("keydown",$),window.removeEventListener("keyup",$)}},[]);const G=ly(({first:$,active:Q,delta:[ce,fe],movement:[k,K]})=>{$&&u(!0);const ee=Mf(k,-I,I),me=Mf(K,-z,z);r.current=Math.abs(k)>Math.abs(ee)?Math.sign(k-ee):0,s.current=Math.abs(K)>Math.abs(me)?Math.sign(me-K):0;let W=n[M],ae=n[A];Q?(r.current||(W+=ce*R*a.current,v({x:ee})),s.current||(ae-=C*fe*B*a.current,v({y:me})),r.current||s.current?L():O(),t({[M]:W,[A]:ae})):(u(!1),r.current=0,s.current=0,v({x:0,y:0}),O())});return oe.createElement(PQ,hr({ref:x},G()),l&&oe.createElement(kT,null,oe.createElement(UQ,{ref:b,isOutOfBounds:h},oe.createElement("div",null),oe.createElement("span",{ref:g}))))}const NQ=It("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function IQ(){const{label:n,displayValue:e,onUpdate:t,settings:i}=xs();return oe.createElement(So,{input:!0},oe.createElement(hl,null,n),oe.createElement(NQ,{withJoystick:!!i.joystick},i.joystick&&oe.createElement(LQ,{value:e,settings:i,onUpdate:t}),oe.createElement(XT,{value:e,settings:i,onUpdate:t})))}const FQ=["joystick"],tU=BP(["x","y"]),zQ=n=>{let{joystick:e=!0}=n,t=ui(n,FQ);const{value:i,settings:r}=tU.normalize(t);return{value:i,settings:nn(nn({},r),{},{joystick:e})}};var HQ=nn(nn({component:IQ},tU),{},{normalize:zQ});const GQ=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob | File].")}},VQ=(n,e)=>typeof e=="object"&&"image"in e,kQ=({image:n})=>({value:n});var jQ=Object.freeze({__proto__:null,sanitize:GQ,schema:VQ,normalize:kQ});const XQ=It("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),WQ=It("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),YQ=It("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),qQ=It("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),KQ=It("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),JQ=It("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function $Q(){const{label:n,value:e,onUpdate:t,disabled:i}=xs(),{popinRef:r,wrapperRef:s,shown:a,show:l,hide:u}=ZP(),h=F.useCallback(b=>{b.length&&t(b[0])},[t]),m=F.useCallback(b=>{b.stopPropagation(),t(void 0)},[t]),{getRootProps:g,getInputProps:v,isDragAccept:x}=JP({maxFiles:1,accept:"image/*",onDrop:h,disabled:i});return oe.createElement(So,{input:!0},oe.createElement(hl,null,n),oe.createElement(XQ,null,oe.createElement(YQ,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&l(),onPointerUp:u,style:{backgroundImage:e?`url(${e})`:"none"}}),a&&!!e&&oe.createElement(kT,null,oe.createElement(AP,{onPointerUp:u,style:{cursor:"pointer"}}),oe.createElement(qQ,{ref:s,style:{backgroundImage:`url(${e})`}})),oe.createElement(WQ,g({isDragAccept:x}),oe.createElement("input",v()),oe.createElement(KQ,null,x?"drop image":"click or drop")),oe.createElement(JQ,{onClick:m,disabled:!e})))}var ZQ=nn({component:$Q},jQ);const rB=fa().number(),QQ=(n,e)=>fa().array().length(2).every.number().test(n)&&fa().schema({min:rB,max:rB}).test(e),pb=n=>({min:n[0],max:n[1]}),nU=(n,{bounds:[e,t]},i)=>{const r=Array.isArray(n)?pb(n):n,s={min:i[0],max:i[1]},{min:a,max:l}=nn(nn({},s),r);return[Mf(Number(a),e,Math.max(e,l)),Mf(Number(l),Math.min(t,a),t)]},eee=({value:n,min:e,max:t})=>{const i={min:e,max:t},r=DP(pb(n),{min:i,max:i}),s=[e,t],a=nn(nn({},r),{},{bounds:s});return{value:nU(pb(n),a,n),settings:a}};var tee=Object.freeze({__proto__:null,schema:QQ,format:pb,sanitize:nU,normalize:eee});const nee=["value","bounds","onDrag"],iee=["bounds"],ree=It("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function see(n){let{value:e,bounds:[t,i],onDrag:r}=n,s=ui(n,nee);const a=F.useRef(null),l=F.useRef(null),u=F.useRef(null),h=F.useRef(0),m=Jc("sizes","scrubberWidth"),g=ly(({event:b,first:M,xy:[A],movement:[S],memo:C={}})=>{if(M){const{width:B,left:N}=a.current.getBoundingClientRect();h.current=B-parseFloat(m);const U=(b==null?void 0:b.target)===l.current||(b==null?void 0:b.target)===u.current;C.pos=cb((A-N)/B,t,i);const I=Math.abs(C.pos-e.min)-Math.abs(C.pos-e.max);C.key=I<0||I===0&&C.pos<=e.min?"min":"max",U&&(C.pos=e[C.key])}const R=C.pos+cb(S/h.current,0,i-t);return r({[C.key]:JJ(R,s[C.key])}),C}),v=`calc(${lb(e.min,t,i)} * (100% - ${m} - 8px) + 4px)`,x=`calc(${1-lb(e.max,t,i)} * (100% - ${m} - 8px) + 4px)`;return oe.createElement(CP,hr({ref:a},g()),oe.createElement(TP,null,oe.createElement(wP,{style:{left:v,right:x}})),oe.createElement(rM,{position:"left",ref:l,style:{left:v}}),oe.createElement(rM,{position:"right",ref:u,style:{right:x}}))}function aee(){const{label:n,displayValue:e,onUpdate:t,settings:i}=xs(),r=ui(i,iee);return oe.createElement(oe.Fragment,null,oe.createElement(So,{input:!0},oe.createElement(hl,null,n),oe.createElement(ree,null,oe.createElement(see,hr({value:e},i,{onDrag:t})),oe.createElement(XT,{value:e,settings:r,onUpdate:t,innerLabelTrim:0}))))}var oee=nn({component:aee},tee);const lee=()=>{const n=new Map;return{on:(e,t)=>{let i=n.get(e);i===void 0&&(i=new Set,n.set(e,i)),i.add(t)},off:(e,t)=>{const i=n.get(e);i!==void 0&&(i.delete(t),i.size===0&&n.delete(e))},emit:(e,...t)=>{const i=n.get(e);if(i!==void 0)for(const r of i)r(...t)}}},cee=["type","value"],uee=["onChange","transient","onEditStart","onEditEnd"],fee=function(){const e=tQ(nQ(()=>({data:{}}))),t=lee();this.storeId=cJ(),this.useStore=e;const i={},r=new Set;this.getVisiblePaths=()=>{const a=this.getData(),l=Object.keys(a),u=[];Object.entries(i).forEach(([m,g])=>{g.render&&l.some(v=>v.indexOf(m)===0)&&!g.render(this.get)&&u.push(m+".")});const h=[];return r.forEach(m=>{m in a&&a[m].__refCount>0&&u.every(g=>m.indexOf(g)===-1)&&(!a[m].render||a[m].render(this.get))&&h.push(m)}),h},this.setOrderedPaths=a=>{a.forEach(l=>r.add(l))},this.orderPaths=a=>(this.setOrderedPaths(a),a),this.disposePaths=a=>{e.setState(l=>{const u=l.data;return a.forEach(h=>{if(h in u){const m=u[h];m.__refCount--,m.__refCount===0&&m.type in Ql&&delete u[h]}}),{data:u}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=a=>i[a]||{},this.getData=()=>e.getState().data,this.addData=(a,l)=>{e.setState(u=>{const h=u.data;return Object.entries(a).forEach(([m,g])=>{let v=h[m];if(v){const{type:x,value:b}=g,M=ui(g,cee);x!==v.type?kc(Oi.INPUT_TYPE_OVERRIDE,x):((v.__refCount===0||l)&&Object.assign(v,M),v.__refCount++)}else h[m]=nn(nn({},g),{},{__refCount:1})}),{data:h}})},this.setValueAtPath=(a,l,u)=>{e.setState(h=>{const m=h.data;return gD(m[a],l,a,this,u),{data:m}})},this.setSettingsAtPath=(a,l)=>{e.setState(u=>{const h=u.data;return h[a].settings=nn(nn({},h[a].settings),l),{data:h}})},this.disableInputAtPath=(a,l)=>{e.setState(u=>{const h=u.data;return h[a].disabled=l,{data:h}})},this.set=(a,l)=>{e.setState(u=>{const h=u.data;return Object.entries(a).forEach(([m,g])=>{try{gD(h[m],g,void 0,void 0,l)}catch{}}),{data:h}})},this.getInput=a=>{try{return this.getData()[a]}catch{kc(Oi.PATH_DOESNT_EXIST,a)}},this.get=a=>{var l;return(l=this.getInput(a))===null||l===void 0?void 0:l.value},this.emitOnEditStart=a=>{t.emit(`onEditStart:${a}`,this.get(a),a,nn(nn({},this.getInput(a)),{},{get:this.get}))},this.emitOnEditEnd=a=>{t.emit(`onEditEnd:${a}`,this.get(a),a,nn(nn({},this.getInput(a)),{},{get:this.get}))},this.subscribeToEditStart=(a,l)=>{const u=`onEditStart:${a}`;return t.on(u,l),()=>t.off(u,l)},this.subscribeToEditEnd=(a,l)=>{const u=`onEditEnd:${a}`;return t.on(u,l),()=>t.off(u,l)};const s=(a,l,u)=>{const h={};return Object.entries(a).forEach(([m,g])=>{if(m==="")return kc(Oi.EMPTY_KEY);let v=ZT(l,m);if(g.type===Ql.FOLDER){const x=s(g.schema,v,u);Object.assign(h,x),v in i||(i[v]=g.settings)}else if(m in u)kc(Oi.DUPLICATE_KEYS,m,v,u[m].path);else{const x=gJ(g,m,v,h);if(x){const{type:b,options:M,input:A}=x,{onChange:S,transient:C,onEditStart:R,onEditEnd:B}=M,N=ui(M,uee);h[v]=nn(nn(nn({type:b},N),A),{},{fromPanel:!0}),u[m]={path:v,onChange:S,transient:C,onEditStart:R,onEditEnd:B}}else kc(Oi.UNKNOWN_INPUT,v,g)}}),h};this.getDataFromSchema=a=>{const l={};return[s(a,"",l),l]}};new fee;const sB=n=>"__levaInput"in n,hee=(n,e)=>{const t={},i=e?e.toLowerCase():null;return n.forEach(r=>{const[s,a]=vQ(r);(!i||s.toLowerCase().indexOf(i)>-1)&&gQ(t,a,{[s]:{__levaInput:!0,path:r}})}),t},dee=["type","label","path","valueKey","value","settings","setValue","disabled"];function pee(n){let{type:e,label:t,path:i,valueKey:r,value:s,settings:a,setValue:l,disabled:u}=n,h=ui(n,dee);const{displayValue:m,onChange:g,onUpdate:v}=EP({type:e,value:s,settings:a,setValue:l}),x=b0[e].component;return x?oe.createElement(pP.Provider,{value:nn({key:r,path:i,id:""+i,label:t,displayValue:m,value:s,onChange:g,onUpdate:v,settings:a,setValue:l,disabled:u},h)},oe.createElement(UJ,{disabled:u},oe.createElement(x,null))):(kc(Oi.NO_COMPONENT_FOR_TYPE,e,i),null)}const mee=It("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function gee({onClick:n,settings:e,label:t}){const i=oy();return oe.createElement(So,null,oe.createElement(mee,{disabled:e.disabled,onClick:()=>n(i.get)},t))}const vee=It("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),yee=It("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),xee=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,i=e;return typeof e.opts=="object"&&(i.label!==void 0&&(t=e.label),i=e.opts),{label:t,opts:i}};function _ee(n){const{label:e,opts:t}=xee(n),i=oy();return oe.createElement(So,{input:!!e},e&&oe.createElement(hl,null,e),oe.createElement(vee,null,Object.entries(t).map(([r,s])=>oe.createElement(yee,{key:r,onClick:()=>s(i.get)},r))))}const bee=It("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),iU=100;function See(n,e){n.push(e),n.length>iU&&n.shift()}const Aee=F.forwardRef(function({initialValue:n},e){const t=Jc("colors","highlight3"),i=Jc("colors","elevation2"),r=Jc("colors","highlight1"),[s,a]=F.useMemo(()=>[Fs(r).alpha(.4).toRgbString(),Fs(r).alpha(.1).toRgbString()],[r]),l=F.useRef([n]),u=F.useRef(n),h=F.useRef(n),m=F.useRef(),g=F.useCallback((b,M)=>{if(!b)return;const{width:A,height:S}=b,C=new Path2D,R=A/iU,B=S*.05;for(let I=0;I<l.current.length;I++){const z=lb(l.current[I],u.current,h.current),L=R*I,O=S-z*(S-B*2)-B;C.lineTo(L,O)}M.clearRect(0,0,A,S);const N=new Path2D(C);N.lineTo(R*(l.current.length+1),S),N.lineTo(0,S),N.lineTo(0,0);const U=M.createLinearGradient(0,0,0,S);U.addColorStop(0,s),U.addColorStop(1,a),M.fillStyle=U,M.fill(N),M.strokeStyle=i,M.lineJoin="round",M.lineWidth=14,M.stroke(C),M.strokeStyle=t,M.lineWidth=2,M.stroke(C)},[t,i,s,a]),[v,x]=kJ(g);return F.useImperativeHandle(e,()=>({frame:b=>{(u.current===void 0||b<u.current)&&(u.current=b),(h.current===void 0||b>h.current)&&(h.current=b),See(l.current,b),m.current=requestAnimationFrame(()=>g(v.current,x.current))}}),[v,x,g]),F.useEffect(()=>()=>cancelAnimationFrame(m.current),[]),oe.createElement(bee,{ref:v})}),aB=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),Eee=F.forwardRef(function({initialValue:n},e){const[t,i]=F.useState(aB(n));return F.useImperativeHandle(e,()=>({frame:r=>i(aB(r))}),[]),oe.createElement("div",null,t)});function oB(n){return typeof n=="function"?n():n.current}function Mee({label:n,objectOrFn:e,settings:t}){const i=F.useRef(),r=F.useRef(oB(e));return F.useEffect(()=>{const s=window.setInterval(()=>{var a;document.hidden||(a=i.current)===null||a===void 0||a.frame(oB(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),oe.createElement(So,{input:!0},oe.createElement(hl,{align:"top"},n),t.graph?oe.createElement(Aee,{ref:i,initialValue:r.current}):oe.createElement(Eee,{ref:i,initialValue:r.current}))}const Tee=["type","label","key"],Cee={[Ql.BUTTON]:gee,[Ql.BUTTON_GROUP]:_ee,[Ql.MONITOR]:Mee},wee=oe.memo(({path:n})=>{const[e,{set:t,setSettings:i,disable:r,storeId:s,emitOnEditStart:a,emitOnEditEnd:l}]=XJ(n);if(!e)return null;const{type:u,label:h,key:m}=e,g=ui(e,Tee);if(u in Ql){const v=Cee[u];return oe.createElement(v,hr({label:h,path:n},g))}return u in b0?oe.createElement(pee,hr({key:s+n,type:u,label:h,storeId:s,path:n,valueKey:m,setValue:t,setSettings:i,disable:r,emitOnEditStart:a,emitOnEditEnd:l},g)):(tJ(Oi.UNSUPPORTED_INPUT,u,n),null)});function Ree({toggle:n,toggled:e,name:t}){return oe.createElement(BJ,{onClick:()=>n()},oe.createElement(jT,{toggled:e}),oe.createElement("div",null,t))}const Dee=({name:n,path:e,tree:t})=>{const i=oy(),r=ZT(e,n),{collapsed:s,color:a}=i.getFolderSettings(r),[l,u]=F.useState(!s),h=F.useRef(null),m=Jc("colors","folderWidgetColor"),g=Jc("colors","folderTextColor");return F.useLayoutEffect(()=>{h.current.style.setProperty("--leva-colors-folderWidgetColor",a||m),h.current.style.setProperty("--leva-colors-folderTextColor",a||g)},[a,m,g]),oe.createElement(ub,{ref:h},oe.createElement(Ree,{name:n,toggled:l,toggle:()=>u(v=>!v)}),oe.createElement(rU,{parent:r,tree:t,toggled:l}))},rU=oe.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:i,tree:r,toggled:s})=>{const{wrapperRef:a,contentRef:l}=yQ(s),u=oy(),h=([g,v])=>{var x;return(sB(v)?(x=u.getInput(v.path))===null||x===void 0?void 0:x.order:u.getFolderSettings(ZT(i,g)).order)||0},m=Object.entries(r).sort((g,v)=>h(g)-h(v));return oe.createElement(nM,{ref:a,isRoot:n,fill:e,flat:t},oe.createElement(_P,{ref:l,isRoot:n,toggled:s},m.map(([g,v])=>sB(v)?oe.createElement(wee,{key:v.path,valueKey:v.valueKey,path:v.path}):oe.createElement(Dee,{key:g,name:g,path:i,tree:v}))))}),Bee=It("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${SP}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),sU=40,mb=It("i",{$flexCenter:"",width:sU,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),Oee=It("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),Pee=It("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${mb}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),Uee=It("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),Lee=It("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:sU}}}}),Nee=oe.forwardRef(({setFilter:n,toggle:e},t)=>{const[i,r]=F.useState(""),s=F.useMemo(()=>lP(n,250),[n]),a=()=>{n(""),r("")},l=u=>{const h=u.currentTarget.value;e(!0),r(h)};return F.useEffect(()=>{s(i)},[i,s]),oe.createElement(oe.Fragment,null,oe.createElement(Uee,{ref:t,value:i,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:u=>u.stopPropagation(),onChange:l}),oe.createElement(mb,{onClick:()=>a(),style:{visibility:i?"visible":"hidden"}},oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},oe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function Iee({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:i,toggle:r,toggled:s,title:a,drag:l,filterEnabled:u,from:h}){const[m,g]=F.useState(!1),v=F.useRef(null);F.useEffect(()=>{var b,M;m?(b=v.current)===null||b===void 0||b.focus():(M=v.current)===null||M===void 0||M.blur()},[m]);const x=ly(({offset:[b,M],first:A,last:S})=>{e({x:b,y:M}),A&&t({x:b,y:M}),S&&i({x:b,y:M})},{filterTaps:!0,from:({offset:[b,M]})=>[(h==null?void 0:h.x)||b,(h==null?void 0:h.y)||M]});return F.useEffect(()=>{const b=M=>{M.key==="L"&&M.shiftKey&&M.metaKey&&g(A=>!A)};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[]),oe.createElement(oe.Fragment,null,oe.createElement(Oee,{mode:l?"drag":void 0},oe.createElement(mb,{active:!s,onClick:()=>r()},oe.createElement(jT,{toggled:s,width:12,height:8})),oe.createElement(Lee,hr({},l?x():{},{drag:l,filterEnabled:u}),a===void 0&&l?oe.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},oe.createElement("circle",{cx:"2",cy:"2",r:"2"}),oe.createElement("circle",{cx:"14",cy:"2",r:"2"}),oe.createElement("circle",{cx:"26",cy:"2",r:"2"}),oe.createElement("circle",{cx:"2",cy:"12",r:"2"}),oe.createElement("circle",{cx:"14",cy:"12",r:"2"}),oe.createElement("circle",{cx:"26",cy:"12",r:"2"})):a),u&&oe.createElement(mb,{active:m,onClick:()=>g(b=>!b)},oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},oe.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),oe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),oe.createElement(Pee,{toggled:m},oe.createElement(Nee,{ref:v,setFilter:n,toggle:r})))}oe.memo(({store:n,rootClass:e,fill:t=!1,flat:i=!1,neverHide:r=!1,oneLineLabels:s=!1,titleBar:a={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:l=!1,toggled:u,setToggle:h})=>{var m,g;const v=xQ(n),[x,b]=F.useState(""),M=F.useMemo(()=>hee(v,x),[v,x]),[A,S]=MP(),C=r||v.length>0,R=typeof a=="object"&&a.title||void 0,B=typeof a=="object"&&(m=a.drag)!==null&&m!==void 0?m:!0,N=typeof a=="object"&&(g=a.filter)!==null&&g!==void 0?g:!0,U=typeof a=="object"&&a.position||void 0,I=typeof a=="object"&&a.onDrag||void 0,z=typeof a=="object"&&a.onDragStart||void 0,L=typeof a=="object"&&a.onDragEnd||void 0;return oe.useEffect(()=>{S({x:U==null?void 0:U.x,y:U==null?void 0:U.y})},[U,S]),MJ(),oe.createElement(vP.Provider,{value:{hideCopyButton:l}},oe.createElement(Bee,{ref:A,className:e,fill:t,flat:i,oneLineLabels:s,hideTitleBar:!a,style:{display:C?"block":"none"}},a&&oe.createElement(Iee,{onDrag:O=>{S(O),I==null||I(O)},onDragStart:O=>z==null?void 0:z(O),onDragEnd:O=>L==null?void 0:L(O),setFilter:b,toggle:O=>h(G=>O??!G),toggled:u,title:R,drag:B,filterEnabled:N,from:U}),C&&oe.createElement(gP.Provider,{value:n},oe.createElement(rU,{isRoot:!0,fill:t,flat:i,tree:M,toggled:u}))))});iu(cl.SELECT,l$);iu(cl.IMAGE,ZQ);iu(cl.NUMBER,ZJ);iu(cl.COLOR,DQ);iu(cl.STRING,v$);iu(cl.BOOLEAN,E$);iu(cl.INTERVAL,oee);iu(cl.VECTOR3D,OQ);iu(cl.VECTOR2D,HQ);let aU={economics:[{settings:[1,0,30,2,2,30,5],paths:[[.0038,.0749,.0085,.003,.071,9e-4,.0051,.0681,-.0069,.0114,.0667,-.0126,.0188,.0661,-.017,.0267,.0678,-.0188,.033,.0703,-.0139,.0378,.0703,-.0067,.0429,.0685,1e-4,.0472,.0658,.007,.0487,.0636,.0152,.0486,.0606,.0232,.0519,.0545,.0277,.0578,.0494,.0257,.0613,.0504,.0184,.0593,.0554,.0118,.0565,.0596,.0048,.0539,.0627,-.0029,.051,.0649,-.0108,.047,.0664,-.0183,.0411,.0663,-.0246,.0364,.0626,-.0303,.0387,.0565,-.0356,.044,.052,-.0408,.0497,.0487,-.0465,.0553,.0454,-.0522,.0602,.0399,-.0565,.0638,.0325,-.0592,.0663,.0249,-.0624,.0673,.0175,-.0667,.0671,.009,-.0677,.0662,7e-4,-.0655,.0637,-.0064,-.0612,.0602,-.0121,-.0558,.056,-.0161,-.0494,.0562,-.0229,-.0451,.0609,-.0301,-.0455,.067,-.0357,-.0477,.0736,-.0408,-.0465,.079,-.0459,-.0419],[-.034,.0696,-.0067,-.0411,.0661,-.0103,-.0481,.0622,-.0135,-.0548,.057,-.0152,-.0608,.0518,-.0123,-.0652,.0486,-.0056,-.0692,.0455,.0014,-.0731,.0423,.0085,-.0766,.04,.0161,-.081,.0361,.0223,-.0858,.0296,.0251,-.0882,.0221,.0284,-.0882,.0192,.0362,-.0891,.0202,.0447,-.0897,.0205,.0533,-.0873,.018,.0611,-.0809,.015,.0657,-.0741,.0102,.0664,-.0718,.0019,.067,-.0712,-.0066,.0688,-.0718,-.0152,.0693,-.0713,-.0238,.0687,-.0679,-.0314,.0661,-.0639,-.038,.0623,-.0583,-.0418,.0571,-.0523,-.0419,.051,-.0472,-.0406,.044,-.0421,-.0395,.0371,-.0362,-.0369,.0314,-.0319,-.0309,.0271,-.0291,-.0235,.0235,-.0243,-.0188,.0185,-.0172,-.0185,.0137,-.0096,-.0196,.0095,-.0028,-.0208,.0044,.0044,-.0226,-1e-4,.0123,-.024,-.0035,.0199,-.0236,-.0076,.0261,-.0228,-.0135,.0314,-.0231,-.0204,.0373,-.0237,-.0267,.0439,-.0253,-.0321,.0506,-.0272,-.0374,.0573,-.0296,-.0424,.0637,-.0334,-.0467,.0708,-.038,-.0484,.0778,-.0407,-.0446,.0833,-.0423,-.038,.0897,-.0412,-.0337,.0949,-.0349,-.0362,.0988,-.0275,-.0348,.1004,-.0208,-.0295,.1019,-.0158,-.0226,.1025,-.0113,-.0153,.1013,-.0049,-.0096],[-.0454,.0357,-.0569,-.0372,.0383,-.0585,-.0297,.0421,-.061,-.0226,.0469,-.0626,-.0155,.0519,-.0625,-.0086,.0566,-.0596,-8e-4,.0599,-.0576,.0073,.0623,-.0556,.0146,.0648,-.0516,.0211,.0665,-.0461,.0267,.0661,-.0394,.0322,.0615,-.0353,.0376,.056,-.0388,.0429,.0519,-.0444,.0488,.0486,-.05,.0548,.0446,-.055,.0602,.0386,-.0581,.0642,.0311,-.0597,.0668,.0235,-.0631,.0673,.0158,-.067,.067,.0072,-.0676,.0659,-.0013,-.0659,.0628,-.0088,-.0629,.0572,-.0131,-.058,.0503,-.0151,-.053,.0434,-.0194,-.0498,.0367,-.0231,-.0457,.0305,-.0258,-.0401,.0241,-.0271,-.0343,.0171,-.0282,-.0292,.0101,-.031,-.0249,.006,-.0377,-.0219,.0054,-.0463,-.0202,.0054,-.055,-.0193,.0057,-.0637,-.0195,.0061,-.0724,-.0199],[.0113,.0336,-.0878,.0164,.0382,-.0824,.0238,.0412,-.0788,.0311,.0443,-.0751,.0377,.0477,-.0703,.0436,.0496,-.0642,.0482,.0495,-.0567,.0472,.0494,-.0484,.0424,.0516,-.0414,.0379,.0564,-.0356,.0359,.0625,-.0301,.0414,.0663,-.0246,.0472,.0664,-.0182,.0511,.0649,-.0105,.054,.0626,-.0025,.0565,.0595,.0054,.0595,.0552,.0123,.0611,.0501,.0191,.0572,.0498,.0261,.0512,.0554,.0275,.0488,.0611,.0219,.0488,.064,.0137,.0467,.0662,.0055,.042,.0688,-.0015,.0369,.0703,-.0085,.0317,.0698,-.0154,.0245,.0673,-.019,.0166,.0661,-.0158,.0093,.0672,-.011,.0027,.0688,-.0055,-.0035,.0698,6e-4,-.0098,.07,.0068,-.0161,.069,.0128,-.0229,.067,.018,-.0312,.0672,.0177,-.0387,.0672,.0132,-.0457,.0642,.0146,-.0506,.0615,.0214,-.0571,.0583,.0258,-.0593,.0569,.0199],[.0891,-.047,-.0175,.0884,-.045,-.026,.086,-.043,-.0342,.0814,-.0414,-.0414,.0749,-.0399,-.047,.0673,-.0361,-.0478,.061,-.0305,-.0455,.0565,-.0232,-.045,.0554,-.0157,-.0488,.0583,-.013,-.0562,.0626,-.0148,-.0636,.0671,-.0161,-.0708,.069,-.0135,-.0788,.066,-.0109,-.0864,.0597,-.0108,-.0924,.0521,-.013,-.096,.0439,-.0155,-.0978,.0353,-.0159,-.0991,.0272,-.0132,-.101,.0195,-.0093,-.1022,.0133,-.0033,-.1016,.0093,.0043,-.0998,.0076,.0124,-.097,.0058,.0203,-.0937,.0021,.027,-.0895,-.0035,.0312,-.0845,-.011,.0316,-.0802,-.019,.031,-.0765,-.0268,.0293,-.073,-.034,.0247,-.072,-.0383,.0176,-.0746,-.0387,.0095,-.0774,-.0323,.0054,-.0807,-.0245,.0066,-.0844,-.0172,.0106,-.087,-.0105,.0158,-.0892],[.0226,-.1047,-.0335,.0195,-.0969,-.0312,.0158,-.0894,-.0292,.0114,-.0822,-.0271,.0078,-.0748,-.0244,.0059,-.0671,-.021,.0055,-.0587,-.0192,.0054,-.0501,-.0196,.0055,-.0416,-.021,.0077,-.0337,-.0234,.0137,-.0291,-.027,.0208,-.0276,-.0318,.0274,-.0267,-.0372,.0335,-.0246,-.0429,.0399,-.0215,-.0479,.0466,-.0173,-.0513,.0536,-.0141,-.0551,.06,-.0117,-.0603,.0645,-.0058,-.0645,.0667,.0022,-.0668,.0672,.0107,-.0677,.0673,.0191,-.066,.0659,.0264,-.0616,.0629,.034,-.059,.0583,.041,-.0571,.0527,.0462,-.0533,.0468,.0495,-.0479,.0411,.053,-.0423,.036,.0575,-.037,.0305,.0634,-.0359,.025,.0666,-.0415,.0192,.0661,-.0478,.0127,.0641,-.0531,.005,.0617,-.0561,-.0032,.0594,-.0576,-.0095,.055,-.061,-.0107,.0488,-.0667],[-.0113,.065,.0502,-.0185,.0634,.0459,-.0259,.0612,.0494,-.0302,.0576,.0561,-.0344,.0528,.0621,-.0413,.0485,.0649,-.0488,.0455,.0616,-.0547,.0415,.0564,-.0597,.0349,.0582,-.0637,.0283,.0624,-.0688,.0223,.0665,-.071,.0142,.0689,-.0709,.0054,.0696,-.0709,-.0034,.0693,-.0717,-.0122,.0692,-.0716,-.021,.069,-.0691,-.0291,.0672,-.0651,-.0361,.0635,-.06,-.0414,.0588,-.0538,-.0421,.0526,-.0484,-.0408,.0458,-.0433,-.0397,.0386,-.0374,-.0378,.0324,-.0325,-.0323,.0278,-.0296,-.0248,.0241,-.0253,-.0192,.0193,-.0183,-.0184,.0143,-.0105,-.0195,.0101,-.0034,-.0207,.0051,.0037,-.022,0,.0098,-.0246,-.0057,.0108,-.032,-.0101,.0116,-.0406,-.0122,.0111,-.0493,-.0119,.0093,-.0579,-.0109,.0087,-.0667,-.0105,.0103,-.0753,-.0113,.0135,-.0828,-.0147,.017,-.0892,-.0196,.0195,-.0967,-.0233,.0203,-.1055,-.0233,.0206,-.1141,-.0216],[-.0283,.0634,.0276,-.034,.0602,.0333,-.039,.0561,.039,-.0449,.0524,.0441,-.0519,.0484,.0473,-.0576,.0427,.0503,-.0609,.0362,.0548,-.063,.0291,.0592,-.0672,.0237,.0643,-.0707,.017,.0682,-.0712,.0086,.0698,-.0709,-1e-4,.0697,-.0712,-.0087,.0692,-.0719,-.0173,.0692,-.0708,-.0259,.0686,-.0671,-.033,.0656,-.0628,-.0392,.0614,-.057,-.0421,.0559,-.0512,-.0416,.0496,-.0462,-.0401,.0426,-.0408,-.039,.036,-.035,-.0359,.0304,-.0312,-.0293,.0265,-.0285,-.0221,.0226,-.0229,-.0186,.0173,-.016,-.0189,.0121,-.0094,-.0189,.0066,-.0034,-.0177,5e-4,.0014,-.0188,-.0065,.0041,-.0217,-.0141,.0077,-.0232,-.0218,.0137,-.0249,-.0277,.0208,-.0268,-.0323,.0278,-.0271,-.0373,.0341,-.0269,-.0432,.0397,-.0278,-.0497,.0449,-.0308,-.056],[-.0451,.0052,-.0729,-.0506,-4e-4,-.0691,-.0561,-.0048,-.064,-.0607,-.0085,-.0576,-.0651,-.0126,-.0513,-.0689,-.0166,-.0444,-.0733,-.0213,-.0385,-.0769,-.0272,-.0333,-.0786,-.0336,-.0276,-.0772,-.0379,-.0203,-.0732,-.0413,-.0133,-.0686,-.0446,-.0067,-.0629,-.0465,-4e-4,-.0556,-.0466,.0043,-.0476,-.0437,.0057,-.0411,-.0379,.0058,-.0366,-.0314,.0094,-.0322,-.0259,.0145,-.0264,-.0207,.0184,-.0183,-.0188,.02,-.0101,-.0213,.0191,-.0026,-.0252,.0169,.0054,-.0281,.0152,.0132,-.0318,.0135,.0196,-.0373,.0119,.0253,-.0437,.0131,.0316,-.0483,.0169,.0397,-.0508,.0191,.0482,-.0526,.0201,.0567,-.0536,.0214,.0651,-.053,.0236,.073,-.0499,.0257,.0775,-.044,.0294,.0753,-.0388,.0357,.0701,-.0366,.0423,.0645,-.0372,.0489,.0582,-.0394,.0546,.0516,-.042,.0597],[-.054,-.0429,.0473,-.06,-.0422,.0537,-.0643,-.0388,.0603,-.0673,-.0324,.0654,-.0709,-.025,.0686,-.0719,-.0164,.0692,-.0712,-.0076,.0692,-.0709,.0011,.0696,-.0712,.0099,.0697,-.0704,.0183,.0679,-.0663,.0244,.0634,-.0625,.0303,.0584,-.0604,.0375,.0539,-.0564,.0439,.0496,-.0502,.0493,.0466,-.0433,.0532,.0427,-.0377,.0574,.0375,-.0323,.0615,.0319,-.0262,.0639,.0261,-.0199,.0669,.0207,-.0139,.0695,.0149,-.0077,.0702,.0088,-.0017,.0698,.0024,.0037,.0687,-.0044,.0094,.0671,-.0109,.0165,.0661,-.0158,.0245,.0672,-.019,.0316,.0697,-.0155,.0368,.0704,-.0085,.0419,.0689,-.0016,.0465,.0663,.0054,.0487,.064,.0135,.049,.0612,.0218,.0514,.0552,.0273,.0551,.0479,.0302,.0568,.041,.0352,.0561,.0355,.0419,.0527,.0321,.0492,.0481,.0302,.0564,.0432,.028,.0633],[-.0183,.0693,.0275,-.0254,.0646,.0267,-.032,.0616,.0311,-.0372,.0577,.0369,-.0425,.0536,.0424,-.0494,.0499,.0462,-.0559,.0449,.049,-.06,.0385,.0532,-.0621,.0314,.0577,-.0656,.0252,.0625,-.07,.0195,.0672,-.0712,.0114,.0696,-.0709,.0027,.0699,-.071,-.006,.0693,-.0718,-.0146,.0692,-.0714,-.0233,.0688,-.0682,-.0309,.0665,-.0641,-.0375,.0626,-.0587,-.0419,.0575,-.0527,-.0419,.0513,-.0476,-.0405,.0444,-.0424,-.0394,.0376,-.0364,-.037,.0317,-.0319,-.0312,.0273,-.0292,-.0239,.0235,-.0246,-.0188,.0186,-.0174,-.0186,.0138,-.0098,-.0197,.0097,-.0028,-.0209,.0047,.0042,-.0221,-4e-4,.0096,-.0252,-.0061,.0109,-.0325,-.0103,.0116,-.041,-.012,.0112,-.0497,-.0118,.0094,-.0581,-.0109,.0088,-.0668,-.0102,.0104,-.0752,-.0112,.0135,-.0825,-.0146,.017,-.0889,-.0193,.0192,-.0963,-.0233,.0192,-.1047,-.0256],[-.0421,.0659,-.0141,-.0495,.0611,-.0147,-.0562,.0555,-.0152,-.0619,.0508,-.0108,-.0662,.048,-.0037,-.0702,.0446,.0035,-.074,.0417,.0108,-.0779,.039,.0182,-.0828,.0341,.0234,-.0872,.0269,.026,-.0882,.0202,.0311,-.0884,.0194,.0396,-.0896,.0206,.0483,-.0893,.0196,.0569,-.0848,.0166,.0636,-.0772,.0134,.0662,-.0729,.0063,.0663,-.0715,-.0023,.0679,-.0714,-.011,.0692,-.0718,-.0198,.0692,-.0698,-.0282,.0678,-.0658,-.0352,.0643,-.0609,-.0408,.0597,-.0548,-.0422,.0536,-.0491,-.0411,.047,-.0442,-.0398,.0398,-.0384,-.0382,.0334,-.033,-.0332,.0287,-.0297,-.0261,.0248,-.0308,-.0244,.0174,-.0343,-.0291,.0109,-.0348,-.0345,.0041,-.0317,-.0394,-.0024,-.0281,-.0444,-.0088,-.0256,-.0487,-.016,-.0229,-.0506,-.0241,-.0208,-.0507,-.0327,-.019,-.0511,-.0413,-.018,-.0521,-.05,-.0186,-.0532,-.0587,-.0208,-.0532,-.0673],[-.0208,.0682,.0167,-.0263,.0648,.0224,-.0309,.0627,.0294,-.0357,.0591,.0355,-.0408,.0546,.0409,-.0473,.0509,.0452,-.054,.0464,.0482,-.0589,.0404,.0518,-.0615,.0336,.0564,-.0642,.0269,.0609,-.0689,.0219,.0662,-.071,.0142,.069,-.0709,.0056,.0697,-.0709,-.003,.0693,-.0716,-.0116,.0692,-.0717,-.0202,.0691,-.0695,-.0283,.0675,-.0656,-.0352,.064,-.0609,-.0407,.0595,-.0549,-.0423,.0537,-.0487,-.0413,.0478,-.0425,-.0401,.0418,-.0365,-.0383,.0359,-.0314,-.0339,.0308,-.0275,-.0268,.0278,-.0229,-.0202,.0246,-.0159,-.0191,.0204,-.0082,-.0224,.0186,-6e-4,-.026,.0168,.0074,-.0289,.0151,.0151,-.0317,.0125,.0209,-.0337,.0068,.0219,-.0371,-9e-4,.02,-.044,-.0051,.0182,-.0524,-.0054,.0183,-.061,-.0051,.0207,-.0692,-.0056,.0228,-.0774,-.0075],[-.0454,.0197,.0852,-.0541,.0193,.0867,-.0626,.0182,.0858,-.0688,.0166,.0802,-.0712,.0144,.0722,-.071,.0064,.0696,-.0709,-.0024,.0694,-.0715,-.0112,.0692,-.072,-.02,.0692,-.0697,-.0282,.0677,-.0658,-.0352,.0643,-.0608,-.0406,.0596,-.0548,-.0422,.0536,-.0492,-.0411,.047,-.0442,-.0398,.0398,-.0384,-.0381,.0335,-.0331,-.0333,.0287,-.03,-.0261,.025,-.0262,-.0199,.0203,-.0198,-.0184,.0148,-.0128,-.0192,.0094,-.0063,-.0186,.0036,-6e-4,-.0179,-.003,.0038,-.0199,-.0102,.0081,-.0222,-.0173,.0147,-.0208,-.0227,.022,-.0183,-.027,.0293,-.0169,-.0317,.0357,-.0167,-.0376,.042,-.0153,-.0437,.0485,-.0129,-.049,.0557,-.0115,-.0538,.0618,-.0094,-.0595,.0655,-.0051,-.0662,.0675,-9e-4,-.0736,.0659,.0024,-.0814,.0603,.0036,-.0878,.0528,.0023,-.0921,.0453,-5e-4,-.0957,.0374,-.0019,-.0992,.0293,3e-4,-.1013,.0245,.0069,-.0999,.025,.0147,-.0962],[.0716,-.0324,.0426,.067,-.0339,.0492,.0631,-.0283,.0543,.0571,-.026,.0598,.0505,-.0274,.0653,.0436,-.026,.07,.0369,-.0214,.073,.0299,-.0239,.0765,.0239,-.0295,.0794,.0168,-.0342,.08,.0095,-.0375,.0768,.0029,-.041,.0724,-.005,-.0437,.0718,-.0133,-.0442,.0742,-.0217,-.0446,.0764,-.0298,-.0456,.0792,-.0383,-.0467,.081,-.0469,-.047,.0815,-.0553,-.0452,.0806,-.0625,-.0409,.0786,-.0672,-.0355,.0739,-.0701,-.0288,.0694,-.0717,-.0203,.0689,-.0715,-.0117,.0692,-.0713,-.0031,.0683,-.0727,.0053,.0665,-.0764,.013,.0664,-.0839,.0164,.0642,-.089,.0194,.0582,-.0896,.0206,.0497,-.0886,.0196,.0411,-.0882,.0197,.0326,-.0877,.0252,.0264,-.0839,.0326,.0241,-.0789,.0381,.02,-.075,.0411,.0129,-.0715,.0436,.0054,-.0675,.047,-.0015,-.0634,.0499,-.0087,-.0584,.0537,-.0144,-.052,.0594,-.0147,-.0451,.064,-.0123,-.038,.0676,-.0088,-.0313,.0705,-.0041,-.0247,.0728,.0011],[-.0672,.0213,-.0455,-.0608,.0262,-.0491,-.0539,.03,-.0529,-.0464,.0318,-.057,-.039,.0357,-.0593,-.0319,.0407,-.0605,-.0248,.0456,-.0621,-.0175,.0503,-.0627,-.0106,.0553,-.0606,-.0031,.059,-.0581,.0051,.0616,-.0564,.0127,.0641,-.0528,.0195,.0662,-.0477,.0253,.0665,-.0413,.0307,.0632,-.0355,.0363,.0572,-.0375,.0415,.0528,-.043,.0473,.0493,-.0486,.0533,.0458,-.0539,.0589,.0402,-.0575,.0634,.0329,-.0592,.0663,.0253,-.0621,.0673,.0178,-.0666,.0671,.0092,-.0677,.0663,8e-4,-.0656,.0638,-.0064,-.0613,.0601,-.0119,-.0557,.0547,-.0141,-.0491,.0505,-.0179,-.0425,.0468,-.0224,-.0358,.0417,-.0257,-.0296,.0355,-.0267,-.0236,.0302,-.0265,-.0166,.026,-.0272,-.009,.0231,-.0315,-.0021,.0231,-.0377,.004,.0255,-.0436,.0101,.0284,-.0478,.0171,.0234,-.0502,.0227,.0152,-.0494,.0256],[.0019,-.0289,-.0972,-.0024,-.0213,-.0968,-.006,-.0133,-.0962,-.0109,-.0069,-.0936,-.0184,-.0061,-.0897,-.0254,-.0101,-.0867,-.0315,-.0157,-.0838,-.0384,-.0189,-.0795,-.0455,-.0204,-.0746,-.0511,-.023,-.0685,-.0567,-.0257,-.0623,-.0626,-.0274,-.0561,-.0679,-.0267,-.0493,-.0706,-.0209,-.0434,-.0757,-.0195,-.0371,-.0817,-.0208,-.0308,-.087,-.0218,-.024,-.0907,-.0262,-.0177,-.0935,-.0309,-.0111,-.0971,-.0299,-.0035,-.0994,-.0238,.0022,-.1007,-.0157,.0049,-.1003,-.007,.005,-.0976,.0013,.005,-.0952,.0078,.0082,-.0967,.0051,.0162,-.0968,.0033,.0247,-.0964,.0047,.0333,-.0963,.0056,.042,-.095,.0056,.0507,-.0913,.0053,.0585,-.0849,.0051,.0643,-.0768,.0072,.0664,-.0728,.0145,.0664,-.0693,.0224,.0654,-.063,.028,.0662,-.0575,.0318,.0717],[.0868,-.0478,-.0256,.0855,-.0439,-.0333,.0818,-.0414,-.0407,.0754,-.0399,-.0464,.0678,-.0364,-.0482,.061,-.0319,-.045,.0548,-.0281,-.0402,.0484,-.0245,-.0353,.0414,-.0204,-.0323,.0334,-.017,-.0314,.0251,-.0173,-.029,.0173,-.0199,-.0261,.0094,-.0225,-.0231,.0019,-.0255,-.0196,-.0056,-.028,-.0159,-.0132,-.0297,-.0119,-.0199,-.0315,-.0066,-.0264,-.034,-.0012,-.0341,-.0373,.0013,-.0415,-.0413,.0035,-.0493,-.0449,.0052,-.0575,-.0468,.0033,-.0645,-.0461,-.0017,-.0706,-.0427,-.0071,-.0768,-.0387,-.0117,-.0849,-.036,-.0128,-.0924,-.0329,-.0098,-.0971,-.0294,-.0035,-.0995,-.0235,.0025,-.1006,-.0153,.0049,-.1003,-.0065,.0051,-.0973,.0017,.0051,-.0933,.0095,.0048,-.0895,.0174,.0038,-.085,.0245,.0014,-.0799,.0304,-.0026,-.0749,.0359,-.0073,-.0701,.0412,-.0123],[-.0205,.0318,-.0761,-.0278,.0288,-.0725,-.0347,.0239,-.072,-.0382,.0167,-.0752,-.0391,.0084,-.0775,-.0424,9e-4,-.0755,-.0487,-.003,-.0712,-.0549,-.0049,-.0655,-.0598,-.0076,-.0588,-.0642,-.0118,-.0526,-.068,-.0157,-.0458,-.0731,-.0188,-.0395,-.0792,-.0206,-.0336,-.0849,-.0212,-.0271,-.0895,-.0234,-.0201,-.0921,-.0292,-.0142,-.0954,-.0312,-.0069,-.0986,-.0268,-3e-4,-.1002,-.0197,.0042,-.1008,-.0111,.0051,-.0992,-.0026,.005,-.0957,.0053,.0054,-.0959,.0069,.012,-.0968,.0039,.02,-.0965,.0039,.0287,-.0964,.0052,.0373,-.0959,.0056,.046,-.0937,.0054,.0543,-.089,.0051,.0615,-.0814,.0057,.0654,-.0737,.0093,.0671,-.0708,.0145,.0729,-.0685,.0168,.0808,-.062,.0183,.086,-.0535,.0195,.0866,-.0449,.0193,.0855,-.0367,.0164,.0851],[-.0454,.0468,.0654,-.0509,.0443,.0593,-.0565,.0394,.0556,-.0608,.0328,.0591,-.0649,.0267,.0634,-.0704,.0207,.0659,-.0736,.0128,.0665,-.0786,.0062,.0664,-.0864,.0051,.0632,-.0924,.0053,.0572,-.0954,.0055,.0492,-.0963,.0055,.0407,-.0964,.0045,.0322,-.0967,.0036,.0237,-.0966,.0055,.0154,-.0948,.0079,.0075,-.0975,.0013,.005,-.1004,-.0068,.0051,-.1007,-.0154,.0049,-.0996,-.0234,.0024,-.0972,-.0294,-.0031,-.0935,-.0312,-.0103,-.091,-.0269,-.0171,-.0878,-.022,-.0233,-.0826,-.0208,-.03,-.0766,-.0197,-.0361,-.0713,-.0206,-.0424,-.0683,-.0259,-.0484,-.0635,-.0276,-.0551,-.0577,-.0264,-.0612,-.0521,-.0237,-.0672,-.0466,-.021,-.0733,-.0399,-.0193,-.0784,-.0332,-.0165,-.0829,-.027,-.0115,-.0861,-.0203,-.007,-.0888,-.0126,-.0052,-.0924,-.0053,-.0025,-.0958],[-.0151,.0716,.0085,-.0196,.0681,.0151,-.0252,.0649,.0211,-.0301,.0629,.028,-.035,.0598,.0346,-.0401,.0553,.0401,-.0464,.0516,.0449,-.0533,.0472,.0478,-.0587,.0412,.0512,-.0614,.0344,.0559,-.0637,.0272,.0603,-.0686,.0222,.0655,-.0711,.0148,.069,-.071,.0061,.07,-.0709,-.0026,.0694,-.0715,-.0113,.0692,-.0718,-.0201,.0691,-.0695,-.0282,.0675,-.0656,-.0353,.064,-.0607,-.0407,.0594,-.0547,-.0423,.0535,-.0492,-.041,.0468,-.0443,-.0399,.0396,-.0384,-.0381,.0335,-.0331,-.0335,.0285,-.03,-.0262,.0248,-.0264,-.0197,.0204,-.0199,-.0184,.015,-.013,-.0192,.0096,-.0066,-.0185,.0038,-8e-4,-.0179,-.0028,.0029,-.0204,-.0102,.0056,-.0227,-.0182,.0105,-.024,-.0252,.0174,-.0262,-.0301,.0247,-.0272,-.0349,.0313,-.0271,-.0405,.0373,-.027,-.0469],[-.0132,.0276,-.0824,-.0189,.0312,-.0769,-.0262,.0302,-.0727,-.0333,.0252,-.0719,-.0379,.0184,-.0745,-.0389,.0102,-.0772,-.0412,.002,-.0763,-.0474,-.0025,-.0721,-.0539,-.0046,-.0666,-.059,-.0071,-.0599,-.0635,-.0111,-.0535,-.0674,-.0153,-.0468,-.0723,-.0186,-.0403,-.0785,-.0204,-.0343,-.0844,-.0211,-.0278,-.0891,-.0232,-.0208,-.0919,-.0288,-.0147,-.0951,-.0315,-.0073,-.0985,-.0271,-6e-4,-.1001,-.02,.0042,-.1008,-.0113,.0051,-.0992,-.0027,.005,-.0957,.0053,.0054,-.0959,.0069,.012,-.0969,.0038,.0202,-.0965,.004,.0289,-.0963,.0053,.0377,-.0959,.0056,.0464,-.0935,.0054,.0549,-.0884,.0051,.0619,-.0806,.0059,.0656,-.0733,.0098,.0676,-.0706,.0151,.0737,-.0678,.017,.0817,-.0609,.0185,.0865,-.0522,.0194,.0863,-.0434,.0193,.0854,-.035,.0208,.0857,-.0306,.0278,.0844,-.0281,.0348,.0798,-.0227,.04,.0752],[-.0908,-.0021,.0615,-.0831,-.0041,.065,-.0756,-.008,.0668,-.0722,-.0156,.0685,-.0709,-.0242,.0687,-.0677,-.0318,.0659,-.0636,-.0384,.062,-.0579,-.0419,.0567,-.0518,-.0418,.0505,-.0469,-.0405,.0434,-.0416,-.0394,.0366,-.0358,-.0365,.0309,-.0316,-.0302,.0267,-.0288,-.0228,.0231,-.0236,-.0186,.018,-.0168,-.0187,.0126,-.0101,-.019,.007,-.0039,-.0179,.001,.0011,-.0187,-.0059,.0051,-.0214,-.0132,.0106,-.0219,-.0197,.0175,-.0198,-.0245,.0249,-.0179,-.0288,.0319,-.0171,-.0339,.0382,-.016,-.0399,.0444,-.0141,-.0457,.0511,-.012,-.0509,.0582,-.011,-.0558,.0633,-.0078,-.062,.0666,-.0034,-.0687,.0675,6e-4,-.0763,.0644,.0032,-.0838,.0578,.0035,-.0895,.0502,.0019,-.0934,.0427,-7e-4,-.0969,.0347,-.0012,-.1,.0266,.0014,-.1014],[.0021,.0732,-.0159,.0089,.0686,-.0135,.0105,.0692,-.0189,.0036,.0717,-.0234,-.004,.0717,-.0276,-.0113,.0703,-.0321,-.019,.0681,-.0357,-.0268,.0651,-.0379,-.0339,.0605,-.0402,-.0404,.0549,-.0417,-.0466,.0488,-.0425,-.0527,.0426,-.0428,-.0592,.0368,-.0421,-.0644,.0303,-.0398,-.0678,.0224,-.039,-.0698,.0145,-.0422,-.072,.0069,-.0457,-.0737,-.0014,-.0446,-.073,-.0096,-.0417,-.0743,-.0172,-.0381,-.078,-.0231,-.0328,-.0802,-.0295,-.0274,-.0788,-.0361,-.022,-.0747,-.0403,-.0157,-.0702,-.0436,-.009,-.0647,-.0464,-.0028,-.0603,-.0509,-.004,-.062,-.0531,-.0122,-.0613,-.0549,-.0207,-.0577,-.0577,-.028,-.0522,-.0602,-.0342,-.0445,-.0609,-.0378,-.0361,-.0589,-.0384,-.0287,-.0556,-.0413,-.0215,-.0534,-.0456,-.0146,-.0554,-.0502],[-.0256,-.0183,-.0872,-.0216,-.0107,-.0882,-.0164,-.0038,-.0899,-.0107,.0025,-.0919,-.0052,.0092,-.0934,6e-4,.0157,-.094,.007,.0153,-.0959,.0089,.0073,-.0988,.0114,-8e-4,-.1011,.017,-.0074,-.1021,.0244,-.0119,-.1016,.0323,-.0151,-.0997,.0408,-.016,-.0983,.0492,-.0141,-.0969,.057,-.0117,-.0939,.0639,-.0104,-.0888,.0683,-.0122,-.0817,.0684,-.0155,-.0738,.0644,-.0157,-.0662,.0598,-.0134,-.0591,.0563,-.0141,-.0514,.0555,-.0202,-.0458,.059,-.0279,-.0449,.0647,-.0341,-.047,.072,-.0387,-.0479,.0793,-.0408,-.0439,.0842,-.0425,-.037,.0868,-.0457,-.0293,.0865,-.0487,-.0211,.0845,-.0498,-.0127,.0824,-.0488,-.0043,.0814,-.0472,.0043,.0808,-.0462,.0129,.0798,-.045,.0216,.0782,-.0426,.0298,.0745,-.039,.0368,.0688,-.0378,.0432],[-.0606,.0298,-.0476,-.0535,.0325,-.052,-.0459,.0346,-.0559,-.038,.0377,-.058,-.0305,.0416,-.0605,-.0233,.0462,-.0625,-.0161,.051,-.0627,-.0094,.0561,-.06,-.0018,.0596,-.0576,.0065,.0621,-.0557,.014,.0645,-.0521,.0205,.0664,-.0465,.0263,.0663,-.0399,.0319,.0619,-.0355,.0376,.0559,-.0375,.0437,.0514,-.0418,.0508,.049,-.0463,.0594,.0494,-.0456,.0666,.0491,-.0407,.0723,.0463,-.0347,.0776,.0418,-.0294,.0831,.0363,-.0253,.0884,.0299,-.0224,.0926,.0224,-.021,.0966,.0146,-.0201,.1,.0095,-.0152,.0982,.0137,-.0083,.0942,.0196,-.0031,.0898,.0252,.002,.0845,.0295,.0074,.0791,.0308,.0142,.0747,.0302,.0218,.0702,.0294,.0293,.0697,.0248,.0364,.0725,.0177,.0406,.0748,.0094,.0417,.0758,6e-4,.0419],[.004,.0673,.0408,.009,.0632,.0468,.0116,.058,.0534,.0094,.0525,.0595,.0032,.0488,.0645,-.0041,.0455,.0681,-.012,.0427,.071,-.0199,.0404,.0741,-.0267,.0367,.0782,-.03,.0303,.083,-.0329,.0226,.0857,-.0405,.0192,.0853,-.0493,.0194,.086,-.0581,.019,.0867,-.066,.0174,.0837,-.0704,.0159,.0765,-.0712,.0109,.0699,-.0709,.0021,.0695,-.0711,-.0067,.0692,-.0718,-.0155,.0692,-.0712,-.0242,.0687,-.0677,-.0318,.066,-.0634,-.0384,.062,-.0577,-.042,.0566,-.0517,-.0417,.0502,-.0467,-.0403,.0431,-.0412,-.0391,.0363,-.0352,-.0362,.0306,-.0313,-.0295,.0265,-.0285,-.0221,.0226,-.0228,-.0186,.0172,-.0158,-.0189,.0119,-.0091,-.019,.0062,-.0029,-.0178,0,.0017,-.0191,-.0073,.0044,-.022,-.0152,.0085,-.0234,-.0228,.0148,-.0252,-.0285,.0221,-.0269,-.0332,.0291,-.0271,-.0385,.0354,-.027,-.0447,.0411,-.0282,-.0513,.046,-.0315,-.0578,.0487,-.0368,-.0642,.0489,-.044,-.0692],[-.0738,-.044,9e-4,-.0731,-.0412,-.007,-.0771,-.0379,-.0139,-.0807,-.0343,-.0209,-.0809,-.0289,-.0275,-.078,-.023,-.0331,-.0742,-.0172,-.0383,-.0732,-.0094,-.0418,-.0738,-.0012,-.0446,-.0719,.007,-.0456,-.0698,.0147,-.0423,-.0677,.0225,-.0394,-.0645,.0304,-.04,-.0591,.0369,-.0419,-.0526,.0426,-.0428,-.0464,.0488,-.0426,-.0402,.0548,-.0418,-.0334,.0601,-.041,-.0257,.0641,-.0402,-.0178,.0672,-.0386,-.0101,.0693,-.0351,-.0027,.0708,-.0307,.0047,.071,-.0263,.0122,.0692,-.0224,.0195,.0667,-.0227,.0178,.0691,-.0299,.0116,.0704,-.0358,.0048,.0696,-.0411,-.0021,.0674,-.0459,-.0097,.065,-.0491,-.0179,.0623,-.0504,-.0246,.0574,-.0524,-.0281,.0502,-.0559,-.0322,.0429,-.058,-.0381,.0366,-.0587,-.0444,.0307,-.0597],[-.0616,.0217,-.0533,-.0576,.0285,-.051,-.0501,.0309,-.0549,-.0425,.0334,-.0585,-.0353,.0383,-.0597,-.0282,.0432,-.0615,-.0209,.048,-.0629,-.014,.0532,-.0617,-.0069,.0577,-.0588,.0013,.0605,-.0572,.0094,.0629,-.0549,.0165,.0653,-.0503,.0228,.0667,-.0443,.0282,.0653,-.0376,.0337,.0596,-.0354,.039,.0548,-.0403,.0445,.051,-.0461,.0506,.0476,-.0516,.0565,.043,-.0562,.0616,.0364,-.0586,.0653,.0286,-.0605,.0671,.021,-.0646,.0672,.0129,-.0677,.0668,.0042,-.067,.065,-.0042,-.0648,.061,-.0109,-.0611,.0545,-.0137,-.0558,.0477,-.0171,-.0522,.0457,-.0246,-.0554,.0479,-.0315,-.0605,.0501,-.0371,-.0668,.0484,-.0406,-.0745,.0429,-.0419,-.0811,.0357,-.0444,-.0854,.0277,-.0481,-.0862,.0195,-.0512,-.0853],[-.0075,-.0213,-.094,-.0074,-.0128,-.0955,-.0116,-.0063,-.0933,-.0192,-.0064,-.0894,-.0261,-.0106,-.0864,-.0322,-.016,-.0834,-.039,-.0191,-.0791,-.0458,-.0209,-.0739,-.0515,-.0233,-.0679,-.0571,-.0261,-.0617,-.063,-.0278,-.0556,-.068,-.026,-.049,-.071,-.0209,-.0428,-.0751,-.0234,-.0363,-.0778,-.0299,-.0312,-.0786,-.0358,-.025,-.0762,-.0384,-.0171,-.0731,-.0406,-.0093,-.0725,-.0432,-.0012,-.0757,-.0438,.0068,-.0786,-.0442,.015,-.0813,-.0453,.0232,-.0836,-.0463,.0315,-.0846,-.0471,.0401,-.0845,-.0458,.0486,-.0837,-.0416,.0562,-.0794,-.0363,.0614,-.0743,-.0304,.065,-.0725,-.0224,.0681,-.0715,-.0139,.0691,-.0711,-.0052,.0691,-.0711,.0028,.072,-.0695,.0053,.08,-.0647,.0053,.0872,-.057,.0055,.0911,-.0485,.0059,.0926,-.0398,.0055,.0932,-.0312,.005,.0942,-.0229,.0072,.0946,-.0161,.012,.0923,-.0108,.0177,.0885,-.0061,.0238,.0844,4e-4,.0278,.0806,.0089,.0283,.0788,.0171,.0297,.0761],[-.0546,-.0156,-.0691,-.0535,-.0071,-.0685,-.0572,-.0057,-.0621,-.0619,-.0088,-.0554,-.0671,-.0108,-.0487,-.0726,-.0077,-.0433,-.0737,6e-4,-.0449,-.0714,.0088,-.0453,-.0693,.0164,-.0413,-.0671,.0244,-.039,-.0633,.0322,-.0404,-.0575,.0384,-.0422,-.051,.0442,-.0428,-.0448,.0505,-.0424,-.0385,.0564,-.0415,-.0312,.0613,-.0408,-.0234,.0651,-.0399,-.0154,.0679,-.0375,-.0078,.0699,-.0337,-3e-4,.071,-.0292,.0072,.0708,-.0249,.0148,.0681,-.0216,.0199,.0674,-.0253,.0157,.07,-.0322,.0089,.0703,-.0377,.0021,.0688,-.0431,-.005,.0664,-.0475,-.0132,.0641,-.0496,-.0211,.0608,-.0507,-.026,.0545,-.0539,-.0243,.0491,-.0596,-.0169,.0504,-.0627,-.01,.0553,-.0607,-.002,.0565,-.0611,.0045,.0535,-.0662,.0123,.0522,-.0695,.0207,.0534,-.0676,.0285,.0549,-.0639],[-.0418,-.0378,.0181,-.0399,-.0355,.0101,-.0342,-.0347,.0039,-.0269,-.0338,-5e-4,-.0206,-.0319,-.006,-.0143,-.03,-.0116,-.0068,-.0282,-.0154,8e-4,-.0259,-.0188,.0081,-.0229,-.0224,.0157,-.0205,-.0256,.0236,-.0184,-.0285,.0308,-.0172,-.0329,.037,-.0164,-.0388,.0431,-.0146,-.0446,.0496,-.0124,-.0499,.0567,-.0113,-.0547,.0626,-.008,-.0597,.0657,-.0014,-.0642,.0669,.0065,-.0674,.0673,.015,-.0673,.0668,.0227,-.0636,.0647,.0301,-.06,.0615,.0378,-.0575,.0571,.044,-.0537,.0514,.0477,-.0484,.0457,.0507,-.0426,.0402,.0547,-.0374,.0363,.0602,-.0322,.0388,.0656,-.0267,.0449,.0666,-.0208,.0497,.0656,-.0138,.0528,.0637,-.006,.0555,.0609,.0017,.058,.0574,.0092,.0608,.0524,.0157,.061,.0475,.0226,.059,.0435,.03,.0571,.0391,.0372,.0562,.0336,.0438,.0562,.0271,.0494,.0553,.0215,.0557,.0512,.0203,.063],[-.0063,-.0099,-.0963,-.013,-.0064,-.0924,-.0207,-.0068,-.0887,-.0273,-.0117,-.0859,-.0335,-.0168,-.0827,-.0404,-.0194,-.0781,-.0471,-.0212,-.0729,-.0525,-.0239,-.0667,-.0582,-.0266,-.0607,-.064,-.0276,-.0544,-.0687,-.0254,-.0477,-.0718,-.0202,-.0417,-.0774,-.02,-.0353,-.0834,-.0209,-.0291,-.0884,-.0226,-.0223,-.0913,-.0279,-.0162,-.094,-.0313,-.009,-.0977,-.0287,-.0019,-.0998,-.022,.003,-.1008,-.0137,.005,-.1,-.0051,.0051,-.0968,.0029,.0051,-.0953,.0077,.0095,-.0968,.0047,.0174,-.0966,.0036,.0259,-.0964,.0049,.0344,-.0962,.0055,.0431,-.0948,.0056,.0516,-.0909,.0052,.0593,-.084,.0052,.0644,-.0762,.0075,.0666,-.0779,.0139,.0663,-.0853,.0169,.0633,-.0893,.0199,.0565,-.0895,.0205,.048,-.0884,.0193,.0394,-.0882,.0204,.0311,-.0872,.0267,.0258,-.0829,.0338,.0235,-.0778,.0391,.019,-.0732,.043,.0128,-.0688,.0469,.0064],[.0133,.0458,-.0775,.0049,.0448,-.0755,-.0033,.0439,-.0729,-.0104,.0457,-.0685,-.0174,.048,-.0639,-.0242,.0497,-.059,-.0262,.055,-.0532,-.0208,.0609,-.0504,-.013,.0644,-.0493,-.0049,.0664,-.0474,.0023,.0686,-.0432,.0088,.0703,-.0378,.0155,.07,-.0324,.0204,.0674,-.026,.0179,.0655,-.0184,.0116,.0668,-.0126,.0054,.0683,-.007,2e-4,.0693,-1e-4,-.0055,.0701,.0064,-.0116,.0699,.0126,-.0176,.0681,.0185,-.0235,.065,.0241,-.0299,.0626,.0294,-.0356,.0592,.035,-.0406,.055,.0406,-.0469,.0514,.0452,-.0538,.047,.048,-.0588,.041,.0514,-.0615,.0342,.056,-.0637,.0272,.0606,-.0691,.0221,.0649,-.073,.0147,.0666,-.077,.0073,.0665,-.085,.0068,.064,-.0916,.0082,.0587,-.0948,.009,.0508,-.0955,.0089,.0422,-.0954,.0079,.0336,-.0961,.0066,.0251,-.0965,.0083,.0168,-.0937,.0123,.0097,-.0896,.0178,.0045,-.085,.0242,.001,-.0806,.0283,-.005,-.0783,.0291,-.0133,-.0761,.0299,-.0216],[-.1007,-.0232,.0445,-.1016,-.0252,.036,-.1019,-.0286,.028,-.1002,-.0325,.0203,-.097,-.037,.0135,-.0924,-.0421,.0081,-.0845,-.0439,.006,-.0757,-.0446,.0064,-.0672,-.0469,.0067,-.0585,-.0474,.0066,-.0501,-.0453,.0056,-.0423,-.0418,.0036,-.0348,-.0376,.0015,-.0271,-.0343,-9e-4,-.0205,-.0317,-.006,-.0139,-.0298,-.0115,-.0063,-.0282,-.0156,.0013,-.0257,-.0193,.0087,-.0227,-.0228,.0166,-.0202,-.0258,.0246,-.0178,-.0287,.0317,-.017,-.0337,.0379,-.0165,-.0399,.0442,-.0145,-.0457,.0509,-.0122,-.0508,.0582,-.0109,-.0556,.0636,-.0067,-.0607,.0661,4e-4,-.0651,.0671,.0086,-.0679,.0673,.0171,-.0666,.0663,.0248,-.0624,.0639,.0326,-.0592,.0604,.0401,-.0564,.0551,.0455,-.0521,.0492,.0486,-.0464,.0435,.0519,-.0406,.0384,.0567,-.0352,.0341,.0621,-.0297],[.0431,.0356,-.0799,.0438,.0282,-.0841,.0492,.022,-.086,.0571,.0191,-.0841,.0637,.016,-.0795,.0668,.0114,-.0729,.0671,.005,-.0672,.0653,-.0025,-.0632,.0619,-.009,-.0588,.0554,-.0115,-.0538,.0483,-.0129,-.049,.0419,-.0153,-.0437,.0357,-.0168,-.0378,.0294,-.0171,-.0319,.0222,-.0184,-.0272,.015,-.0206,-.0229,.0084,-.0222,-.0176,.0039,-.0203,-.0105,-4e-4,-.0182,-.0034,-.006,-.0185,.0032,-.0124,-.0191,.009,-.0193,-.0185,.0143,-.0257,-.0195,.0199,-.0297,-.0252,.0246,-.0327,-.0325,.0281,-.0376,-.0379,.0327,-.0434,-.0396,.0389,-.0484,-.0409,.0459,-.0538,-.0421,.0526,-.0598,-.0413,.0586,-.065,-.0365,.0635,-.0689,-.0297,.0671,-.0717,-.0218,.069,-.0716,-.0131,.0693,-.0709,-.0044,.0693,-.0708,.0043,.0691,-.0711,.0128,.0702,-.0698,.0162,.0778,-.0651,.0177,.0847,-.0569,.019,.0867,-.0483,.0195,.0858,-.0396,.0194,.0854,-.0321,.0231,.0859,-.0299,.0307,.0826,-.0268,.0371,.0778,-.0198,.0405,.074,-.012,.0427,.071,-.004,.0451,.0685,.0039,.0471,.0656,.0114,.0489,.0616],[.056,-.0243,-.0605,.0534,-.0174,-.0561,.0487,-.0134,-.0503,.0428,-.0146,-.0441,.0367,-.0164,-.0383,.0302,-.0172,-.0326,.0231,-.0183,-.0278,.0159,-.0203,-.0235,.0091,-.0223,-.0185,.0043,-.0208,-.0116,3e-4,-.0182,-.0044,-.0051,-.0182,.0023,-.0114,-.0191,.0081,-.0181,-.0186,.0135,-.0247,-.019,.019,-.0293,-.024,.0238,-.0321,-.0314,.0273,-.0365,-.0373,.0316,-.0424,-.0396,.0375,-.0475,-.0406,.0444,-.0526,-.0419,.0513,-.0586,-.0418,.0574,-.064,-.0376,.0625,-.0681,-.031,.0663,-.0714,-.0235,.0689,-.0718,-.0148,.0691,-.0711,-.0062,.0688,-.071,.0017,.0714,-.0701,.0051,.079,-.0655,.0053,.0862,-.0581,.0056,.0906,-.0497,.0059,.0925,-.0411,.0054,.0932,-.0326,.0046,.0941,-.0243,.0067,.0946,-.0173,.0114,.093,-.0117,.0168,.0893,-.007,.0229,.0852,-.0028,.0286,.0804,.0023,.0336,.0754,.0087,.0376,.0712,.0162,.0395,.0675,.023,.0422,.0629,.0268,.0476,.0575,.0285,.0537,.0516,.0283,.0593,.0451,.0262,.0641,.0381,.0228,.0682,.0314],[.0356,-.0895,-.0199,.0329,-.0831,-.0147,.0303,-.0762,-.0103,.0265,-.0696,-.0064,.022,-.0629,-.0035,.0195,-.0548,-.0032,.0197,-.0463,-.0045,.0215,-.0384,-.0027,.0215,-.0344,.0047,.0171,-.0323,.0115,.0095,-.0297,.0145,.0015,-.0269,.0162,-.0061,-.0234,.0182,-.0137,-.0197,.0198,-.0212,-.0193,.0232,-.0263,-.0247,.0271,-.0302,-.0319,.0299,-.0348,-.0376,.0342,-.0407,-.0398,.0401,-.0469,-.0409,.046,-.0531,-.0421,.0519,-.0592,-.0416,.0579,-.0644,-.0372,.0629,-.0684,-.0306,.0666,-.0715,-.0229,.0689,-.0717,-.0143,.0692,-.071,-.0057,.0692,-.0708,.0029,.0694,-.0711,.0115,.069,-.0698,.0198,.0674,-.0653,.0261,.0639,-.0611,.0323,.0596,-.057,.0389,.0559,-.0515,.0441,.0592,-.045,.0472,.0638,-.0373,.0506,.0638,-.0317,.0552,.0594,-.0282,.0595,.0529,-.0229,.0625,.0468,-.016,.0651,.0425,-.0114,.0697,.037],[.0342,.0681,.0199,.0357,.0649,.0279,.0378,.0603,.0349,.0393,.0546,.0414,.0394,.0487,.0478,.0377,.043,.0541,.0363,.0373,.0605,.0358,.0303,.0656,.0341,.0229,.0698,.0306,.0167,.0748,.0263,.0109,.0796,.0242,.0033,.0824,.03,-.0024,.081,.0353,-.0071,.0765,.0365,-.0151,.0735,.0396,-.023,.0718,.046,-.0274,.0685,.0529,-.0271,.0633,.0594,-.0262,.0578,.0648,-.0301,.0526,.068,-.0353,.0465,.0724,-.0377,.0394,.0768,-.041,.0329,.0762,-.0469,.0273,.0696,-.0518,.0248,.0614,-.0535,.0228,.0531,-.0535,.0202,.0448,-.0539,.0175,.0371,-.0566,.0146,.0313,-.0611,.01,.0293,-.066,.0033,.0312,-.07,-.0041,.0349,-.0715,-.0117,.0354,-.0696,-.02,.0313,-.0656,-.0264,.0264,-.0652,-.0332,.0252,-.0682,-.0412,.0254,-.0715,-.0493],[-.0072,.0318,.0813,-.0102,.0247,.0855,-.0131,.0175,.0896,-.0178,.0111,.0932,-.025,.0067,.0948,-.0336,.0073,.0936,-.0422,.0089,.0926,-.0509,.0093,.0921,-.0594,.0086,.0901,-.0664,.0074,.0853,-.0703,.0065,.0776,-.0713,.0093,.07,-.0704,.0177,.0677,-.0665,.0243,.0639,-.0626,.03,.0586,-.0604,.0371,.0541,-.0566,.0436,.0497,-.0504,.0491,.0469,-.0436,.0531,.0432,-.038,.0571,.0378,-.0327,.0613,.0321,-.0265,.0638,.0265,-.0202,.0665,.021,-.0143,.0693,.0152,-.0081,.0702,.0091,-.0021,.0698,.0028,.0033,.0688,-.0041,.0089,.0675,-.0106,.016,.0661,-.0156,.0239,.067,-.0189,.0313,.0698,-.016,.0364,.0704,-.009,.0416,.069,-.0021,.0463,.0665,.0048,.0485,.0642,.0129,.0487,.0617,.0212,.0511,.0559,.027,.0549,.0486,.0299,.0569,.0415,.0345,.0566,.0359,.0411,.0532,.0325,.0483,.0485,.0307,.0555,.0455,.026,.0621,.0456,.019,.0673],[.055,-.0718,-.0368,.0478,-.0683,-.0334,.0424,-.0675,-.0269,.0383,-.0697,-.0194,.0336,-.0716,-.0123,.0274,-.0696,-.0068,.0221,-.0637,-.0035,.0196,-.0554,-.0032,.0197,-.0468,-.0044,.0214,-.0387,-.0028,.0216,-.0343,.0045,.017,-.0323,.0113,.0094,-.0297,.0146,.0013,-.0268,.0164,-.0065,-.0233,.0182,-.0142,-.0195,.0198,-.0217,-.0195,.0237,-.0267,-.0254,.0273,-.0307,-.0327,.0302,-.0356,-.0379,.035,-.0416,-.0399,.041,-.0479,-.0411,.047,-.0542,-.0422,.053,-.0604,-.0413,.059,-.0653,-.0359,.0637,-.0693,-.0289,.0673,-.0717,-.0208,.0691,-.0716,-.0121,.0693,-.0712,-.0034,.0681,-.0724,.005,.0664,-.0764,.0126,.0664,-.0838,.0161,.0644,-.0888,.0192,.0582,-.0897,.0207,.0498,-.0886,.0196,.0412,-.0881,.0194,.0325,-.0878,.0245,.0256,-.0854,.032,.022],[.0412,.0222,.0673,.0449,.0277,.0616,.0492,.0309,.0547,.0536,.0328,.0474,.0566,.0366,.0402,.0567,.0424,.0338,.0545,.0495,.0295,.0507,.0568,.0265,.0488,.062,.0201,.0485,.0644,.0118,.0458,.0668,.0039,.041,.0693,-.003,.0359,.0704,-.01,.0305,.0695,-.0168,.0229,.0668,-.0186,.015,.0661,-.0151,.0082,.0675,-.0098,.0028,.069,-.0032,-.0027,.0699,.0036,-.0088,.0702,.0098,-.015,.0692,.0159,-.0209,.0663,.0216,-.0272,.0636,.027,-.0332,.061,.0328,-.0384,.0568,.0384,-.0442,.0526,.0434,-.051,.0486,.047,-.0571,.0431,.05,-.0607,.0366,.0544,-.0627,.0294,.059,-.0669,.0239,.0642,-.0707,.0172,.068,-.0713,.009,.0705,-.0702,.0064,.0781,-.066,.0074,.0856,-.059,.0087,.0904,-.0505,.0093,.0922,-.0418,.0088,.0925,-.0333,.0071,.0936,-.0247,.0068,.0948,-.0174,.011,.093,-.0117,.0165,.0893,-.0072,.0228,.0852,-.0029,.0286,.0803,.0023,.0336,.0754,.0091,.0374,.0714,.0166,.0396,.0676,.0233,.0422,.0628,.0285,.0466,.0573],[.0758,.0012,.0407,.0748,.0099,.0415,.0723,.0182,.0405,.0696,.0252,.0361,.0705,.0294,.0288,.0751,.0302,.0213,.0795,.0307,.0137,.0849,.0293,.007,.0902,.0248,.0015,.0945,.0193,-.0037,.0984,.0134,-.009,.1008,.0075,-.015,.1018,.0024,-.0221,.1012,-.0016,-.0299,.0991,-.0032,-.0382,.096,-.0015,-.0463,.0924,3e-4,-.0541,.0872,-2e-4,-.0611,.0797,-.0019,-.065,.0714,-.0042,-.0636,.0642,-.0082,-.0608,.0632,-.0149,-.0642,.0673,-.0163,-.0715,.069,-.0131,-.0794,.0657,-.0105,-.0869,.0592,-.0111,-.0926,.0515,-.0134,-.0962,.0432,-.0156,-.0979,.0346,-.0158,-.0992,.0265,-.0129,-.1011,.0188,-.0089,-.1022,.0127,-.0027,-.1015,.0092,.0051,-.0995,.0075,.0133,-.0967,.0025,.0171,-.094,-.0039,.0111,-.0939],[.0038,.043,-.0767,-.0039,.0436,-.0728,-.0109,.046,-.0681,-.0182,.0479,-.0635,-.0251,.0497,-.0585,-.0254,.0559,-.0531,-.0197,.0617,-.0504,-.0115,.0646,-.0493,-.0034,.0668,-.0469,.0035,.0692,-.042,.0102,.0705,-.0366,.0169,.0697,-.031,.0202,.0666,-.0238,.0161,.0657,-.0166,.0095,.0672,-.0111,.0037,.0687,-.0047,-.0017,.0697,.0022,-.0076,.0702,.0086,-.0138,.0696,.0148,-.0198,.0671,.0207,-.0261,.0641,.0261,-.0323,.0614,.0317,-.0376,.0574,.0374,-.0431,.0533,.0428,-.0502,.0496,.0465,-.0565,.0443,.0493,-.0603,.0377,.0537,-.0624,.0306,.0582,-.0663,.0246,.0633,-.0703,.0182,.0674,-.0715,.0099,.0699,-.0705,.0064,.0772,-.0666,.0072,.0848,-.0597,.0085,.0899,-.0513,.0093,.0922,-.0425,.0088,.0926,-.0339,.0071,.0934,-.0254,.0068,.0945,-.0178,.0107,.0933,-.0131,.0171,.0896,-.01,.0242,.0855],[.0819,-.0468,.0034,.0744,-.0506,.0051,.0673,-.0541,.0085,.0599,-.0552,.0128,.0523,-.0537,.0164,.0443,-.0516,.019,.0359,-.0505,.0204,.0273,-.0505,.0217,.019,-.0502,.0238,.0112,-.0475,.0261,.0045,-.0428,.0286,-.0018,-.0381,.0323,-.0084,-.0333,.0346,-.0149,-.0282,.0324,-.0214,-.024,.0286,-.0281,-.0274,.0277,-.0319,-.0343,.0312,-.037,-.0386,.0364,-.043,-.0403,.0424,-.0491,-.0415,.0483,-.0554,-.0424,.0542,-.0613,-.0403,.0599,-.066,-.0347,.0644,-.0697,-.0277,.0677,-.0718,-.0196,.0692,-.0715,-.011,.0689,-.071,-.0024,.0694,-.0709,.0039,.0745,-.0684,.0052,.0825,-.0625,.0054,.0886,-.0545,.0057,.0917,-.046,.0057,.0929,-.0374,.005,.0936,-.0289,.0052,.0945,-.0211,.0086,.0943,-.0147,.0136,.0914,-.0095,.0194,.0876,-.0045,.0249,.0835,.0019,.0287,.0791],[.0285,.0475,.0566,.0237,.0427,.0622,.0173,.0396,.0673,.0097,.0374,.0712,.0027,.0338,.0752,-.0026,.0288,.0801,-.0069,.0229,.0851,-.0115,.0167,.0892,-.0173,.0111,.0929,-.0245,.0066,.0947,-.033,.005,.094,-.0418,.0056,.093,-.0506,.0058,.0924,-.0591,.0053,.0905,-.0662,.0054,.0854,-.0703,.0051,.0778,-.071,7e-4,.0707,-.0712,-.0078,.0688,-.0718,-.0166,.0691,-.0709,-.0253,.0687,-.0673,-.0327,.0658,-.0629,-.039,.0615,-.0572,-.0421,.0559,-.0508,-.0418,.0498,-.0444,-.0407,.0439,-.0382,-.0393,.0377,-.0327,-.0356,.032,-.0285,-.0287,.0285,-.0243,-.0215,.0257,-.0177,-.0188,.0214,-.0098,-.0215,.019,-.0021,-.0253,.0169,.006,-.0283,.015,.0138,-.0322,.0134,.0202,-.0379,.0119,.026,-.0446,.0124,.0318,-.0509,.0143,.0329,-.0587,.0122,.0299,-.0644,.0062,.03,-.0685,-.0014,.0343,-.0713,-.0083],[.062,-.029,.056,.0558,-.0265,.061,.0491,-.0275,.0664,.0422,-.0252,.0707,.0353,-.0213,.0737,.0286,-.0251,.0772,.0224,-.0307,.0798,.0151,-.035,.0796,.008,-.0383,.0759,.0012,-.0419,.0719,-.0068,-.0439,.0723,-.0151,-.0441,.0749,-.0235,-.0448,.077,-.0317,-.0458,.0797,-.0402,-.0469,.0812,-.0488,-.0469,.0814,-.0571,-.0446,.0802,-.0637,-.0398,.0776,-.068,-.0341,.0727,-.0706,-.0269,.0691,-.0718,-.0184,.0689,-.0714,-.0097,.0689,-.071,-.0011,.0697,-.0707,.0042,.0759,-.0678,.0053,.0839,-.0611,.0055,.0893,-.0529,.0057,.0921,-.0443,.0056,.093,-.0357,.0049,.0938,-.0271,.0056,.0946,-.0196,.0096,.0938,-.0133,.0147,.0906,-.0085,.0207,.0866,-.0036,.0263,.0822,.0042,.0275,.0808,.0114,.0245,.0843],[.0913,-.008,.018,.0866,-.0098,.0252,.0827,-.0145,.0315,.0786,-.0192,.0376,.0736,-.0215,.0445,.0677,-.0229,.0509,.061,-.0247,.0564,.0545,-.0269,.062,.0477,-.0279,.0675,.0409,-.0243,.0711,.0368,-.0168,.0731,.0356,-.0085,.0758,.0314,-.0027,.08,.0249,.0019,.0825,.0256,.0099,.0804,.03,.0158,.0756,.0336,.022,.0704,.0356,.0294,.0661,.0362,.0366,.0612,.0376,.0424,.0546,.039,.0483,.0483,.039,.0545,.042,.0379,.06,.0352,.036,.0647,.028,.0337,.0681,.0202,.0305,.0704,.0123,.0263,.0718,.0046,.0225,.0717,-.0033,.0181,.0693,-.0104,.0103,.0673,-.0116,.0042,.0684,-.0054,-9e-4,.0697,.0017,-.007,.0702,.0081,-.0135,.0696,.014,-.0187,.0682,.0209,-.0208,.0678,.0294],[.0455,.0071,.0729,.0391,.0127,.0715,.0353,.0201,.0697,.0355,.0283,.0667,.036,.0357,.0623,.0372,.0414,.0559,.0391,.047,.0495,.0395,.0528,.0432,.0383,.0586,.0369,.0363,.0637,.0302,.0345,.0672,.0225,.0319,.0697,.0146,.0279,.0713,.0071,.0238,.0719,-5e-4,.0202,.0701,-.0081,.0158,.0677,-.0152,.0094,.0696,-.0204,.0019,.0717,-.0242,-.0055,.0714,-.0285,-.0128,.0699,-.033,-.0205,.0676,-.0363,-.0282,.0644,-.0383,-.0351,.0596,-.0405,-.0414,.0538,-.042,-.0475,.0477,-.0427,-.0537,.0416,-.0427,-.0601,.036,-.0415,-.0651,.0292,-.0396,-.0681,.0212,-.0396,-.07,.0135,-.0428,-.0723,.0058,-.0458,-.0741,-.0023,-.0439,-.0727,-.0105,-.0416,-.0706,-.0187,-.0426,-.0688,-.0255,-.0474,-.0645,-.0278,-.0541,-.0587,-.0263,-.0603,-.0529,-.0239,-.0664,-.0475,-.0213,-.0726,-.0409,-.0194,-.0779,-.0339,-.0173,-.0823,-.0276,-.0125,-.0858,-.022,-.0062,-.088,-.0164,2e-4,-.0897,-.0114,.0071,-.091],[-.0094,.009,-.0913,-.0147,.0021,-.0902,-.0204,-.0043,-.0886,-.0262,-.0106,-.0866,-.0322,-.016,-.0834,-.0391,-.019,-.079,-.0459,-.0209,-.0738,-.0516,-.0234,-.0678,-.0572,-.0261,-.0616,-.0632,-.0278,-.0554,-.0681,-.0263,-.0486,-.0705,-.0201,-.0433,-.0724,-.0119,-.0414,-.074,-.0036,-.0435,-.0727,.0045,-.0458,-.0703,.0124,-.0434,-.0684,.0201,-.0398,-.0656,.0283,-.0391,-.0608,.0352,-.0414,-.0544,.0409,-.0428,-.0482,.0471,-.0426,-.0421,.0534,-.0418,-.0354,.0589,-.0411,-.0278,.0632,-.0404,-.0199,.0665,-.0389,-.012,.0689,-.0359,-.0045,.0705,-.0317,.003,.0711,-.0273,.0106,.0696,-.0232,.0183,.067,-.0203,.0267,.0679,-.0187,.0331,.0702,-.0135,.0382,.0703,-.0064,.0433,.0682,4e-4,.0474,.0656,.0076,.0487,.0634,.0159,.0481,.0604,.024,.0485,.0555,.0313],[.0702,.0273,.0328,.0711,.0213,.0388,.074,.0135,.0413,.0742,.005,.0429,.0708,-.0012,.0476,.0653,-.0035,.0539,.0584,-.0047,.0593,.0512,-.0074,.0634,.0448,-.0119,.0673,.0386,-.017,.0708,.0326,-.0219,.0749,.0267,-.0275,.0782,.0206,-.0336,.0793,.0138,-.0383,.0765,.0072,-.0418,.0719,.001,-.045,.0667,-.0046,-.047,.0603,-.0091,-.0458,.053,-.0102,-.042,.0453,-.0089,-.0366,.0386,-.012,-.0305,.0336,-.0184,-.0255,.0303,-.025,-.0216,.0261,-.0298,-.0229,.0193,-.0334,-.0276,.0128,-.0377,-.0332,.0077,-.043,-.0398,.0059,-.0499,-.0449,.0056,-.0579,-.0468,.0029,-.0648,-.0464,-.0024,-.0701,-.0438,-.0089,-.0747,-.0405,-.0156,-.078,-.037,-.0229,-.0784,-.0318,-.0297,-.0759,-.0251,-.0349,-.0721,-.0202,-.0408,-.069,-.0251,-.0471,-.0646,-.0272,-.054,-.06,-.0242,-.0607],[-.0171,-.0483,.0598,-.0096,-.0471,.0564,-.0031,-.0464,.0616,.0025,-.0444,.068,.0087,-.041,.0731,.0153,-.0372,.0775,.022,-.0322,.0793,.0282,-.0263,.0774,.0336,-.0201,.0745,.0361,-.0119,.0745,.0341,-.0045,.078,.0275,-6e-4,.0819,.024,.0067,.0818,.028,.0132,.0778,.0322,.0189,.0726,.035,.0258,.068,.0359,.0334,.0638,.0366,.0398,.058,.0385,.0453,.0514,.0403,.0508,.0449,.0409,.0561,.0379,.0396,.0613,.0311,.0377,.0654,.0236,.0358,.0683,.0155,.0323,.0701,.0077,.028,.0711,2e-4,.0238,.0704,-.0074,.021,.0677,-.0152,.0268,.068,-.0189,.0331,.0702,-.0136,.038,.0704,-.0064,.0431,.0684,4e-4,.0473,.0657,.0075,.0487,.0635,.0158,.0488,.0601,.0237,.0523,.0539,.0281,.0585,.0491,.0249,.0638,.047,.0184,.0685,.0453,.0112,.0731,.0431,.0041],[-.0549,-.0346,.0944,-.0497,-.0279,.0965,-.0423,-.0243,.0987,-.0339,-.0259,.1,-.0256,-.0286,.0997,-.018,-.0257,.0989,-.0139,-.0181,.0993,-.0121,-.0096,.0994,-.0112,-.0012,.0971,-.0115,.0067,.0934,-.0184,.0087,.0935,-.0265,.0058,.0945,-.0351,.0049,.0938,-.0438,.0057,.093,-.0525,.0057,.0922,-.0608,.0053,.0896,-.0674,.0054,.084,-.0707,.0047,.0761,-.071,-9e-4,.07,-.0713,-.0095,.0688,-.0718,-.0182,.0688,-.071,-.0269,.0691,-.068,-.0342,.0727,-.0636,-.0398,.0777,-.0568,-.0446,.0802,-.0485,-.047,.0812,-.0398,-.0468,.0811,-.0312,-.0459,.0796,-.023,-.0449,.0769,-.0145,-.044,.0748,-.0062,-.0438,.0721,.002,-.0416,.0723,.0088,-.038,.0764,.016,-.0346,.08,.0232,-.0299,.0795,.0294,-.0244,.0768,.0365,-.0216,.0732,.0433,-.0257,.0701,.0503,-.0277,.0656,.0568,-.0261,.06,.0633,-.0238,.0546,.0698,-.0223,.0489,.0753,-.0207,.0423,.0803,-.0192,.0353,.0854,-.0175,.0283,.0899,-.0174,.0209,.0931,-.0197,.013,.0967,-.0219,.0054],[.0211,-.1331,-.0292,.0257,-.1358,-.0228,.0305,-.13,-.0208,.033,-.1218,-.0221,.0347,-.1134,-.0233,.036,-.1049,-.0244,.0365,-.0967,-.027,.0357,-.0883,-.029,.034,-.0799,-.0286,.0326,-.0715,-.0273,.0357,-.0641,-.028,.0429,-.0653,-.0324,.0497,-.0686,-.0365,.0569,-.0706,-.0407,.0633,-.0677,-.0454,.0687,-.0613,-.0474,.0736,-.0544,-.046,.0779,-.0476,-.0429,.0829,-.0435,-.0374,.0896,-.0411,-.0338,.095,-.035,-.036,.0987,-.0274,-.0349,.1003,-.0207,-.0298,.1018,-.016,-.0227,.1026,-.0118,-.0152,.1015,-.0057,-.0093,.0997,.0019,-.0056,.0973,.0101,-.0045,.0951,.0185,-.0047],[.0185,-.1255,-.0237,.0203,-.1335,-.0219,.0253,-.1312,-.0187,.0282,-.1232,-.0185,.0307,-.115,-.0196,.0327,-.1067,-.0203,.033,-.0982,-.0193,.0326,-.0899,-.0168,.0316,-.082,-.0135,.0304,-.0747,-.0092,.0295,-.0692,-.0027,.0298,-.0651,.0047,.0327,-.06,.011,.0347,-.0536,.0162,.0298,-.0501,.0211,.0216,-.0504,.0236,.0135,-.049,.0262,.0062,-.0454,.0289,-2e-4,-.0415,.0331,-.0056,-.0407,.0394,-.0092,-.044,.0464],[.0364,-.1065,-.0256,.0344,-.1145,-.0233,.0315,-.1222,-.0207,.0277,-.1296,-.019,.0218,-.1349,-.0206,.0185,-.1286,-.0237,.0184,-.1201,-.0249,.019,-.1116,-.0253,.0194,-.1031,-.0251,.0186,-.0948,-.0261,.0153,-.0876,-.0294]]}]};const oU=F.createContext({});function QT(n){const e=F.useRef(null);return e.current===null&&(e.current=n()),e.current}const e3=typeof window<"u",Fee=e3?F.useLayoutEffect:F.useEffect,t3=F.createContext(null);function n3(n,e){n.indexOf(e)===-1&&n.push(e)}function mS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Qc=(n,e,t)=>t>e?e:t<n?n:t;let i3=()=>{};const eu={},lU=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function cU(n){return typeof n=="object"&&n!==null}const uU=n=>/^0[^.\s]+$/u.test(n);function r3(n){let e;return()=>(e===void 0&&(e=n()),e)}const yo=n=>n,zee=(n,e)=>t=>e(n(t)),Qp=(...n)=>n.reduce(zee),Op=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class s3{constructor(){this.subscriptions=[]}add(e){return n3(this.subscriptions,e),()=>mS(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const a=this.subscriptions[s];a&&a(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ol=n=>n*1e3,ec=n=>n/1e3;function fU(n,e){return e?n*(1e3/e):0}const Hee=(n,e,t)=>{const i=e-n;return((t-n)%i+i)%i+n},hU=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Gee=1e-7,Vee=12;function kee(n,e,t,i,r){let s,a,l=0;do a=e+(t-e)/2,s=hU(a,i,r)-n,s>0?t=a:e=a;while(Math.abs(s)>Gee&&++l<Vee);return a}function fy(n,e,t,i){if(n===e&&t===i)return yo;const r=s=>kee(s,0,1,n,t);return s=>s===0||s===1?s:hU(r(s),e,i)}const dU=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,pU=n=>e=>1-n(1-e),mU=fy(.33,1.53,.69,.99),a3=pU(mU),gU=dU(a3),vU=n=>(n*=2)<1?.5*a3(n):.5*(2-Math.pow(2,-10*(n-1))),o3=n=>1-Math.sin(Math.acos(n)),yU=pU(o3),xU=dU(o3),jee=fy(.42,0,1,1),Xee=fy(0,0,.58,1),_U=fy(.42,0,.58,1),bU=n=>Array.isArray(n)&&typeof n[0]!="number";function SU(n,e){return bU(n)?n[Hee(0,n.length,e)]:n}const AU=n=>Array.isArray(n)&&typeof n[0]=="number",Wee={linear:yo,easeIn:jee,easeInOut:_U,easeOut:Xee,circIn:o3,circInOut:xU,circOut:yU,backIn:a3,backInOut:gU,backOut:mU,anticipate:vU},Yee=n=>typeof n=="string",lB=n=>{if(AU(n)){i3(n.length===4);const[e,t,i,r]=n;return fy(e,t,i,r)}else if(Yee(n))return Wee[n];return n},Xx=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function qee(n,e){let t=new Set,i=new Set,r=!1,s=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(m){a.has(m)&&(h.schedule(m),n()),m(l)}const h={schedule:(m,g=!1,v=!1)=>{const b=v&&r?t:i;return g&&a.add(m),b.has(m)||b.add(m),m},cancel:m=>{i.delete(m),a.delete(m)},process:m=>{if(l=m,r){s=!0;return}r=!0,[t,i]=[i,t],t.forEach(u),t.clear(),r=!1,s&&(s=!1,h.process(m))}};return h}const Kee=40;function EU(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=Xx.reduce((R,B)=>(R[B]=qee(s),R),{}),{setup:l,read:u,resolveKeyframes:h,preUpdate:m,update:g,preRender:v,render:x,postRender:b}=a,M=()=>{const R=eu.useManualTiming?r.timestamp:performance.now();t=!1,eu.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(R-r.timestamp,Kee),1)),r.timestamp=R,r.isProcessing=!0,l.process(r),u.process(r),h.process(r),m.process(r),g.process(r),v.process(r),x.process(r),b.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(M))},A=()=>{t=!0,i=!0,r.isProcessing||n(M)};return{schedule:Xx.reduce((R,B)=>{const N=a[B];return R[B]=(U,I=!1,z=!1)=>(t||A(),N.schedule(U,I,z)),R},{}),cancel:R=>{for(let B=0;B<Xx.length;B++)a[Xx[B]].cancel(R)},state:r,steps:a}}const{schedule:Li,cancel:Tf,state:Jr,steps:K2}=EU(typeof requestAnimationFrame<"u"?requestAnimationFrame:yo,!0);let r_;function Jee(){r_=void 0}const ha={now:()=>(r_===void 0&&ha.set(Jr.isProcessing||eu.useManualTiming?Jr.timestamp:performance.now()),r_),set:n=>{r_=n,queueMicrotask(Jee)}},MU=n=>e=>typeof e=="string"&&e.startsWith(n),l3=MU("--"),$ee=MU("var(--"),c3=n=>$ee(n)?Zee.test(n.split("/*")[0].trim()):!1,Zee=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,em={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Lv={...em,transform:n=>Qc(0,1,n)},Wx={...em,default:1},dv=n=>Math.round(n*1e5)/1e5,u3=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Qee(n){return n==null}const ete=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,f3=(n,e)=>t=>!!(typeof t=="string"&&ete.test(t)&&t.startsWith(n)||e&&!Qee(t)&&Object.prototype.hasOwnProperty.call(t,e)),TU=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,a,l]=i.match(u3);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},tte=n=>Qc(0,255,n),J2={...em,transform:n=>Math.round(tte(n))},t0={test:f3("rgb","red"),parse:TU("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+J2.transform(n)+", "+J2.transform(e)+", "+J2.transform(t)+", "+dv(Lv.transform(i))+")"};function nte(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const mM={test:f3("#"),parse:nte,transform:t0.transform},hy=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),uf=hy("deg"),tc=hy("%"),Xt=hy("px"),ite=hy("vh"),rte=hy("vw"),cB={...tc,parse:n=>tc.parse(n)/100,transform:n=>tc.transform(n*100)},cp={test:f3("hsl","hue"),parse:TU("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+tc.transform(dv(e))+", "+tc.transform(dv(t))+", "+dv(Lv.transform(i))+")"},ds={test:n=>t0.test(n)||mM.test(n)||cp.test(n),parse:n=>t0.test(n)?t0.parse(n):cp.test(n)?cp.parse(n):mM.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?t0.transform(n):cp.transform(n)},ste=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ate(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(u3))==null?void 0:e.length)||0)+(((t=n.match(ste))==null?void 0:t.length)||0)>0}const CU="number",wU="color",ote="var",lte="var(",uB="${}",cte=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nv(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const l=e.replace(cte,u=>(ds.test(u)?(i.color.push(s),r.push(wU),t.push(ds.parse(u))):u.startsWith(lte)?(i.var.push(s),r.push(ote),t.push(u)):(i.number.push(s),r.push(CU),t.push(parseFloat(u))),++s,uB)).split(uB);return{values:t,split:l,indexes:i,types:r}}function RU(n){return Nv(n).values}function DU(n){const{split:e,types:t}=Nv(n),i=e.length;return r=>{let s="";for(let a=0;a<i;a++)if(s+=e[a],r[a]!==void 0){const l=t[a];l===CU?s+=dv(r[a]):l===wU?s+=ds.transform(r[a]):s+=r[a]}return s}}const ute=n=>typeof n=="number"?0:n;function fte(n){const e=RU(n);return DU(n)(e.map(ute))}const Cf={test:ate,parse:RU,createTransformer:DU,getAnimatableNone:fte};function $2(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function hte({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,a=0;if(!e)r=s=a=t;else{const l=t<.5?t*(1+e):t+e-t*e,u=2*t-l;r=$2(u,l,n+1/3),s=$2(u,l,n),a=$2(u,l,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:i}}function gb(n,e){return t=>t>0?e:n}const Si=(n,e,t)=>n+(e-n)*t,Z2=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},dte=[mM,t0,cp],pte=n=>dte.find(e=>e.test(n));function fB(n){const e=pte(n);if(!e)return!1;let t=e.parse(n);return e===cp&&(t=hte(t)),t}const hB=(n,e)=>{const t=fB(n),i=fB(e);if(!t||!i)return gb(n,e);const r={...t};return s=>(r.red=Z2(t.red,i.red,s),r.green=Z2(t.green,i.green,s),r.blue=Z2(t.blue,i.blue,s),r.alpha=Si(t.alpha,i.alpha,s),t0.transform(r))},gM=new Set(["none","hidden"]);function mte(n,e){return gM.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function gte(n,e){return t=>Si(n,e,t)}function h3(n){return typeof n=="number"?gte:typeof n=="string"?c3(n)?gb:ds.test(n)?hB:xte:Array.isArray(n)?BU:typeof n=="object"?ds.test(n)?hB:vte:gb}function BU(n,e){const t=[...n],i=t.length,r=n.map((s,a)=>h3(s)(s,e[a]));return s=>{for(let a=0;a<i;a++)t[a]=r[a](s);return t}}function vte(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=h3(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function yte(n,e){const t=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const s=e.types[r],a=n.indexes[s][i[s]],l=n.values[a]??0;t[r]=l,i[s]++}return t}const xte=(n,e)=>{const t=Cf.createTransformer(e),i=Nv(n),r=Nv(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?gM.has(n)&&!r.values.length||gM.has(e)&&!i.values.length?mte(n,e):Qp(BU(yte(i,r),r.values),t):gb(n,e)};function OU(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Si(n,e,t):h3(n)(n,e)}const _te=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Li.update(e,t),stop:()=>Tf(e),now:()=>Jr.isProcessing?Jr.timestamp:ha.now()}},PU=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=n(s/(r-1))+", ";return`linear(${i.substring(0,i.length-2)})`},vb=2e4;function d3(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<vb;)e+=t,i=n.next(e);return e>=vb?1/0:e}function UU(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(d3(i),vb);return{type:"keyframes",ease:s=>i.next(r*s).value/e,duration:ec(r)}}const bte=5;function LU(n,e,t){const i=Math.max(e-bte,0);return fU(t-n(i),e-i)}const Xi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dB=.001;function Ste({duration:n=Xi.duration,bounce:e=Xi.bounce,velocity:t=Xi.velocity,mass:i=Xi.mass}){let r,s,a=1-e;a=Qc(Xi.minDamping,Xi.maxDamping,a),n=Qc(Xi.minDuration,Xi.maxDuration,ec(n)),a<1?(r=h=>{const m=h*a,g=m*n,v=m-t,x=vM(h,a),b=Math.exp(-g);return dB-v/x*b},s=h=>{const g=h*a*n,v=g*t+t,x=Math.pow(a,2)*Math.pow(h,2)*n,b=Math.exp(-g),M=vM(Math.pow(h,2),a);return(-r(h)+dB>0?-1:1)*((v-x)*b)/M}):(r=h=>{const m=Math.exp(-h*n),g=(h-t)*n+1;return-.001+m*g},s=h=>{const m=Math.exp(-h*n),g=(t-h)*(n*n);return m*g});const l=5/n,u=Ete(r,s,l);if(n=ol(n),isNaN(u))return{stiffness:Xi.stiffness,damping:Xi.damping,duration:n};{const h=Math.pow(u,2)*i;return{stiffness:h,damping:a*2*Math.sqrt(i*h),duration:n}}}const Ate=12;function Ete(n,e,t){let i=t;for(let r=1;r<Ate;r++)i=i-n(i)/e(i);return i}function vM(n,e){return n*Math.sqrt(1-e*e)}const Mte=["duration","bounce"],Tte=["stiffness","damping","mass"];function pB(n,e){return e.some(t=>n[t]!==void 0)}function Cte(n){let e={velocity:Xi.velocity,stiffness:Xi.stiffness,damping:Xi.damping,mass:Xi.mass,isResolvedFromDuration:!1,...n};if(!pB(n,Tte)&&pB(n,Mte))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*Qc(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:Xi.mass,stiffness:r,damping:s}}else{const t=Ste(n);e={...e,...t,mass:Xi.mass},e.isResolvedFromDuration=!0}return e}function Iv(n=Xi.visualDuration,e=Xi.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:h,mass:m,duration:g,velocity:v,isResolvedFromDuration:x}=Cte({...t,velocity:-ec(t.velocity||0)}),b=v||0,M=h/(2*Math.sqrt(u*m)),A=a-s,S=ec(Math.sqrt(u/m)),C=Math.abs(A)<5;i||(i=C?Xi.restSpeed.granular:Xi.restSpeed.default),r||(r=C?Xi.restDelta.granular:Xi.restDelta.default);let R;if(M<1){const N=vM(S,M);R=U=>{const I=Math.exp(-M*S*U);return a-I*((b+M*S*A)/N*Math.sin(N*U)+A*Math.cos(N*U))}}else if(M===1)R=N=>a-Math.exp(-S*N)*(A+(b+S*A)*N);else{const N=S*Math.sqrt(M*M-1);R=U=>{const I=Math.exp(-M*S*U),z=Math.min(N*U,300);return a-I*((b+M*S*A)*Math.sinh(z)+N*A*Math.cosh(z))/N}}const B={calculatedDuration:x&&g||null,next:N=>{const U=R(N);if(x)l.done=N>=g;else{let I=N===0?b:0;M<1&&(I=N===0?ol(b):LU(R,N,U));const z=Math.abs(I)<=i,L=Math.abs(a-U)<=r;l.done=z&&L}return l.value=l.done?a:U,l},toString:()=>{const N=Math.min(d3(B),vb),U=PU(I=>B.next(N*I).value,N,30);return N+"ms "+U},toTransition:()=>{}};return B}Iv.applyToOptions=n=>{const e=UU(n,100,Iv);return n.ease=e.ease,n.duration=ol(e.duration),n.type="keyframes",n};function yM({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:a,min:l,max:u,restDelta:h=.5,restSpeed:m}){const g=n[0],v={done:!1,value:g},x=z=>l!==void 0&&z<l||u!==void 0&&z>u,b=z=>l===void 0?u:u===void 0||Math.abs(l-z)<Math.abs(u-z)?l:u;let M=t*e;const A=g+M,S=a===void 0?A:a(A);S!==A&&(M=S-g);const C=z=>-M*Math.exp(-z/i),R=z=>S+C(z),B=z=>{const L=C(z),O=R(z);v.done=Math.abs(L)<=h,v.value=v.done?S:O};let N,U;const I=z=>{x(v.value)&&(N=z,U=Iv({keyframes:[v.value,b(v.value)],velocity:LU(R,z,v.value),damping:r,stiffness:s,restDelta:h,restSpeed:m}))};return I(0),{calculatedDuration:null,next:z=>{let L=!1;return!U&&N===void 0&&(L=!0,B(z),I(z)),N!==void 0&&z>=N?U.next(z-N):(!L&&B(z),v)}}}function wte(n,e,t){const i=[],r=t||eu.mix||OU,s=n.length-1;for(let a=0;a<s;a++){let l=r(n[a],n[a+1]);if(e){const u=Array.isArray(e)?e[a]||yo:e;l=Qp(u,l)}i.push(l)}return i}function Rte(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(i3(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const l=wte(e,i,r),u=l.length,h=m=>{if(a&&m<n[0])return e[0];let g=0;if(u>1)for(;g<n.length-2&&!(m<n[g+1]);g++);const v=Op(n[g],n[g+1],m);return l[g](v)};return t?m=>h(Qc(n[0],n[s-1],m)):h}function NU(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Op(0,e,i);n.push(Si(t,1,r))}}function IU(n){const e=[0];return NU(e,n.length-1),e}function Dte(n,e){return n.map(t=>t*e)}function Bte(n,e){return n.map(()=>e||_U).splice(0,n.length-1)}function pv({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=bU(i)?i.map(lB):lB(i),s={done:!1,value:e[0]},a=Dte(t&&t.length===e.length?t:IU(e),n),l=Rte(a,e,{ease:Array.isArray(r)?r:Bte(e,r)});return{calculatedDuration:n,next:u=>(s.value=l(u),s.done=u>=n,s)}}const Ote=n=>n!==null;function p3(n,{repeat:e,repeatType:t="loop"},i,r=1){const s=n.filter(Ote),l=r<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!l||i===void 0?s[l]:i}const Pte={decay:yM,inertia:yM,tween:pv,keyframes:pv,spring:Iv};function FU(n){typeof n.type=="string"&&(n.type=Pte[n.type])}class m3{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Ute=n=>n/100;class g3 extends m3{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,r;const{motionValue:t}=this.options;t&&t.updatedAt!==ha.now()&&this.tick(ha.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(i=this.options).onStop)==null||r.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;FU(e);const{type:t=pv,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=e;let{keyframes:l}=e;const u=t||pv;u!==pv&&typeof l[0]!="number"&&(this.mixKeyframes=Qp(Ute,OU(l[0],l[1])),l=[0,100]);const h=u({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...l].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=d3(h));const{calculatedDuration:m}=h;this.calculatedDuration=m,this.resolvedDuration=m+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=h}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return i.next(0);const{delay:h=0,keyframes:m,repeat:g,repeatType:v,repeatDelay:x,type:b,onUpdate:M,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const S=this.currentTime-h*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?S<0:S>r;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let R=this.currentTime,B=i;if(g){const z=Math.min(this.currentTime,r)/l;let L=Math.floor(z),O=z%1;!O&&z>=1&&(O=1),O===1&&L--,L=Math.min(L,g+1),!!(L%2)&&(v==="reverse"?(O=1-O,x&&(O-=x/l)):v==="mirror"&&(B=a)),R=Qc(0,1,O)*l}const N=C?{done:!1,value:m[0]}:B.next(R);s&&(N.value=s(N.value));let{done:U}=N;!C&&u!==null&&(U=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&U);return I&&b!==yM&&(N.value=p3(m,this.options,A,this.speed)),M&&M(N.value),I&&this.finish(),N}then(e,t){return this.finished.then(e,t)}get duration(){return ec(this.calculatedDuration)}get time(){return ec(this.currentTime)}set time(e){var t;e=ol(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ha.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ec(this.currentTime))}play(){var r,s;if(this.isStopped)return;const{driver:e=_te,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(s=(r=this.options).onPlay)==null||s.call(r);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ha.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function Lte(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const n0=n=>n*180/Math.PI,xM=n=>{const e=n0(Math.atan2(n[1],n[0]));return _M(e)},Nte={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:xM,rotateZ:xM,skewX:n=>n0(Math.atan(n[1])),skewY:n=>n0(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},_M=n=>(n=n%360,n<0&&(n+=360),n),mB=xM,gB=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),vB=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),Ite={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:gB,scaleY:vB,scale:n=>(gB(n)+vB(n))/2,rotateX:n=>_M(n0(Math.atan2(n[6],n[5]))),rotateY:n=>_M(n0(Math.atan2(-n[2],n[0]))),rotateZ:mB,rotate:mB,skewX:n=>n0(Math.atan(n[4])),skewY:n=>n0(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function bM(n){return n.includes("scale")?1:0}function SM(n,e){if(!n||n==="none")return bM(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(t)i=Ite,r=t;else{const l=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Nte,r=l}if(!r)return bM(e);const s=i[e],a=r[1].split(",").map(zte);return typeof s=="function"?s(a):a[s]}const Fte=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return SM(t,e)};function zte(n){return parseFloat(n.trim())}const tm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],nm=new Set(tm),yB=n=>n===em||n===Xt,Hte=new Set(["x","y","z"]),Gte=tm.filter(n=>!Hte.has(n));function Vte(n){const e=[];return Gte.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const l0={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>SM(e,"x"),y:(n,{transform:e})=>SM(e,"y")};l0.translateX=l0.x;l0.translateY=l0.y;const c0=new Set;let AM=!1,EM=!1,MM=!1;function zU(){if(EM){const n=Array.from(c0).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=Vte(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,a])=>{var l;(l=i.getValue(s))==null||l.set(a)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}EM=!1,AM=!1,c0.forEach(n=>n.complete(MM)),c0.clear()}function HU(){c0.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(EM=!0)})}function kte(){MM=!0,HU(),zU(),MM=!1}class v3{constructor(e,t,i,r,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(c0.add(this),AM||(AM=!0,Li.read(HU),Li.resolveKeyframes(zU))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(e[0]===null){const s=r==null?void 0:r.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&s===void 0&&r.set(e[0])}Lte(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),c0.delete(this)}cancel(){this.state==="scheduled"&&(c0.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const jte=n=>n.startsWith("--");function Xte(n,e,t){jte(e)?n.style.setProperty(e,t):n.style[e]=t}const Wte=r3(()=>window.ScrollTimeline!==void 0),Yte={};function qte(n,e){const t=r3(n);return()=>Yte[e]??t()}const GU=qte(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Yg=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,xB={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yg([0,.65,.55,1]),circOut:Yg([.55,0,1,.45]),backIn:Yg([.31,.01,.66,-.59]),backOut:Yg([.33,1.53,.69,.99])};function VU(n,e){if(n)return typeof n=="function"?GU()?PU(n,e):"ease-out":AU(n)?Yg(n):Array.isArray(n)?n.map(t=>VU(t,e)||xB.easeOut):xB[n]}function Kte(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:a="loop",ease:l="easeOut",times:u}={},h=void 0){const m={[e]:t};u&&(m.offset=u);const g=VU(l,r);Array.isArray(g)&&(m.easing=g);const v={delay:i,duration:r,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return h&&(v.pseudoElement=h),n.animate(m,v)}function y3(n){return typeof n=="function"&&"applyToOptions"in n}function Jte({type:n,...e}){return y3(n)&&GU()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class $te extends m3{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:l,onComplete:u}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,i3(typeof e.type!="string");const h=Jte(e);this.animation=Kte(t,i,r,h,s),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const m=p3(r,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(m):Xte(t,i,m),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,i;const e=((i=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:i.call(t).duration)||0;return ec(Number(e))}get time(){return ec(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ol(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Wte()?(this.animation.timeline=e,yo):t(this)}}const kU={anticipate:vU,backInOut:gU,circInOut:xU};function Zte(n){return n in kU}function Qte(n){typeof n.ease=="string"&&Zte(n.ease)&&(n.ease=kU[n.ease])}const _B=10;class ene extends $te{constructor(e){Qte(e),FU(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:r,element:s,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const l=new g3({...a,autoplay:!1}),u=ol(this.finishedTime??this.time);t.setWithVelocity(l.sample(u-_B).value,l.sample(u).value,_B),l.stop()}}const bB=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Cf.test(n)||n==="0")&&!n.startsWith("url("));function tne(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function nne(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],a=bB(r,e),l=bB(s,e);return!a||!l?!1:tne(n)||(t==="spring"||y3(t))&&i}function jU(n){return cU(n)&&"offsetHeight"in n}const ine=new Set(["opacity","clipPath","filter","transform"]),rne=r3(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function sne(n){var h;const{motionValue:e,name:t,repeatDelay:i,repeatType:r,damping:s,type:a}=n;if(!jU((h=e==null?void 0:e.owner)==null?void 0:h.current))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return rne()&&t&&ine.has(t)&&(t!=="transform"||!u)&&!l&&!i&&r!=="mirror"&&s!==0&&a!=="inertia"}const ane=40;class one extends m3{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",keyframes:l,name:u,motionValue:h,element:m,...g}){var b;super(),this.stop=()=>{var M,A;this._animation&&(this._animation.stop(),(M=this.stopTimeline)==null||M.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=ha.now();const v={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:a,name:u,motionValue:h,element:m,...g},x=(m==null?void 0:m.KeyframeResolver)||v3;this.keyframeResolver=new x(l,(M,A,S)=>this.onKeyframesResolved(M,A,v,!S),u,h,m),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;const{name:s,type:a,velocity:l,delay:u,isHandoff:h,onUpdate:m}=i;this.resolvedAt=ha.now(),nne(e,s,a,l)||((eu.instantAnimations||!u)&&(m==null||m(p3(e,i,t))),e[0]=e[e.length-1],i.duration=0,i.repeat=0);const v={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>ane?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},x=!h&&sne(v)?new ene({...v,element:v.motionValue.owner.current}):new g3(v);x.finished.then(()=>this.notifyFinished()).catch(yo),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),kte()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}class lne{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e){const t=this.animations.map(i=>i.attachTimeline(e));return()=>{t.forEach((i,r)=>{i&&i(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class cne extends lne{then(e,t){return this.finished.finally(e).then(()=>{})}}const une=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function fne(n){const e=une.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function XU(n,e,t=1){const[i,r]=fne(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const a=s.trim();return lU(a)?parseFloat(a):a}return c3(r)?XU(r,e,t+1):r}function x3(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const WU=new Set(["width","height","top","left","right","bottom",...tm]),hne={test:n=>n==="auto",parse:n=>n},YU=n=>e=>e.test(n),qU=[em,Xt,tc,uf,rte,ite,hne],SB=n=>qU.find(YU(n));function dne(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||uU(n):!0}const pne=new Set(["brightness","contrast","saturate","opacity"]);function mne(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(u3)||[];if(!i)return n;const r=t.replace(i,"");let s=pne.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const gne=/\b([a-z-]*)\(.*?\)/gu,TM={...Cf,getAnimatableNone:n=>{const e=n.match(gne);return e?e.map(mne).join(" "):n}},AB={...em,transform:Math.round},vne={rotate:uf,rotateX:uf,rotateY:uf,rotateZ:uf,scale:Wx,scaleX:Wx,scaleY:Wx,scaleZ:Wx,skew:uf,skewX:uf,skewY:uf,distance:Xt,translateX:Xt,translateY:Xt,translateZ:Xt,x:Xt,y:Xt,z:Xt,perspective:Xt,transformPerspective:Xt,opacity:Lv,originX:cB,originY:cB,originZ:Xt},_3={borderWidth:Xt,borderTopWidth:Xt,borderRightWidth:Xt,borderBottomWidth:Xt,borderLeftWidth:Xt,borderRadius:Xt,radius:Xt,borderTopLeftRadius:Xt,borderTopRightRadius:Xt,borderBottomRightRadius:Xt,borderBottomLeftRadius:Xt,width:Xt,maxWidth:Xt,height:Xt,maxHeight:Xt,top:Xt,right:Xt,bottom:Xt,left:Xt,padding:Xt,paddingTop:Xt,paddingRight:Xt,paddingBottom:Xt,paddingLeft:Xt,margin:Xt,marginTop:Xt,marginRight:Xt,marginBottom:Xt,marginLeft:Xt,backgroundPositionX:Xt,backgroundPositionY:Xt,...vne,zIndex:AB,fillOpacity:Lv,strokeOpacity:Lv,numOctaves:AB},yne={..._3,color:ds,backgroundColor:ds,outlineColor:ds,fill:ds,stroke:ds,borderColor:ds,borderTopColor:ds,borderRightColor:ds,borderBottomColor:ds,borderLeftColor:ds,filter:TM,WebkitFilter:TM},KU=n=>yne[n];function JU(n,e){let t=KU(n);return t!==TM&&(t=Cf),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const xne=new Set(["auto","none","0"]);function _ne(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!xne.has(s)&&Nv(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=JU(t,r)}class bne extends v3{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),c3(h))){const m=XU(h,t.current);m!==void 0&&(e[u]=m),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!WU.has(i)||e.length!==2)return;const[r,s]=e,a=SB(r),l=SB(s);if(a!==l)if(yB(a)&&yB(l))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else l0[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||dne(e[r]))&&i.push(r);i.length&&_ne(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=l0[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var l;const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,a=i[s];i[s]=l0[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([u,h])=>{e.getValue(u).set(h)}),this.resolveNoneKeyframes()}}const EB=30,Sne=n=>!isNaN(parseFloat(n));class Ane{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{var a,l;const s=ha.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty();r&&((l=this.events.renderRequest)==null||l.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=ha.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Sne(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new s3);const i=this.events[e].add(t);return e==="change"?()=>{i(),Li.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ha.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>EB)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,EB);return fU(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function S0(n,e){return new Ane(n,e)}function $U(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const r=(t==null?void 0:t[n])??i.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}const ZU=(n,e)=>e&&typeof n=="number"?e.transform(n):n,{schedule:b3}=EU(queueMicrotask,!1),Qo={x:!1,y:!1};function S3(){return Qo.x||Qo.y}function Ene(n){return n==="x"||n==="y"?Qo[n]?null:(Qo[n]=!0,()=>{Qo[n]=!1}):Qo.x||Qo.y?null:(Qo.x=Qo.y=!0,()=>{Qo.x=Qo.y=!1})}function QU(n,e){const t=$U(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function MB(n){return!(n.pointerType==="touch"||S3())}function Mne(n,e,t={}){const[i,r,s]=QU(n,t),a=l=>{if(!MB(l))return;const{target:u}=l,h=e(u,l);if(typeof h!="function"||!u)return;const m=g=>{MB(g)&&(h(g),u.removeEventListener("pointerleave",m))};u.addEventListener("pointerleave",m,r)};return i.forEach(l=>{l.addEventListener("pointerenter",a,r)}),s}const e8=(n,e)=>e?n===e?!0:e8(n,e.parentElement):!1,A3=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Tne=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Cne(n){return Tne.has(n.tagName)||n.tabIndex!==-1}const s_=new WeakSet;function TB(n){return e=>{e.key==="Enter"&&n(e)}}function Q2(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const wne=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=TB(()=>{if(s_.has(t))return;Q2(t,"down");const r=TB(()=>{Q2(t,"up")}),s=()=>Q2(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function CB(n){return A3(n)&&!S3()}function Rne(n,e,t={}){const[i,r,s]=QU(n,t),a=l=>{const u=l.currentTarget;if(!CB(l))return;s_.add(u);const h=e(u,l),m=(x,b)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),s_.has(u)&&s_.delete(u),CB(x)&&typeof h=="function"&&h(x,{success:b})},g=x=>{m(x,u===window||u===document||t.useGlobalTarget||e8(u,x.target))},v=x=>{m(x,!1)};window.addEventListener("pointerup",g,r),window.addEventListener("pointercancel",v,r)};return i.forEach(l=>{(t.useGlobalTarget?window:l).addEventListener("pointerdown",a,r),jU(l)&&(l.addEventListener("focus",h=>wne(h,r)),!Cne(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function E3(n){return cU(n)&&"ownerSVGElement"in n}function t8(n){return E3(n)&&n.tagName==="svg"}const Ei=n=>!!(n&&n.getVelocity),Dne=[...qU,ds,Cf],Bne=n=>Dne.find(YU(n)),Fv=F.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function One(n=!0){const e=F.useContext(t3);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=F.useId();F.useEffect(()=>{if(n)return r(s)},[n]);const a=F.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,a]:[!0]}const n8=F.createContext({strict:!1}),wB={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Pp={};for(const n in wB)Pp[n]={isEnabled:e=>wB[n].some(t=>!!e[t])};function Pne(n){for(const e in n)Pp[e]={...Pp[e],...n[e]}}const Une=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yb(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Une.has(n)}let i8=n=>!yb(n);function r8(n){n&&(i8=e=>e.startsWith("on")?!yb(e):n(e))}try{r8(require("@emotion/is-prop-valid").default)}catch{}function s8(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(i8(r)||t===!0&&yb(r)||!e&&!yb(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function RB({children:n,isValidProp:e,...t}){e&&r8(e),t={...F.useContext(Fv),...t},t.isStatic=QT(()=>t.isStatic);const i=F.useMemo(()=>t,[JSON.stringify(t.transition),t.transformPagePoint,t.reducedMotion]);return re.jsx(Fv.Provider,{value:i,children:n})}function Lne(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const gS=F.createContext({});function vS(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function zv(n){return typeof n=="string"||Array.isArray(n)}const M3=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],T3=["initial",...M3];function yS(n){return vS(n.animate)||T3.some(e=>zv(n[e]))}function a8(n){return!!(yS(n)||n.variants)}function Nne(n,e){if(yS(n)){const{initial:t,animate:i}=n;return{initial:t===!1||zv(t)?t:void 0,animate:zv(i)?i:void 0}}return n.inherit!==!1?e:{}}function Ine(n){const{initial:e,animate:t}=Nne(n,F.useContext(gS));return F.useMemo(()=>({initial:e,animate:t}),[DB(e),DB(t)])}function DB(n){return Array.isArray(n)?n.join(" "):n}const Fne=Symbol.for("motionComponentSymbol");function up(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function zne(n,e,t){return F.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):up(t)&&(t.current=i))},[e])}const C3=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Hne="framerAppearId",o8="data-"+C3(Hne),l8=F.createContext({});function Gne(n,e,t,i,r){var M,A;const{visualElement:s}=F.useContext(gS),a=F.useContext(n8),l=F.useContext(t3),u=F.useContext(Fv).reducedMotion,h=F.useRef(null);i=i||a.renderer,!h.current&&i&&(h.current=i(n,{visualState:e,parent:s,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const m=h.current,g=F.useContext(l8);m&&!m.projection&&r&&(m.type==="html"||m.type==="svg")&&Vne(h.current,t,r,g);const v=F.useRef(!1);F.useInsertionEffect(()=>{m&&v.current&&m.update(t,l)});const x=t[o8],b=F.useRef(!!x&&!((M=window.MotionHandoffIsComplete)!=null&&M.call(window,x))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,x)));return Fee(()=>{m&&(v.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),b3.render(m.render),b.current&&m.animationState&&m.animationState.animateChanges())}),F.useEffect(()=>{m&&(!b.current&&m.animationState&&m.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,x)}),b.current=!1))}),m}function Vne(n,e,t,i){const{layoutId:r,layout:s,drag:a,dragConstraints:l,layoutScroll:u,layoutRoot:h,layoutCrossfade:m}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:c8(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!a||l&&up(l),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:m,layoutScroll:u,layoutRoot:h})}function c8(n){if(n)return n.options.allowProjection!==!1?n.projection:c8(n.parent)}function u8({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&Pne(n);function s(l,u){let h;const m={...F.useContext(Fv),...l,layoutId:kne(l)},{isStatic:g}=m,v=Ine(l),x=i(l,g);if(!g&&e3){jne();const b=Xne(m);h=b.MeasureLayout,v.visualElement=Gne(r,x,m,e,b.ProjectionNode)}return re.jsxs(gS.Provider,{value:v,children:[h&&v.visualElement?re.jsx(h,{visualElement:v.visualElement,...m}):null,t(r,l,zne(x,v.visualElement,u),x,g,v.visualElement)]})}s.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const a=F.forwardRef(s);return a[Fne]=r,a}function kne({layoutId:n}){const e=F.useContext(oU).id;return e&&n!==void 0?e+"-"+n:n}function jne(n,e){F.useContext(n8).strict}function Xne(n){const{drag:e,layout:t}=Pp;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const Hv={};function Wne(n){for(const e in n)Hv[e]=n[e],l3(e)&&(Hv[e].isCSSVariable=!0)}function f8(n,{layout:e,layoutId:t}){return nm.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Hv[n]||n==="opacity")}const Yne={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},qne=tm.length;function Kne(n,e,t){let i="",r=!0;for(let s=0;s<qne;s++){const a=tm[s],l=n[a];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(a.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||t){const h=ZU(l,_3[a]);if(!u){r=!1;const m=Yne[a]||a;i+=`${m}(${h}) `}t&&(e[a]=h)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function w3(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let a=!1,l=!1;for(const u in e){const h=e[u];if(nm.has(u)){a=!0;continue}else if(l3(u)){r[u]=h;continue}else{const m=ZU(h,_3[u]);u.startsWith("origin")?(l=!0,s[u]=m):i[u]=m}}if(e.transform||(a||t?i.transform=Kne(e,n.transform,t):i.transform&&(i.transform="none")),l){const{originX:u="50%",originY:h="50%",originZ:m=0}=s;i.transformOrigin=`${u} ${h} ${m}`}}const R3=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function h8(n,e,t){for(const i in e)!Ei(e[i])&&!f8(i,t)&&(n[i]=e[i])}function Jne({transformTemplate:n},e){return F.useMemo(()=>{const t=R3();return w3(t,e,n),Object.assign({},t.vars,t.style)},[e])}function $ne(n,e){const t=n.style||{},i={};return h8(i,t,n),Object.assign(i,Jne(n,e)),i}function Zne(n,e){const t={},i=$ne(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const Qne={offset:"stroke-dashoffset",array:"stroke-dasharray"},eie={offset:"strokeDashoffset",array:"strokeDasharray"};function tie(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?Qne:eie;n[s.offset]=Xt.transform(-i);const a=Xt.transform(e),l=Xt.transform(t);n[s.array]=`${a} ${l}`}function d8(n,{attrX:e,attrY:t,attrScale:i,pathLength:r,pathSpacing:s=1,pathOffset:a=0,...l},u,h,m){if(w3(n,l,h),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:v}=n;g.transform&&(v.transform=g.transform,delete g.transform),(v.transform||g.transformOrigin)&&(v.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),v.transform&&(v.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),i!==void 0&&(g.scale=i),r!==void 0&&tie(g,r,s,a,!1)}const p8=()=>({...R3(),attrs:{}}),m8=n=>typeof n=="string"&&n.toLowerCase()==="svg";function nie(n,e,t,i){const r=F.useMemo(()=>{const s=p8();return d8(s,e,m8(i),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};h8(s,n.style,n),r.style={...s,...r.style}}return r}const iie=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function D3(n){return typeof n!="string"||n.includes("-")?!1:!!(iie.indexOf(n)>-1||/[A-Z]/u.test(n))}function rie(n=!1){return(t,i,r,{latestValues:s},a)=>{const u=(D3(t)?nie:Zne)(i,s,a,t),h=s8(i,typeof t=="string",n),m=t!==F.Fragment?{...h,...u,ref:r}:{},{children:g}=i,v=F.useMemo(()=>Ei(g)?g.get():g,[g]);return F.createElement(t,{...m,children:v})}}function BB(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function B3(n,e,t,i){if(typeof e=="function"){const[r,s]=BB(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=BB(i);e=e(t!==void 0?t:n.custom,r,s)}return e}function mv(n){return Ei(n)?n.get():n}function sie({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,r){return{latestValues:aie(t,i,r,n),renderState:e()}}const O3=n=>(e,t)=>{const i=F.useContext(gS),r=F.useContext(t3),s=()=>sie(n,e,i,r);return t?s():QT(s)};function aie(n,e,t,i){const r={},s=i(n,{});for(const v in s)r[v]=mv(s[v]);let{initial:a,animate:l}=n;const u=yS(n),h=a8(n);e&&h&&!u&&n.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let m=t?t.initial===!1:!1;m=m||a===!1;const g=m?l:a;if(g&&typeof g!="boolean"&&!vS(g)){const v=Array.isArray(g)?g:[g];for(let x=0;x<v.length;x++){const b=B3(n,v[x]);if(b){const{transitionEnd:M,transition:A,...S}=b;for(const C in S){let R=S[C];if(Array.isArray(R)){const B=m?R.length-1:0;R=R[B]}R!==null&&(r[C]=R)}for(const C in M)r[C]=M[C]}}}return r}function P3(n,e,t){var s;const{style:i}=n,r={};for(const a in i)(Ei(i[a])||e.style&&Ei(e.style[a])||f8(a,n)||((s=t==null?void 0:t.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(r[a]=i[a]);return r}const oie={useVisualState:O3({scrapeMotionValuesFromProps:P3,createRenderState:R3})};function g8(n,e,t){const i=P3(n,e,t);for(const r in n)if(Ei(n[r])||Ei(e[r])){const s=tm.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}const lie={useVisualState:O3({scrapeMotionValuesFromProps:g8,createRenderState:p8})};function cie(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...D3(i)?lie:oie,preloadedFeatures:n,useRender:rie(r),createVisualElement:e,Component:i};return u8(a)}}function Gv(n,e,t){const i=n.getProps();return B3(i,e,t!==void 0?t:i.custom,n)}const CM=n=>Array.isArray(n);function uie(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,S0(t))}function fie(n){return CM(n)?n[n.length-1]||0:n}function hie(n,e){const t=Gv(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const a in s){const l=fie(s[a]);uie(n,a,l)}}function die(n){return!!(Ei(n)&&n.add)}function wM(n,e){const t=n.getValue("willChange");if(die(t))return t.add(e);if(!t&&eu.WillChange){const i=new eu.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function v8(n){return n.props[o8]}const pie=n=>n!==null;function mie(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(pie),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[s]}const gie={type:"spring",stiffness:500,damping:25,restSpeed:10},vie=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),yie={type:"keyframes",duration:.8},xie={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_ie=(n,{keyframes:e})=>e.length>2?yie:nm.has(n)?n.startsWith("scale")?vie(e[1]):gie:xie;function bie({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:a,repeatDelay:l,from:u,elapsed:h,...m}){return!!Object.keys(m).length}const U3=(n,e,t,i={},r,s)=>a=>{const l=x3(i,n)||{},u=l.delay||i.delay||0;let{elapsed:h=0}=i;h=h-ol(u);const m={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-h,onUpdate:v=>{e.set(v),l.onUpdate&&l.onUpdate(v)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:n,motionValue:e,element:s?void 0:r};bie(l)||Object.assign(m,_ie(n,m)),m.duration&&(m.duration=ol(m.duration)),m.repeatDelay&&(m.repeatDelay=ol(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),(eu.instantAnimations||eu.skipAnimations)&&(g=!0,m.duration=0,m.delay=0),m.allowFlatten=!l.type&&!l.ease,g&&!s&&e.get()!==void 0){const v=mie(m.keyframes,l);if(v!==void 0){Li.update(()=>{m.onUpdate(v),m.onComplete()});return}}return l.isSync?new g3(m):new one(m)};function Sie({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function L3(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(s=i);const u=[],h=r&&n.animationState&&n.animationState.getState()[r];for(const m in l){const g=n.getValue(m,n.latestValues[m]??null),v=l[m];if(v===void 0||h&&Sie(h,m))continue;const x={delay:t,...x3(s||{},m)},b=g.get();if(b!==void 0&&!g.isAnimating&&!Array.isArray(v)&&v===b&&!x.velocity)continue;let M=!1;if(window.MotionHandoffAnimation){const S=v8(n);if(S){const C=window.MotionHandoffAnimation(S,m,Li);C!==null&&(x.startTime=C,M=!0)}}wM(n,m),g.start(U3(m,g,v,n.shouldReduceMotion&&WU.has(m)?{type:!1}:x,n,M));const A=g.animation;A&&u.push(A)}return a&&Promise.all(u).then(()=>{Li.update(()=>{a&&hie(n,a)})}),u}function RM(n,e,t={}){var u;const i=Gv(n,e,t.type==="exit"?(u=n.presenceContext)==null?void 0:u.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(L3(n,i,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:v}=r;return Aie(n,e,m+h,g,v,t)}:()=>Promise.resolve(),{when:l}=r;if(l){const[h,m]=l==="beforeChildren"?[s,a]:[a,s];return h().then(()=>m())}else return Promise.all([s(),a(t.delay)])}function Aie(n,e,t=0,i=0,r=1,s){const a=[],l=(n.variantChildren.size-1)*i,u=r===1?(h=0)=>h*i:(h=0)=>l-h*i;return Array.from(n.variantChildren).sort(Eie).forEach((h,m)=>{h.notify("AnimationStart",e),a.push(RM(h,e,{...s,delay:t+u(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(a)}function Eie(n,e){return n.sortNodePosition(e)}function Mie(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>RM(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=RM(n,e,t);else{const r=typeof e=="function"?Gv(n,e,t.custom):e;i=Promise.all(L3(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function y8(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const Tie=T3.length;function x8(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?x8(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<Tie;t++){const i=T3[t],r=n.props[i];(zv(r)||r===!1)&&(e[i]=r)}return e}const Cie=[...M3].reverse(),wie=M3.length;function Rie(n){return e=>Promise.all(e.map(({animation:t,options:i})=>Mie(n,t,i)))}function Die(n){let e=Rie(n),t=OB(),i=!0;const r=u=>(h,m)=>{var v;const g=Gv(n,m,u==="exit"?(v=n.presenceContext)==null?void 0:v.custom:void 0);if(g){const{transition:x,transitionEnd:b,...M}=g;h={...h,...M,...b}}return h};function s(u){e=u(n)}function a(u){const{props:h}=n,m=x8(n.parent)||{},g=[],v=new Set;let x={},b=1/0;for(let A=0;A<wie;A++){const S=Cie[A],C=t[S],R=h[S]!==void 0?h[S]:m[S],B=zv(R),N=S===u?C.isActive:null;N===!1&&(b=A);let U=R===m[S]&&R!==h[S]&&B;if(U&&i&&n.manuallyAnimateOnMount&&(U=!1),C.protectedKeys={...x},!C.isActive&&N===null||!R&&!C.prevProp||vS(R)||typeof R=="boolean")continue;const I=Bie(C.prevProp,R);let z=I||S===u&&C.isActive&&!U&&B||A>b&&B,L=!1;const O=Array.isArray(R)?R:[R];let G=O.reduce(r(S),{});N===!1&&(G={});const{prevResolvedValues:$={}}=C,Q={...$,...G},ce=K=>{z=!0,v.has(K)&&(L=!0,v.delete(K)),C.needsAnimating[K]=!0;const ee=n.getValue(K);ee&&(ee.liveStyle=!1)};for(const K in Q){const ee=G[K],me=$[K];if(x.hasOwnProperty(K))continue;let W=!1;CM(ee)&&CM(me)?W=!y8(ee,me):W=ee!==me,W?ee!=null?ce(K):v.add(K):ee!==void 0&&v.has(K)?ce(K):C.protectedKeys[K]=!0}C.prevProp=R,C.prevResolvedValues=G,C.isActive&&(x={...x,...G}),i&&n.blockInitialAnimation&&(z=!1),z&&(!(U&&I)||L)&&g.push(...O.map(K=>({animation:K,options:{type:S}})))}if(v.size){const A={};if(typeof h.initial!="boolean"){const S=Gv(n,Array.isArray(h.initial)?h.initial[0]:h.initial);S&&S.transition&&(A.transition=S.transition)}v.forEach(S=>{const C=n.getBaseTarget(S),R=n.getValue(S);R&&(R.liveStyle=!0),A[S]=C??null}),g.push({animation:A})}let M=!!g.length;return i&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(M=!1),i=!1,M?e(g):Promise.resolve()}function l(u,h){var g;if(t[u].isActive===h)return Promise.resolve();(g=n.variantChildren)==null||g.forEach(v=>{var x;return(x=v.animationState)==null?void 0:x.setActive(u,h)}),t[u].isActive=h;const m=a(u);for(const v in t)t[v].protectedKeys={};return m}return{animateChanges:a,setActive:l,setAnimateFunction:s,getState:()=>t,reset:()=>{t=OB(),i=!0}}}function Bie(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!y8(e,n):!1}function Gh(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function OB(){return{animate:Gh(!0),whileInView:Gh(),whileHover:Gh(),whileTap:Gh(),whileDrag:Gh(),whileFocus:Gh(),exit:Gh()}}class Pf{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Oie extends Pf{constructor(e){super(e),e.animationState||(e.animationState=Die(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();vS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Pie=0;class Uie extends Pf{constructor(){super(...arguments),this.id=Pie++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const _8={animation:{Feature:Oie},exit:{Feature:Uie}};function Vv(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function dy(n){return{point:{x:n.pageX,y:n.pageY}}}const b8=n=>e=>A3(e)&&n(e,dy(e));function u0(n,e,t,i){return Vv(n,e,b8(t),i)}function S8({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function Lie({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Nie(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}const A8=1e-4,Iie=1-A8,Fie=1+A8,E8=.01,zie=0-E8,Hie=0+E8;function Xs(n){return n.max-n.min}function Gie(n,e,t){return Math.abs(n-e)<=t}function PB(n,e,t,i=.5){n.origin=i,n.originPoint=Si(e.min,e.max,n.origin),n.scale=Xs(t)/Xs(e),n.translate=Si(t.min,t.max,n.origin)-n.originPoint,(n.scale>=Iie&&n.scale<=Fie||isNaN(n.scale))&&(n.scale=1),(n.translate>=zie&&n.translate<=Hie||isNaN(n.translate))&&(n.translate=0)}function gv(n,e,t,i){PB(n.x,e.x,t.x,i?i.originX:void 0),PB(n.y,e.y,t.y,i?i.originY:void 0)}function UB(n,e,t){n.min=t.min+e.min,n.max=n.min+Xs(e)}function Vie(n,e,t){UB(n.x,e.x,t.x),UB(n.y,e.y,t.y)}function LB(n,e,t){n.min=e.min-t.min,n.max=n.min+Xs(e)}function vv(n,e,t){LB(n.x,e.x,t.x),LB(n.y,e.y,t.y)}const NB=()=>({translate:0,scale:1,origin:0,originPoint:0}),fp=()=>({x:NB(),y:NB()}),IB=()=>({min:0,max:0}),Di=()=>({x:IB(),y:IB()});function co(n){return[n("x"),n("y")]}function eE(n){return n===void 0||n===1}function DM({scale:n,scaleX:e,scaleY:t}){return!eE(n)||!eE(e)||!eE(t)}function Yh(n){return DM(n)||M8(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function M8(n){return FB(n.x)||FB(n.y)}function FB(n){return n&&n!=="0%"}function xb(n,e,t){const i=n-t,r=e*i;return t+r}function zB(n,e,t,i,r){return r!==void 0&&(n=xb(n,r,i)),xb(n,t,i)+e}function BM(n,e=0,t=1,i,r){n.min=zB(n.min,e,t,i,r),n.max=zB(n.max,e,t,i,r)}function T8(n,{x:e,y:t}){BM(n.x,e.translate,e.scale,e.originPoint),BM(n.y,t.translate,t.scale,t.originPoint)}const HB=.999999999999,GB=1.0000000000001;function kie(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,a;for(let l=0;l<r;l++){s=t[l],a=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&dp(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,T8(n,a)),i&&Yh(s.latestValues)&&dp(n,s.latestValues))}e.x<GB&&e.x>HB&&(e.x=1),e.y<GB&&e.y>HB&&(e.y=1)}function hp(n,e){n.min=n.min+e,n.max=n.max+e}function VB(n,e,t,i,r=.5){const s=Si(n.min,n.max,r);BM(n,e,t,s,i)}function dp(n,e){VB(n.x,e.x,e.scaleX,e.scale,e.originX),VB(n.y,e.y,e.scaleY,e.scale,e.originY)}function C8(n,e){return S8(Nie(n.getBoundingClientRect(),e))}function jie(n,e,t){const i=C8(n,t),{scroll:r}=e;return r&&(hp(i.x,r.offset.x),hp(i.y,r.offset.y)),i}const w8=({current:n})=>n?n.ownerDocument.defaultView:null,kB=(n,e)=>Math.abs(n-e);function Xie(n,e){const t=kB(n.x,e.x),i=kB(n.y,e.y);return Math.sqrt(t**2+i**2)}class R8{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=nE(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,x=Xie(g.offset,{x:0,y:0})>=3;if(!v&&!x)return;const{point:b}=g,{timestamp:M}=Jr;this.history.push({...b,timestamp:M});const{onStart:A,onMove:S}=this.handlers;v||(A&&A(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=tE(v,this.transformPagePoint),Li.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:x,onSessionEnd:b,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=nE(g.type==="pointercancel"?this.lastMoveEventInfo:tE(v,this.transformPagePoint),this.history);this.startEvent&&x&&x(g,A),b&&b(g,A)},!A3(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const a=dy(e),l=tE(a,this.transformPagePoint),{point:u}=l,{timestamp:h}=Jr;this.history=[{...u,timestamp:h}];const{onSessionStart:m}=t;m&&m(e,nE(l,this.history)),this.removeListeners=Qp(u0(this.contextWindow,"pointermove",this.handlePointerMove),u0(this.contextWindow,"pointerup",this.handlePointerUp),u0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Tf(this.updatePoint)}}function tE(n,e){return e?{point:e(n.point)}:n}function jB(n,e){return{x:n.x-e.x,y:n.y-e.y}}function nE({point:n},e){return{point:n,delta:jB(n,D8(e)),offset:jB(n,Wie(e)),velocity:Yie(e,.1)}}function Wie(n){return n[0]}function D8(n){return n[n.length-1]}function Yie(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=D8(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>ol(e)));)t--;if(!i)return{x:0,y:0};const s=ec(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const a={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function qie(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Si(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Si(t,n,i.max):Math.min(n,t)),n}function XB(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Kie(n,{top:e,left:t,bottom:i,right:r}){return{x:XB(n.x,t,r),y:XB(n.y,e,i)}}function WB(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function Jie(n,e){return{x:WB(n.x,e.x),y:WB(n.y,e.y)}}function $ie(n,e){let t=.5;const i=Xs(n),r=Xs(e);return r>i?t=Op(e.min,e.max-i,n.min):i>r&&(t=Op(n.min,n.max-r,e.min)),Qc(0,1,t)}function Zie(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const OM=.35;function Qie(n=OM){return n===!1?n=0:n===!0&&(n=OM),{x:YB(n,"left","right"),y:YB(n,"top","bottom")}}function YB(n,e,t){return{min:qB(n,e),max:qB(n,t)}}function qB(n,e){return typeof n=="number"?n:n[e]||0}const ere=new WeakMap;class tre{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Di(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(dy(m).point)},s=(m,g)=>{const{drag:v,dragPropagation:x,onDragStart:b}=this.getProps();if(v&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Ene(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),co(A=>{let S=this.getAxisMotionValue(A).get()||0;if(tc.test(S)){const{projection:C}=this.visualElement;if(C&&C.layout){const R=C.layout.layoutBox[A];R&&(S=Xs(R)*(parseFloat(S)/100))}}this.originPoint[A]=S}),b&&Li.postRender(()=>b(m,g)),wM(this.visualElement,"transform");const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:v,dragDirectionLock:x,onDirectionLock:b,onDrag:M}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:A}=g;if(x&&this.currentDirection===null){this.currentDirection=nre(A),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",g.point,A),this.updateAxis("y",g.point,A),this.visualElement.render(),M&&M(m,g)},l=(m,g)=>this.stop(m,g),u=()=>co(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)==null?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new R8(e,{onSessionStart:r,onStart:s,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:w8(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Li.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!Yx(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=qie(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,r=this.constraints;e&&up(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=Kie(i.layoutBox,e):this.constraints=!1,this.elastic=Qie(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&co(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Zie(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!up(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=jie(i,r.root,this.visualElement.getTransformPagePoint());let a=Jie(r.layout.layoutBox,s);if(t){const l=t(Lie(a));this.hasMutatedConstraints=!!l,l&&(a=S8(l))}return a}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},h=co(m=>{if(!Yx(m,t,this.currentDirection))return;let g=u&&u[m]||{};a&&(g={min:0,max:0});const v=r?200:1e6,x=r?40:1e7,b={type:"inertia",velocity:i?e[m]:0,bounceStiffness:v,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(m,b)});return Promise.all(h).then(l)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return wM(this.visualElement,e),i.start(U3(e,i,0,t,this.visualElement,!1))}stopAnimation(){co(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){co(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){co(t=>{const{drag:i}=this.getProps();if(!Yx(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:a,max:l}=r.layout.layoutBox[t];s.set(e[t]-Si(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!up(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};co(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const u=l.get();r[a]=$ie({min:u,max:u},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),co(a=>{if(!Yx(a,e,null))return;const l=this.getAxisMotionValue(a),{min:u,max:h}=this.constraints[a];l.set(Si(u,h,r[a]))})}addListeners(){if(!this.visualElement.current)return;ere.set(this.visualElement,this);const e=this.visualElement.current,t=u0(e,"pointerdown",u=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(u)}),i=()=>{const{dragConstraints:u}=this.getProps();up(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Li.read(i);const a=Vv(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(co(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=u[m].translate,g.set(g.get()+u[m].translate))}),this.visualElement.render())});return()=>{a(),t(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=OM,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:l}}}function Yx(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function nre(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class ire extends Pf{constructor(e){super(e),this.removeGroupControls=yo,this.removeListeners=yo,this.controls=new tre(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yo}unmount(){this.removeGroupControls(),this.removeListeners()}}const KB=n=>(e,t)=>{n&&Li.postRender(()=>n(e,t))};class rre extends Pf{constructor(){super(...arguments),this.removePointerDownListener=yo}onPointerDown(e){this.session=new R8(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:w8(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:KB(e),onStart:KB(t),onMove:i,onEnd:(s,a)=>{delete this.session,r&&Li.postRender(()=>r(s,a))}}}mount(){this.removePointerDownListener=u0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const a_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function JB(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Hg={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Xt.test(n))n=parseFloat(n);else return n;const t=JB(n,e.target.x),i=JB(n,e.target.y);return`${t}% ${i}%`}},sre={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=Cf.parse(n);if(r.length>5)return i;const s=Cf.createTransformer(n),a=typeof r[0]!="number"?1:0,l=t.x.scale*e.x,u=t.y.scale*e.y;r[0+a]/=l,r[1+a]/=u;const h=Si(l,u,.5);return typeof r[2+a]=="number"&&(r[2+a]/=h),typeof r[3+a]=="number"&&(r[3+a]/=h),s(r)}};class are extends F.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;Wne(ore),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),a_.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,{projection:a}=i;return a&&(a.isPresent=s,r||e.layoutDependency!==t||t===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Li.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),b3.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function B8(n){const[e,t]=One(),i=F.useContext(oU);return re.jsx(are,{...n,layoutGroup:i,switchLayoutGroup:F.useContext(l8),isPresent:e,safeToRemove:t})}const ore={borderRadius:{...Hg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hg,borderTopRightRadius:Hg,borderBottomLeftRadius:Hg,borderBottomRightRadius:Hg,boxShadow:sre};function O8(n,e,t){const i=Ei(n)?n:S0(n);return i.start(U3("",i,e,t)),i.animation}const lre=(n,e)=>n.depth-e.depth;class cre{constructor(){this.children=[],this.isDirty=!1}add(e){n3(this.children,e),this.isDirty=!0}remove(e){mS(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(lre),this.isDirty=!1,this.children.forEach(e)}}function ure(n,e){const t=ha.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(Tf(i),n(s-e))};return Li.setup(i,!0),()=>Tf(i)}const P8=["TopLeft","TopRight","BottomLeft","BottomRight"],fre=P8.length,$B=n=>typeof n=="string"?parseFloat(n):n,ZB=n=>typeof n=="number"||Xt.test(n);function hre(n,e,t,i,r,s){r?(n.opacity=Si(0,t.opacity??1,dre(i)),n.opacityExit=Si(e.opacity??1,0,pre(i))):s&&(n.opacity=Si(e.opacity??1,t.opacity??1,i));for(let a=0;a<fre;a++){const l=`border${P8[a]}Radius`;let u=QB(e,l),h=QB(t,l);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||ZB(u)===ZB(h)?(n[l]=Math.max(Si($B(u),$B(h),i),0),(tc.test(h)||tc.test(u))&&(n[l]+="%")):n[l]=h}(e.rotate||t.rotate)&&(n.rotate=Si(e.rotate||0,t.rotate||0,i))}function QB(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const dre=U8(0,.5,yU),pre=U8(.5,.95,yo);function U8(n,e,t){return i=>i<n?0:i>e?1:t(Op(n,e,i))}function e5(n,e){n.min=e.min,n.max=e.max}function ao(n,e){e5(n.x,e.x),e5(n.y,e.y)}function t5(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function n5(n,e,t,i,r){return n-=e,n=xb(n,1/t,i),r!==void 0&&(n=xb(n,1/r,i)),n}function mre(n,e=0,t=1,i=.5,r,s=n,a=n){if(tc.test(e)&&(e=parseFloat(e),e=Si(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=Si(s.min,s.max,i);n===s&&(l-=e),n.min=n5(n.min,e,t,l,r),n.max=n5(n.max,e,t,l,r)}function i5(n,e,[t,i,r],s,a){mre(n,e[t],e[i],e[r],e.scale,s,a)}const gre=["x","scaleX","originX"],vre=["y","scaleY","originY"];function r5(n,e,t,i){i5(n.x,e,gre,t?t.x:void 0,i?i.x:void 0),i5(n.y,e,vre,t?t.y:void 0,i?i.y:void 0)}function s5(n){return n.translate===0&&n.scale===1}function L8(n){return s5(n.x)&&s5(n.y)}function a5(n,e){return n.min===e.min&&n.max===e.max}function yre(n,e){return a5(n.x,e.x)&&a5(n.y,e.y)}function o5(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function N8(n,e){return o5(n.x,e.x)&&o5(n.y,e.y)}function l5(n){return Xs(n.x)/Xs(n.y)}function c5(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class xre{constructor(){this.members=[]}add(e){n3(this.members,e),e.scheduleRender()}remove(e){if(mS(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _re(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((r||s||a)&&(i=`translate3d(${r}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:m,rotateX:g,rotateY:v,skewX:x,skewY:b}=t;h&&(i=`perspective(${h}px) ${i}`),m&&(i+=`rotate(${m}deg) `),g&&(i+=`rotateX(${g}deg) `),v&&(i+=`rotateY(${v}deg) `),x&&(i+=`skewX(${x}deg) `),b&&(i+=`skewY(${b}deg) `)}const l=n.x.scale*e.x,u=n.y.scale*e.y;return(l!==1||u!==1)&&(i+=`scale(${l}, ${u})`),i||"none"}const iE=["","X","Y","Z"],bre={visibility:"hidden"},Sre=1e3;let Are=0;function rE(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function I8(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=v8(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Li,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&I8(i)}function F8({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},l=e==null?void 0:e()){this.id=Are++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Tre),this.nodes.forEach(Bre),this.nodes.forEach(Ore),this.nodes.forEach(Cre)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new cre)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new s3),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const u=this.eventHandlers.get(a);u&&u.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=E3(a)&&!t8(a),this.instance=a;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),n){let m;const g=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=ure(g,250),a_.hasAnimatedSinceResize&&(a_.hasAnimatedSinceResize=!1,this.nodes.forEach(f5))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:g,hasRelativeLayoutChanged:v,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||h.getDefaultTransition()||Ire,{onLayoutAnimationStart:M,onLayoutAnimationComplete:A}=h.getProps(),S=!this.targetLayout||!N8(this.targetLayout,x),C=!g&&v;if(this.options.layoutRoot||this.resumeFrom||C||g&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...x3(b,"layout"),onPlay:M,onComplete:A};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(m,C)}else g||f5(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Tf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Pre),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&I8(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(u5);return}this.isUpdating||this.nodes.forEach(Rre),this.isUpdating=!1,this.nodes.forEach(Dre),this.nodes.forEach(Ere),this.nodes.forEach(Mre),this.clearAllSnapshots();const l=ha.now();Jr.delta=Qc(0,1e3/60,l-Jr.timestamp),Jr.timestamp=l,Jr.isProcessing=!0,K2.update.process(Jr),K2.preRender.process(Jr),K2.render.process(Jr),Jr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,b3.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(wre),this.sharedNodes.forEach(Ure)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Li.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Li.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Xs(this.snapshot.measuredBox.x)&&!Xs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Di(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const u=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!L8(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;a&&this.instance&&(l||Yh(this.latestValues)||m)&&(r(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return a&&(u=this.removeTransform(u)),Fre(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:a}=this.options;if(!a)return Di();const l=a.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(zre))){const{scroll:m}=this.root;m&&(hp(l.x,m.offset.x),hp(l.y,m.offset.y))}return l}removeElementScroll(a){var u;const l=Di();if(ao(l,a),(u=this.scroll)!=null&&u.wasRoot)return l;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:g,options:v}=m;m!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&ao(l,a),hp(l.x,g.offset.x),hp(l.y,g.offset.y))}return l}applyTransform(a,l=!1){const u=Di();ao(u,a);for(let h=0;h<this.path.length;h++){const m=this.path[h];!l&&m.options.layoutScroll&&m.scroll&&m!==m.root&&dp(u,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Yh(m.latestValues)&&dp(u,m.latestValues)}return Yh(this.latestValues)&&dp(u,this.latestValues),u}removeTransform(a){const l=Di();ao(l,a);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!Yh(h.latestValues))continue;DM(h.latestValues)&&h.updateSnapshot();const m=Di(),g=h.measurePageBox();ao(m,g),r5(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return Yh(this.latestValues)&&r5(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var v;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:g}=this.options;if(!(!this.layout||!(m||g))){if(this.resolvedRelativeTargetAt=Jr.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Di(),this.relativeTargetOrigin=Di(),vv(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),ao(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Di(),this.targetWithTransforms=Di()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Vie(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ao(this.target,this.layout.layoutBox),T8(this.target,this.targetDelta)):ao(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Di(),this.relativeTargetOrigin=Di(),vv(this.relativeTargetOrigin,this.target,x.target),ao(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||DM(this.parent.latestValues)||M8(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var b;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Jr.timestamp&&(u=!1),u)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;ao(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,v=this.treeScale.y;kie(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Di());const{target:x}=a;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(t5(this.prevProjectionDelta.x,this.projectionDelta.x),t5(this.prevProjectionDelta.y,this.projectionDelta.y)),gv(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==v||!c5(this.projectionDelta.x,this.prevProjectionDelta.x)||!c5(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=fp(),this.projectionDelta=fp(),this.projectionDeltaWithTransform=fp()}setAnimationOrigin(a,l=!1){const u=this.snapshot,h=u?u.latestValues:{},m={...this.latestValues},g=fp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=Di(),x=u?u.source:void 0,b=this.layout?this.layout.source:void 0,M=x!==b,A=this.getStack(),S=!A||A.members.length<=1,C=!!(M&&!S&&this.options.crossfade===!0&&!this.path.some(Nre));this.animationProgress=0;let R;this.mixTargetDelta=B=>{const N=B/1e3;h5(g.x,a.x,N),h5(g.y,a.y,N),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vv(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Lre(this.relativeTarget,this.relativeTargetOrigin,v,N),R&&yre(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Di()),ao(R,this.relativeTarget)),M&&(this.animationValues=m,hre(m,h,this.latestValues,N,C,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,u,h;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(h=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||h.stop(),this.pendingAnimation&&(Tf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Li.update(()=>{a_.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=S0(0)),this.currentAnimation=O8(this.motionValue,[0,1e3],{...a,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),a.onUpdate&&a.onUpdate(m)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Sre),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:u,layout:h,latestValues:m}=a;if(!(!l||!u||!h)){if(this!==a&&this.layout&&h&&z8(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||Di();const g=Xs(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+g;const v=Xs(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+v}ao(l,u),dp(l,m),gv(this.projectionDeltaWithTransform,this.layoutCorrected,l,m)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new xre),this.sharedNodes.get(a).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const h={};u.z&&rE("z",a,h,this.animationValues);for(let m=0;m<iE.length;m++)rE(`rotate${iE[m]}`,a,h,this.animationValues),rE(`skew${iE[m]}`,a,h,this.animationValues);a.render();for(const m in h)a.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return bre;const l={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=mv(a==null?void 0:a.pointerEvents)||"",l.transform=u?u(this.latestValues,""):"none",l;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=mv(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Yh(this.latestValues)&&(x.transform=u?u({},""):"none",this.hasProjected=!1),x}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),l.transform=_re(this.projectionDeltaWithTransform,this.treeScale,m),u&&(l.transform=u(m,l.transform));const{x:g,y:v}=this.projectionDelta;l.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,h.animationValues?l.opacity=h===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:l.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const x in Hv){if(m[x]===void 0)continue;const{correct:b,applyTo:M,isCSSVariable:A}=Hv[x],S=l.transform==="none"?m[x]:b(m[x],h);if(M){const C=M.length;for(let R=0;R<C;R++)l[M[R]]=S}else A?this.options.visualElement.renderState.vars[x]=S:l[x]=S}return this.options.layoutId&&(l.pointerEvents=h===this?mv(a==null?void 0:a.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(u5),this.root.sharedNodes.clear()}}}function Ere(n){n.updateLayout()}function Mre(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,a=e.source!==n.layout.source;s==="size"?co(g=>{const v=a?e.measuredBox[g]:e.layoutBox[g],x=Xs(v);v.min=i[g].min,v.max=v.min+x}):z8(s,e.layoutBox,i)&&co(g=>{const v=a?e.measuredBox[g]:e.layoutBox[g],x=Xs(i[g]);v.max=v.min+x,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+x)});const l=fp();gv(l,i,e.layoutBox);const u=fp();a?gv(u,n.applyTransform(r,!0),e.measuredBox):gv(u,i,e.layoutBox);const h=!L8(l);let m=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:x}=g;if(v&&x){const b=Di();vv(b,e.layoutBox,v.layoutBox);const M=Di();vv(M,i,x.layoutBox),N8(b,M)||(m=!0),g.options.layoutRoot&&(n.relativeTarget=M,n.relativeTargetOrigin=b,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:h,hasRelativeLayoutChanged:m})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function Tre(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Cre(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function wre(n){n.clearSnapshot()}function u5(n){n.clearMeasurements()}function Rre(n){n.isLayoutDirty=!1}function Dre(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function f5(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Bre(n){n.resolveTargetDelta()}function Ore(n){n.calcProjection()}function Pre(n){n.resetSkewAndRotation()}function Ure(n){n.removeLeadSnapshot()}function h5(n,e,t){n.translate=Si(e.translate,0,t),n.scale=Si(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function d5(n,e,t,i){n.min=Si(e.min,t.min,i),n.max=Si(e.max,t.max,i)}function Lre(n,e,t,i){d5(n.x,e.x,t.x,i),d5(n.y,e.y,t.y,i)}function Nre(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Ire={duration:.45,ease:[.4,0,.1,1]},p5=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),m5=p5("applewebkit/")&&!p5("chrome/")?Math.round:yo;function g5(n){n.min=m5(n.min),n.max=m5(n.max)}function Fre(n){g5(n.x),g5(n.y)}function z8(n,e,t){return n==="position"||n==="preserve-aspect"&&!Gie(l5(e),l5(t),.2)}function zre(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const Hre=F8({attachResizeListener:(n,e)=>Vv(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sE={current:void 0},H8=F8({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!sE.current){const n=new Hre({});n.mount(window),n.setOptions({layoutScroll:!0}),sE.current=n}return sE.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Gre={pan:{Feature:rre},drag:{Feature:ire,ProjectionNode:H8,MeasureLayout:B8}};function v5(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&Li.postRender(()=>s(e,dy(e)))}class Vre extends Pf{mount(){const{current:e}=this.node;e&&(this.unmount=Mne(e,(t,i)=>(v5(this.node,i,"Start"),r=>v5(this.node,r,"End"))))}unmount(){}}class kre extends Pf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qp(Vv(this.node.current,"focus",()=>this.onFocus()),Vv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function y5(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&Li.postRender(()=>s(e,dy(e)))}class jre extends Pf{mount(){const{current:e}=this.node;e&&(this.unmount=Rne(e,(t,i)=>(y5(this.node,i,"Start"),(r,{success:s})=>y5(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const PM=new WeakMap,aE=new WeakMap,Xre=n=>{const e=PM.get(n.target);e&&e(n)},Wre=n=>{n.forEach(Xre)};function Yre({root:n,...e}){const t=n||document;aE.has(t)||aE.set(t,{});const i=aE.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(Wre,{root:n,...e})),i[r]}function qre(n,e,t){const i=Yre(e);return PM.set(n,t),i.observe(n),()=>{PM.delete(n),i.unobserve(n)}}const Kre={some:0,all:1};class Jre extends Pf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:Kre[r]},l=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=h?m:g;v&&v(u)};return qre(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some($re(e,t))&&this.startObserver()}unmount(){}}function $re({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Zre={inView:{Feature:Jre},tap:{Feature:jre},focus:{Feature:kre},hover:{Feature:Vre}},Qre={layout:{ProjectionNode:H8,MeasureLayout:B8}},UM={current:null},G8={current:!1};function ese(){if(G8.current=!0,!!e3)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>UM.current=n.matches;n.addListener(e),e()}else UM.current=!1}const kv=new WeakMap;function tse(n,e,t){for(const i in e){const r=e[i],s=t[i];if(Ei(r))n.addValue(i,r);else if(Ei(s))n.addValue(i,S0(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const a=n.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=n.getStaticValue(i);n.addValue(i,S0(a!==void 0?a:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const x5=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class N3{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=v3,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=ha.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Li.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=a;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=yS(t),this.isVariantNode=a8(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in g){const x=g[v];u[v]!==void 0&&Ei(x)&&x.set(u[v],!1)}}mount(e){this.current=e,kv.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),G8.current||ese(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:UM.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Tf(this.notifyUpdate),Tf(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=nm.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Li.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Pp){const t=Pp[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Di()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<x5.length;i++){const r=x5[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,a=e[s];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=tse(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=S0(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(lU(i)||uU(i))?i=parseFloat(i):!Bne(i)&&Cf.test(t)&&(i=JU(e,t)),this.setBaseTarget(e,Ei(i)?i.get():i)),Ei(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var s;const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const a=B3(this.props,t,(s=this.presenceContext)==null?void 0:s.custom);a&&(i=a[e])}if(t&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Ei(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new s3),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class V8 extends N3{constructor(){super(...arguments),this.KeyframeResolver=bne}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ei(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function k8(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}function nse(n){return window.getComputedStyle(n)}class j8 extends V8{constructor(){super(...arguments),this.type="html",this.renderInstance=k8}readValueFromInstance(e,t){var i;if(nm.has(t))return(i=this.projection)!=null&&i.isProjecting?bM(t):Fte(e,t);{const r=nse(e),s=(l3(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return C8(e,t)}build(e,t,i){w3(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return P3(e,t,i)}}const X8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ise(n,e,t,i){k8(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(X8.has(r)?r:C3(r),e.attrs[r])}class W8 extends V8{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Di}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(nm.has(t)){const i=KU(t);return i&&i.default||0}return t=X8.has(t)?t:C3(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return g8(e,t,i)}build(e,t,i){d8(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){ise(e,t,i,r)}mount(e){this.isSVGTag=m8(e.tagName),super.mount(e)}}const rse=(n,e)=>D3(n)?new W8(e):new j8(e,{allowProjection:n!==F.Fragment}),sse=cie({..._8,...Zre,...Gre,...Qre},rse),oo=Lne(sse);function qx(n){const e=QT(()=>S0(n)),{isStatic:t}=F.useContext(Fv);if(t){const[,i]=F.useState(n);F.useEffect(()=>e.on("change",i),[])}return e}function I3(n){return typeof n=="object"&&!Array.isArray(n)}function Y8(n,e,t,i){return typeof n=="string"&&I3(e)?$U(n,t,i):n instanceof NodeList?Array.from(n):Array.isArray(n)?n:[n]}function ase(n,e,t){return n*(e+1)}function _5(n,e,t,i){return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,n+parseFloat(e)):e==="<"?t:i.get(e)??n}function ose(n,e,t){for(let i=0;i<n.length;i++){const r=n[i];r.at>e&&r.at<t&&(mS(n,r),i--)}}function lse(n,e,t,i,r,s){ose(n,r,s);for(let a=0;a<e.length;a++)n.push({value:e[a],at:Si(r,s,i[a]),easing:SU(t,a)})}function cse(n,e){for(let t=0;t<n.length;t++)n[t]=n[t]/(e+1)}function use(n,e){return n.at===e.at?n.value===null?1:e.value===null?-1:0:n.at-e.at}const fse="easeInOut";function hse(n,{defaultTransition:e={},...t}={},i,r){const s=e.duration||.3,a=new Map,l=new Map,u={},h=new Map;let m=0,g=0,v=0;for(let x=0;x<n.length;x++){const b=n[x];if(typeof b=="string"){h.set(b,g);continue}else if(!Array.isArray(b)){h.set(b.name,_5(g,b.at,m,h));continue}let[M,A,S={}]=b;S.at!==void 0&&(g=_5(g,S.at,m,h));let C=0;const R=(B,N,U,I=0,z=0)=>{const L=dse(B),{delay:O=0,times:G=IU(L),type:$="keyframes",repeat:Q,repeatType:ce,repeatDelay:fe=0,...k}=N;let{ease:K=e.ease||"easeOut",duration:ee}=N;const me=typeof O=="function"?O(I,z):O,W=L.length,ae=y3($)?$:r==null?void 0:r[$];if(W<=2&&ae){let _e=100;if(W===2&&gse(L)){const Ye=L[1]-L[0];_e=Math.abs(Ye)}const Ue={...k};ee!==void 0&&(Ue.duration=ol(ee));const ke=UU(Ue,_e,ae);K=ke.ease,ee=ke.duration}ee??(ee=s);const Se=g+me;G.length===1&&G[0]===0&&(G[1]=1);const Ae=G.length-L.length;if(Ae>0&&NU(G,Ae),L.length===1&&L.unshift(null),Q){ee=ase(ee,Q);const _e=[...L],Ue=[...G];K=Array.isArray(K)?[...K]:[K];const ke=[...K];for(let Ye=0;Ye<Q;Ye++){L.push(..._e);for(let gt=0;gt<_e.length;gt++)G.push(Ue[gt]+(Ye+1)),K.push(gt===0?"linear":SU(ke,gt-1))}cse(G,Q)}const ie=Se+ee;lse(U,L,K,G,Se,ie),C=Math.max(me+ee,C),v=Math.max(ie,v)};if(Ei(M)){const B=b5(M,l);R(A,S,S5("default",B))}else{const B=Y8(M,A,i,u),N=B.length;for(let U=0;U<N;U++){A=A,S=S;const I=B[U],z=b5(I,l);for(const L in A)R(A[L],pse(S,L),S5(L,z),U,N)}}m=g,g+=C}return l.forEach((x,b)=>{for(const M in x){const A=x[M];A.sort(use);const S=[],C=[],R=[];for(let N=0;N<A.length;N++){const{at:U,value:I,easing:z}=A[N];S.push(I),C.push(Op(0,v,U)),R.push(z||"easeOut")}C[0]!==0&&(C.unshift(0),S.unshift(S[0]),R.unshift(fse)),C[C.length-1]!==1&&(C.push(1),S.push(null)),a.has(b)||a.set(b,{keyframes:{},transition:{}});const B=a.get(b);B.keyframes[M]=S,B.transition[M]={...e,duration:v,ease:R,times:C,...t}}}),a}function b5(n,e){return!e.has(n)&&e.set(n,{}),e.get(n)}function S5(n,e){return e[n]||(e[n]=[]),e[n]}function dse(n){return Array.isArray(n)?n:[n]}function pse(n,e){return n&&n[e]?{...n,...n[e]}:{...n}}const mse=n=>typeof n=="number",gse=n=>n.every(mse);function vse(n,e){return n in e}class yse extends N3{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,t){if(vse(t,e)){const i=e[t];if(typeof i=="string"||typeof i=="number")return i}}getBaseTargetFromProps(){}removeValueFromRenderState(e,t){delete t.output[e]}measureInstanceViewportBox(){return Di()}build(e,t){Object.assign(e.output,t)}renderInstance(e,{output:t}){Object.assign(e,t)}sortInstanceNodePosition(){return 0}}function xse(n){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},t=E3(n)&&!t8(n)?new W8(e):new j8(e);t.mount(n),kv.set(n,t)}function _se(n){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},t=new yse(e);t.mount(n),kv.set(n,t)}function bse(n,e){return Ei(n)||typeof n=="number"||typeof n=="string"&&!I3(e)}function q8(n,e,t,i){const r=[];if(bse(n,e))r.push(O8(n,I3(e)&&e.default||e,t&&(t.default||t)));else{const s=Y8(n,e,i),a=s.length;for(let l=0;l<a;l++){const u=s[l],h=u instanceof Element?xse:_se;kv.has(u)||h(u);const m=kv.get(u),g={...t};"delay"in g&&typeof g.delay=="function"&&(g.delay=g.delay(l,a)),r.push(...L3(m,{...e,transition:g},{}))}}return r}function Sse(n,e,t){const i=[];return hse(n,e,t,{spring:Iv}).forEach(({keyframes:s,transition:a},l)=>{i.push(...q8(l,s,a))}),i}function Ase(n){return Array.isArray(n)&&n.some(Array.isArray)}function Ese(n){function e(t,i,r){let s=[];return Ase(t)?s=Sse(t,i,n):s=q8(t,i,r,n),new cne(s)}return e}const of=Ese(),K8=(n,e)=>t=>(i,r)=>{i[n]===void 0&&(i[n]=new q(e)),i[n].setComponent(t,r)},Mse=(n,e)=>t=>(i,r)=>{i[n]===void 0&&(i[n]=new fr(e));const s=i[n];s[t]=r},A5=n=>(e,t)=>{e[n]===void 0&&(e[n]=new Ze(t)),e[n].set(t)},oE=K8("scale",1),lE=K8("position",0),cE=Mse("rotation",0),E5={x:lE(0),y:lE(1),z:lE(2),scale:(n,e)=>{n.scale===void 0&&(n.scale=new q(1)),n.scale.set(e,e,e)},scaleX:oE(0),scaleY:oE(1),scaleZ:oE(2),rotateX:cE("x"),rotateY:cE("y"),rotateZ:cE("z"),color:A5("color"),specular:A5("specular")};function Tse(n,e,t){e in E5?E5[e](n,t[e]):(e==="opacity"&&!n.transparent&&(n.transparent=!0),n[e]=t[e])}const F3=(n,e)=>t=>i=>{const r=i[n];return r?r[t]:e},uE=F3("position",0),Kx=F3("scale",1),fE=F3("rotation",0),M5={x:uE("x"),y:uE("y"),z:uE("z"),scale:Kx("x"),scaleX:Kx("x"),scaleY:Kx("y"),scaleZ:Kx("z"),rotateX:fE("x"),rotateY:fE("y"),rotateZ:fE("z")};function Cse(n){if(n!==void 0)return n instanceof Ze?n.getStyle():n}function wse(n,e){return e in M5?M5[e](n):Cse(n[e])||0}const Rse=["x","y","z"],T5={"position-x":"x","position-y":"y","position-z":"z","rotation-x":"rotateX","rotation-y":"rotateY","rotation-z":"rotateZ","scale-x":"scaleX","scale-y":"scaleY","scale-z":"scaleZ"},J8=(n,e)=>{const t={};let i;for(i in n){const r=n[i];if(Ei(r)||Ei(e[i])){const s=T5[i]||i;t[s]=r}else if(Array.isArray(r))for(let s=0;s<r.length;s++){const a=r[s],l=e[i],u=Array.isArray(l)?l[s]:void 0;if(Ei(a)||u!==void 0&&Ei(u)){const h=T5[`${i}-${Rse[s]}`];t[h]=a}}}return t},Dse=()=>({});class Bse extends N3{constructor(){super(...arguments),this.type="three",this.measureInstanceViewportBox=Di}readValueFromInstance(e,t){return wse(e,t)}getBaseTargetFromProps(){}sortInstanceNodePosition(e,t){return e.id-t.id}removeValueFromRenderState(){}scrapeMotionValuesFromProps(e,t){return J8(e,t)}build(e,t){for(const i in t)e[i]=t[i]}renderInstance(e,t){for(const i in t)Tse(e,i,t)}}const Ose=(n,e)=>new Bse(e,{});function Pse(n,{whileHover:e,onHoverStart:t,onHoverEnd:i,onPointerOver:r,onPointerOut:s},a){return n||!a||!(e||t||i)?{}:{onPointerOver:u=>{var h;(h=a.animationState)===null||h===void 0||h.setActive("whileHover",!0),r&&r(u)},onPointerOut:u=>{var h;(h=a.animationState)===null||h===void 0||h.setActive("whileHover",!1),s&&s(u)}}}function Use(n,{whileTap:e,onTapStart:t,onTap:i,onTapCancel:r,onPointerDown:s},a){const l=i||t||r||e,u=F.useRef(!1),h=F.useRef(null);if(n||!a||!l)return{};function m(){var b;(b=h.current)===null||b===void 0||b.call(h),h.current=null}function g(){var b;return m(),u.current=!1,(b=a.animationState)===null||b===void 0||b.setActive("whileTap",!1),!S3()}function v(b,M){g()&&(i==null||i(b,M))}function x(b,M){g()&&(r==null||r(b,M))}return{onPointerDown:b8((b,M)=>{var A;if(m(),u.current)return;u.current=!0;const S={passive:!(t||i||r||s)};h.current=Qp(u0(window,"pointerup",v,S),u0(window,"pointercancel",x,S)),(A=a.animationState)===null||A===void 0||A.setActive("whileTap",!0),s==null||s(b),t==null||t(b,M)})}}const Lse=(n,e,t,i,r,s)=>{const a=Nse(e);return F.createElement(n,{ref:t,...s8(e,!1,!1),...a,onUpdate:e.onInstanceUpdate,...Pse(r,e,s),...Use(r,e,s)})};function Nse(n){return F.useMemo(()=>{const e={};for(const t in n){const i=n[t];Ei(i)?e[t]=i.get():Array.isArray(i)&&i.includes(Ei)&&(e[t]=i.map(mv))}return e},[])}const Ise=O3({scrapeMotionValuesFromProps:J8,createRenderState:Dse}),Fse={..._8};function C5(n){return u8({Component:n,preloadedFeatures:Fse,useRender:Lse,useVisualState:Ise,createVisualElement:Ose})}const hE=new Map,ff=new Proxy(C5,{get:(n,e)=>(!hE.has(e)&&hE.set(e,C5(e)),hE.get(e))}),zse=aU.economics[0].paths;console.log(aU.economics[0].paths);const qg=(n,e)=>Math.random()*(e-n)+n;for(let n=0;n<100;n++){let e=[],t=qg(.1,1);for(let i=0;i<100;i++)e.push(new q().setFromSphericalCoords(1,Math.PI-i/100*Math.PI*t,n/100*Math.PI*2));new Wb(e)}let _b=[];zse.forEach(n=>{let e=[];for(let i=0;i<n.length;i+=3)e.push(new q(n[i],n[i+1],n[i+2]));let t=new Wb(e);_b.push(t)});function Hse({curve:n}){const e=F.useRef();wr(({clock:i})=>{e.current.uniforms.time.value=i.getElapsedTime()});const t=UT({time:0,color:new Ze(.2,.4,.1)},`
          varying vec2 vUv;
          uniform float time;
          varying float vProgress;
          void main() {
            vUv = uv;
            vProgress = smoothstep(-1., 1., sin(vUv.x*8. + time * 3.));
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,`
          uniform float time;
          uniform vec3 color;
          varying vec2 vUv;
          varying float vProgress;
          void main() {
            float hideCorners1 = smoothstep(1., 0.9, vUv.x);
            float hideCorners2 = smoothstep(0., 0.1, vUv.x);
            vec3 finalColor = mix(color, color*0.25, vProgress);
            gl_FragColor.rgba = vec4(vec3(vProgress), 1.);
            gl_FragColor.rgba = vec4(finalColor, hideCorners1 * hideCorners2);
          }
        `);return w0({BrainMaterial:t}),re.jsxs("mesh",{children:[re.jsx("tubeGeometry",{args:[n,64,.001,3,!1]}),re.jsx("brainMaterial",{ref:e,side:ps,transparent:!0,depthTest:!1,depthWrite:!1,blending:xv})]})}function Gse({allthecurve:n}){return re.jsx(re.Fragment,{children:_b.map((e,t)=>re.jsx(Hse,{curve:e},t))})}function Vse({allthecurve:n}){let e=1,t=n.length*e;const i=F.useRef([]),r=F.useRef();let s=F.useMemo(()=>{let l=[];for(let u=0;u<t;u++)l.push(qg(-1,1),qg(-1,1),qg(-1,1));return new Float32Array(l)},[]),a=F.useMemo(()=>{let l=[];for(let u=0;u<t;u++)l.push(qg(.3,1));return new Float32Array(l)},[]);return F.useEffect(()=>{for(let l=0;l<n.length;l++)for(let u=0;u<e;u++)i.current.push({currentOffset:Math.random(),speed:Math.random()*.01,curve:n[l],curPosition:Math.random()})}),wr(({clock:l})=>{const u=r.current.attributes.position.array;for(let h=0;h<i.current.length;h++){i.current[h].curPosition+=i.current[h].speed,i.current[h].curPosition=i.current[h].curPosition%1;const m=i.current[h].curve.getPointAt(i.current[h].curPosition);u[h*3]=m.x,u[h*3+1]=m.y,u[h*3+2]=m.z}r.current.attributes.position.needsUpdate=!0}),re.jsx(re.Fragment,{children:re.jsxs("points",{children:[re.jsxs("bufferGeometry",{attach:"geometry",ref:r,children:[re.jsx("bufferAttribute",{attach:"attributes-position",count:s.length/3,array:s,itemSize:3}),re.jsx("bufferAttribute",{attach:"attributes-randoms",count:a.length,array:a,itemSize:1})]}),re.jsx("brainParticleMaterial",{attach:"material",depthTest:!1,depthWrite:!1,transparent:!0,blending:xv})]})})}const kse=UT({time:0,color:new Ze(.1,.3,.6)},`
      varying vec2 vUv;
      uniform float time;
      varying float vProgress;
      attribute float randoms;
      void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
        gl_PointSize = randoms * 2. * (1. / -mvPosition.z);
      }
    `,`
      uniform float time;
      void main() {
        float disc = length(gl_PointCoord.xy - vec2(0.5));
        float opacity = 0.3 * smoothstep(0.5, 0.4, disc);
        gl_FragColor = vec4(vec3(opacity), 1.);
      }
    `);w0({BrainParticleMaterial:kse});const jse=()=>{const n=F.useRef();return wr(()=>{n.current&&(n.current.rotation.y+=.002)}),re.jsx(re.Fragment,{children:re.jsx(ff.group,{ref:n,position:[-.5,2,-2],scale:.5,"position-y":-10.5,transition:{delay:.2,duration:3,ease:[.25,1,.5,1]},variants:{Skills:{y:2.2,scale:15}},children:re.jsxs(oS,{floatIntensity:.2,speed:2,children:[re.jsx(Gse,{allthecurve:_b}),re.jsx(Vse,{allthecurve:_b})]})})})};function Xse(n){const{nodes:e,materials:t}=Na("/reactportfolio/models/portfolioscene.glb");return re.jsxs("group",{...n,dispose:null,children:[re.jsx("mesh",{name:"Plane001",geometry:e.Plane001.geometry,material:t["Material.002"],position:[0,0,80.193],rotation:[Math.PI/2,0,0],scale:[129.4,402.537,.413]}),re.jsx("mesh",{name:"Plane001",geometry:e.Plane001.geometry,material:t["Material.002"],position:[0,0,80.193],rotation:[Math.PI/2,0,0],scale:[900.284,402.537,.413]}),re.jsxs("group",{name:"Sphere",position:[-.923,9.178,102.025],scale:3.513,children:[re.jsx("mesh",{name:"Sphere_1",geometry:e.Sphere_1.geometry,material:t["Material.004"]}),re.jsx("mesh",{name:"Sphere_2",geometry:e.Sphere_2.geometry,material:t["Material.005"]})]})]})}Na.preload("/reactportfolio/models/portfolioscene.glb");const Wse=()=>re.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[re.jsx("planeGeometry",{args:[150,150]}),re.jsx(FY,{blur:[1,100],resolution:2048,mixBlur:1,mixStrength:20,roughness:1,depthScale:3,minDepthThreshold:.2,maxDepthThreshold:.9,color:"#050505",metalness:.1})]});function Yse(n){const e=F.useRef(),{nodes:t,materials:i}=Na("/reactportfolio/models/portfoliohome.glb"),r={delay:.2,duration:3,ease:[.25,1,.5,1]},s=F.useRef(),a=F.useRef(),l=F.useRef(),u=F.useRef(),h=F.useRef();return wr((m,g)=>{[s,a,l,u,h].forEach(x=>{x.current&&(x.current.position.y+=g*.3,x.current.position.y>8&&(x.current.position.y=4.5+Math.random()*.5))})}),re.jsx("group",{...n,ref:e,dispose:null,children:re.jsx(oS,{floatIntensity:1,speed:2,rotationIntensity:0,floatingRange:[0,.2],children:re.jsxs(ff.group,{"position-y":-15,transition:r,variants:{Home:{y:0}},children:[re.jsxs("group",{name:"House",position:[-2.938,1.181,-3.562],scale:[1.353,1,1.282],children:[re.jsx("mesh",{name:"Cube002",geometry:t.Cube002.geometry,material:i.seethru}),re.jsx("mesh",{name:"Cube002_1",geometry:t.Cube002_1.geometry,material:i["Material.009"]})]}),re.jsxs("group",{name:"Door",position:[-2.18,0,-3.368],scale:[1,1,.57],children:[re.jsx("mesh",{name:"Cube003",geometry:t.Cube003.geometry,material:i.seethru}),re.jsx("mesh",{name:"Cube003_1",geometry:t.Cube003_1.geometry,material:i["Material.014"]})]}),re.jsxs("group",{name:"WindowL",position:[0,2.186,-2.56],rotation:[0,0,-Math.PI],scale:[-1,-.532,-.321],children:[re.jsx("mesh",{name:"Cube005",geometry:t.Cube005.geometry,material:i.seethru}),re.jsx("mesh",{name:"Cube005_1",geometry:t.Cube005_1.geometry,material:i["Material.014"]})]}),re.jsxs("group",{name:"Floor",position:[-2.949,3.532,-4.941],rotation:[-.493,0,0],scale:.414,children:[re.jsx("mesh",{name:"Plane001",geometry:t.Plane001.geometry,material:i.seethru}),re.jsx("mesh",{name:"Plane001_1",geometry:t.Plane001_1.geometry,material:i["Material.016"]})]}),re.jsxs("group",{name:"Chimney",position:[-2.949,3.532,-4.941],rotation:[-.493,0,0],scale:.414,children:[re.jsx("mesh",{name:"Plane004",geometry:t.Plane004.geometry,material:i.seethru}),re.jsx("mesh",{name:"Plane004_1",geometry:t.Plane004_1.geometry,material:i["Material.009"]})]}),re.jsxs("group",{ref:s,name:"Big_Cloud",position:[-2.636,4.861,-5.216],rotation:[-.017,.165,-.713],scale:[2.129,1,1],children:[re.jsx("mesh",{name:"Sphere",geometry:t.Sphere.geometry,material:i.seethru}),re.jsx("mesh",{name:"Sphere_1",geometry:t.Sphere_1.geometry,material:i["Material.001"]})]}),re.jsxs("group",{ref:a,name:"CloudH",position:[-2.636,6.401,-4.942],scale:-.501,children:[re.jsx("mesh",{name:"Sphere001",geometry:t.Sphere001.geometry,material:i.seethru}),re.jsx("mesh",{name:"Sphere001_1",geometry:t.Sphere001_1.geometry,material:i["Material.001"]})]}),re.jsxs("group",{ref:l,name:"CloudL",position:[-2.952,4.921,-4.942],scale:-.412,children:[re.jsx("mesh",{name:"Sphere002",geometry:t.Sphere002.geometry,material:i.seethru}),re.jsx("mesh",{name:"Sphere002_1",geometry:t.Sphere002_1.geometry,material:i["Material.001"]})]}),re.jsxs("group",{ref:u,name:"CloudL001",position:[-2.285,4.473,-5.503],rotation:[.356,-.043,-.066],scale:-.274,children:[re.jsx("mesh",{name:"Sphere004",geometry:t.Sphere004.geometry,material:i.seethru}),re.jsx("mesh",{name:"Sphere004_1",geometry:t.Sphere004_1.geometry,material:i["Material.001"]})]}),re.jsxs("group",{ref:h,name:"CloudH001",position:[-2.669,7.544,-5.58],rotation:[2.005,-.367,-.065],scale:-.714,children:[re.jsx("mesh",{name:"Sphere005",geometry:t.Sphere005.geometry,material:i.seethru}),re.jsx("mesh",{name:"Sphere005_1",geometry:t.Sphere005_1.geometry,material:i["Material.001"]})]})]})})})}Na.preload("/reactportfolio/models/portfoliohome.glb");const sp=({children:n,...e})=>re.jsx(oS,{floatIntensity:1,speed:2,rotationIntensity:0,floatingRange:[0,.2],children:re.jsxs("group",{position:[-3,0,-2],scale:1,children:[re.jsxs(S2,{font:"fonts/VT323_Regular.json",size:1.3,height:.1,...e,children:[n,re.jsx("meshStandardMaterial",{color:"black"})]}),re.jsxs(S2,{font:"fonts/VT323_Regular.json",size:1.28,height:.105,...e,children:[n,re.jsx("meshStandardMaterial",{color:"#990000"})]}),re.jsxs(S2,{font:"fonts/VT323_Regular.json",size:1.26,height:.11,...e,children:[n,re.jsx("meshStandardMaterial",{color:"#daa520"})]})]})}),Hs={sections:["Home","Skills","AcademicProjects","PersonalProjects","Contact"],Home:{Name:"Brandon Wong",Age:"27","Date Of Birth":"1998-01-01",Location:"Berlin, Germany",Occupation:"Computer Science Student",University:"HTW Berlin"},Skills:{programmingLanguages:[{name:"JavaScript",level:90,icon:"devicon-javascript-plain"},{name:"Python",level:80,icon:"devicon-python-plain"},{name:"Java",level:100,icon:"devicon-java-plain"},{name:"C#",level:100,icon:"devicon-csharp-plain"},{name:"SQL",level:70,icon:"devicon-mysql-plain"}],tech:[{name:"Git",level:100,icon:"devicon-git-plain"},{name:"Unity",level:100,icon:"devicon-unity-plain"},{name:"Blender",level:60,icon:"devicon-blender-original"},{name:"LaTex",level:40,icon:"devicon-latex-original"},{name:"PyCharm",level:80,icon:"devicon-pycharm-plain"},{name:"Visual Studio Code",level:100,icon:"devicon-vscode-plain"}],frameworksAndLibraries:[{name:"React",level:100,icon:"devicon-react-original"},{name:"Node.js",level:80,icon:"devicon-nodejs-plain"},{name:"Express",level:80,icon:"devicon-express-original"},{name:"Three.js",level:80,icon:"devicon-threejs-original"},{name:"three-fiber",level:90,icon:"devicon-react-original"},{name:"Jupyter",level:70,icon:"devicon-jupyter-plain"}],languages:[{name:"English",level:100},{name:"Malay",level:100},{name:"German",level:80},{name:"Mandarin",level:30}]},AcademicProjects:[{title:"Immersive VR Sketch",image:"images/projektstudium.png",clip:"clips/projektstudium.mp4",module:"Projektstudium",description:"VR multiplayer sketching tool with hand gesture input for immersive 3D drawing and collaboration.",link:"https://gitlab.rz.htw-berlin.de/s0583275/movement-based-interfaces"},{title:"Nosepad",image:"images/nui.png",clip:"clips/nui.mp4",module:"Natural User Interfaces",description:"Hands-Free Drawing Application that uses facial tracking for drawing and voice commands for button execution.",link:"https://github.com/buayanil/NosePad"},{title:"Covid Data Visualizer",image:"images/computergrafik.png",clip:"clips/computergrafik.mp4",module:"Computergrafik",description:"Visualized global COVID-19 data in 3D using Three.js and public APIs for real-time case tracking.",link:"https://github.com/brandonnwongg/CGKurteil"},{title:"Mitosis Identification",image:"images/bildverarbeitung.png",clip:"images/bildverarbeitung.png",module:"Medizinische Bildverarbeitung",description:"Cell mitosis detection algorithm in Jupyter Notebook for medical image analysis using preprocessing and classification",link:"-"},{title:"improveBerlin",image:"images/webentwicklung.png",clip:"images/webentwicklung.png",module:"Webentwicklung",description:"Full-Stack Web Development with MERN for reporting places in Berlin that requires improvement.",link:"https://github.com/brandonnwongg/brandawid-WAD"},{title:"Heal Link",image:"images/sozialer.png",clips:"images/sozialer.png",module:"Entwicklung sozialer Anwendungen",description:"Social Media PLatform where users can share their health journeys.",link:"https://github.com/Abodx9/heal_link"},{title:"HouseTourVR",image:"images/emergingtechnologies.png",clip:"clips/emergingtechnologies.mp4",module:"Emerging Technologies",description:"Multiplayer VR experience enabling users to remotely tour and customize virtual home layouts in real time.",link:"https://github.com/brandonnwongg/housetourVR"},{title:"Mastermind",image:"images/se2.png",clip:"images/se2.png",module:"Software Engineering 2",description:"Mastermind console game with Python, with the focus on TTD and Quality Assurance.",link:"https://gitlab.rz.htw-berlin.de/s0580634/wise24-25_superhirn_22"}],PersonalProjects:[{ptitle:"Portfolio",pdescription:"This portfolio is built with React, three-fiber, and Framer Motion. Some of the Models ive created using Blender and exported to GLTF format for use in the 3D scene, and some are downloaded from Sketchfab. Also, the animations are created using Mixamo and exported to FBX format for use in the 3D scene, and avatar from Ready Player Me. Alsooo, i learned a lot watching WAWA SENSEI's videos on YouTube, so check him out if you want to learn more about three-fiber :-)",plink:"Click on this to check out the code on GitHub :-) Thank you!",pref:"https://github.com/brandonnwongg/reactportfolio"},{ptitle:"(Currently in Development) ",pdescription:"An intelligent music recommendation tool that analyzes the tempo and energy of a given track to generate a curated playlist of songs with a similar vibe. ",plink:"No link yet, sorry!",pref:""}],Contact:{socials:{linkedin:"https://www.linkedin.com/in/wong-brandon1998/",github:"https://github.com/brandonnwongg"},mail:"wong_brandon@outlook.com"}},Kg={},w5=(n,e)=>n.unstable_is?n.unstable_is(e):e===n,R5=n=>"init"in n,dE=n=>!!n.write,D5=n=>"v"in n||"e"in n,Jx=n=>{if("e"in n)throw n.e;if((Kg?"production":void 0)!=="production"&&!("v"in n))throw new Error("[Bug] atom state is not initialized");return n.v},bb=new WeakMap,B5=n=>{var e;return Sb(n)&&!!((e=bb.get(n))!=null&&e[0])},qse=n=>{const e=bb.get(n);e!=null&&e[0]&&(e[0]=!1,e[1].forEach(t=>t()))},$8=(n,e)=>{let t=bb.get(n);if(!t){t=[!0,new Set],bb.set(n,t);const i=()=>{t[0]=!1};n.then(i,i)}t[1].add(e)},Sb=n=>typeof(n==null?void 0:n.then)=="function",Z8=(n,e,t)=>{t.p.has(n)||(t.p.add(n),e.then(()=>{t.p.delete(n)},()=>{t.p.delete(n)}))},pE=(n,e,t)=>{const i=t(n),r="v"in i,s=i.v;if(Sb(e))for(const a of i.d.keys())Z8(n,e,t(a));i.v=e,delete i.e,(!r||!Object.is(s,i.v))&&(++i.n,Sb(s)&&qse(s))},O5=(n,e,t)=>{var i;const r=new Set;for(const s of((i=t.get(n))==null?void 0:i.t)||[])t.has(s)&&r.add(s);for(const s of e.p)r.add(s);return r},Kse=()=>{const n=new Set,e=()=>{n.forEach(t=>t())};return e.add=t=>(n.add(t),()=>{n.delete(t)}),e},mE=()=>{const n={},e=new WeakMap,t=i=>{var r,s;(r=e.get(n))==null||r.forEach(a=>a(i)),(s=e.get(i))==null||s.forEach(a=>a())};return t.add=(i,r)=>{const s=i||n,a=(e.has(s)?e:e.set(s,new Set)).get(s);return a.add(r),()=>{a==null||a.delete(r),a.size||e.delete(s)}},t},Jse=n=>(n.c||(n.c=mE()),n.m||(n.m=mE()),n.u||(n.u=mE()),n.f||(n.f=Kse()),n),$se=Symbol(),Zse=(n=new WeakMap,e=new WeakMap,t=new WeakMap,i=new Set,r=new Set,s=new Set,a={},l=(v,...x)=>v.read(...x),u=(v,...x)=>v.write(...x),h=(v,x)=>{var b;return(b=v.unstable_onInit)==null?void 0:b.call(v,x)},m=(v,x)=>{var b;return(b=v.onMount)==null?void 0:b.call(v,x)},...g)=>{const v=g[0]||(I=>{if((Kg?"production":void 0)!=="production"&&!I)throw new Error("Atom is undefined or null");let z=n.get(I);return z||(z={d:new Map,p:new Set,n:0},n.set(I,z),h==null||h(I,U)),z}),x=g[1]||(()=>{const I=[],z=L=>{try{L()}catch(O){I.push(O)}};do{a.f&&z(a.f);const L=new Set,O=L.add.bind(L);i.forEach(G=>{var $;return($=e.get(G))==null?void 0:$.l.forEach(O)}),i.clear(),s.forEach(O),s.clear(),r.forEach(O),r.clear(),L.forEach(z),i.size&&b()}while(i.size||s.size||r.size);if(I.length)throw new AggregateError(I)}),b=g[2]||(()=>{const I=[],z=new WeakSet,L=new WeakSet,O=Array.from(i);for(;O.length;){const G=O[O.length-1],$=v(G);if(L.has(G)){O.pop();continue}if(z.has(G)){if(t.get(G)===$.n)I.push([G,$]);else if((Kg?"production":void 0)!=="production"&&t.has(G))throw new Error("[Bug] invalidated atom exists");L.add(G),O.pop();continue}z.add(G);for(const Q of O5(G,$,e))z.has(Q)||O.push(Q)}for(let G=I.length-1;G>=0;--G){const[$,Q]=I[G];let ce=!1;for(const fe of Q.d.keys())if(fe!==$&&i.has(fe)){ce=!0;break}ce&&(M($),C($)),t.delete($)}}),M=g[3]||(I=>{var z;const L=v(I);if(D5(L)&&(e.has(I)&&t.get(I)!==L.n||Array.from(L.d).every(([K,ee])=>M(K).n===ee)))return L;L.d.clear();let O=!0;const G=()=>{e.has(I)&&(C(I),b(),x())},$=K=>{var ee;if(w5(I,K)){const W=v(K);if(!D5(W))if(R5(K))pE(K,K.init,v);else throw new Error("no atom init");return Jx(W)}const me=M(K);try{return Jx(me)}finally{L.d.set(K,me.n),B5(L.v)&&Z8(I,L.v,me),(ee=e.get(K))==null||ee.t.add(I),O||G()}};let Q,ce;const fe={get signal(){return Q||(Q=new AbortController),Q.signal},get setSelf(){return(Kg?"production":void 0)!=="production"&&!dE(I)&&console.warn("setSelf function cannot be used with read-only atom"),!ce&&dE(I)&&(ce=(...K)=>{if((Kg?"production":void 0)!=="production"&&O&&console.warn("setSelf function cannot be called in sync"),!O)try{return S(I,...K)}finally{b(),x()}}),ce}},k=L.n;try{const K=l(I,$,fe);return pE(I,K,v),Sb(K)&&($8(K,()=>Q==null?void 0:Q.abort()),K.then(G,G)),L}catch(K){return delete L.v,L.e=K,++L.n,L}finally{O=!1,k!==L.n&&t.get(I)===k&&(t.set(I,L.n),i.add(I),(z=a.c)==null||z.call(a,I))}}),A=g[4]||(I=>{const z=[I];for(;z.length;){const L=z.pop(),O=v(L);for(const G of O5(L,O,e)){const $=v(G);t.set(G,$.n),z.push(G)}}}),S=g[5]||((I,...z)=>{let L=!0;const O=$=>Jx(M($)),G=($,...Q)=>{var ce;const fe=v($);try{if(w5(I,$)){if(!R5($))throw new Error("atom not writable");const k=fe.n,K=Q[0];pE($,K,v),C($),k!==fe.n&&(i.add($),(ce=a.c)==null||ce.call(a,$),A($));return}else return S($,...Q)}finally{L||(b(),x())}};try{return u(I,O,G,...z)}finally{L=!1}}),C=g[6]||(I=>{var z;const L=v(I),O=e.get(I);if(O&&!B5(L.v)){for(const[G,$]of L.d)if(!O.d.has(G)){const Q=v(G);R(G).t.add(I),O.d.add(G),$!==Q.n&&(i.add(G),(z=a.c)==null||z.call(a,G),A(G))}for(const G of O.d||[])if(!L.d.has(G)){O.d.delete(G);const $=B(G);$==null||$.t.delete(I)}}}),R=g[7]||(I=>{var z;const L=v(I);let O=e.get(I);if(!O){M(I);for(const G of L.d.keys())R(G).t.add(I);if(O={l:new Set,d:new Set(L.d.keys()),t:new Set},e.set(I,O),(z=a.m)==null||z.call(a,I),dE(I)){const G=()=>{let $=!0;const Q=(...ce)=>{try{return S(I,...ce)}finally{$||(b(),x())}};try{const ce=m(I,Q);ce&&(O.u=()=>{$=!0;try{ce()}finally{$=!1}})}finally{$=!1}};r.add(G)}}return O}),B=g[8]||(I=>{var z;const L=v(I);let O=e.get(I);if(O&&!O.l.size&&!Array.from(O.t).some(G=>{var $;return($=e.get(G))==null?void 0:$.d.has(I)})){O.u&&s.add(O.u),O=void 0,e.delete(I),(z=a.u)==null||z.call(a,I);for(const G of L.d.keys()){const $=B(G);$==null||$.t.delete(I)}return}return O}),N=[n,e,t,i,r,s,a,l,u,h,m,v,x,b,M,A,S,C,R,B],U={get:I=>Jx(M(I)),set:(I,...z)=>{try{return S(I,...z)}finally{b(),x()}},sub:(I,z)=>{const O=R(I).l;return O.add(z),x(),()=>{O.delete(z),B(I),x()}}};return Object.defineProperty(U,$se,{value:N}),U},Q8=Zse,Qse=Jse,P5=$8,z3={};let eae=0;function tae(n,e){const t=`atom${++eae}`,i={toString(){return(z3?"production":void 0)!=="production"&&this.debugLabel?t+":"+this.debugLabel:t}};return typeof n=="function"?i.read=n:(i.init=n,i.read=nae,i.write=iae),i}function nae(n){return n(this)}function iae(n,e,t){return e(this,typeof t=="function"?t(n(this)):t)}const rae=()=>{let n=0;const e=Qse({}),t=new WeakMap,i=new WeakMap,r=Q8(t,i,void 0,void 0,void 0,void 0,e,void 0,(l,u,h,...m)=>n?h(l,...m):l.write(u,h,...m)),s=new Set;return e.m.add(void 0,l=>{s.add(l);const u=t.get(l);u.m=i.get(l)}),e.u.add(void 0,l=>{s.delete(l);const u=t.get(l);delete u.m}),Object.assign(r,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),t),dev4_get_mounted_atoms:()=>s,dev4_restore_atoms:l=>{const u={read:()=>null,write:(h,m)=>{++n;try{for(const[g,v]of l)"init"in g&&m(g,v)}finally{--n}}};r.set(u)}})};function sae(){return(z3?"production":void 0)!=="production"?rae():Q8()}let Gg;function aae(){return Gg||(Gg=sae(),(z3?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Gg),globalThis.__JOTAI_DEFAULT_STORE__!==Gg&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Gg}const oae={},lae=F.createContext(void 0);function eL(n){return F.useContext(lae)||aae()}const LM=n=>typeof(n==null?void 0:n.then)=="function",NM=n=>{n.status||(n.status="pending",n.then(e=>{n.status="fulfilled",n.value=e},e=>{n.status="rejected",n.reason=e}))},cae=oe.use||(n=>{if(n.status==="pending")throw n;if(n.status==="fulfilled")return n.value;throw n.status==="rejected"?n.reason:(NM(n),n)}),gE=new WeakMap,U5=(n,e)=>{let t=gE.get(n);return t||(t=new Promise((i,r)=>{let s=n;const a=h=>m=>{s===h&&i(m)},l=h=>m=>{s===h&&r(m)},u=()=>{try{const h=e();LM(h)?(gE.set(h,t),s=h,h.then(a(h),l(h)),P5(h,u)):i(h)}catch(h){r(h)}};n.then(a(n),l(n)),P5(n,u)}),gE.set(n,t)),t};function uae(n,e){const{delay:t,unstable_promiseStatus:i=!oe.use}={},r=eL(),[[s,a,l],u]=F.useReducer(m=>{const g=r.get(n);return Object.is(m[0],g)&&m[1]===r&&m[2]===n?m:[g,r,n]},void 0,()=>[r.get(n),r,n]);let h=s;if((a!==r||l!==n)&&(u(),h=r.get(n)),F.useEffect(()=>{const m=r.sub(n,()=>{if(i)try{const g=r.get(n);LM(g)&&NM(U5(g,()=>r.get(n)))}catch{}if(typeof t=="number"){setTimeout(u,t);return}u()});return u(),m},[r,n,t,i]),F.useDebugValue(h),LM(h)){const m=U5(h,()=>r.get(n));return i&&NM(m),cae(m)}return h}function fae(n,e){const t=eL();return F.useCallback((...r)=>{if((oae?"production":void 0)!=="production"&&!("write"in n))throw new Error("not writable atom");return t.set(n,...r)},[t,n])}function tL(n,e){return[uae(n),fae(n)]}const hae=[{label:"Programming Languages",key:"programmingLanguages"},{label:"Technologies",key:"tech"},{label:"Frameworks & Libraries",key:"frameworksAndLibraries"},{label:"Languages",key:"languages"}],nL=tae(Hs.AcademicProjects[0]),dae=()=>{const[n,e]=F.useState(!1),t=iy(),[i,r]=tL(nL);return wr(()=>{e(t.offset>0)}),re.jsx("div",{className:"interface",children:re.jsxs("div",{className:"sections",children:[re.jsx("section",{className:"section section--right",children:re.jsxs("div",{children:[re.jsxs(oo.div,{className:"home",initial:{opacity:0},whileInView:{opacity:1},transition:{duration:1,delay:2},children:[re.jsxs("div",{className:"contact__socials",children:[re.jsx("a",{href:Hs.Contact.socials.linkedin,target:"_blank",children:re.jsx("img",{className:"contact__socials__icon",src:"images/linkedin.png",alt:"linkedin"})}),re.jsx("a",{href:Hs.Contact.socials.github,target:"_blank",children:re.jsx("img",{className:"contact__socials__icon",src:"images/github.png",alt:"git"})}),re.jsx("a",{href:`mailto:${Hs.Contact.mail}`,target:"_blank",children:re.jsx("img",{className:"contact__socials__icon",src:"images/email.png",alt:"email"})})]}),Object.entries(Hs.Home).map(([s,a])=>re.jsxs("div",{className:"home-info-line",children:[re.jsxs("span",{className:"home-label",children:[s,":"]}),re.jsx("span",{className:"home-value",children:a})]},s))]}),re.jsx(oo.div,{className:"scroll-down",initial:{opacity:0},animate:{opacity:n?0:1},children:re.jsx(oo.div,{className:"scroll-down__wheel",initial:{translateY:0},animate:{translateY:4},transition:{duration:.4,repeatDelay:.5,repeatType:"reverse",repeat:1/0}})})]})}),re.jsx("section",{className:"section section--right",children:re.jsx(oo.div,{className:"skills",whileInView:"visible",initial:"hidden",viewport:{amount:.1,once:!1},variants:{hidden:{},visible:{transition:{staggerChildren:.6,staggerDirection:-1}}},children:hae.map(s=>{var a,l;return re.jsxs(oo.div,{className:"skill-category",variants:{hidden:{opacity:0},visible:{opacity:1}},children:[re.jsx("h2",{className:"category",children:s.label}),re.jsx("div",{className:"skill-list",children:(l=(a=Hs.Skills)==null?void 0:a[s.key])==null?void 0:l.map((u,h)=>re.jsx(oo.div,{className:"skill-item",variants:{hidden:{opacity:0},visible:{opacity:1}},children:re.jsxs("div",{className:"skill-label",children:[u.icon&&re.jsx("i",{className:u.icon,style:{fontSize:"25px",marginTop:"0.3rem",marginLeft:"0.5rem"}}),re.jsx("h4",{className:"skill_label_name",children:u.name}),re.jsx("div",{className:"skill_label_level",children:re.jsx(oo.div,{className:"skill_level_bar",variants:{hidden:{width:0},visible:{width:`${u.level}%`}}})})]})},u.name))})]},s.key)})})}),re.jsx("section",{className:"section section--left",children:re.jsx(oo.div,{className:"academics",whileInView:"visible",initial:{opacity:0},variants:{visible:{opacity:1}},children:Hs.AcademicProjects.map((s,a)=>re.jsx(oo.div,{onMouseEnter:()=>r(s),className:"academic-project",initial:{opacity:0},variants:{visible:{opacity:1}},transition:{duration:1,delay:a*.5},children:re.jsxs("a",{href:s.link,target:"_blank",children:[re.jsx("img",{className:"academic-project-image",src:s.image,alt:s.title}),re.jsxs("div",{className:"academic-project-details",children:[re.jsxs("h3",{className:"academic-project-title",children:["-",s.title,"-"]}),re.jsx("p",{className:"academic-project-description",children:s.description})]})]})},s.title))})}),re.jsx("section",{className:"section section--right",children:re.jsx(oo.div,{className:"personal",whileInView:"visible",initial:{opacity:0},variants:{visible:{opacity:1}},children:Hs.PersonalProjects.map((s,a)=>re.jsx(oo.div,{className:"personal-project",initial:{opacity:0},variants:{visible:{opacity:1}},transition:{duration:1,delay:a*.5},children:re.jsx("a",{href:s.pref,target:"_blank",children:re.jsxs("div",{className:"personal-project-details",children:[re.jsxs("h3",{className:"personal-project-title",children:["-",s.ptitle,"-"]}),re.jsx("p",{className:"personal-project-description",children:s.pdescription}),re.jsx("p",{className:"personal-project-link",children:s.plink})]})})},s.ptitle))})}),re.jsx("section",{className:"section section--left",children:re.jsx(oo.div,{className:"contact",whileInView:"visible",initial:{opacity:0},variants:{visible:{opacity:1}}})})]})})};function pae(n){var g;const{nodes:e,materials:t}=Na("/reactportfolio/models/TV.glb"),[i]=tL(nL),r=R0(i.image),s=F.useRef(null),[a,l]=F.useState(null),u=(g=i.clip)==null?void 0:g.endsWith(".mp4");F.useEffect(()=>{let v,x=!0;return u?(v=document.createElement("video"),v.src=i.clip,v.loop=!0,v.muted=!0,v.playsInline=!0,v.autoplay=!0,v.addEventListener("canplay",()=>{if(!x)return;v.play();const b=new rT(v);b.center.set(.5,.5),b.rotation=Math.PI/2,b.repeat.x=-1,l(b)}),s.current=v):r&&(r.center.set(.5,.5),r.rotation=Math.PI/2,r.repeat.x=-1,l(r)),()=>{x=!1,v&&(v.pause(),v.src="",v.load())}},[i.clip,i.image,u,r]);const h=F.useRef(),m=F.useRef();return wr(()=>{h.current&&(h.current.emissiveIntensity=Math.random()>.9?2.5:1.2),m.current&&(m.current.emissiveIntensity=Math.random()>.8?2:1)}),re.jsxs("group",{...n,dispose:null,children:[re.jsxs("group",{name:"Plane",position:[2.157,.911,-3.016],rotation:[Math.PI/2,0,-Math.PI/2],scale:[.283,.307,.283],children:[re.jsx("mesh",{name:"Plane002",geometry:e.Plane002.geometry,children:re.jsx("meshStandardMaterial",{ref:h,emissive:"#39ff14",emissiveIntensity:1.5,metalness:.3,color:"black",opacity:1})}),re.jsx("mesh",{name:"Plane002_1",geometry:e.Plane002_1.geometry,material:t["Material.005"]})]}),re.jsxs("group",{name:"Plane001",position:[2.157,.911,-2.196],rotation:[Math.PI/2,0,-Math.PI/2],scale:[.283,.307,.283],children:[re.jsx("mesh",{name:"Plane003",geometry:e.Plane003.geometry,children:re.jsx("meshStandardMaterial",{ref:m,emissive:"#ff2400",emissiveIntensity:1.5,metalness:.3,color:"black",opacity:1})}),re.jsx("mesh",{name:"Plane003_1",geometry:e.Plane003_1.geometry,material:t["Material.005"]})]}),re.jsxs("group",{name:"Screen",position:[2.157,4.078,.122],rotation:[0,0,-Math.PI/2],scale:[3.118,1.961,3.399],children:[a&&re.jsx("mesh",{name:"Plane_1",geometry:e.Plane_1.geometry,children:re.jsx("meshBasicMaterial",{map:a})}),re.jsx("mesh",{name:"Plane_2",geometry:e.Plane_2.geometry,material:t["Material.005"]})]}),re.jsx("mesh",{name:"Legs",geometry:e.Legs.geometry,material:t["Material.006"],position:[1.246,-.14,3.157]}),re.jsxs("group",{name:"Cube001",position:[0,3.968,.037],scale:[1.918,3.63,4.151],children:[re.jsx("mesh",{name:"Cube002",geometry:e.Cube002.geometry,material:t["Material.001"]}),re.jsx("mesh",{name:"Cube002_1",geometry:e.Cube002_1.geometry,material:t["Material.003"]})]})]})}Hs.AcademicProjects.forEach(n=>{R0.preload(n.image)});Hs.AcademicProjects.forEach(n=>{R0.preload(n.clip)});Na.preload("/reactportfolio/models/TV.glb");function mae(n){const{nodes:e,materials:t}=Na("/reactportfolio//models/Laptop.glb"),i=R0("images/personal.png");return re.jsx("group",{...n,dispose:null,children:re.jsxs(oS,{floatIntensity:1,speed:2,rotationIntensity:0,floatingRange:[0,.2],children:[re.jsxs("group",{name:"Cube",position:[0,-.127,.164],scale:[1.387,.053,.939],children:[re.jsx("mesh",{name:"Cube001_1",geometry:e.Cube001_1.geometry,material:t["Material.003"]}),re.jsx("mesh",{name:"Cube001_2",geometry:e.Cube001_2.geometry,material:t["Material.004"]})]}),re.jsxs("group",{name:"Cube001",position:[0,.893,-.712],scale:[1.389,.986,.066],children:[re.jsx("mesh",{name:"Cube002_1",geometry:e.Cube002_1.geometry,material:t["Material.003"]}),re.jsx("mesh",{name:"Cube002_2",geometry:e.Cube002_2.geometry,material:t["Material.004"]})]}),re.jsxs("group",{name:"Cube002",position:[-.019,-.096,0],scale:[1.042,.04,.512],children:[re.jsx("mesh",{name:"Cube003",geometry:e.Cube003.geometry,material:t["Material.003"]}),re.jsx("mesh",{name:"Cube003_1",geometry:e.Cube003_1.geometry,material:t["Material.004"]})]}),re.jsxs("group",{name:"Plane",position:[0,.888,-.631],rotation:[Math.PI/2,0,0],scale:[1.073,1,.726],children:[re.jsx("mesh",{name:"Plane_1",geometry:e.Plane_1.geometry,children:re.jsx("meshStandardMaterial",{map:i})}),re.jsx("mesh",{name:"Plane_2",geometry:e.Plane_2.geometry,material:t["Material.002"]})]})]})})}Na.preload("/reactportfolio//models/Laptop.glb");R0.preload("images/personal.png");const Vg=15,gae=()=>{const[n,e]=F.useState(Hs.sections[0]),t=F.useRef(),i=iy(),{camera:r}=Ar(),s={delay:.5,duration:2,ease:[.22,1,.36,1]},a=qx(0),l=qx(0),u=qx(5),h=qx(0);F.useEffect(()=>{n==="Skills"?(of(a,-1,{duration:4,ease:[.22,1,.36,1]}),of(u,3,{duration:4,ease:[.22,1,.36,1]}),of(h,1.5,{duration:4,ease:[.22,1,.36,1]}),of(l,2,{duration:4,ease:[.22,1,.36,1]})):(of(a,0,{duration:4,ease:[.22,1,.36,1]}),of(h,.5,{duration:4,ease:[.22,1,.36,1]}),of(u,5,{duration:4,ease:[.22,1,.36,1]}),of(l,0,{duration:4,ease:[.22,1,.36,1]}))},[n]),F.useEffect(()=>{const g=()=>{const v=Hs.sections.indexOf(window.location.hash.replace("#",""));v!==-1&&i.el.scrollTo(0,v/(Hs.sections.length-1)*(i.el.scrollHeight-i.el.clientHeight))};return window.addEventListener("hashchange",g),g(),()=>window.removeEventListener("hashchange",g)},[]);const m=F.useRef(0);return wr(()=>{const g=Math.round(i.offset*(i.pages-1));g!==m.current&&(m.current=g,e(Hs.sections[g])),t.current.position.z=-i.offset*Vg*(i.pages-1),r.position.set(a.get(),h.get(),u.get()),r.lookAt(l.get(),0,-2)}),re.jsxs(re.Fragment,{children:[re.jsx(zY,{}),re.jsxs(ff.group,{ref:t,animate:n,children:[re.jsx(BY,{enableZoom:!1,enablePan:!1,minPolarAngle:Math.PI/2,maxPolarAngle:Math.PI/2,minAzimuthAngle:-.5,maxAzimuthAngle:.5,rotateSpeed:.5}),re.jsx(Wse,{position:[0,-.8,0]}),re.jsx(PY,{position:[0,.1,0],sectionSize:1.5,sectionColor:"#4B713F",sectionThickness:5,cellSize:1,cellThickness:.6,infiniteGrid:!0,fadeDistance:200,fadeStrength:10}),re.jsx(Xse,{position:[0,0,15],rotation:[0,Math.PI,0]}),re.jsxs(ff.group,{"position-y":-3.5,transition:s,variants:{Home:{y:0}},children:[re.jsx(Yse,{"rotation-y":-.75,position:[-3.5,.3,-.3],scale:.7}),re.jsx(sp,{"rotation-y":.75,"position-z":.5,"position-y":.5,children:"HOME"})]}),re.jsxs(ff.group,{"position-z":Vg,"position-x":1.5,"position-y":-3.5,transition:s,variants:{Skills:{y:0}},children:[re.jsx(jse,{}),re.jsx(sp,{"position-x":.5,"rotation-y":-.25,children:"SKILLS"})]}),re.jsxs(ff.group,{scale:.5,"position-z":2*Vg,"position-y":-7,transition:s,variants:{AcademicProjects:{y:0}},children:[re.jsx(pae,{scale:.8,position:[3,.45,0],rotation:[0,-2.1,0]}),re.jsxs("group",{position:[5,.5,5],children:[re.jsx(sp,{"position-y":1,children:"ACADEMIC"}),re.jsx(sp,{children:"PROJECTS"})]})]}),re.jsxs(ff.group,{scale:.5,"position-z":3*Vg,"position-y":-3.5,transition:s,variants:{PersonalProjects:{y:0}},children:[re.jsx(mae,{rotation:[0,.5,0],scale:1.5,position:[-3,2,0]}),re.jsxs("group",{"position-x":2,children:[re.jsx(sp,{"position-y":1,children:"PERSONAL"}),re.jsx(sp,{children:"PROJECTS"})]})]}),re.jsx(ff.group,{scale:.8,"position-z":4*Vg,"position-y":-3.5,transition:s,variants:{Contact:{y:0}}})]})]})};function vae({children:n}){const e=F.useRef(),{mouse:t}=Ar();return wr(()=>{if(!e.current)return;const i=t.x*.1;e.current.rotation.y=ms.lerp(e.current.rotation.y,i,.05)}),re.jsx("group",{ref:e,children:n})}/**
 * postprocessing v6.37.3 build Sun Apr 27 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rüschen
 * @license Zlib
 */var vE=1/1e3,yae=1e3,xae=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*vE}get fixedDelta(){return this._fixedDelta*vE}set fixedDelta(n){this._fixedDelta=n*yae}get elapsed(){return this._elapsed*vE}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},_ae=(()=>{const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),t=new Gt;return t.setAttribute("position",new mn(n,3)),t.setAttribute("uv",new mn(e,2)),t})(),da=class IM{static get fullscreenGeometry(){return _ae}constructor(e="Pass",t=new Tp,i=new Np){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Ai(IM.fullscreenGeometry,e),t.frustumCulled=!1,this.scene===null&&(this.scene=new Tp),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Rf){}render(e,t,i,r,s){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof Ni||t instanceof er||t instanceof kn||t instanceof IM)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},bae=class extends da{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,r){const s=n.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},Sae=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,iL="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",rL=class extends tr{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Wt(null),opacity:new Wt(1)},blending:$r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Sae,vertexShader:iL})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},Aae=class extends da{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new rL,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new Ni(1,1,{minFilter:Jn,magFilter:Jn,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,r){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==Mr?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n!==null&&n.outputColorSpace===Fn&&(this.renderTarget.texture.colorSpace=Fn))}},L5=new Ze,sL=class extends da{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,r){const s=this.overrideClearColor,a=this.overrideClearAlpha,l=n.getClearAlpha(),u=s!==null,h=a>=0;u?(n.getClearColor(L5),n.setClearColor(s,h?a:l)):h&&n.setClearAlpha(a),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),u?n.setClearColor(L5,l):h&&n.setClearAlpha(l)}},Eae=class extends da{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new sL(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,r){const s=n.getContext(),a=n.state.buffers,l=this.scene,u=this.camera,h=this.clearPass,m=this.inverted?0:1,g=1-m;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.stencil.setFunc(s.ALWAYS,m,4294967295),a.stencil.setClear(g),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?h.render(n,null):(h.render(n,e),h.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(l,u)):(n.setRenderTarget(e),n.render(l,u),n.setRenderTarget(t),n.render(l,u)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(s.EQUAL,1,4294967295),a.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),a.stencil.setLocked(!0)}},Mae=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:i=0,frameBufferType:r}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,r,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new Aae,this.depthTexture=null,this.passes=[],this.timer=new xae,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const e=n.getSize(new Pe),t=n.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===Mr&&n.outputColorSpace===Fn&&(this.inputBuffer.texture.colorSpace=Fn,this.outputBuffer.texture.colorSpace=Fn,this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(e.width,e.height);for(const r of this.passes)r.initialize(n,t,i)}}replaceRenderer(n,e=!0){const t=this.renderer,i=t.domElement.parentNode;return this.setRenderer(n),e&&i!==null&&(i.removeChild(t.domElement),i.appendChild(n.domElement)),t}createDepthTexture(){const n=this.depthTexture=new zp;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=g0,n.type=p0):n.type=ic,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,i){const r=this.renderer,s=r===null?new Pe:r.getDrawingBufferSize(new Pe),a={minFilter:Jn,magFilter:Jn,stencilBuffer:e,depthBuffer:n,type:t},l=new Ni(s.width,s.height,a);return i>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=i),t===Mr&&r!==null&&r.outputColorSpace===Fn&&(l.texture.colorSpace=Fn),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(n){for(const e of this.passes)e.mainScene=n}setMainCamera(n){for(const e of this.passes)e.mainCamera=n}addPass(n,e){const t=this.passes,i=this.renderer,r=i.getDrawingBufferSize(new Pe),s=i.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(n.setRenderer(i),n.setSize(r.width,r.height),n.initialize(i,s,a),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(n of t)n.setDepthTexture(l)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const s=(l,u)=>l||u.needsDepthTexture;e.reduce(s,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let i=this.inputBuffer,r=this.outputBuffer,s=!1,a,l,u;n===void 0&&(this.timer.update(),n=this.timer.getDelta());for(const h of this.passes)h.enabled&&(h.render(e,i,r,n,s),h.needsSwap&&(s&&(t.renderToScreen=h.renderToScreen,a=e.getContext(),l=e.state.buffers.stencil,l.setFunc(a.NOTEQUAL,1,4294967295),t.render(e,i,r,n,s),l.setFunc(a.EQUAL,1,4294967295)),u=i,i=r,r=u),h instanceof Eae?s=!0:h instanceof bae&&(s=!1))}setSize(n,e,t){const i=this.renderer,r=i.getSize(new Pe);(n===void 0||e===void 0)&&(n=r.width,e=r.height),(r.width!==n||r.height!==e)&&i.setSize(n,e,t);const s=i.getDrawingBufferSize(new Pe);this.inputBuffer.setSize(s.width,s.height),this.outputBuffer.setSize(s.width,s.height);for(const a of this.passes)a.setSize(s.width,s.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),da.fullscreenGeometry.dispose()}},f0={NONE:0,DEPTH:1,CONVOLUTION:2},In={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Tae=class{constructor(){this.shaderParts=new Map([[In.FRAGMENT_HEAD,null],[In.FRAGMENT_MAIN_UV,null],[In.FRAGMENT_MAIN_IMAGE,null],[In.VERTEX_HEAD,null],[In.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=f0.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=rc}},yE=!1,N5=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case ps:t=this.materialsFlatShadedDoubleSide;break;case ur:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case ps:t=this.materialsDoubleSide;break;case ur:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof tr))return n.clone();const e=n.uniforms,t=new Map;for(const r in e){const s=e[r].value;s.isRenderTargetTexture&&(e[r].value=null,t.set(r,s))}const i=n.clone();for(const r of t)e[r[0]].value=r[1],i.uniforms[r[0]].value=r[1];return i}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=ll;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=ur,i}),this.materialsDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=ps,i}),this.materialsFlatShaded=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=ur,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=ps,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,yE){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const s of r)s[0].material=s[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=r}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return yE}static set workaroundEnabled(n){yE=n}},lf=-1,ys=class extends La{constructor(n,e=lf,t=lf,i=1){super(),this.resizable=n,this.baseSize=new Pe(1,1),this.preferredSize=new Pe(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new Pe,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==lf?t.width=e.width:e.height!==lf?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*i),e.height!==lf?t.height=e.height:e.width!==lf?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(lf),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return lf}},Mn={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},Cae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",wae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",Rae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",Dae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Bae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",Oae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",Pae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Uae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",Lae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",Nae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",Iae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",Fae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",zae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",Hae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",Gae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",Vae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",kae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",jae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",Xae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",Wae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Yae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",qae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",Kae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",Jae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",$ae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",Zae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",Qae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",eoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",toe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",noe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",ioe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",roe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",soe=new Map([[Mn.ADD,Cae],[Mn.ALPHA,wae],[Mn.AVERAGE,Rae],[Mn.COLOR,Dae],[Mn.COLOR_BURN,Bae],[Mn.COLOR_DODGE,Oae],[Mn.DARKEN,Pae],[Mn.DIFFERENCE,Uae],[Mn.DIVIDE,Lae],[Mn.DST,null],[Mn.EXCLUSION,Nae],[Mn.HARD_LIGHT,Iae],[Mn.HARD_MIX,Fae],[Mn.HUE,zae],[Mn.INVERT,Hae],[Mn.INVERT_RGB,Gae],[Mn.LIGHTEN,Vae],[Mn.LINEAR_BURN,kae],[Mn.LINEAR_DODGE,jae],[Mn.LINEAR_LIGHT,Xae],[Mn.LUMINOSITY,Wae],[Mn.MULTIPLY,Yae],[Mn.NEGATION,qae],[Mn.NORMAL,Kae],[Mn.OVERLAY,Jae],[Mn.PIN_LIGHT,$ae],[Mn.REFLECT,Zae],[Mn.SATURATION,Qae],[Mn.SCREEN,eoe],[Mn.SOFT_LIGHT,toe],[Mn.SRC,noe],[Mn.SUBTRACT,ioe],[Mn.VIVID_LIGHT,roe]]),aoe=class extends La{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new Wt(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return soe.get(this.blendFunction)}},FM=class extends La{constructor(n,e,{attributes:t=f0.NONE,blendFunction:i=Mn.NORMAL,defines:r=new Map,uniforms:s=new Map,extensions:a=null,vertexShader:l=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=l,this.defines=r,this.uniforms=s,this.extensions=a,this.blendMode=new aoe(i),this.blendMode.addEventListener("change",u=>this.setChanged()),this._inputColorSpace=rc,this._outputColorSpace=il}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=Rf){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Ni||e instanceof er||e instanceof kn||e instanceof da)&&this[n].dispose()}}},H3={MEDIUM:2,LARGE:3},ooe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,loe="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",coe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],uoe=class extends tr{constructor(n=new Kt){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Wt(null),texelSize:new Wt(new Kt),scale:new Wt(1),kernel:new Wt(0)},blending:$r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:ooe,vertexShader:loe}),this.setTexelSize(n.x,n.y),this.kernelSize=H3.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return coe[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},foe=class extends da{constructor({kernelSize:n=H3.MEDIUM,resolutionScale:e=.5,width:t=ys.AUTO_SIZE,height:i=ys.AUTO_SIZE,resolutionX:r=t,resolutionY:s=i}={}){super("KawaseBlurPass"),this.renderTargetA=new Ni(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new ys(this,r,s,e);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new uoe,this._blurMaterial.kernelSize=n,this.copyMaterial=new rL}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.scene,a=this.camera,l=this.renderTargetA,u=this.renderTargetB,h=this.blurMaterial,m=h.kernelSequence;let g=e;this.fullscreenMaterial=h;for(let v=0,x=m.length;v<x;++v){const b=(v&1)===0?l:u;h.kernel=m[v],h.inputBuffer=g.texture,n.setRenderTarget(b),n.render(s,a),g=b}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=g.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(s,a)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==Mr?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n!==null&&n.outputColorSpace===Fn&&(this.renderTargetA.texture.colorSpace=Fn,this.renderTargetB.texture.colorSpace=Fn))}static get AUTO_SIZE(){return ys.AUTO_SIZE}},hoe=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,doe=class extends tr{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:wf.replace(/\D+/g,"")},uniforms:{inputBuffer:new Wt(null),threshold:new Wt(0),smoothing:new Wt(1),range:new Wt(null)},blending:$r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:hoe,vertexShader:iL}),this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},poe=class extends da{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:i=1,width:r=ys.AUTO_SIZE,height:s=ys.AUTO_SIZE,resolutionX:a=r,resolutionY:l=s}={}){super("LuminancePass"),this.fullscreenMaterial=new doe(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new Ni(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const u=this.resolution=new ys(this,a,l,i);u.addEventListener("change",h=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,i,r){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==Mr&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},moe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,goe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",voe=class extends tr{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Wt(null),texelSize:new Wt(new Pe)},blending:$r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:moe,vertexShader:goe})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},yoe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,xoe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",_oe=class extends tr{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Wt(null),supportBuffer:new Wt(null),texelSize:new Wt(new Pe),radius:new Wt(.85)},blending:$r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:yoe,vertexShader:xoe})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},boe=class extends da{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Ni(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new voe,this.upsamplingMaterial=new _oe,this.resolution=new Pe}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const i=e.clone();i.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let t=1,i=n-1;t<i;++t){const r=e.clone();r.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(r)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,i,r){const{scene:s,camera:a}=this,{downsamplingMaterial:l,upsamplingMaterial:u}=this,{downsamplingMipmaps:h,upsamplingMipmaps:m}=this;let g=e;this.fullscreenMaterial=l;for(let v=0,x=h.length;v<x;++v){const b=h[v];l.setSize(g.width,g.height),l.inputBuffer=g.texture,n.setRenderTarget(b),n.render(s,a),g=b}this.fullscreenMaterial=u;for(let v=m.length-1;v>=0;--v){const x=m[v];u.setSize(g.width,g.height),u.inputBuffer=g.texture,u.supportBuffer=h[v].texture,n.setRenderTarget(x),n.render(s,a),g=x}}setSize(n,e){const t=this.resolution;t.set(n,e);let i=t.width,r=t.height;for(let s=0,a=this.downsamplingMipmaps.length;s<a;++s)i=Math.round(i*.5),r=Math.round(r*.5),this.downsamplingMipmaps[s].setSize(i,r),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(i,r)}initialize(n,e,t){if(t!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const r of i)r.texture.type=t;if(t!==Mr)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(n!==null&&n.outputColorSpace===Fn)for(const r of i)r.texture.colorSpace=Fn}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},Soe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,Aoe=class extends FM{constructor({blendFunction:n=Mn.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:i=!1,intensity:r=1,radius:s=.85,levels:a=8,kernelSize:l=H3.LARGE,resolutionScale:u=.5,width:h=ys.AUTO_SIZE,height:m=ys.AUTO_SIZE,resolutionX:g=h,resolutionY:v=m}={}){super("BloomEffect",Soe,{blendFunction:n,uniforms:new Map([["map",new Wt(null)],["intensity",new Wt(r)]])}),this.renderTarget=new Ni(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new foe({kernelSize:l}),this.luminancePass=new poe({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new boe,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const x=this.resolution=new ys(this,g,v,u);x.addEventListener("change",b=>this.setSize(x.baseWidth,x.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const i=this.renderTarget,r=this.luminancePass;r.enabled?(r.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,r.renderTarget):this.blurPass.render(n,r.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,n!==null&&n.outputColorSpace===Fn&&(this.renderTarget.texture.colorSpace=Fn))}},aL=class extends da{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new sL,this.overrideMaterialManager=t===null?null:new N5(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new N5(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,r){const s=this.scene,a=this.camera,l=this.selection,u=a.layers.mask,h=s.background,m=n.shadowMap.autoUpdate,g=this.renderToScreen?null:e;l!==null&&a.layers.set(l.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(g),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,s,a):n.render(s,a),a.layers.mask=u,s.background=h,n.shadowMap.autoUpdate=m}},Eoe=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,Moe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",Toe=class extends tr{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Wt(null),normalBuffer:new Wt(null),texelSize:new Wt(new Pe)},blending:$r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Eoe,vertexShader:Moe})}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Rf){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},Coe=class extends da{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=ys.AUTO_SIZE,height:i=ys.AUTO_SIZE,resolutionX:r=t,resolutionY:s=i}={}){super("DepthDownsamplingPass");const a=new Toe;a.normalBuffer=n,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Ni(1,1,{minFilter:Wi,magFilter:Wi,depthBuffer:!1,type:ks}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const l=this.resolution=new ys(this,r,s,e);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=Rf){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,i,r){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const i=n.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},woe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Roe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Doe=class extends tr{constructor(n,e,t,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:wf.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Wt(null),depthBuffer:new Wt(null),resolution:new Wt(new Pe),texelSize:new Wt(new Pe),cameraNear:new Wt(.3),cameraFar:new Wt(1e3),aspect:new Wt(1),time:new Wt(0)},blending:$r,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Rf){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){return this.fragmentShader=woe.replace(In.FRAGMENT_HEAD,n.get(In.FRAGMENT_HEAD)||"").replace(In.FRAGMENT_MAIN_UV,n.get(In.FRAGMENT_MAIN_UV)||"").replace(In.FRAGMENT_MAIN_IMAGE,n.get(In.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Roe.replace(In.VERTEX_HEAD,n.get(In.VERTEX_HEAD)||"").replace(In.VERTEX_MAIN_SUPPORT,n.get(In.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof pi?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return In}};function I5(n,e,t){for(const i of e){const r="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const a of t.entries())a[1]!==null&&t.set(a[0],a[1].replace(s,r))}}function Boe(n,e,t){let i=e.getFragmentShader(),r=e.getVertexShader();const s=i!==void 0&&/mainImage/.test(i),a=i!==void 0&&/mainUv/.test(i);if(t.attributes|=e.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(a&&(t.attributes&f0.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!s&&!a)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const l=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,u=t.shaderParts;let h=u.get(In.FRAGMENT_HEAD)||"",m=u.get(In.FRAGMENT_MAIN_UV)||"",g=u.get(In.FRAGMENT_MAIN_IMAGE)||"",v=u.get(In.VERTEX_HEAD)||"",x=u.get(In.VERTEX_MAIN_SUPPORT)||"";const b=new Set,M=new Set;if(a&&(m+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),r!==null&&/mainSupport/.test(r)){const C=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);x+=`	${n}MainSupport(`,x+=C?`vUv);
`:`);
`;for(const R of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const B of R[1].split(/\s*,\s*/))t.varyings.add(B),b.add(B),M.add(B);for(const R of r.matchAll(l))M.add(R[1])}for(const C of i.matchAll(l))M.add(C[1]);for(const C of e.defines.keys())M.add(C.replace(/\([\w\s,]*\)/g,""));for(const C of e.uniforms.keys())M.add(C);M.delete("while"),M.delete("for"),M.delete("if"),e.uniforms.forEach((C,R)=>t.uniforms.set(n+R.charAt(0).toUpperCase()+R.slice(1),C)),e.defines.forEach((C,R)=>t.defines.set(n+R.charAt(0).toUpperCase()+R.slice(1),C));const A=new Map([["fragment",i],["vertex",r]]);I5(n,M,t.defines),I5(n,M,A),i=A.get("fragment"),r=A.get("vertex");const S=e.blendMode;if(t.blendModes.set(S.blendFunction,S),s){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(g+=e.inputColorSpace===Fn?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==il?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const C=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;g+=`${n}MainImage(color0, UV, `,(t.attributes&f0.DEPTH)!==0&&C.test(i)&&(g+="depth, ",t.readDepth=!0),g+=`color1);
	`;const R=n+"BlendOpacity";t.uniforms.set(R,S.opacity),g+=`color0 = blend${S.blendFunction}(color0, color1, ${R});

	`,h+=`uniform float ${R};

`}if(h+=i+`
`,r!==null&&(v+=r+`
`),u.set(In.FRAGMENT_HEAD,h),u.set(In.FRAGMENT_MAIN_UV,m),u.set(In.FRAGMENT_MAIN_IMAGE,g),u.set(In.VERTEX_HEAD,v),u.set(In.VERTEX_MAIN_SUPPORT,x),e.extensions!==null)for(const C of e.extensions)t.extensions.add(C)}}var Ooe=class extends da{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new Doe(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new Tae;let e=0;for(const a of this.effects)if(a.blendMode.blendFunction===Mn.DST)n.attributes|=a.getAttributes()&f0.DEPTH;else{if((n.attributes&a.getAttributes()&f0.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${a.name})`);Boe("e"+e++,a,n)}let t=n.shaderParts.get(In.FRAGMENT_HEAD),i=n.shaderParts.get(In.FRAGMENT_MAIN_IMAGE),r=n.shaderParts.get(In.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const a of n.blendModes.values())t+=a.getShaderCode().replace(s,`blend${a.blendFunction}`)+`
`;(n.attributes&f0.DEPTH)!==0?(n.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===Fn&&(i+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(r=`vec2 transformedUv = vUv;
`+r,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(In.FRAGMENT_HEAD,t),n.shaderParts.set(In.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(In.FRAGMENT_MAIN_UV,r);for(const[a,l]of n.shaderParts)l!==null&&n.shaderParts.set(a,l.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=Rf){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,r){for(const s of this.effects)s.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==Mr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},Poe=class extends da{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:r=ys.AUTO_SIZE,height:s=ys.AUTO_SIZE,resolutionX:a=r,resolutionY:l=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new aL(n,e,new fT);const u=this.renderPass;u.ignoreBackground=!0,u.skipShadowMapUpdate=!0;const h=u.getClearPass();h.overrideClearColor=new Ze(7829503),h.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Ni(1,1,{minFilter:Wi,magFilter:Wi}),this.renderTarget.texture.name="NormalPass.Target");const m=this.resolution=new ys(this,a,l,i);m.addEventListener("change",g=>this.setSize(m.baseWidth,m.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}};function yv(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}new Pe;new Pe;function oL(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var lo=function n(e,t,i){var r=this;oL(this,n),yv(this,"dot2",function(s,a){return r.x*s+r.y*a}),yv(this,"dot3",function(s,a,l){return r.x*s+r.y*a+r.z*l}),this.x=e,this.y=t,this.z=i},Uoe=[new lo(1,1,0),new lo(-1,1,0),new lo(1,-1,0),new lo(-1,-1,0),new lo(1,0,1),new lo(-1,0,1),new lo(1,0,-1),new lo(-1,0,-1),new lo(0,1,1),new lo(0,-1,1),new lo(0,1,-1),new lo(0,-1,-1)],F5=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],z5=new Array(512),H5=new Array(512),Loe=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=F5[t]^e&255:i=F5[t]^e>>8&255,z5[t]=z5[t+256]=i,H5[t]=H5[t+256]=Uoe[i%12]}};Loe(0);function Noe(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function G5(n){var e=Noe(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var Ioe=function n(e){var t=this;oL(this,n),yv(this,"seed",0),yv(this,"init",function(i){t.seed=i,t.value=G5(i)}),yv(this,"value",G5(this.seed)),this.init(e)};new Ioe(Math.random());const Foe=F.createContext(null),V5=n=>(n.getAttributes()&2)===2,zoe=F.memo(F.forwardRef(({children:n,camera:e,scene:t,resolutionScale:i,enabled:r=!0,renderPriority:s=1,autoClear:a=!0,depthBuffer:l,enableNormalPass:u,stencilBuffer:h,multisampling:m=8,frameBufferType:g=tu},v)=>{const{gl:x,scene:b,camera:M,size:A}=Ar(),S=t||b,C=e||M,[R,B,N]=F.useMemo(()=>{const z=new Mae(x,{depthBuffer:l,stencilBuffer:h,multisampling:m,frameBufferType:g});z.addPass(new aL(S,C));let L=null,O=null;return u&&(O=new Poe(S,C),O.enabled=!1,z.addPass(O),i!==void 0&&(L=new Coe({normalBuffer:O.texture,resolutionScale:i}),L.enabled=!1,z.addPass(L))),[z,O,L]},[C,x,l,h,m,g,S,u,i]);F.useEffect(()=>R==null?void 0:R.setSize(A.width,A.height),[R,A]),wr((z,L)=>{if(r){const O=x.autoClear;x.autoClear=a,h&&!a&&x.clearStencil(),R.render(L),x.autoClear=O}},r?s:0);const U=F.useRef(null);F.useLayoutEffect(()=>{var O;const z=[],L=U.current.__r3f;if(L&&R){const G=L.children;for(let $=0;$<G.length;$++){const Q=G[$].object;if(Q instanceof FM){const ce=[Q];if(!V5(Q)){let k=null;for(;(k=(O=G[$+1])==null?void 0:O.object)instanceof FM&&!V5(k);)ce.push(k),$++}const fe=new Ooe(C,...ce);z.push(fe)}else Q instanceof da&&z.push(Q)}for(const $ of z)R==null||R.addPass($);B&&(B.enabled=!0),N&&(N.enabled=!0)}return()=>{for(const G of z)R==null||R.removePass(G);B&&(B.enabled=!1),N&&(N.enabled=!1)}},[R,n,C,B,N]),F.useEffect(()=>{const z=x.toneMapping;return x.toneMapping=al,()=>{x.toneMapping=z}},[x]);const I=F.useMemo(()=>({composer:R,normalPass:B,downSamplingPass:N,resolutionScale:i,camera:C,scene:S}),[R,B,N,i,C,S]);return F.useImperativeHandle(v,()=>R,[R]),re.jsx(Foe.Provider,{value:I,children:re.jsx("group",{ref:U,children:n})})}));let Hoe=0;const k5=new WeakMap,Goe=(n,e)=>function({blendFunction:t=e==null?void 0:e.blendFunction,opacity:i=e==null?void 0:e.opacity,...r}){let s=k5.get(n);if(!s){const u=`@react-three/postprocessing/${n.name}-${Hoe++}`;w0({[u]:n}),k5.set(n,s=u)}const a=Ar(u=>u.camera),l=oe.useMemo(()=>[...(e==null?void 0:e.args)??[],...r.args??[{...e,...r}]],[JSON.stringify(r)]);return re.jsx(s,{camera:a,"blendMode-blendFunction":t,"blendMode-opacity-value":i,...r,args:l})},Voe=Goe(Aoe,{blendFunction:0}),koe=()=>re.jsxs("div",{className:"menu",children:[re.jsx("h2",{className:"menu__logo",children:" BRANDON "}),re.jsxs("div",{className:"menu__buttons",children:[re.jsx("a",{className:"menu__button",href:"#Home",children:"HOME"}),re.jsx("a",{className:"menu__button",href:"#Skills",children:"SKILLS"}),re.jsx("a",{className:"menu__button",href:"#AcademicProjects",children:"ACADEMIC PROJECTS"}),re.jsx("a",{className:"menu__button",href:"#PersonalProjects",children:"PERSONAL PROJECTS"})]})]});function joe(){return re.jsxs(re.Fragment,{children:[re.jsxs(bj,{camera:{position:[0,.5,5],fov:50},children:[re.jsx(zoe,{children:re.jsx(Voe,{intensity:.2,kernelSize:3,luminanceThreshold:.1,luminanceSmoothing:.025,mipmapBlur:!0})}),re.jsx("color",{attach:"background",args:["#243407"]}),re.jsx("fog",{attach:"fog",args:["#d0d9e6",50,300]}),re.jsx("fogExp2",{attach:"fog",args:["#d0d9e6",.003]}),re.jsx("ambientLight",{intensity:6}),re.jsx(vae,{children:re.jsxs(jX,{pages:Hs.sections.length,damping:.1,maxSpeed:.2,children:[re.jsx(RB,{transition:{duration:1},children:re.jsx("group",{"position-y":-1,children:re.jsx(gae,{})})}),re.jsx(YX,{html:!0,children:re.jsx(RB,{transition:{duration:1},children:re.jsx(dae,{})})})]})})]}),re.jsx(koe,{})]})}X5.createRoot(document.getElementById("root")).render(re.jsx(F.StrictMode,{children:re.jsx(joe,{})}));
